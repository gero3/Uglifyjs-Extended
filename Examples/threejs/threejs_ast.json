["toplevel",[["var",[["THREE",["binary","||",["name","THREE"],["object",[["REVISION",["string","49"]]]]]]]],["if",["unary-prefix","!",["dot",["name","self"],"Int32Array"]],["block",[["stat",["assign",true,["dot",["name","self"],"Int32Array"],["name","Array"]]],["stat",["assign",true,["dot",["name","self"],"Float32Array"],["name","Array"]]]]],null],["stat",["call",["function",null,[],[["var",[["lastTime",["num",0]]]],["var",[["vendors",["array",[["string","ms"],["string","moz"],["string","webkit"],["string","o"]]]]]],["for",["var",[["x",["num",0]]]],["binary","&&",["binary","<",["name","x"],["dot",["name","vendors"],"length"]],["unary-prefix","!",["dot",["name","window"],"requestAnimationFrame"]]],["unary-prefix","++",["name","x"]],["block",[["stat",["assign",true,["dot",["name","window"],"requestAnimationFrame"],["sub",["name","window"],["binary","+",["sub",["name","vendors"],["name","x"]],["string","RequestAnimationFrame"]]]]],["stat",["assign",true,["dot",["name","window"],"cancelAnimationFrame"],["binary","||",["sub",["name","window"],["binary","+",["sub",["name","vendors"],["name","x"]],["string","CancelAnimationFrame"]]],["sub",["name","window"],["binary","+",["sub",["name","vendors"],["name","x"]],["string","CancelRequestAnimationFrame"]]]]]]]]],["if",["unary-prefix","!",["dot",["name","window"],"requestAnimationFrame"]],["block",[["stat",["assign",true,["dot",["name","window"],"requestAnimationFrame"],["function",null,["callback","element"],[["var",[["currTime",["call",["dot",["name","Date"],"now"],[]]],["timeToCall",["call",["dot",["name","Math"],"max"],[["num",0],["binary","-",["num",16],["binary","-",["name","currTime"],["name","lastTime"]]]]]]]],["var",[["id",["call",["dot",["name","window"],"setTimeout"],[["function",null,[],[["stat",["call",["name","callback"],[["binary","+",["name","currTime"],["name","timeToCall"]]]]]]],["name","timeToCall"]]]]]],["stat",["assign",true,["name","lastTime"],["binary","+",["name","currTime"],["name","timeToCall"]]]],["return",["name","id"]]]]]]]],null],["if",["unary-prefix","!",["dot",["name","window"],"cancelAnimationFrame"]],["block",[["stat",["assign",true,["dot",["name","window"],"cancelAnimationFrame"],["function",null,["id"],[["stat",["call",["name","clearTimeout"],[["name","id"]]]]]]]]]],null]]],[]]],["stat",["assign",true,["dot",["name","THREE"],"Clock"],["function",null,["autoStart"],[["stat",["assign",true,["dot",["name","this"],"autoStart"],["conditional",["binary","!==",["name","autoStart"],["name","undefined"]],["name","autoStart"],["name","true"]]]],["stat",["assign",true,["dot",["name","this"],"startTime"],["num",0]]],["stat",["assign",true,["dot",["name","this"],"oldTime"],["num",0]]],["stat",["assign",true,["dot",["name","this"],"elapsedTime"],["num",0]]],["stat",["assign",true,["dot",["name","this"],"running"],["name","false"]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"Clock"],"prototype"],"start"],["function",null,[],[["stat",["assign",true,["dot",["name","this"],"startTime"],["call",["dot",["name","Date"],"now"],[]]]],["stat",["assign",true,["dot",["name","this"],"oldTime"],["dot",["name","this"],"startTime"]]],["stat",["assign",true,["dot",["name","this"],"running"],["name","true"]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"Clock"],"prototype"],"stop"],["function",null,[],[["stat",["call",["dot",["name","this"],"getElapsedTime"],[]]],["stat",["assign",true,["dot",["name","this"],"running"],["name","false"]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"Clock"],"prototype"],"getElapsedTime"],["function",null,[],[["stat",["assign","+",["dot",["name","this"],"elapsedTime"],["call",["dot",["name","this"],"getDelta"],[]]]],["return",["dot",["name","this"],"elapsedTime"]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"Clock"],"prototype"],"getDelta"],["function",null,[],[["var",[["diff",["num",0]]]],["if",["binary","&&",["dot",["name","this"],"autoStart"],["unary-prefix","!",["dot",["name","this"],"running"]]],["block",[["stat",["call",["dot",["name","this"],"start"],[]]]]],null],["if",["dot",["name","this"],"running"],["block",[["var",[["newTime",["call",["dot",["name","Date"],"now"],[]]]]],["stat",["assign",true,["name","diff"],["binary","*",["num",0.001],["binary","-",["name","newTime"],["dot",["name","this"],"oldTime"]]]]],["stat",["assign",true,["dot",["name","this"],"oldTime"],["name","newTime"]]],["stat",["assign","+",["dot",["name","this"],"elapsedTime"],["name","diff"]]]]],null],["return",["name","diff"]]]]]],["stat",["assign",true,["dot",["name","THREE"],"Color"],["function",null,["hex"],[["if",["binary","!==",["name","hex"],["name","undefined"]],["stat",["call",["dot",["name","this"],"setHex"],[["name","hex"]]]],null],["return",["name","this"]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"Color"],"prototype"],["object",[["constructor",["dot",["name","THREE"],"Color"]],["r",["num",1]],["g",["num",1]],["b",["num",1]],["copy",["function",null,["color"],[["stat",["assign",true,["dot",["name","this"],"r"],["dot",["name","color"],"r"]]],["stat",["assign",true,["dot",["name","this"],"g"],["dot",["name","color"],"g"]]],["stat",["assign",true,["dot",["name","this"],"b"],["dot",["name","color"],"b"]]],["return",["name","this"]]]]],["copyGammaToLinear",["function",null,["color"],[["stat",["assign",true,["dot",["name","this"],"r"],["binary","*",["dot",["name","color"],"r"],["dot",["name","color"],"r"]]]],["stat",["assign",true,["dot",["name","this"],"g"],["binary","*",["dot",["name","color"],"g"],["dot",["name","color"],"g"]]]],["stat",["assign",true,["dot",["name","this"],"b"],["binary","*",["dot",["name","color"],"b"],["dot",["name","color"],"b"]]]],["return",["name","this"]]]]],["copyLinearToGamma",["function",null,["color"],[["stat",["assign",true,["dot",["name","this"],"r"],["call",["dot",["name","Math"],"sqrt"],[["dot",["name","color"],"r"]]]]],["stat",["assign",true,["dot",["name","this"],"g"],["call",["dot",["name","Math"],"sqrt"],[["dot",["name","color"],"g"]]]]],["stat",["assign",true,["dot",["name","this"],"b"],["call",["dot",["name","Math"],"sqrt"],[["dot",["name","color"],"b"]]]]],["return",["name","this"]]]]],["convertGammaToLinear",["function",null,[],[["var",[["r",["dot",["name","this"],"r"]],["g",["dot",["name","this"],"g"]],["b",["dot",["name","this"],"b"]]]],["stat",["assign",true,["dot",["name","this"],"r"],["binary","*",["name","r"],["name","r"]]]],["stat",["assign",true,["dot",["name","this"],"g"],["binary","*",["name","g"],["name","g"]]]],["stat",["assign",true,["dot",["name","this"],"b"],["binary","*",["name","b"],["name","b"]]]],["return",["name","this"]]]]],["convertLinearToGamma",["function",null,[],[["stat",["assign",true,["dot",["name","this"],"r"],["call",["dot",["name","Math"],"sqrt"],[["dot",["name","this"],"r"]]]]],["stat",["assign",true,["dot",["name","this"],"g"],["call",["dot",["name","Math"],"sqrt"],[["dot",["name","this"],"g"]]]]],["stat",["assign",true,["dot",["name","this"],"b"],["call",["dot",["name","Math"],"sqrt"],[["dot",["name","this"],"b"]]]]],["return",["name","this"]]]]],["setRGB",["function",null,["r","g","b"],[["stat",["assign",true,["dot",["name","this"],"r"],["name","r"]]],["stat",["assign",true,["dot",["name","this"],"g"],["name","g"]]],["stat",["assign",true,["dot",["name","this"],"b"],["name","b"]]],["return",["name","this"]]]]],["setHSV",["function",null,["h","s","v"],[["var",[["i"],["f"],["p"],["q"],["t"]]],["if",["binary","===",["name","v"],["num",0]],["block",[["stat",["assign",true,["dot",["name","this"],"r"],["assign",true,["dot",["name","this"],"g"],["assign",true,["dot",["name","this"],"b"],["num",0]]]]]]],["block",[["stat",["assign",true,["name","i"],["call",["dot",["name","Math"],"floor"],[["binary","*",["name","h"],["num",6]]]]]],["stat",["assign",true,["name","f"],["binary","-",["binary","*",["name","h"],["num",6]],["name","i"]]]],["stat",["assign",true,["name","p"],["binary","*",["name","v"],["binary","-",["num",1],["name","s"]]]]],["stat",["assign",true,["name","q"],["binary","*",["name","v"],["binary","-",["num",1],["binary","*",["name","s"],["name","f"]]]]]],["stat",["assign",true,["name","t"],["binary","*",["name","v"],["binary","-",["num",1],["binary","*",["name","s"],["binary","-",["num",1],["name","f"]]]]]]],["switch",["name","i"],[[["num",1],[["stat",["assign",true,["dot",["name","this"],"r"],["name","q"]]],["stat",["assign",true,["dot",["name","this"],"g"],["name","v"]]],["stat",["assign",true,["dot",["name","this"],"b"],["name","p"]]],["break",null]]],[["num",2],[["stat",["assign",true,["dot",["name","this"],"r"],["name","p"]]],["stat",["assign",true,["dot",["name","this"],"g"],["name","v"]]],["stat",["assign",true,["dot",["name","this"],"b"],["name","t"]]],["break",null]]],[["num",3],[["stat",["assign",true,["dot",["name","this"],"r"],["name","p"]]],["stat",["assign",true,["dot",["name","this"],"g"],["name","q"]]],["stat",["assign",true,["dot",["name","this"],"b"],["name","v"]]],["break",null]]],[["num",4],[["stat",["assign",true,["dot",["name","this"],"r"],["name","t"]]],["stat",["assign",true,["dot",["name","this"],"g"],["name","p"]]],["stat",["assign",true,["dot",["name","this"],"b"],["name","v"]]],["break",null]]],[["num",5],[["stat",["assign",true,["dot",["name","this"],"r"],["name","v"]]],["stat",["assign",true,["dot",["name","this"],"g"],["name","p"]]],["stat",["assign",true,["dot",["name","this"],"b"],["name","q"]]],["break",null]]],[["num",6],[]],[["num",0],[["stat",["assign",true,["dot",["name","this"],"r"],["name","v"]]],["stat",["assign",true,["dot",["name","this"],"g"],["name","t"]]],["stat",["assign",true,["dot",["name","this"],"b"],["name","p"]]],["break",null]]]]]]]],["return",["name","this"]]]]],["setHex",["function",null,["hex"],[["stat",["assign",true,["name","hex"],["call",["dot",["name","Math"],"floor"],[["name","hex"]]]]],["stat",["assign",true,["dot",["name","this"],"r"],["binary","/",["binary","&",["binary",">>",["name","hex"],["num",16]],["num",255]],["num",255]]]],["stat",["assign",true,["dot",["name","this"],"g"],["binary","/",["binary","&",["binary",">>",["name","hex"],["num",8]],["num",255]],["num",255]]]],["stat",["assign",true,["dot",["name","this"],"b"],["binary","/",["binary","&",["name","hex"],["num",255]],["num",255]]]],["return",["name","this"]]]]],["lerpSelf",["function",null,["color","alpha"],[["stat",["assign","+",["dot",["name","this"],"r"],["binary","*",["binary","-",["dot",["name","color"],"r"],["dot",["name","this"],"r"]],["name","alpha"]]]],["stat",["assign","+",["dot",["name","this"],"g"],["binary","*",["binary","-",["dot",["name","color"],"g"],["dot",["name","this"],"g"]],["name","alpha"]]]],["stat",["assign","+",["dot",["name","this"],"b"],["binary","*",["binary","-",["dot",["name","color"],"b"],["dot",["name","this"],"b"]],["name","alpha"]]]],["return",["name","this"]]]]],["getHex",["function",null,[],[["return",["binary","^",["binary","^",["binary","<<",["call",["dot",["name","Math"],"floor"],[["binary","*",["dot",["name","this"],"r"],["num",255]]]],["num",16]],["binary","<<",["call",["dot",["name","Math"],"floor"],[["binary","*",["dot",["name","this"],"g"],["num",255]]]],["num",8]]],["call",["dot",["name","Math"],"floor"],[["binary","*",["dot",["name","this"],"b"],["num",255]]]]]]]]],["getContextStyle",["function",null,[],[["return",["binary","+",["binary","+",["binary","+",["binary","+",["binary","+",["binary","+",["string","rgb("],["call",["dot",["name","Math"],"floor"],[["binary","*",["dot",["name","this"],"r"],["num",255]]]]],["string",","]],["call",["dot",["name","Math"],"floor"],[["binary","*",["dot",["name","this"],"g"],["num",255]]]]],["string",","]],["call",["dot",["name","Math"],"floor"],[["binary","*",["dot",["name","this"],"b"],["num",255]]]]],["string",")"]]]]]],["clone",["function",null,[],[["return",["call",["dot",["new",["dot",["name","THREE"],"Color"],[]],"setRGB"],[["dot",["name","this"],"r"],["dot",["name","this"],"g"],["dot",["name","this"],"b"]]]]]]]]]]],["stat",["assign",true,["dot",["name","THREE"],"Vector2"],["function",null,["x","y"],[["stat",["assign",true,["dot",["name","this"],"x"],["binary","||",["name","x"],["num",0]]]],["stat",["assign",true,["dot",["name","this"],"y"],["binary","||",["name","y"],["num",0]]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"Vector2"],"prototype"],["object",[["constructor",["dot",["name","THREE"],"Vector2"]],["set",["function",null,["x","y"],[["stat",["assign",true,["dot",["name","this"],"x"],["name","x"]]],["stat",["assign",true,["dot",["name","this"],"y"],["name","y"]]],["return",["name","this"]]]]],["copy",["function",null,["v"],[["stat",["assign",true,["dot",["name","this"],"x"],["dot",["name","v"],"x"]]],["stat",["assign",true,["dot",["name","this"],"y"],["dot",["name","v"],"y"]]],["return",["name","this"]]]]],["add",["function",null,["a","b"],[["stat",["assign",true,["dot",["name","this"],"x"],["binary","+",["dot",["name","a"],"x"],["dot",["name","b"],"x"]]]],["stat",["assign",true,["dot",["name","this"],"y"],["binary","+",["dot",["name","a"],"y"],["dot",["name","b"],"y"]]]],["return",["name","this"]]]]],["addSelf",["function",null,["v"],[["stat",["assign","+",["dot",["name","this"],"x"],["dot",["name","v"],"x"]]],["stat",["assign","+",["dot",["name","this"],"y"],["dot",["name","v"],"y"]]],["return",["name","this"]]]]],["sub",["function",null,["a","b"],[["stat",["assign",true,["dot",["name","this"],"x"],["binary","-",["dot",["name","a"],"x"],["dot",["name","b"],"x"]]]],["stat",["assign",true,["dot",["name","this"],"y"],["binary","-",["dot",["name","a"],"y"],["dot",["name","b"],"y"]]]],["return",["name","this"]]]]],["subSelf",["function",null,["v"],[["stat",["assign","-",["dot",["name","this"],"x"],["dot",["name","v"],"x"]]],["stat",["assign","-",["dot",["name","this"],"y"],["dot",["name","v"],"y"]]],["return",["name","this"]]]]],["multiplyScalar",["function",null,["s"],[["stat",["assign","*",["dot",["name","this"],"x"],["name","s"]]],["stat",["assign","*",["dot",["name","this"],"y"],["name","s"]]],["return",["name","this"]]]]],["divideScalar",["function",null,["s"],[["if",["name","s"],["block",[["stat",["assign","/",["dot",["name","this"],"x"],["name","s"]]],["stat",["assign","/",["dot",["name","this"],"y"],["name","s"]]]]],["block",[["stat",["call",["dot",["name","this"],"set"],[["num",0],["num",0]]]]]]],["return",["name","this"]]]]],["negate",["function",null,[],[["return",["call",["dot",["name","this"],"multiplyScalar"],[["unary-prefix","-",["num",1]]]]]]]],["dot",["function",null,["v"],[["return",["binary","+",["binary","*",["dot",["name","this"],"x"],["dot",["name","v"],"x"]],["binary","*",["dot",["name","this"],"y"],["dot",["name","v"],"y"]]]]]]],["lengthSq",["function",null,[],[["return",["binary","+",["binary","*",["dot",["name","this"],"x"],["dot",["name","this"],"x"]],["binary","*",["dot",["name","this"],"y"],["dot",["name","this"],"y"]]]]]]],["length",["function",null,[],[["return",["call",["dot",["name","Math"],"sqrt"],[["call",["dot",["name","this"],"lengthSq"],[]]]]]]]],["normalize",["function",null,[],[["return",["call",["dot",["name","this"],"divideScalar"],[["call",["dot",["name","this"],"length"],[]]]]]]]],["distanceTo",["function",null,["v"],[["return",["call",["dot",["name","Math"],"sqrt"],[["call",["dot",["name","this"],"distanceToSquared"],[["name","v"]]]]]]]]],["distanceToSquared",["function",null,["v"],[["var",[["dx",["binary","-",["dot",["name","this"],"x"],["dot",["name","v"],"x"]]],["dy",["binary","-",["dot",["name","this"],"y"],["dot",["name","v"],"y"]]]]],["return",["binary","+",["binary","*",["name","dx"],["name","dx"]],["binary","*",["name","dy"],["name","dy"]]]]]]],["setLength",["function",null,["l"],[["return",["call",["dot",["call",["dot",["name","this"],"normalize"],[]],"multiplyScalar"],[["name","l"]]]]]]],["lerpSelf",["function",null,["v","alpha"],[["stat",["assign","+",["dot",["name","this"],"x"],["binary","*",["binary","-",["dot",["name","v"],"x"],["dot",["name","this"],"x"]],["name","alpha"]]]],["stat",["assign","+",["dot",["name","this"],"y"],["binary","*",["binary","-",["dot",["name","v"],"y"],["dot",["name","this"],"y"]],["name","alpha"]]]],["return",["name","this"]]]]],["equals",["function",null,["v"],[["return",["binary","&&",["binary","===",["dot",["name","v"],"x"],["dot",["name","this"],"x"]],["binary","===",["dot",["name","v"],"y"],["dot",["name","this"],"y"]]]]]]],["isZero",["function",null,[],[["return",["binary","<",["call",["dot",["name","this"],"lengthSq"],[]],["num",0.0001]]]]]],["clone",["function",null,[],[["return",["new",["dot",["name","THREE"],"Vector2"],[["dot",["name","this"],"x"],["dot",["name","this"],"y"]]]]]]]]]]],["stat",["assign",true,["dot",["name","THREE"],"Vector3"],["function",null,["x","y","z"],[["stat",["assign",true,["dot",["name","this"],"x"],["binary","||",["name","x"],["num",0]]]],["stat",["assign",true,["dot",["name","this"],"y"],["binary","||",["name","y"],["num",0]]]],["stat",["assign",true,["dot",["name","this"],"z"],["binary","||",["name","z"],["num",0]]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"Vector3"],"prototype"],["object",[["constructor",["dot",["name","THREE"],"Vector3"]],["set",["function",null,["x","y","z"],[["stat",["assign",true,["dot",["name","this"],"x"],["name","x"]]],["stat",["assign",true,["dot",["name","this"],"y"],["name","y"]]],["stat",["assign",true,["dot",["name","this"],"z"],["name","z"]]],["return",["name","this"]]]]],["setX",["function",null,["x"],[["stat",["assign",true,["dot",["name","this"],"x"],["name","x"]]],["return",["name","this"]]]]],["setY",["function",null,["y"],[["stat",["assign",true,["dot",["name","this"],"y"],["name","y"]]],["return",["name","this"]]]]],["setZ",["function",null,["z"],[["stat",["assign",true,["dot",["name","this"],"z"],["name","z"]]],["return",["name","this"]]]]],["copy",["function",null,["v"],[["stat",["assign",true,["dot",["name","this"],"x"],["dot",["name","v"],"x"]]],["stat",["assign",true,["dot",["name","this"],"y"],["dot",["name","v"],"y"]]],["stat",["assign",true,["dot",["name","this"],"z"],["dot",["name","v"],"z"]]],["return",["name","this"]]]]],["add",["function",null,["a","b"],[["stat",["assign",true,["dot",["name","this"],"x"],["binary","+",["dot",["name","a"],"x"],["dot",["name","b"],"x"]]]],["stat",["assign",true,["dot",["name","this"],"y"],["binary","+",["dot",["name","a"],"y"],["dot",["name","b"],"y"]]]],["stat",["assign",true,["dot",["name","this"],"z"],["binary","+",["dot",["name","a"],"z"],["dot",["name","b"],"z"]]]],["return",["name","this"]]]]],["addSelf",["function",null,["v"],[["stat",["assign","+",["dot",["name","this"],"x"],["dot",["name","v"],"x"]]],["stat",["assign","+",["dot",["name","this"],"y"],["dot",["name","v"],"y"]]],["stat",["assign","+",["dot",["name","this"],"z"],["dot",["name","v"],"z"]]],["return",["name","this"]]]]],["addScalar",["function",null,["s"],[["stat",["assign","+",["dot",["name","this"],"x"],["name","s"]]],["stat",["assign","+",["dot",["name","this"],"y"],["name","s"]]],["stat",["assign","+",["dot",["name","this"],"z"],["name","s"]]],["return",["name","this"]]]]],["sub",["function",null,["a","b"],[["stat",["assign",true,["dot",["name","this"],"x"],["binary","-",["dot",["name","a"],"x"],["dot",["name","b"],"x"]]]],["stat",["assign",true,["dot",["name","this"],"y"],["binary","-",["dot",["name","a"],"y"],["dot",["name","b"],"y"]]]],["stat",["assign",true,["dot",["name","this"],"z"],["binary","-",["dot",["name","a"],"z"],["dot",["name","b"],"z"]]]],["return",["name","this"]]]]],["subSelf",["function",null,["v"],[["stat",["assign","-",["dot",["name","this"],"x"],["dot",["name","v"],"x"]]],["stat",["assign","-",["dot",["name","this"],"y"],["dot",["name","v"],"y"]]],["stat",["assign","-",["dot",["name","this"],"z"],["dot",["name","v"],"z"]]],["return",["name","this"]]]]],["multiply",["function",null,["a","b"],[["stat",["assign",true,["dot",["name","this"],"x"],["binary","*",["dot",["name","a"],"x"],["dot",["name","b"],"x"]]]],["stat",["assign",true,["dot",["name","this"],"y"],["binary","*",["dot",["name","a"],"y"],["dot",["name","b"],"y"]]]],["stat",["assign",true,["dot",["name","this"],"z"],["binary","*",["dot",["name","a"],"z"],["dot",["name","b"],"z"]]]],["return",["name","this"]]]]],["multiplySelf",["function",null,["v"],[["stat",["assign","*",["dot",["name","this"],"x"],["dot",["name","v"],"x"]]],["stat",["assign","*",["dot",["name","this"],"y"],["dot",["name","v"],"y"]]],["stat",["assign","*",["dot",["name","this"],"z"],["dot",["name","v"],"z"]]],["return",["name","this"]]]]],["multiplyScalar",["function",null,["s"],[["stat",["assign","*",["dot",["name","this"],"x"],["name","s"]]],["stat",["assign","*",["dot",["name","this"],"y"],["name","s"]]],["stat",["assign","*",["dot",["name","this"],"z"],["name","s"]]],["return",["name","this"]]]]],["divideSelf",["function",null,["v"],[["stat",["assign","/",["dot",["name","this"],"x"],["dot",["name","v"],"x"]]],["stat",["assign","/",["dot",["name","this"],"y"],["dot",["name","v"],"y"]]],["stat",["assign","/",["dot",["name","this"],"z"],["dot",["name","v"],"z"]]],["return",["name","this"]]]]],["divideScalar",["function",null,["s"],[["if",["name","s"],["block",[["stat",["assign","/",["dot",["name","this"],"x"],["name","s"]]],["stat",["assign","/",["dot",["name","this"],"y"],["name","s"]]],["stat",["assign","/",["dot",["name","this"],"z"],["name","s"]]]]],["block",[["stat",["assign",true,["dot",["name","this"],"x"],["num",0]]],["stat",["assign",true,["dot",["name","this"],"y"],["num",0]]],["stat",["assign",true,["dot",["name","this"],"z"],["num",0]]]]]],["return",["name","this"]]]]],["negate",["function",null,[],[["return",["call",["dot",["name","this"],"multiplyScalar"],[["unary-prefix","-",["num",1]]]]]]]],["dot",["function",null,["v"],[["return",["binary","+",["binary","+",["binary","*",["dot",["name","this"],"x"],["dot",["name","v"],"x"]],["binary","*",["dot",["name","this"],"y"],["dot",["name","v"],"y"]]],["binary","*",["dot",["name","this"],"z"],["dot",["name","v"],"z"]]]]]]],["lengthSq",["function",null,[],[["return",["binary","+",["binary","+",["binary","*",["dot",["name","this"],"x"],["dot",["name","this"],"x"]],["binary","*",["dot",["name","this"],"y"],["dot",["name","this"],"y"]]],["binary","*",["dot",["name","this"],"z"],["dot",["name","this"],"z"]]]]]]],["length",["function",null,[],[["return",["call",["dot",["name","Math"],"sqrt"],[["call",["dot",["name","this"],"lengthSq"],[]]]]]]]],["lengthManhattan",["function",null,[],[["return",["binary","+",["binary","+",["call",["dot",["name","Math"],"abs"],[["dot",["name","this"],"x"]]],["call",["dot",["name","Math"],"abs"],[["dot",["name","this"],"y"]]]],["call",["dot",["name","Math"],"abs"],[["dot",["name","this"],"z"]]]]]]]],["normalize",["function",null,[],[["return",["call",["dot",["name","this"],"divideScalar"],[["call",["dot",["name","this"],"length"],[]]]]]]]],["setLength",["function",null,["l"],[["return",["call",["dot",["call",["dot",["name","this"],"normalize"],[]],"multiplyScalar"],[["name","l"]]]]]]],["lerpSelf",["function",null,["v","alpha"],[["stat",["assign","+",["dot",["name","this"],"x"],["binary","*",["binary","-",["dot",["name","v"],"x"],["dot",["name","this"],"x"]],["name","alpha"]]]],["stat",["assign","+",["dot",["name","this"],"y"],["binary","*",["binary","-",["dot",["name","v"],"y"],["dot",["name","this"],"y"]],["name","alpha"]]]],["stat",["assign","+",["dot",["name","this"],"z"],["binary","*",["binary","-",["dot",["name","v"],"z"],["dot",["name","this"],"z"]],["name","alpha"]]]],["return",["name","this"]]]]],["cross",["function",null,["a","b"],[["stat",["assign",true,["dot",["name","this"],"x"],["binary","-",["binary","*",["dot",["name","a"],"y"],["dot",["name","b"],"z"]],["binary","*",["dot",["name","a"],"z"],["dot",["name","b"],"y"]]]]],["stat",["assign",true,["dot",["name","this"],"y"],["binary","-",["binary","*",["dot",["name","a"],"z"],["dot",["name","b"],"x"]],["binary","*",["dot",["name","a"],"x"],["dot",["name","b"],"z"]]]]],["stat",["assign",true,["dot",["name","this"],"z"],["binary","-",["binary","*",["dot",["name","a"],"x"],["dot",["name","b"],"y"]],["binary","*",["dot",["name","a"],"y"],["dot",["name","b"],"x"]]]]],["return",["name","this"]]]]],["crossSelf",["function",null,["v"],[["var",[["x",["dot",["name","this"],"x"]],["y",["dot",["name","this"],"y"]],["z",["dot",["name","this"],"z"]]]],["stat",["assign",true,["dot",["name","this"],"x"],["binary","-",["binary","*",["name","y"],["dot",["name","v"],"z"]],["binary","*",["name","z"],["dot",["name","v"],"y"]]]]],["stat",["assign",true,["dot",["name","this"],"y"],["binary","-",["binary","*",["name","z"],["dot",["name","v"],"x"]],["binary","*",["name","x"],["dot",["name","v"],"z"]]]]],["stat",["assign",true,["dot",["name","this"],"z"],["binary","-",["binary","*",["name","x"],["dot",["name","v"],"y"]],["binary","*",["name","y"],["dot",["name","v"],"x"]]]]],["return",["name","this"]]]]],["distanceTo",["function",null,["v"],[["return",["call",["dot",["name","Math"],"sqrt"],[["call",["dot",["name","this"],"distanceToSquared"],[["name","v"]]]]]]]]],["distanceToSquared",["function",null,["v"],[["return",["call",["dot",["call",["dot",["new",["dot",["name","THREE"],"Vector3"],[]],"sub"],[["name","this"],["name","v"]]],"lengthSq"],[]]]]]],["getPositionFromMatrix",["function",null,["m"],[["stat",["assign",true,["dot",["name","this"],"x"],["sub",["dot",["name","m"],"elements"],["num",12]]]],["stat",["assign",true,["dot",["name","this"],"y"],["sub",["dot",["name","m"],"elements"],["num",13]]]],["stat",["assign",true,["dot",["name","this"],"z"],["sub",["dot",["name","m"],"elements"],["num",14]]]],["return",["name","this"]]]]],["getRotationFromMatrix",["function",null,["m","scale"],[["var",[["sx",["conditional",["name","scale"],["dot",["name","scale"],"x"],["num",1]]]]],["var",[["sy",["conditional",["name","scale"],["dot",["name","scale"],"y"],["num",1]]]]],["var",[["sz",["conditional",["name","scale"],["dot",["name","scale"],"z"],["num",1]]]]],["var",[["m11",["binary","/",["sub",["dot",["name","m"],"elements"],["num",0]],["name","sx"]]],["m12",["binary","/",["sub",["dot",["name","m"],"elements"],["num",4]],["name","sy"]]],["m13",["binary","/",["sub",["dot",["name","m"],"elements"],["num",8]],["name","sz"]]]]],["var",[["m21",["binary","/",["sub",["dot",["name","m"],"elements"],["num",1]],["name","sx"]]],["m22",["binary","/",["sub",["dot",["name","m"],"elements"],["num",5]],["name","sy"]]],["m23",["binary","/",["sub",["dot",["name","m"],"elements"],["num",9]],["name","sz"]]]]],["var",[["m33",["binary","/",["sub",["dot",["name","m"],"elements"],["num",10]],["name","sz"]]]]],["stat",["assign",true,["dot",["name","this"],"y"],["call",["dot",["name","Math"],"asin"],[["name","m13"]]]]],["var",[["cosY",["call",["dot",["name","Math"],"cos"],[["dot",["name","this"],"y"]]]]]],["if",["binary",">",["call",["dot",["name","Math"],"abs"],[["name","cosY"]]],["num",0.00001]],["block",[["stat",["assign",true,["dot",["name","this"],"x"],["call",["dot",["name","Math"],"atan2"],[["binary","/",["unary-prefix","-",["name","m23"]],["name","cosY"]],["binary","/",["name","m33"],["name","cosY"]]]]]],["stat",["assign",true,["dot",["name","this"],"z"],["call",["dot",["name","Math"],"atan2"],[["binary","/",["unary-prefix","-",["name","m12"]],["name","cosY"]],["binary","/",["name","m11"],["name","cosY"]]]]]]]],["block",[["stat",["assign",true,["dot",["name","this"],"x"],["num",0]]],["stat",["assign",true,["dot",["name","this"],"z"],["call",["dot",["name","Math"],"atan2"],[["name","m21"],["name","m22"]]]]]]]],["return",["name","this"]]]]],["getScaleFromMatrix",["function",null,["m"],[["var",[["sx",["call",["dot",["call",["dot",["name","this"],"set"],[["sub",["dot",["name","m"],"elements"],["num",0]],["sub",["dot",["name","m"],"elements"],["num",1]],["sub",["dot",["name","m"],"elements"],["num",2]]]],"length"],[]]]]],["var",[["sy",["call",["dot",["call",["dot",["name","this"],"set"],[["sub",["dot",["name","m"],"elements"],["num",4]],["sub",["dot",["name","m"],"elements"],["num",5]],["sub",["dot",["name","m"],"elements"],["num",6]]]],"length"],[]]]]],["var",[["sz",["call",["dot",["call",["dot",["name","this"],"set"],[["sub",["dot",["name","m"],"elements"],["num",8]],["sub",["dot",["name","m"],"elements"],["num",9]],["sub",["dot",["name","m"],"elements"],["num",10]]]],"length"],[]]]]],["stat",["assign",true,["dot",["name","this"],"x"],["name","sx"]]],["stat",["assign",true,["dot",["name","this"],"y"],["name","sy"]]],["stat",["assign",true,["dot",["name","this"],"z"],["name","sz"]]]]]],["equals",["function",null,["v"],[["return",["binary","&&",["binary","&&",["binary","===",["dot",["name","v"],"x"],["dot",["name","this"],"x"]],["binary","===",["dot",["name","v"],"y"],["dot",["name","this"],"y"]]],["binary","===",["dot",["name","v"],"z"],["dot",["name","this"],"z"]]]]]]],["isZero",["function",null,[],[["return",["binary","<",["call",["dot",["name","this"],"lengthSq"],[]],["num",0.0001]]]]]],["clone",["function",null,[],[["return",["new",["dot",["name","THREE"],"Vector3"],[["dot",["name","this"],"x"],["dot",["name","this"],"y"],["dot",["name","this"],"z"]]]]]]]]]]],["stat",["assign",true,["dot",["name","THREE"],"Vector4"],["function",null,["x","y","z","w"],[["stat",["assign",true,["dot",["name","this"],"x"],["binary","||",["name","x"],["num",0]]]],["stat",["assign",true,["dot",["name","this"],"y"],["binary","||",["name","y"],["num",0]]]],["stat",["assign",true,["dot",["name","this"],"z"],["binary","||",["name","z"],["num",0]]]],["stat",["assign",true,["dot",["name","this"],"w"],["conditional",["binary","!==",["name","w"],["name","undefined"]],["name","w"],["num",1]]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"Vector4"],"prototype"],["object",[["constructor",["dot",["name","THREE"],"Vector4"]],["set",["function",null,["x","y","z","w"],[["stat",["assign",true,["dot",["name","this"],"x"],["name","x"]]],["stat",["assign",true,["dot",["name","this"],"y"],["name","y"]]],["stat",["assign",true,["dot",["name","this"],"z"],["name","z"]]],["stat",["assign",true,["dot",["name","this"],"w"],["name","w"]]],["return",["name","this"]]]]],["copy",["function",null,["v"],[["stat",["assign",true,["dot",["name","this"],"x"],["dot",["name","v"],"x"]]],["stat",["assign",true,["dot",["name","this"],"y"],["dot",["name","v"],"y"]]],["stat",["assign",true,["dot",["name","this"],"z"],["dot",["name","v"],"z"]]],["stat",["assign",true,["dot",["name","this"],"w"],["conditional",["binary","!==",["dot",["name","v"],"w"],["name","undefined"]],["dot",["name","v"],"w"],["num",1]]]],["return",["name","this"]]]]],["add",["function",null,["a","b"],[["stat",["assign",true,["dot",["name","this"],"x"],["binary","+",["dot",["name","a"],"x"],["dot",["name","b"],"x"]]]],["stat",["assign",true,["dot",["name","this"],"y"],["binary","+",["dot",["name","a"],"y"],["dot",["name","b"],"y"]]]],["stat",["assign",true,["dot",["name","this"],"z"],["binary","+",["dot",["name","a"],"z"],["dot",["name","b"],"z"]]]],["stat",["assign",true,["dot",["name","this"],"w"],["binary","+",["dot",["name","a"],"w"],["dot",["name","b"],"w"]]]],["return",["name","this"]]]]],["addSelf",["function",null,["v"],[["stat",["assign","+",["dot",["name","this"],"x"],["dot",["name","v"],"x"]]],["stat",["assign","+",["dot",["name","this"],"y"],["dot",["name","v"],"y"]]],["stat",["assign","+",["dot",["name","this"],"z"],["dot",["name","v"],"z"]]],["stat",["assign","+",["dot",["name","this"],"w"],["dot",["name","v"],"w"]]],["return",["name","this"]]]]],["sub",["function",null,["a","b"],[["stat",["assign",true,["dot",["name","this"],"x"],["binary","-",["dot",["name","a"],"x"],["dot",["name","b"],"x"]]]],["stat",["assign",true,["dot",["name","this"],"y"],["binary","-",["dot",["name","a"],"y"],["dot",["name","b"],"y"]]]],["stat",["assign",true,["dot",["name","this"],"z"],["binary","-",["dot",["name","a"],"z"],["dot",["name","b"],"z"]]]],["stat",["assign",true,["dot",["name","this"],"w"],["binary","-",["dot",["name","a"],"w"],["dot",["name","b"],"w"]]]],["return",["name","this"]]]]],["subSelf",["function",null,["v"],[["stat",["assign","-",["dot",["name","this"],"x"],["dot",["name","v"],"x"]]],["stat",["assign","-",["dot",["name","this"],"y"],["dot",["name","v"],"y"]]],["stat",["assign","-",["dot",["name","this"],"z"],["dot",["name","v"],"z"]]],["stat",["assign","-",["dot",["name","this"],"w"],["dot",["name","v"],"w"]]],["return",["name","this"]]]]],["multiplyScalar",["function",null,["s"],[["stat",["assign","*",["dot",["name","this"],"x"],["name","s"]]],["stat",["assign","*",["dot",["name","this"],"y"],["name","s"]]],["stat",["assign","*",["dot",["name","this"],"z"],["name","s"]]],["stat",["assign","*",["dot",["name","this"],"w"],["name","s"]]],["return",["name","this"]]]]],["divideScalar",["function",null,["s"],[["if",["name","s"],["block",[["stat",["assign","/",["dot",["name","this"],"x"],["name","s"]]],["stat",["assign","/",["dot",["name","this"],"y"],["name","s"]]],["stat",["assign","/",["dot",["name","this"],"z"],["name","s"]]],["stat",["assign","/",["dot",["name","this"],"w"],["name","s"]]]]],["block",[["stat",["assign",true,["dot",["name","this"],"x"],["num",0]]],["stat",["assign",true,["dot",["name","this"],"y"],["num",0]]],["stat",["assign",true,["dot",["name","this"],"z"],["num",0]]],["stat",["assign",true,["dot",["name","this"],"w"],["num",1]]]]]],["return",["name","this"]]]]],["negate",["function",null,[],[["return",["call",["dot",["name","this"],"multiplyScalar"],[["unary-prefix","-",["num",1]]]]]]]],["dot",["function",null,["v"],[["return",["binary","+",["binary","+",["binary","+",["binary","*",["dot",["name","this"],"x"],["dot",["name","v"],"x"]],["binary","*",["dot",["name","this"],"y"],["dot",["name","v"],"y"]]],["binary","*",["dot",["name","this"],"z"],["dot",["name","v"],"z"]]],["binary","*",["dot",["name","this"],"w"],["dot",["name","v"],"w"]]]]]]],["lengthSq",["function",null,[],[["return",["call",["dot",["name","this"],"dot"],[["name","this"]]]]]]],["length",["function",null,[],[["return",["call",["dot",["name","Math"],"sqrt"],[["call",["dot",["name","this"],"lengthSq"],[]]]]]]]],["normalize",["function",null,[],[["return",["call",["dot",["name","this"],"divideScalar"],[["call",["dot",["name","this"],"length"],[]]]]]]]],["setLength",["function",null,["l"],[["return",["call",["dot",["call",["dot",["name","this"],"normalize"],[]],"multiplyScalar"],[["name","l"]]]]]]],["lerpSelf",["function",null,["v","alpha"],[["stat",["assign","+",["dot",["name","this"],"x"],["binary","*",["binary","-",["dot",["name","v"],"x"],["dot",["name","this"],"x"]],["name","alpha"]]]],["stat",["assign","+",["dot",["name","this"],"y"],["binary","*",["binary","-",["dot",["name","v"],"y"],["dot",["name","this"],"y"]],["name","alpha"]]]],["stat",["assign","+",["dot",["name","this"],"z"],["binary","*",["binary","-",["dot",["name","v"],"z"],["dot",["name","this"],"z"]],["name","alpha"]]]],["stat",["assign","+",["dot",["name","this"],"w"],["binary","*",["binary","-",["dot",["name","v"],"w"],["dot",["name","this"],"w"]],["name","alpha"]]]],["return",["name","this"]]]]],["clone",["function",null,[],[["return",["new",["dot",["name","THREE"],"Vector4"],[["dot",["name","this"],"x"],["dot",["name","this"],"y"],["dot",["name","this"],"z"],["dot",["name","this"],"w"]]]]]]]]]]],["stat",["assign",true,["dot",["name","THREE"],"Frustum"],["function",null,[],[["stat",["assign",true,["dot",["name","this"],"planes"],["array",[["new",["dot",["name","THREE"],"Vector4"],[]],["new",["dot",["name","THREE"],"Vector4"],[]],["new",["dot",["name","THREE"],"Vector4"],[]],["new",["dot",["name","THREE"],"Vector4"],[]],["new",["dot",["name","THREE"],"Vector4"],[]],["new",["dot",["name","THREE"],"Vector4"],[]]]]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"Frustum"],"prototype"],"setFromMatrix"],["function",null,["m"],[["var",[["i"],["plane"],["planes",["dot",["name","this"],"planes"]]]],["var",[["me",["dot",["name","m"],"elements"]]]],["var",[["me0",["sub",["name","me"],["num",0]]],["me1",["sub",["name","me"],["num",1]]],["me2",["sub",["name","me"],["num",2]]],["me3",["sub",["name","me"],["num",3]]]]],["var",[["me4",["sub",["name","me"],["num",4]]],["me5",["sub",["name","me"],["num",5]]],["me6",["sub",["name","me"],["num",6]]],["me7",["sub",["name","me"],["num",7]]]]],["var",[["me8",["sub",["name","me"],["num",8]]],["me9",["sub",["name","me"],["num",9]]],["me10",["sub",["name","me"],["num",10]]],["me11",["sub",["name","me"],["num",11]]]]],["var",[["me12",["sub",["name","me"],["num",12]]],["me13",["sub",["name","me"],["num",13]]],["me14",["sub",["name","me"],["num",14]]],["me15",["sub",["name","me"],["num",15]]]]],["stat",["call",["dot",["sub",["name","planes"],["num",0]],"set"],[["binary","-",["name","me3"],["name","me0"]],["binary","-",["name","me7"],["name","me4"]],["binary","-",["name","me11"],["name","me8"]],["binary","-",["name","me15"],["name","me12"]]]]],["stat",["call",["dot",["sub",["name","planes"],["num",1]],"set"],[["binary","+",["name","me3"],["name","me0"]],["binary","+",["name","me7"],["name","me4"]],["binary","+",["name","me11"],["name","me8"]],["binary","+",["name","me15"],["name","me12"]]]]],["stat",["call",["dot",["sub",["name","planes"],["num",2]],"set"],[["binary","+",["name","me3"],["name","me1"]],["binary","+",["name","me7"],["name","me5"]],["binary","+",["name","me11"],["name","me9"]],["binary","+",["name","me15"],["name","me13"]]]]],["stat",["call",["dot",["sub",["name","planes"],["num",3]],"set"],[["binary","-",["name","me3"],["name","me1"]],["binary","-",["name","me7"],["name","me5"]],["binary","-",["name","me11"],["name","me9"]],["binary","-",["name","me15"],["name","me13"]]]]],["stat",["call",["dot",["sub",["name","planes"],["num",4]],"set"],[["binary","-",["name","me3"],["name","me2"]],["binary","-",["name","me7"],["name","me6"]],["binary","-",["name","me11"],["name","me10"]],["binary","-",["name","me15"],["name","me14"]]]]],["stat",["call",["dot",["sub",["name","planes"],["num",5]],"set"],[["binary","+",["name","me3"],["name","me2"]],["binary","+",["name","me7"],["name","me6"]],["binary","+",["name","me11"],["name","me10"]],["binary","+",["name","me15"],["name","me14"]]]]],["for",["assign",true,["name","i"],["num",0]],["binary","<",["name","i"],["num",6]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","plane"],["sub",["name","planes"],["name","i"]]]],["stat",["call",["dot",["name","plane"],"divideScalar"],[["call",["dot",["name","Math"],"sqrt"],[["binary","+",["binary","+",["binary","*",["dot",["name","plane"],"x"],["dot",["name","plane"],"x"]],["binary","*",["dot",["name","plane"],"y"],["dot",["name","plane"],"y"]]],["binary","*",["dot",["name","plane"],"z"],["dot",["name","plane"],"z"]]]]]]]]]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"Frustum"],"prototype"],"contains"],["function",null,["object"],[["var",[["distance"],["planes",["dot",["name","this"],"planes"]],["matrix",["dot",["name","object"],"matrixWorld"]],["me",["dot",["name","matrix"],"elements"]],["radius",["binary","*",["unary-prefix","-",["dot",["dot",["dot",["name","object"],"geometry"],"boundingSphere"],"radius"]],["call",["dot",["name","matrix"],"getMaxScaleOnAxis"],[]]]]]],["for",["var",[["i",["num",0]]]],["binary","<",["name","i"],["num",6]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","distance"],["binary","+",["binary","+",["binary","+",["binary","*",["dot",["sub",["name","planes"],["name","i"]],"x"],["sub",["name","me"],["num",12]]],["binary","*",["dot",["sub",["name","planes"],["name","i"]],"y"],["sub",["name","me"],["num",13]]]],["binary","*",["dot",["sub",["name","planes"],["name","i"]],"z"],["sub",["name","me"],["num",14]]]],["dot",["sub",["name","planes"],["name","i"]],"w"]]]],["if",["binary","<=",["name","distance"],["name","radius"]],["return",["name","false"]],null]]]],["return",["name","true"]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"Frustum"],"__v1"],["new",["dot",["name","THREE"],"Vector3"],[]]]],["stat",["assign",true,["dot",["name","THREE"],"Ray"],["function",null,["origin","direction"],[["stat",["assign",true,["dot",["name","this"],"origin"],["binary","||",["name","origin"],["new",["dot",["name","THREE"],"Vector3"],[]]]]],["stat",["assign",true,["dot",["name","this"],"direction"],["binary","||",["name","direction"],["new",["dot",["name","THREE"],"Vector3"],[]]]]],["var",[["precision",["num",0.0001]]]],["stat",["assign",true,["dot",["name","this"],"setPrecision"],["function",null,["value"],[["stat",["assign",true,["name","precision"],["name","value"]]]]]]],["var",[["a",["new",["dot",["name","THREE"],"Vector3"],[]]]]],["var",[["b",["new",["dot",["name","THREE"],"Vector3"],[]]]]],["var",[["c",["new",["dot",["name","THREE"],"Vector3"],[]]]]],["var",[["d",["new",["dot",["name","THREE"],"Vector3"],[]]]]],["var",[["originCopy",["new",["dot",["name","THREE"],"Vector3"],[]]]]],["var",[["directionCopy",["new",["dot",["name","THREE"],"Vector3"],[]]]]],["var",[["vector",["new",["dot",["name","THREE"],"Vector3"],[]]]]],["var",[["normal",["new",["dot",["name","THREE"],"Vector3"],[]]]]],["var",[["intersectPoint",["new",["dot",["name","THREE"],"Vector3"],[]]]]],["stat",["assign",true,["dot",["name","this"],"intersectObject"],["function",null,["object"],[["var",[["intersect"],["intersects",["array",[]]]]],["if",["binary","instanceof",["name","object"],["dot",["name","THREE"],"Particle"]],["block",[["var",[["distance",["call",["name","distanceFromIntersection"],[["dot",["name","this"],"origin"],["dot",["name","this"],"direction"],["call",["dot",["dot",["name","object"],"matrixWorld"],"getPosition"],[]]]]]]],["if",["binary",">",["name","distance"],["dot",["dot",["name","object"],"scale"],"x"]],["block",[["return",["array",[]]]]],null],["stat",["assign",true,["name","intersect"],["object",[["distance",["name","distance"]],["point",["dot",["name","object"],"position"]],["face",["name","null"]],["object",["name","object"]]]]]],["stat",["call",["dot",["name","intersects"],"push"],[["name","intersect"]]]]]],["if",["binary","instanceof",["name","object"],["dot",["name","THREE"],"Mesh"]],["block",[["var",[["distance",["call",["name","distanceFromIntersection"],[["dot",["name","this"],"origin"],["dot",["name","this"],"direction"],["call",["dot",["dot",["name","object"],"matrixWorld"],"getPosition"],[]]]]]]],["var",[["scale",["call",["dot",["dot",["dot",["name","THREE"],"Frustum"],"__v1"],"set"],[["call",["dot",["call",["dot",["dot",["name","object"],"matrixWorld"],"getColumnX"],[]],"length"],[]],["call",["dot",["call",["dot",["dot",["name","object"],"matrixWorld"],"getColumnY"],[]],"length"],[]],["call",["dot",["call",["dot",["dot",["name","object"],"matrixWorld"],"getColumnZ"],[]],"length"],[]]]]]]],["if",["binary",">",["name","distance"],["binary","*",["dot",["dot",["dot",["name","object"],"geometry"],"boundingSphere"],"radius"],["call",["dot",["name","Math"],"max"],[["dot",["name","scale"],"x"],["call",["dot",["name","Math"],"max"],[["dot",["name","scale"],"y"],["dot",["name","scale"],"z"]]]]]]],["block",[["return",["name","intersects"]]]],null],["var",[["f"],["fl"],["face"],["dot"],["scalar"],["geometry",["dot",["name","object"],"geometry"]],["vertices",["dot",["name","geometry"],"vertices"]],["objMatrix"]]],["stat",["call",["dot",["dot",["name","object"],"matrixRotationWorld"],"extractRotation"],[["dot",["name","object"],"matrixWorld"]]]],["for",["seq",["assign",true,["name","f"],["num",0]],["assign",true,["name","fl"],["dot",["dot",["name","geometry"],"faces"],"length"]]],["binary","<",["name","f"],["name","fl"]],["unary-postfix","++",["name","f"]],["block",[["stat",["assign",true,["name","face"],["sub",["dot",["name","geometry"],"faces"],["name","f"]]]],["stat",["call",["dot",["name","originCopy"],"copy"],[["dot",["name","this"],"origin"]]]],["stat",["call",["dot",["name","directionCopy"],"copy"],[["dot",["name","this"],"direction"]]]],["stat",["assign",true,["name","objMatrix"],["dot",["name","object"],"matrixWorld"]]],["stat",["assign",true,["name","vector"],["call",["dot",["call",["dot",["name","objMatrix"],"multiplyVector3"],[["call",["dot",["name","vector"],"copy"],[["dot",["name","face"],"centroid"]]]]],"subSelf"],[["name","originCopy"]]]]],["stat",["assign",true,["name","normal"],["call",["dot",["dot",["name","object"],"matrixRotationWorld"],"multiplyVector3"],[["call",["dot",["name","normal"],"copy"],[["dot",["name","face"],"normal"]]]]]]],["stat",["assign",true,["name","dot"],["call",["dot",["name","directionCopy"],"dot"],[["name","normal"]]]]],["if",["binary","<",["call",["dot",["name","Math"],"abs"],[["name","dot"]]],["name","precision"]],["continue",null],null],["stat",["assign",true,["name","scalar"],["binary","/",["call",["dot",["name","normal"],"dot"],[["name","vector"]]],["name","dot"]]]],["if",["binary","<",["name","scalar"],["num",0]],["continue",null],null],["if",["binary","||",["dot",["name","object"],"doubleSided"],["conditional",["dot",["name","object"],"flipSided"],["binary",">",["name","dot"],["num",0]],["binary","<",["name","dot"],["num",0]]]],["block",[["stat",["call",["dot",["name","intersectPoint"],"add"],[["name","originCopy"],["call",["dot",["name","directionCopy"],"multiplyScalar"],[["name","scalar"]]]]]],["if",["binary","instanceof",["name","face"],["dot",["name","THREE"],"Face3"]],["block",[["stat",["assign",true,["name","a"],["call",["dot",["name","objMatrix"],"multiplyVector3"],[["call",["dot",["name","a"],"copy"],[["sub",["name","vertices"],["dot",["name","face"],"a"]]]]]]]],["stat",["assign",true,["name","b"],["call",["dot",["name","objMatrix"],"multiplyVector3"],[["call",["dot",["name","b"],"copy"],[["sub",["name","vertices"],["dot",["name","face"],"b"]]]]]]]],["stat",["assign",true,["name","c"],["call",["dot",["name","objMatrix"],"multiplyVector3"],[["call",["dot",["name","c"],"copy"],[["sub",["name","vertices"],["dot",["name","face"],"c"]]]]]]]],["if",["call",["name","pointInFace3"],[["name","intersectPoint"],["name","a"],["name","b"],["name","c"]]],["block",[["stat",["assign",true,["name","intersect"],["object",[["distance",["call",["dot",["name","originCopy"],"distanceTo"],[["name","intersectPoint"]]]],["point",["call",["dot",["name","intersectPoint"],"clone"],[]]],["face",["name","face"]],["object",["name","object"]]]]]],["stat",["call",["dot",["name","intersects"],"push"],[["name","intersect"]]]]]],null]]],["if",["binary","instanceof",["name","face"],["dot",["name","THREE"],"Face4"]],["block",[["stat",["assign",true,["name","a"],["call",["dot",["name","objMatrix"],"multiplyVector3"],[["call",["dot",["name","a"],"copy"],[["sub",["name","vertices"],["dot",["name","face"],"a"]]]]]]]],["stat",["assign",true,["name","b"],["call",["dot",["name","objMatrix"],"multiplyVector3"],[["call",["dot",["name","b"],"copy"],[["sub",["name","vertices"],["dot",["name","face"],"b"]]]]]]]],["stat",["assign",true,["name","c"],["call",["dot",["name","objMatrix"],"multiplyVector3"],[["call",["dot",["name","c"],"copy"],[["sub",["name","vertices"],["dot",["name","face"],"c"]]]]]]]],["stat",["assign",true,["name","d"],["call",["dot",["name","objMatrix"],"multiplyVector3"],[["call",["dot",["name","d"],"copy"],[["sub",["name","vertices"],["dot",["name","face"],"d"]]]]]]]],["if",["binary","||",["call",["name","pointInFace3"],[["name","intersectPoint"],["name","a"],["name","b"],["name","d"]]],["call",["name","pointInFace3"],[["name","intersectPoint"],["name","b"],["name","c"],["name","d"]]]],["block",[["stat",["assign",true,["name","intersect"],["object",[["distance",["call",["dot",["name","originCopy"],"distanceTo"],[["name","intersectPoint"]]]],["point",["call",["dot",["name","intersectPoint"],"clone"],[]]],["face",["name","face"]],["object",["name","object"]]]]]],["stat",["call",["dot",["name","intersects"],"push"],[["name","intersect"]]]]]],null]]],null]]]],null]]]]]],null]],["return",["name","intersects"]]]]]],["stat",["assign",true,["dot",["name","this"],"intersectObjects"],["function",null,["objects"],[["var",[["intersects",["array",[]]]]],["for",["var",[["i",["num",0]],["l",["dot",["name","objects"],"length"]]]],["binary","<",["name","i"],["name","l"]],["unary-postfix","++",["name","i"]],["block",[["stat",["call",["dot",["dot",["dot",["name","Array"],"prototype"],"push"],"apply"],[["name","intersects"],["call",["dot",["name","this"],"intersectObject"],[["sub",["name","objects"],["name","i"]]]]]]]]]],["stat",["call",["dot",["name","intersects"],"sort"],[["function",null,["a","b"],[["return",["binary","-",["dot",["name","a"],"distance"],["dot",["name","b"],"distance"]]]]]]]],["return",["name","intersects"]]]]]],["var",[["v0",["new",["dot",["name","THREE"],"Vector3"],[]]],["v1",["new",["dot",["name","THREE"],"Vector3"],[]]],["v2",["new",["dot",["name","THREE"],"Vector3"],[]]]]],["var",[["dot"],["intersect"],["distance"]]],["defun","distanceFromIntersection",["origin","direction","position"],[["stat",["call",["dot",["name","v0"],"sub"],[["name","position"],["name","origin"]]]],["stat",["assign",true,["name","dot"],["call",["dot",["name","v0"],"dot"],[["name","direction"]]]]],["stat",["assign",true,["name","intersect"],["call",["dot",["name","v1"],"add"],[["name","origin"],["call",["dot",["call",["dot",["name","v2"],"copy"],[["name","direction"]]],"multiplyScalar"],[["name","dot"]]]]]]],["stat",["assign",true,["name","distance"],["call",["dot",["name","position"],"distanceTo"],[["name","intersect"]]]]],["return",["name","distance"]]]],["var",[["dot00"],["dot01"],["dot02"],["dot11"],["dot12"],["invDenom"],["u"],["v"]]],["defun","pointInFace3",["p","a","b","c"],[["stat",["call",["dot",["name","v0"],"sub"],[["name","c"],["name","a"]]]],["stat",["call",["dot",["name","v1"],"sub"],[["name","b"],["name","a"]]]],["stat",["call",["dot",["name","v2"],"sub"],[["name","p"],["name","a"]]]],["stat",["assign",true,["name","dot00"],["call",["dot",["name","v0"],"dot"],[["name","v0"]]]]],["stat",["assign",true,["name","dot01"],["call",["dot",["name","v0"],"dot"],[["name","v1"]]]]],["stat",["assign",true,["name","dot02"],["call",["dot",["name","v0"],"dot"],[["name","v2"]]]]],["stat",["assign",true,["name","dot11"],["call",["dot",["name","v1"],"dot"],[["name","v1"]]]]],["stat",["assign",true,["name","dot12"],["call",["dot",["name","v1"],"dot"],[["name","v2"]]]]],["stat",["assign",true,["name","invDenom"],["binary","/",["num",1],["binary","-",["binary","*",["name","dot00"],["name","dot11"]],["binary","*",["name","dot01"],["name","dot01"]]]]]],["stat",["assign",true,["name","u"],["binary","*",["binary","-",["binary","*",["name","dot11"],["name","dot02"]],["binary","*",["name","dot01"],["name","dot12"]]],["name","invDenom"]]]],["stat",["assign",true,["name","v"],["binary","*",["binary","-",["binary","*",["name","dot00"],["name","dot12"]],["binary","*",["name","dot01"],["name","dot02"]]],["name","invDenom"]]]],["return",["binary","&&",["binary","&&",["binary",">=",["name","u"],["num",0]],["binary",">=",["name","v"],["num",0]]],["binary","<",["binary","+",["name","u"],["name","v"]],["num",1]]]]]]]]]],["stat",["assign",true,["dot",["name","THREE"],"Rectangle"],["function",null,[],[["var",[["_left"],["_top"],["_right"],["_bottom"],["_width"],["_height"],["_isEmpty",["name","true"]]]],["defun","resize",[],[["stat",["assign",true,["name","_width"],["binary","-",["name","_right"],["name","_left"]]]],["stat",["assign",true,["name","_height"],["binary","-",["name","_bottom"],["name","_top"]]]]]],["stat",["assign",true,["dot",["name","this"],"getX"],["function",null,[],[["return",["name","_left"]]]]]],["stat",["assign",true,["dot",["name","this"],"getY"],["function",null,[],[["return",["name","_top"]]]]]],["stat",["assign",true,["dot",["name","this"],"getWidth"],["function",null,[],[["return",["name","_width"]]]]]],["stat",["assign",true,["dot",["name","this"],"getHeight"],["function",null,[],[["return",["name","_height"]]]]]],["stat",["assign",true,["dot",["name","this"],"getLeft"],["function",null,[],[["return",["name","_left"]]]]]],["stat",["assign",true,["dot",["name","this"],"getTop"],["function",null,[],[["return",["name","_top"]]]]]],["stat",["assign",true,["dot",["name","this"],"getRight"],["function",null,[],[["return",["name","_right"]]]]]],["stat",["assign",true,["dot",["name","this"],"getBottom"],["function",null,[],[["return",["name","_bottom"]]]]]],["stat",["assign",true,["dot",["name","this"],"set"],["function",null,["left","top","right","bottom"],[["stat",["assign",true,["name","_isEmpty"],["name","false"]]],["stat",["assign",true,["name","_left"],["name","left"]]],["stat",["assign",true,["name","_top"],["name","top"]]],["stat",["assign",true,["name","_right"],["name","right"]]],["stat",["assign",true,["name","_bottom"],["name","bottom"]]],["stat",["call",["name","resize"],[]]]]]]],["stat",["assign",true,["dot",["name","this"],"addPoint"],["function",null,["x","y"],[["if",["name","_isEmpty"],["block",[["stat",["assign",true,["name","_isEmpty"],["name","false"]]],["stat",["assign",true,["name","_left"],["name","x"]]],["stat",["assign",true,["name","_top"],["name","y"]]],["stat",["assign",true,["name","_right"],["name","x"]]],["stat",["assign",true,["name","_bottom"],["name","y"]]],["stat",["call",["name","resize"],[]]]]],["block",[["stat",["assign",true,["name","_left"],["conditional",["binary","<",["name","_left"],["name","x"]],["name","_left"],["name","x"]]]],["stat",["assign",true,["name","_top"],["conditional",["binary","<",["name","_top"],["name","y"]],["name","_top"],["name","y"]]]],["stat",["assign",true,["name","_right"],["conditional",["binary",">",["name","_right"],["name","x"]],["name","_right"],["name","x"]]]],["stat",["assign",true,["name","_bottom"],["conditional",["binary",">",["name","_bottom"],["name","y"]],["name","_bottom"],["name","y"]]]],["stat",["call",["name","resize"],[]]]]]]]]]],["stat",["assign",true,["dot",["name","this"],"add3Points"],["function",null,["x1","y1","x2","y2","x3","y3"],[["if",["name","_isEmpty"],["block",[["stat",["assign",true,["name","_isEmpty"],["name","false"]]],["stat",["assign",true,["name","_left"],["conditional",["binary","<",["name","x1"],["name","x2"]],["conditional",["binary","<",["name","x1"],["name","x3"]],["name","x1"],["name","x3"]],["conditional",["binary","<",["name","x2"],["name","x3"]],["name","x2"],["name","x3"]]]]],["stat",["assign",true,["name","_top"],["conditional",["binary","<",["name","y1"],["name","y2"]],["conditional",["binary","<",["name","y1"],["name","y3"]],["name","y1"],["name","y3"]],["conditional",["binary","<",["name","y2"],["name","y3"]],["name","y2"],["name","y3"]]]]],["stat",["assign",true,["name","_right"],["conditional",["binary",">",["name","x1"],["name","x2"]],["conditional",["binary",">",["name","x1"],["name","x3"]],["name","x1"],["name","x3"]],["conditional",["binary",">",["name","x2"],["name","x3"]],["name","x2"],["name","x3"]]]]],["stat",["assign",true,["name","_bottom"],["conditional",["binary",">",["name","y1"],["name","y2"]],["conditional",["binary",">",["name","y1"],["name","y3"]],["name","y1"],["name","y3"]],["conditional",["binary",">",["name","y2"],["name","y3"]],["name","y2"],["name","y3"]]]]],["stat",["call",["name","resize"],[]]]]],["block",[["stat",["assign",true,["name","_left"],["conditional",["binary","<",["name","x1"],["name","x2"]],["conditional",["binary","<",["name","x1"],["name","x3"]],["conditional",["binary","<",["name","x1"],["name","_left"]],["name","x1"],["name","_left"]],["conditional",["binary","<",["name","x3"],["name","_left"]],["name","x3"],["name","_left"]]],["conditional",["binary","<",["name","x2"],["name","x3"]],["conditional",["binary","<",["name","x2"],["name","_left"]],["name","x2"],["name","_left"]],["conditional",["binary","<",["name","x3"],["name","_left"]],["name","x3"],["name","_left"]]]]]],["stat",["assign",true,["name","_top"],["conditional",["binary","<",["name","y1"],["name","y2"]],["conditional",["binary","<",["name","y1"],["name","y3"]],["conditional",["binary","<",["name","y1"],["name","_top"]],["name","y1"],["name","_top"]],["conditional",["binary","<",["name","y3"],["name","_top"]],["name","y3"],["name","_top"]]],["conditional",["binary","<",["name","y2"],["name","y3"]],["conditional",["binary","<",["name","y2"],["name","_top"]],["name","y2"],["name","_top"]],["conditional",["binary","<",["name","y3"],["name","_top"]],["name","y3"],["name","_top"]]]]]],["stat",["assign",true,["name","_right"],["conditional",["binary",">",["name","x1"],["name","x2"]],["conditional",["binary",">",["name","x1"],["name","x3"]],["conditional",["binary",">",["name","x1"],["name","_right"]],["name","x1"],["name","_right"]],["conditional",["binary",">",["name","x3"],["name","_right"]],["name","x3"],["name","_right"]]],["conditional",["binary",">",["name","x2"],["name","x3"]],["conditional",["binary",">",["name","x2"],["name","_right"]],["name","x2"],["name","_right"]],["conditional",["binary",">",["name","x3"],["name","_right"]],["name","x3"],["name","_right"]]]]]],["stat",["assign",true,["name","_bottom"],["conditional",["binary",">",["name","y1"],["name","y2"]],["conditional",["binary",">",["name","y1"],["name","y3"]],["conditional",["binary",">",["name","y1"],["name","_bottom"]],["name","y1"],["name","_bottom"]],["conditional",["binary",">",["name","y3"],["name","_bottom"]],["name","y3"],["name","_bottom"]]],["conditional",["binary",">",["name","y2"],["name","y3"]],["conditional",["binary",">",["name","y2"],["name","_bottom"]],["name","y2"],["name","_bottom"]],["conditional",["binary",">",["name","y3"],["name","_bottom"]],["name","y3"],["name","_bottom"]]]]]],["stat",["call",["name","resize"],[]]]]]],["block"]]]]],["stat",["assign",true,["dot",["name","this"],"addRectangle"],["function",null,["r"],[["if",["name","_isEmpty"],["block",[["stat",["assign",true,["name","_isEmpty"],["name","false"]]],["stat",["assign",true,["name","_left"],["call",["dot",["name","r"],"getLeft"],[]]]],["stat",["assign",true,["name","_top"],["call",["dot",["name","r"],"getTop"],[]]]],["stat",["assign",true,["name","_right"],["call",["dot",["name","r"],"getRight"],[]]]],["stat",["assign",true,["name","_bottom"],["call",["dot",["name","r"],"getBottom"],[]]]],["stat",["call",["name","resize"],[]]]]],["block",[["stat",["assign",true,["name","_left"],["conditional",["binary","<",["name","_left"],["call",["dot",["name","r"],"getLeft"],[]]],["name","_left"],["call",["dot",["name","r"],"getLeft"],[]]]]],["stat",["assign",true,["name","_top"],["conditional",["binary","<",["name","_top"],["call",["dot",["name","r"],"getTop"],[]]],["name","_top"],["call",["dot",["name","r"],"getTop"],[]]]]],["stat",["assign",true,["name","_right"],["conditional",["binary",">",["name","_right"],["call",["dot",["name","r"],"getRight"],[]]],["name","_right"],["call",["dot",["name","r"],"getRight"],[]]]]],["stat",["assign",true,["name","_bottom"],["conditional",["binary",">",["name","_bottom"],["call",["dot",["name","r"],"getBottom"],[]]],["name","_bottom"],["call",["dot",["name","r"],"getBottom"],[]]]]],["stat",["call",["name","resize"],[]]]]]]]]]],["stat",["assign",true,["dot",["name","this"],"inflate"],["function",null,["v"],[["stat",["assign","-",["name","_left"],["name","v"]]],["stat",["assign","-",["name","_top"],["name","v"]]],["stat",["assign","+",["name","_right"],["name","v"]]],["stat",["assign","+",["name","_bottom"],["name","v"]]],["stat",["call",["name","resize"],[]]]]]]],["stat",["assign",true,["dot",["name","this"],"minSelf"],["function",null,["r"],[["stat",["assign",true,["name","_left"],["conditional",["binary",">",["name","_left"],["call",["dot",["name","r"],"getLeft"],[]]],["name","_left"],["call",["dot",["name","r"],"getLeft"],[]]]]],["stat",["assign",true,["name","_top"],["conditional",["binary",">",["name","_top"],["call",["dot",["name","r"],"getTop"],[]]],["name","_top"],["call",["dot",["name","r"],"getTop"],[]]]]],["stat",["assign",true,["name","_right"],["conditional",["binary","<",["name","_right"],["call",["dot",["name","r"],"getRight"],[]]],["name","_right"],["call",["dot",["name","r"],"getRight"],[]]]]],["stat",["assign",true,["name","_bottom"],["conditional",["binary","<",["name","_bottom"],["call",["dot",["name","r"],"getBottom"],[]]],["name","_bottom"],["call",["dot",["name","r"],"getBottom"],[]]]]],["stat",["call",["name","resize"],[]]]]]]],["stat",["assign",true,["dot",["name","this"],"intersects"],["function",null,["r"],[["if",["binary","<",["name","_right"],["call",["dot",["name","r"],"getLeft"],[]]],["return",["name","false"]],null],["if",["binary",">",["name","_left"],["call",["dot",["name","r"],"getRight"],[]]],["return",["name","false"]],null],["if",["binary","<",["name","_bottom"],["call",["dot",["name","r"],"getTop"],[]]],["return",["name","false"]],null],["if",["binary",">",["name","_top"],["call",["dot",["name","r"],"getBottom"],[]]],["return",["name","false"]],null],["return",["name","true"]]]]]],["stat",["assign",true,["dot",["name","this"],"empty"],["function",null,[],[["stat",["assign",true,["name","_isEmpty"],["name","true"]]],["stat",["assign",true,["name","_left"],["num",0]]],["stat",["assign",true,["name","_top"],["num",0]]],["stat",["assign",true,["name","_right"],["num",0]]],["stat",["assign",true,["name","_bottom"],["num",0]]],["stat",["call",["name","resize"],[]]]]]]],["stat",["assign",true,["dot",["name","this"],"isEmpty"],["function",null,[],[["return",["name","_isEmpty"]]]]]]]]]],["stat",["assign",true,["dot",["name","THREE"],"Math"],["object",[["clamp",["function",null,["x","a","b"],[["return",["conditional",["binary","<",["name","x"],["name","a"]],["name","a"],["conditional",["binary",">",["name","x"],["name","b"]],["name","b"],["name","x"]]]]]]],["clampBottom",["function",null,["x","a"],[["return",["conditional",["binary","<",["name","x"],["name","a"]],["name","a"],["name","x"]]]]]],["mapLinear",["function",null,["x","a1","a2","b1","b2"],[["return",["binary","+",["name","b1"],["binary","/",["binary","*",["binary","-",["name","x"],["name","a1"]],["binary","-",["name","b2"],["name","b1"]]],["binary","-",["name","a2"],["name","a1"]]]]]]]],["random16",["function",null,[],[["return",["binary","/",["binary","+",["binary","*",["num",65280],["call",["dot",["name","Math"],"random"],[]]],["binary","*",["num",255],["call",["dot",["name","Math"],"random"],[]]]],["num",65535]]]]]],["randInt",["function",null,["low","high"],[["return",["binary","+",["name","low"],["call",["dot",["name","Math"],"floor"],[["binary","*",["call",["dot",["name","Math"],"random"],[]],["binary","+",["binary","-",["name","high"],["name","low"]],["num",1]]]]]]]]]],["randFloat",["function",null,["low","high"],[["return",["binary","+",["name","low"],["binary","*",["call",["dot",["name","Math"],"random"],[]],["binary","-",["name","high"],["name","low"]]]]]]]],["randFloatSpread",["function",null,["range"],[["return",["binary","*",["name","range"],["binary","-",["num",0.5],["call",["dot",["name","Math"],"random"],[]]]]]]]],["sign",["function",null,["x"],[["return",["conditional",["binary","<",["name","x"],["num",0]],["unary-prefix","-",["num",1]],["conditional",["binary",">",["name","x"],["num",0]],["num",1],["num",0]]]]]]]]]]],["stat",["assign",true,["dot",["name","THREE"],"Matrix3"],["function",null,[],[["stat",["assign",true,["dot",["name","this"],"elements"],["new",["name","Float32Array"],[["num",9]]]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"Matrix3"],"prototype"],["object",[["constructor",["dot",["name","THREE"],"Matrix3"]],["getInverse",["function",null,["matrix"],[["var",[["me",["dot",["name","matrix"],"elements"]]]],["var",[["a11",["binary","-",["binary","*",["sub",["name","me"],["num",10]],["sub",["name","me"],["num",5]]],["binary","*",["sub",["name","me"],["num",6]],["sub",["name","me"],["num",9]]]]]]],["var",[["a21",["binary","+",["binary","*",["unary-prefix","-",["sub",["name","me"],["num",10]]],["sub",["name","me"],["num",1]]],["binary","*",["sub",["name","me"],["num",2]],["sub",["name","me"],["num",9]]]]]]],["var",[["a31",["binary","-",["binary","*",["sub",["name","me"],["num",6]],["sub",["name","me"],["num",1]]],["binary","*",["sub",["name","me"],["num",2]],["sub",["name","me"],["num",5]]]]]]],["var",[["a12",["binary","+",["binary","*",["unary-prefix","-",["sub",["name","me"],["num",10]]],["sub",["name","me"],["num",4]]],["binary","*",["sub",["name","me"],["num",6]],["sub",["name","me"],["num",8]]]]]]],["var",[["a22",["binary","-",["binary","*",["sub",["name","me"],["num",10]],["sub",["name","me"],["num",0]]],["binary","*",["sub",["name","me"],["num",2]],["sub",["name","me"],["num",8]]]]]]],["var",[["a32",["binary","+",["binary","*",["unary-prefix","-",["sub",["name","me"],["num",6]]],["sub",["name","me"],["num",0]]],["binary","*",["sub",["name","me"],["num",2]],["sub",["name","me"],["num",4]]]]]]],["var",[["a13",["binary","-",["binary","*",["sub",["name","me"],["num",9]],["sub",["name","me"],["num",4]]],["binary","*",["sub",["name","me"],["num",5]],["sub",["name","me"],["num",8]]]]]]],["var",[["a23",["binary","+",["binary","*",["unary-prefix","-",["sub",["name","me"],["num",9]]],["sub",["name","me"],["num",0]]],["binary","*",["sub",["name","me"],["num",1]],["sub",["name","me"],["num",8]]]]]]],["var",[["a33",["binary","-",["binary","*",["sub",["name","me"],["num",5]],["sub",["name","me"],["num",0]]],["binary","*",["sub",["name","me"],["num",1]],["sub",["name","me"],["num",4]]]]]]],["var",[["det",["binary","+",["binary","+",["binary","*",["sub",["name","me"],["num",0]],["name","a11"]],["binary","*",["sub",["name","me"],["num",1]],["name","a12"]]],["binary","*",["sub",["name","me"],["num",2]],["name","a13"]]]]]],["if",["binary","===",["name","det"],["num",0]],["block",[["stat",["call",["dot",["name","console"],"warn"],[["string","Matrix3.getInverse(): determinant == 0"]]]]]],null],["var",[["idet",["binary","/",["num",1],["name","det"]]]]],["var",[["m",["dot",["name","this"],"elements"]]]],["stat",["assign",true,["sub",["name","m"],["num",0]],["binary","*",["name","idet"],["name","a11"]]]],["stat",["assign",true,["sub",["name","m"],["num",1]],["binary","*",["name","idet"],["name","a21"]]]],["stat",["assign",true,["sub",["name","m"],["num",2]],["binary","*",["name","idet"],["name","a31"]]]],["stat",["assign",true,["sub",["name","m"],["num",3]],["binary","*",["name","idet"],["name","a12"]]]],["stat",["assign",true,["sub",["name","m"],["num",4]],["binary","*",["name","idet"],["name","a22"]]]],["stat",["assign",true,["sub",["name","m"],["num",5]],["binary","*",["name","idet"],["name","a32"]]]],["stat",["assign",true,["sub",["name","m"],["num",6]],["binary","*",["name","idet"],["name","a13"]]]],["stat",["assign",true,["sub",["name","m"],["num",7]],["binary","*",["name","idet"],["name","a23"]]]],["stat",["assign",true,["sub",["name","m"],["num",8]],["binary","*",["name","idet"],["name","a33"]]]],["return",["name","this"]]]]],["transpose",["function",null,[],[["var",[["tmp"],["m",["dot",["name","this"],"elements"]]]],["stat",["assign",true,["name","tmp"],["sub",["name","m"],["num",1]]]],["stat",["assign",true,["sub",["name","m"],["num",1]],["sub",["name","m"],["num",3]]]],["stat",["assign",true,["sub",["name","m"],["num",3]],["name","tmp"]]],["stat",["assign",true,["name","tmp"],["sub",["name","m"],["num",2]]]],["stat",["assign",true,["sub",["name","m"],["num",2]],["sub",["name","m"],["num",6]]]],["stat",["assign",true,["sub",["name","m"],["num",6]],["name","tmp"]]],["stat",["assign",true,["name","tmp"],["sub",["name","m"],["num",5]]]],["stat",["assign",true,["sub",["name","m"],["num",5]],["sub",["name","m"],["num",7]]]],["stat",["assign",true,["sub",["name","m"],["num",7]],["name","tmp"]]],["return",["name","this"]]]]],["transposeIntoArray",["function",null,["r"],[["var",[["m",["dot",["name","this"],"m"]]]],["stat",["assign",true,["sub",["name","r"],["num",0]],["sub",["name","m"],["num",0]]]],["stat",["assign",true,["sub",["name","r"],["num",1]],["sub",["name","m"],["num",3]]]],["stat",["assign",true,["sub",["name","r"],["num",2]],["sub",["name","m"],["num",6]]]],["stat",["assign",true,["sub",["name","r"],["num",3]],["sub",["name","m"],["num",1]]]],["stat",["assign",true,["sub",["name","r"],["num",4]],["sub",["name","m"],["num",4]]]],["stat",["assign",true,["sub",["name","r"],["num",5]],["sub",["name","m"],["num",7]]]],["stat",["assign",true,["sub",["name","r"],["num",6]],["sub",["name","m"],["num",2]]]],["stat",["assign",true,["sub",["name","r"],["num",7]],["sub",["name","m"],["num",5]]]],["stat",["assign",true,["sub",["name","r"],["num",8]],["sub",["name","m"],["num",8]]]],["return",["name","this"]]]]]]]]],["stat",["assign",true,["dot",["name","THREE"],"Matrix4"],["function",null,["n11","n12","n13","n14","n21","n22","n23","n24","n31","n32","n33","n34","n41","n42","n43","n44"],[["stat",["assign",true,["dot",["name","this"],"elements"],["new",["name","Float32Array"],[["num",16]]]]],["stat",["call",["dot",["name","this"],"set"],[["conditional",["binary","!==",["name","n11"],["name","undefined"]],["name","n11"],["num",1]],["binary","||",["name","n12"],["num",0]],["binary","||",["name","n13"],["num",0]],["binary","||",["name","n14"],["num",0]],["binary","||",["name","n21"],["num",0]],["conditional",["binary","!==",["name","n22"],["name","undefined"]],["name","n22"],["num",1]],["binary","||",["name","n23"],["num",0]],["binary","||",["name","n24"],["num",0]],["binary","||",["name","n31"],["num",0]],["binary","||",["name","n32"],["num",0]],["conditional",["binary","!==",["name","n33"],["name","undefined"]],["name","n33"],["num",1]],["binary","||",["name","n34"],["num",0]],["binary","||",["name","n41"],["num",0]],["binary","||",["name","n42"],["num",0]],["binary","||",["name","n43"],["num",0]],["conditional",["binary","!==",["name","n44"],["name","undefined"]],["name","n44"],["num",1]]]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"Matrix4"],"prototype"],["object",[["constructor",["dot",["name","THREE"],"Matrix4"]],["set",["function",null,["n11","n12","n13","n14","n21","n22","n23","n24","n31","n32","n33","n34","n41","n42","n43","n44"],[["var",[["te",["dot",["name","this"],"elements"]]]],["stat",["assign",true,["sub",["name","te"],["num",0]],["name","n11"]]],["stat",["assign",true,["sub",["name","te"],["num",4]],["name","n12"]]],["stat",["assign",true,["sub",["name","te"],["num",8]],["name","n13"]]],["stat",["assign",true,["sub",["name","te"],["num",12]],["name","n14"]]],["stat",["assign",true,["sub",["name","te"],["num",1]],["name","n21"]]],["stat",["assign",true,["sub",["name","te"],["num",5]],["name","n22"]]],["stat",["assign",true,["sub",["name","te"],["num",9]],["name","n23"]]],["stat",["assign",true,["sub",["name","te"],["num",13]],["name","n24"]]],["stat",["assign",true,["sub",["name","te"],["num",2]],["name","n31"]]],["stat",["assign",true,["sub",["name","te"],["num",6]],["name","n32"]]],["stat",["assign",true,["sub",["name","te"],["num",10]],["name","n33"]]],["stat",["assign",true,["sub",["name","te"],["num",14]],["name","n34"]]],["stat",["assign",true,["sub",["name","te"],["num",3]],["name","n41"]]],["stat",["assign",true,["sub",["name","te"],["num",7]],["name","n42"]]],["stat",["assign",true,["sub",["name","te"],["num",11]],["name","n43"]]],["stat",["assign",true,["sub",["name","te"],["num",15]],["name","n44"]]],["return",["name","this"]]]]],["identity",["function",null,[],[["stat",["call",["dot",["name","this"],"set"],[["num",1],["num",0],["num",0],["num",0],["num",0],["num",1],["num",0],["num",0],["num",0],["num",0],["num",1],["num",0],["num",0],["num",0],["num",0],["num",1]]]],["return",["name","this"]]]]],["copy",["function",null,["m"],[["var",[["me",["dot",["name","m"],"elements"]]]],["stat",["call",["dot",["name","this"],"set"],[["sub",["name","me"],["num",0]],["sub",["name","me"],["num",4]],["sub",["name","me"],["num",8]],["sub",["name","me"],["num",12]],["sub",["name","me"],["num",1]],["sub",["name","me"],["num",5]],["sub",["name","me"],["num",9]],["sub",["name","me"],["num",13]],["sub",["name","me"],["num",2]],["sub",["name","me"],["num",6]],["sub",["name","me"],["num",10]],["sub",["name","me"],["num",14]],["sub",["name","me"],["num",3]],["sub",["name","me"],["num",7]],["sub",["name","me"],["num",11]],["sub",["name","me"],["num",15]]]]],["return",["name","this"]]]]],["lookAt",["function",null,["eye","target","up"],[["var",[["te",["dot",["name","this"],"elements"]]]],["var",[["x",["dot",["dot",["name","THREE"],"Matrix4"],"__v1"]]]],["var",[["y",["dot",["dot",["name","THREE"],"Matrix4"],"__v2"]]]],["var",[["z",["dot",["dot",["name","THREE"],"Matrix4"],"__v3"]]]],["stat",["call",["dot",["call",["dot",["name","z"],"sub"],[["name","eye"],["name","target"]]],"normalize"],[]]],["if",["binary","===",["call",["dot",["name","z"],"length"],[]],["num",0]],["block",[["stat",["assign",true,["dot",["name","z"],"z"],["num",1]]]]],null],["stat",["call",["dot",["call",["dot",["name","x"],"cross"],[["name","up"],["name","z"]]],"normalize"],[]]],["if",["binary","===",["call",["dot",["name","x"],"length"],[]],["num",0]],["block",[["stat",["assign","+",["dot",["name","z"],"x"],["num",0.0001]]],["stat",["call",["dot",["call",["dot",["name","x"],"cross"],[["name","up"],["name","z"]]],"normalize"],[]]]]],null],["stat",["call",["dot",["name","y"],"cross"],[["name","z"],["name","x"]]]],["stat",["assign",true,["sub",["name","te"],["num",0]],["dot",["name","x"],"x"]]],["stat",["assign",true,["sub",["name","te"],["num",4]],["dot",["name","y"],"x"]]],["stat",["assign",true,["sub",["name","te"],["num",8]],["dot",["name","z"],"x"]]],["stat",["assign",true,["sub",["name","te"],["num",1]],["dot",["name","x"],"y"]]],["stat",["assign",true,["sub",["name","te"],["num",5]],["dot",["name","y"],"y"]]],["stat",["assign",true,["sub",["name","te"],["num",9]],["dot",["name","z"],"y"]]],["stat",["assign",true,["sub",["name","te"],["num",2]],["dot",["name","x"],"z"]]],["stat",["assign",true,["sub",["name","te"],["num",6]],["dot",["name","y"],"z"]]],["stat",["assign",true,["sub",["name","te"],["num",10]],["dot",["name","z"],"z"]]],["return",["name","this"]]]]],["multiply",["function",null,["a","b"],[["var",[["ae",["dot",["name","a"],"elements"]]]],["var",[["be",["dot",["name","b"],"elements"]]]],["var",[["te",["dot",["name","this"],"elements"]]]],["var",[["a11",["sub",["name","ae"],["num",0]]],["a12",["sub",["name","ae"],["num",4]]],["a13",["sub",["name","ae"],["num",8]]],["a14",["sub",["name","ae"],["num",12]]]]],["var",[["a21",["sub",["name","ae"],["num",1]]],["a22",["sub",["name","ae"],["num",5]]],["a23",["sub",["name","ae"],["num",9]]],["a24",["sub",["name","ae"],["num",13]]]]],["var",[["a31",["sub",["name","ae"],["num",2]]],["a32",["sub",["name","ae"],["num",6]]],["a33",["sub",["name","ae"],["num",10]]],["a34",["sub",["name","ae"],["num",14]]]]],["var",[["a41",["sub",["name","ae"],["num",3]]],["a42",["sub",["name","ae"],["num",7]]],["a43",["sub",["name","ae"],["num",11]]],["a44",["sub",["name","ae"],["num",15]]]]],["var",[["b11",["sub",["name","be"],["num",0]]],["b12",["sub",["name","be"],["num",4]]],["b13",["sub",["name","be"],["num",8]]],["b14",["sub",["name","be"],["num",12]]]]],["var",[["b21",["sub",["name","be"],["num",1]]],["b22",["sub",["name","be"],["num",5]]],["b23",["sub",["name","be"],["num",9]]],["b24",["sub",["name","be"],["num",13]]]]],["var",[["b31",["sub",["name","be"],["num",2]]],["b32",["sub",["name","be"],["num",6]]],["b33",["sub",["name","be"],["num",10]]],["b34",["sub",["name","be"],["num",14]]]]],["var",[["b41",["sub",["name","be"],["num",3]]],["b42",["sub",["name","be"],["num",7]]],["b43",["sub",["name","be"],["num",11]]],["b44",["sub",["name","be"],["num",15]]]]],["stat",["assign",true,["sub",["name","te"],["num",0]],["binary","+",["binary","+",["binary","+",["binary","*",["name","a11"],["name","b11"]],["binary","*",["name","a12"],["name","b21"]]],["binary","*",["name","a13"],["name","b31"]]],["binary","*",["name","a14"],["name","b41"]]]]],["stat",["assign",true,["sub",["name","te"],["num",4]],["binary","+",["binary","+",["binary","+",["binary","*",["name","a11"],["name","b12"]],["binary","*",["name","a12"],["name","b22"]]],["binary","*",["name","a13"],["name","b32"]]],["binary","*",["name","a14"],["name","b42"]]]]],["stat",["assign",true,["sub",["name","te"],["num",8]],["binary","+",["binary","+",["binary","+",["binary","*",["name","a11"],["name","b13"]],["binary","*",["name","a12"],["name","b23"]]],["binary","*",["name","a13"],["name","b33"]]],["binary","*",["name","a14"],["name","b43"]]]]],["stat",["assign",true,["sub",["name","te"],["num",12]],["binary","+",["binary","+",["binary","+",["binary","*",["name","a11"],["name","b14"]],["binary","*",["name","a12"],["name","b24"]]],["binary","*",["name","a13"],["name","b34"]]],["binary","*",["name","a14"],["name","b44"]]]]],["stat",["assign",true,["sub",["name","te"],["num",1]],["binary","+",["binary","+",["binary","+",["binary","*",["name","a21"],["name","b11"]],["binary","*",["name","a22"],["name","b21"]]],["binary","*",["name","a23"],["name","b31"]]],["binary","*",["name","a24"],["name","b41"]]]]],["stat",["assign",true,["sub",["name","te"],["num",5]],["binary","+",["binary","+",["binary","+",["binary","*",["name","a21"],["name","b12"]],["binary","*",["name","a22"],["name","b22"]]],["binary","*",["name","a23"],["name","b32"]]],["binary","*",["name","a24"],["name","b42"]]]]],["stat",["assign",true,["sub",["name","te"],["num",9]],["binary","+",["binary","+",["binary","+",["binary","*",["name","a21"],["name","b13"]],["binary","*",["name","a22"],["name","b23"]]],["binary","*",["name","a23"],["name","b33"]]],["binary","*",["name","a24"],["name","b43"]]]]],["stat",["assign",true,["sub",["name","te"],["num",13]],["binary","+",["binary","+",["binary","+",["binary","*",["name","a21"],["name","b14"]],["binary","*",["name","a22"],["name","b24"]]],["binary","*",["name","a23"],["name","b34"]]],["binary","*",["name","a24"],["name","b44"]]]]],["stat",["assign",true,["sub",["name","te"],["num",2]],["binary","+",["binary","+",["binary","+",["binary","*",["name","a31"],["name","b11"]],["binary","*",["name","a32"],["name","b21"]]],["binary","*",["name","a33"],["name","b31"]]],["binary","*",["name","a34"],["name","b41"]]]]],["stat",["assign",true,["sub",["name","te"],["num",6]],["binary","+",["binary","+",["binary","+",["binary","*",["name","a31"],["name","b12"]],["binary","*",["name","a32"],["name","b22"]]],["binary","*",["name","a33"],["name","b32"]]],["binary","*",["name","a34"],["name","b42"]]]]],["stat",["assign",true,["sub",["name","te"],["num",10]],["binary","+",["binary","+",["binary","+",["binary","*",["name","a31"],["name","b13"]],["binary","*",["name","a32"],["name","b23"]]],["binary","*",["name","a33"],["name","b33"]]],["binary","*",["name","a34"],["name","b43"]]]]],["stat",["assign",true,["sub",["name","te"],["num",14]],["binary","+",["binary","+",["binary","+",["binary","*",["name","a31"],["name","b14"]],["binary","*",["name","a32"],["name","b24"]]],["binary","*",["name","a33"],["name","b34"]]],["binary","*",["name","a34"],["name","b44"]]]]],["stat",["assign",true,["sub",["name","te"],["num",3]],["binary","+",["binary","+",["binary","+",["binary","*",["name","a41"],["name","b11"]],["binary","*",["name","a42"],["name","b21"]]],["binary","*",["name","a43"],["name","b31"]]],["binary","*",["name","a44"],["name","b41"]]]]],["stat",["assign",true,["sub",["name","te"],["num",7]],["binary","+",["binary","+",["binary","+",["binary","*",["name","a41"],["name","b12"]],["binary","*",["name","a42"],["name","b22"]]],["binary","*",["name","a43"],["name","b32"]]],["binary","*",["name","a44"],["name","b42"]]]]],["stat",["assign",true,["sub",["name","te"],["num",11]],["binary","+",["binary","+",["binary","+",["binary","*",["name","a41"],["name","b13"]],["binary","*",["name","a42"],["name","b23"]]],["binary","*",["name","a43"],["name","b33"]]],["binary","*",["name","a44"],["name","b43"]]]]],["stat",["assign",true,["sub",["name","te"],["num",15]],["binary","+",["binary","+",["binary","+",["binary","*",["name","a41"],["name","b14"]],["binary","*",["name","a42"],["name","b24"]]],["binary","*",["name","a43"],["name","b34"]]],["binary","*",["name","a44"],["name","b44"]]]]],["return",["name","this"]]]]],["multiplySelf",["function",null,["m"],[["return",["call",["dot",["name","this"],"multiply"],[["name","this"],["name","m"]]]]]]],["multiplyToArray",["function",null,["a","b","r"],[["var",[["te",["dot",["name","this"],"elements"]]]],["stat",["call",["dot",["name","this"],"multiply"],[["name","a"],["name","b"]]]],["stat",["assign",true,["sub",["name","r"],["num",0]],["sub",["name","te"],["num",0]]]],["stat",["assign",true,["sub",["name","r"],["num",1]],["sub",["name","te"],["num",1]]]],["stat",["assign",true,["sub",["name","r"],["num",2]],["sub",["name","te"],["num",2]]]],["stat",["assign",true,["sub",["name","r"],["num",3]],["sub",["name","te"],["num",3]]]],["stat",["assign",true,["sub",["name","r"],["num",4]],["sub",["name","te"],["num",4]]]],["stat",["assign",true,["sub",["name","r"],["num",5]],["sub",["name","te"],["num",5]]]],["stat",["assign",true,["sub",["name","r"],["num",6]],["sub",["name","te"],["num",6]]]],["stat",["assign",true,["sub",["name","r"],["num",7]],["sub",["name","te"],["num",7]]]],["stat",["assign",true,["sub",["name","r"],["num",8]],["sub",["name","te"],["num",8]]]],["stat",["assign",true,["sub",["name","r"],["num",9]],["sub",["name","te"],["num",9]]]],["stat",["assign",true,["sub",["name","r"],["num",10]],["sub",["name","te"],["num",10]]]],["stat",["assign",true,["sub",["name","r"],["num",11]],["sub",["name","te"],["num",11]]]],["stat",["assign",true,["sub",["name","r"],["num",12]],["sub",["name","te"],["num",12]]]],["stat",["assign",true,["sub",["name","r"],["num",13]],["sub",["name","te"],["num",13]]]],["stat",["assign",true,["sub",["name","r"],["num",14]],["sub",["name","te"],["num",14]]]],["stat",["assign",true,["sub",["name","r"],["num",15]],["sub",["name","te"],["num",15]]]],["return",["name","this"]]]]],["multiplyScalar",["function",null,["s"],[["var",[["te",["dot",["name","this"],"elements"]]]],["stat",["assign","*",["sub",["name","te"],["num",0]],["name","s"]]],["stat",["assign","*",["sub",["name","te"],["num",4]],["name","s"]]],["stat",["assign","*",["sub",["name","te"],["num",8]],["name","s"]]],["stat",["assign","*",["sub",["name","te"],["num",12]],["name","s"]]],["stat",["assign","*",["sub",["name","te"],["num",1]],["name","s"]]],["stat",["assign","*",["sub",["name","te"],["num",5]],["name","s"]]],["stat",["assign","*",["sub",["name","te"],["num",9]],["name","s"]]],["stat",["assign","*",["sub",["name","te"],["num",13]],["name","s"]]],["stat",["assign","*",["sub",["name","te"],["num",2]],["name","s"]]],["stat",["assign","*",["sub",["name","te"],["num",6]],["name","s"]]],["stat",["assign","*",["sub",["name","te"],["num",10]],["name","s"]]],["stat",["assign","*",["sub",["name","te"],["num",14]],["name","s"]]],["stat",["assign","*",["sub",["name","te"],["num",3]],["name","s"]]],["stat",["assign","*",["sub",["name","te"],["num",7]],["name","s"]]],["stat",["assign","*",["sub",["name","te"],["num",11]],["name","s"]]],["stat",["assign","*",["sub",["name","te"],["num",15]],["name","s"]]],["return",["name","this"]]]]],["multiplyVector3",["function",null,["v"],[["var",[["te",["dot",["name","this"],"elements"]]]],["var",[["vx",["dot",["name","v"],"x"]],["vy",["dot",["name","v"],"y"]],["vz",["dot",["name","v"],"z"]]]],["var",[["d",["binary","/",["num",1],["binary","+",["binary","+",["binary","+",["binary","*",["sub",["name","te"],["num",3]],["name","vx"]],["binary","*",["sub",["name","te"],["num",7]],["name","vy"]]],["binary","*",["sub",["name","te"],["num",11]],["name","vz"]]],["sub",["name","te"],["num",15]]]]]]],["stat",["assign",true,["dot",["name","v"],"x"],["binary","*",["binary","+",["binary","+",["binary","+",["binary","*",["sub",["name","te"],["num",0]],["name","vx"]],["binary","*",["sub",["name","te"],["num",4]],["name","vy"]]],["binary","*",["sub",["name","te"],["num",8]],["name","vz"]]],["sub",["name","te"],["num",12]]],["name","d"]]]],["stat",["assign",true,["dot",["name","v"],"y"],["binary","*",["binary","+",["binary","+",["binary","+",["binary","*",["sub",["name","te"],["num",1]],["name","vx"]],["binary","*",["sub",["name","te"],["num",5]],["name","vy"]]],["binary","*",["sub",["name","te"],["num",9]],["name","vz"]]],["sub",["name","te"],["num",13]]],["name","d"]]]],["stat",["assign",true,["dot",["name","v"],"z"],["binary","*",["binary","+",["binary","+",["binary","+",["binary","*",["sub",["name","te"],["num",2]],["name","vx"]],["binary","*",["sub",["name","te"],["num",6]],["name","vy"]]],["binary","*",["sub",["name","te"],["num",10]],["name","vz"]]],["sub",["name","te"],["num",14]]],["name","d"]]]],["return",["name","v"]]]]],["multiplyVector4",["function",null,["v"],[["var",[["te",["dot",["name","this"],"elements"]]]],["var",[["vx",["dot",["name","v"],"x"]],["vy",["dot",["name","v"],"y"]],["vz",["dot",["name","v"],"z"]],["vw",["dot",["name","v"],"w"]]]],["stat",["assign",true,["dot",["name","v"],"x"],["binary","+",["binary","+",["binary","+",["binary","*",["sub",["name","te"],["num",0]],["name","vx"]],["binary","*",["sub",["name","te"],["num",4]],["name","vy"]]],["binary","*",["sub",["name","te"],["num",8]],["name","vz"]]],["binary","*",["sub",["name","te"],["num",12]],["name","vw"]]]]],["stat",["assign",true,["dot",["name","v"],"y"],["binary","+",["binary","+",["binary","+",["binary","*",["sub",["name","te"],["num",1]],["name","vx"]],["binary","*",["sub",["name","te"],["num",5]],["name","vy"]]],["binary","*",["sub",["name","te"],["num",9]],["name","vz"]]],["binary","*",["sub",["name","te"],["num",13]],["name","vw"]]]]],["stat",["assign",true,["dot",["name","v"],"z"],["binary","+",["binary","+",["binary","+",["binary","*",["sub",["name","te"],["num",2]],["name","vx"]],["binary","*",["sub",["name","te"],["num",6]],["name","vy"]]],["binary","*",["sub",["name","te"],["num",10]],["name","vz"]]],["binary","*",["sub",["name","te"],["num",14]],["name","vw"]]]]],["stat",["assign",true,["dot",["name","v"],"w"],["binary","+",["binary","+",["binary","+",["binary","*",["sub",["name","te"],["num",3]],["name","vx"]],["binary","*",["sub",["name","te"],["num",7]],["name","vy"]]],["binary","*",["sub",["name","te"],["num",11]],["name","vz"]]],["binary","*",["sub",["name","te"],["num",15]],["name","vw"]]]]],["return",["name","v"]]]]],["rotateAxis",["function",null,["v"],[["var",[["te",["dot",["name","this"],"elements"]]]],["var",[["vx",["dot",["name","v"],"x"]],["vy",["dot",["name","v"],"y"]],["vz",["dot",["name","v"],"z"]]]],["stat",["assign",true,["dot",["name","v"],"x"],["binary","+",["binary","+",["binary","*",["name","vx"],["sub",["name","te"],["num",0]]],["binary","*",["name","vy"],["sub",["name","te"],["num",4]]]],["binary","*",["name","vz"],["sub",["name","te"],["num",8]]]]]],["stat",["assign",true,["dot",["name","v"],"y"],["binary","+",["binary","+",["binary","*",["name","vx"],["sub",["name","te"],["num",1]]],["binary","*",["name","vy"],["sub",["name","te"],["num",5]]]],["binary","*",["name","vz"],["sub",["name","te"],["num",9]]]]]],["stat",["assign",true,["dot",["name","v"],"z"],["binary","+",["binary","+",["binary","*",["name","vx"],["sub",["name","te"],["num",2]]],["binary","*",["name","vy"],["sub",["name","te"],["num",6]]]],["binary","*",["name","vz"],["sub",["name","te"],["num",10]]]]]],["stat",["call",["dot",["name","v"],"normalize"],[]]],["return",["name","v"]]]]],["crossVector",["function",null,["a"],[["var",[["te",["dot",["name","this"],"elements"]]]],["var",[["v",["new",["dot",["name","THREE"],"Vector4"],[]]]]],["stat",["assign",true,["dot",["name","v"],"x"],["binary","+",["binary","+",["binary","+",["binary","*",["sub",["name","te"],["num",0]],["dot",["name","a"],"x"]],["binary","*",["sub",["name","te"],["num",4]],["dot",["name","a"],"y"]]],["binary","*",["sub",["name","te"],["num",8]],["dot",["name","a"],"z"]]],["binary","*",["sub",["name","te"],["num",12]],["dot",["name","a"],"w"]]]]],["stat",["assign",true,["dot",["name","v"],"y"],["binary","+",["binary","+",["binary","+",["binary","*",["sub",["name","te"],["num",1]],["dot",["name","a"],"x"]],["binary","*",["sub",["name","te"],["num",5]],["dot",["name","a"],"y"]]],["binary","*",["sub",["name","te"],["num",9]],["dot",["name","a"],"z"]]],["binary","*",["sub",["name","te"],["num",13]],["dot",["name","a"],"w"]]]]],["stat",["assign",true,["dot",["name","v"],"z"],["binary","+",["binary","+",["binary","+",["binary","*",["sub",["name","te"],["num",2]],["dot",["name","a"],"x"]],["binary","*",["sub",["name","te"],["num",6]],["dot",["name","a"],"y"]]],["binary","*",["sub",["name","te"],["num",10]],["dot",["name","a"],"z"]]],["binary","*",["sub",["name","te"],["num",14]],["dot",["name","a"],"w"]]]]],["stat",["assign",true,["dot",["name","v"],"w"],["conditional",["dot",["name","a"],"w"],["binary","+",["binary","+",["binary","+",["binary","*",["sub",["name","te"],["num",3]],["dot",["name","a"],"x"]],["binary","*",["sub",["name","te"],["num",7]],["dot",["name","a"],"y"]]],["binary","*",["sub",["name","te"],["num",11]],["dot",["name","a"],"z"]]],["binary","*",["sub",["name","te"],["num",15]],["dot",["name","a"],"w"]]],["num",1]]]],["return",["name","v"]]]]],["determinant",["function",null,[],[["var",[["te",["dot",["name","this"],"elements"]]]],["var",[["n11",["sub",["name","te"],["num",0]]],["n12",["sub",["name","te"],["num",4]]],["n13",["sub",["name","te"],["num",8]]],["n14",["sub",["name","te"],["num",12]]]]],["var",[["n21",["sub",["name","te"],["num",1]]],["n22",["sub",["name","te"],["num",5]]],["n23",["sub",["name","te"],["num",9]]],["n24",["sub",["name","te"],["num",13]]]]],["var",[["n31",["sub",["name","te"],["num",2]]],["n32",["sub",["name","te"],["num",6]]],["n33",["sub",["name","te"],["num",10]]],["n34",["sub",["name","te"],["num",14]]]]],["var",[["n41",["sub",["name","te"],["num",3]]],["n42",["sub",["name","te"],["num",7]]],["n43",["sub",["name","te"],["num",11]]],["n44",["sub",["name","te"],["num",15]]]]],["return",["binary","+",["binary","-",["binary","-",["binary","+",["binary","+",["binary","-",["binary","-",["binary","+",["binary","+",["binary","-",["binary","-",["binary","+",["binary","+",["binary","-",["binary","-",["binary","+",["binary","+",["binary","-",["binary","-",["binary","+",["binary","+",["binary","-",["binary","-",["binary","*",["binary","*",["binary","*",["name","n14"],["name","n23"]],["name","n32"]],["name","n41"]],["binary","*",["binary","*",["binary","*",["name","n13"],["name","n24"]],["name","n32"]],["name","n41"]]],["binary","*",["binary","*",["binary","*",["name","n14"],["name","n22"]],["name","n33"]],["name","n41"]]],["binary","*",["binary","*",["binary","*",["name","n12"],["name","n24"]],["name","n33"]],["name","n41"]]],["binary","*",["binary","*",["binary","*",["name","n13"],["name","n22"]],["name","n34"]],["name","n41"]]],["binary","*",["binary","*",["binary","*",["name","n12"],["name","n23"]],["name","n34"]],["name","n41"]]],["binary","*",["binary","*",["binary","*",["name","n14"],["name","n23"]],["name","n31"]],["name","n42"]]],["binary","*",["binary","*",["binary","*",["name","n13"],["name","n24"]],["name","n31"]],["name","n42"]]],["binary","*",["binary","*",["binary","*",["name","n14"],["name","n21"]],["name","n33"]],["name","n42"]]],["binary","*",["binary","*",["binary","*",["name","n11"],["name","n24"]],["name","n33"]],["name","n42"]]],["binary","*",["binary","*",["binary","*",["name","n13"],["name","n21"]],["name","n34"]],["name","n42"]]],["binary","*",["binary","*",["binary","*",["name","n11"],["name","n23"]],["name","n34"]],["name","n42"]]],["binary","*",["binary","*",["binary","*",["name","n14"],["name","n22"]],["name","n31"]],["name","n43"]]],["binary","*",["binary","*",["binary","*",["name","n12"],["name","n24"]],["name","n31"]],["name","n43"]]],["binary","*",["binary","*",["binary","*",["name","n14"],["name","n21"]],["name","n32"]],["name","n43"]]],["binary","*",["binary","*",["binary","*",["name","n11"],["name","n24"]],["name","n32"]],["name","n43"]]],["binary","*",["binary","*",["binary","*",["name","n12"],["name","n21"]],["name","n34"]],["name","n43"]]],["binary","*",["binary","*",["binary","*",["name","n11"],["name","n22"]],["name","n34"]],["name","n43"]]],["binary","*",["binary","*",["binary","*",["name","n13"],["name","n22"]],["name","n31"]],["name","n44"]]],["binary","*",["binary","*",["binary","*",["name","n12"],["name","n23"]],["name","n31"]],["name","n44"]]],["binary","*",["binary","*",["binary","*",["name","n13"],["name","n21"]],["name","n32"]],["name","n44"]]],["binary","*",["binary","*",["binary","*",["name","n11"],["name","n23"]],["name","n32"]],["name","n44"]]],["binary","*",["binary","*",["binary","*",["name","n12"],["name","n21"]],["name","n33"]],["name","n44"]]],["binary","*",["binary","*",["binary","*",["name","n11"],["name","n22"]],["name","n33"]],["name","n44"]]]]]]],["transpose",["function",null,[],[["var",[["te",["dot",["name","this"],"elements"]]]],["var",[["tmp"]]],["stat",["assign",true,["name","tmp"],["sub",["name","te"],["num",1]]]],["stat",["assign",true,["sub",["name","te"],["num",1]],["sub",["name","te"],["num",4]]]],["stat",["assign",true,["sub",["name","te"],["num",4]],["name","tmp"]]],["stat",["assign",true,["name","tmp"],["sub",["name","te"],["num",2]]]],["stat",["assign",true,["sub",["name","te"],["num",2]],["sub",["name","te"],["num",8]]]],["stat",["assign",true,["sub",["name","te"],["num",8]],["name","tmp"]]],["stat",["assign",true,["name","tmp"],["sub",["name","te"],["num",6]]]],["stat",["assign",true,["sub",["name","te"],["num",6]],["sub",["name","te"],["num",9]]]],["stat",["assign",true,["sub",["name","te"],["num",9]],["name","tmp"]]],["stat",["assign",true,["name","tmp"],["sub",["name","te"],["num",3]]]],["stat",["assign",true,["sub",["name","te"],["num",3]],["sub",["name","te"],["num",12]]]],["stat",["assign",true,["sub",["name","te"],["num",12]],["name","tmp"]]],["stat",["assign",true,["name","tmp"],["sub",["name","te"],["num",7]]]],["stat",["assign",true,["sub",["name","te"],["num",7]],["sub",["name","te"],["num",13]]]],["stat",["assign",true,["sub",["name","te"],["num",13]],["name","tmp"]]],["stat",["assign",true,["name","tmp"],["sub",["name","te"],["num",11]]]],["stat",["assign",true,["sub",["name","te"],["num",11]],["sub",["name","te"],["num",14]]]],["stat",["assign",true,["sub",["name","te"],["num",14]],["name","tmp"]]],["return",["name","this"]]]]],["flattenToArray",["function",null,["flat"],[["var",[["te",["dot",["name","this"],"elements"]]]],["stat",["assign",true,["sub",["name","flat"],["num",0]],["sub",["name","te"],["num",0]]]],["stat",["assign",true,["sub",["name","flat"],["num",1]],["sub",["name","te"],["num",1]]]],["stat",["assign",true,["sub",["name","flat"],["num",2]],["sub",["name","te"],["num",2]]]],["stat",["assign",true,["sub",["name","flat"],["num",3]],["sub",["name","te"],["num",3]]]],["stat",["assign",true,["sub",["name","flat"],["num",4]],["sub",["name","te"],["num",4]]]],["stat",["assign",true,["sub",["name","flat"],["num",5]],["sub",["name","te"],["num",5]]]],["stat",["assign",true,["sub",["name","flat"],["num",6]],["sub",["name","te"],["num",6]]]],["stat",["assign",true,["sub",["name","flat"],["num",7]],["sub",["name","te"],["num",7]]]],["stat",["assign",true,["sub",["name","flat"],["num",8]],["sub",["name","te"],["num",8]]]],["stat",["assign",true,["sub",["name","flat"],["num",9]],["sub",["name","te"],["num",9]]]],["stat",["assign",true,["sub",["name","flat"],["num",10]],["sub",["name","te"],["num",10]]]],["stat",["assign",true,["sub",["name","flat"],["num",11]],["sub",["name","te"],["num",11]]]],["stat",["assign",true,["sub",["name","flat"],["num",12]],["sub",["name","te"],["num",12]]]],["stat",["assign",true,["sub",["name","flat"],["num",13]],["sub",["name","te"],["num",13]]]],["stat",["assign",true,["sub",["name","flat"],["num",14]],["sub",["name","te"],["num",14]]]],["stat",["assign",true,["sub",["name","flat"],["num",15]],["sub",["name","te"],["num",15]]]],["return",["name","flat"]]]]],["flattenToArrayOffset",["function",null,["flat","offset"],[["var",[["te",["dot",["name","this"],"elements"]]]],["stat",["assign",true,["sub",["name","flat"],["name","offset"]],["sub",["name","te"],["num",0]]]],["stat",["assign",true,["sub",["name","flat"],["binary","+",["name","offset"],["num",1]]],["sub",["name","te"],["num",1]]]],["stat",["assign",true,["sub",["name","flat"],["binary","+",["name","offset"],["num",2]]],["sub",["name","te"],["num",2]]]],["stat",["assign",true,["sub",["name","flat"],["binary","+",["name","offset"],["num",3]]],["sub",["name","te"],["num",3]]]],["stat",["assign",true,["sub",["name","flat"],["binary","+",["name","offset"],["num",4]]],["sub",["name","te"],["num",4]]]],["stat",["assign",true,["sub",["name","flat"],["binary","+",["name","offset"],["num",5]]],["sub",["name","te"],["num",5]]]],["stat",["assign",true,["sub",["name","flat"],["binary","+",["name","offset"],["num",6]]],["sub",["name","te"],["num",6]]]],["stat",["assign",true,["sub",["name","flat"],["binary","+",["name","offset"],["num",7]]],["sub",["name","te"],["num",7]]]],["stat",["assign",true,["sub",["name","flat"],["binary","+",["name","offset"],["num",8]]],["sub",["name","te"],["num",8]]]],["stat",["assign",true,["sub",["name","flat"],["binary","+",["name","offset"],["num",9]]],["sub",["name","te"],["num",9]]]],["stat",["assign",true,["sub",["name","flat"],["binary","+",["name","offset"],["num",10]]],["sub",["name","te"],["num",10]]]],["stat",["assign",true,["sub",["name","flat"],["binary","+",["name","offset"],["num",11]]],["sub",["name","te"],["num",11]]]],["stat",["assign",true,["sub",["name","flat"],["binary","+",["name","offset"],["num",12]]],["sub",["name","te"],["num",12]]]],["stat",["assign",true,["sub",["name","flat"],["binary","+",["name","offset"],["num",13]]],["sub",["name","te"],["num",13]]]],["stat",["assign",true,["sub",["name","flat"],["binary","+",["name","offset"],["num",14]]],["sub",["name","te"],["num",14]]]],["stat",["assign",true,["sub",["name","flat"],["binary","+",["name","offset"],["num",15]]],["sub",["name","te"],["num",15]]]],["return",["name","flat"]]]]],["getPosition",["function",null,[],[["var",[["te",["dot",["name","this"],"elements"]]]],["return",["call",["dot",["dot",["dot",["name","THREE"],"Matrix4"],"__v1"],"set"],[["sub",["name","te"],["num",12]],["sub",["name","te"],["num",13]],["sub",["name","te"],["num",14]]]]]]]],["setPosition",["function",null,["v"],[["var",[["te",["dot",["name","this"],"elements"]]]],["stat",["assign",true,["sub",["name","te"],["num",12]],["dot",["name","v"],"x"]]],["stat",["assign",true,["sub",["name","te"],["num",13]],["dot",["name","v"],"y"]]],["stat",["assign",true,["sub",["name","te"],["num",14]],["dot",["name","v"],"z"]]],["return",["name","this"]]]]],["getColumnX",["function",null,[],[["var",[["te",["dot",["name","this"],"elements"]]]],["return",["call",["dot",["dot",["dot",["name","THREE"],"Matrix4"],"__v1"],"set"],[["sub",["name","te"],["num",0]],["sub",["name","te"],["num",1]],["sub",["name","te"],["num",2]]]]]]]],["getColumnY",["function",null,[],[["var",[["te",["dot",["name","this"],"elements"]]]],["return",["call",["dot",["dot",["dot",["name","THREE"],"Matrix4"],"__v1"],"set"],[["sub",["name","te"],["num",4]],["sub",["name","te"],["num",5]],["sub",["name","te"],["num",6]]]]]]]],["getColumnZ",["function",null,[],[["var",[["te",["dot",["name","this"],"elements"]]]],["return",["call",["dot",["dot",["dot",["name","THREE"],"Matrix4"],"__v1"],"set"],[["sub",["name","te"],["num",8]],["sub",["name","te"],["num",9]],["sub",["name","te"],["num",10]]]]]]]],["getInverse",["function",null,["m"],[["var",[["te",["dot",["name","this"],"elements"]]]],["var",[["me",["dot",["name","m"],"elements"]]]],["var",[["n11",["sub",["name","me"],["num",0]]],["n12",["sub",["name","me"],["num",4]]],["n13",["sub",["name","me"],["num",8]]],["n14",["sub",["name","me"],["num",12]]]]],["var",[["n21",["sub",["name","me"],["num",1]]],["n22",["sub",["name","me"],["num",5]]],["n23",["sub",["name","me"],["num",9]]],["n24",["sub",["name","me"],["num",13]]]]],["var",[["n31",["sub",["name","me"],["num",2]]],["n32",["sub",["name","me"],["num",6]]],["n33",["sub",["name","me"],["num",10]]],["n34",["sub",["name","me"],["num",14]]]]],["var",[["n41",["sub",["name","me"],["num",3]]],["n42",["sub",["name","me"],["num",7]]],["n43",["sub",["name","me"],["num",11]]],["n44",["sub",["name","me"],["num",15]]]]],["stat",["assign",true,["sub",["name","te"],["num",0]],["binary","+",["binary","-",["binary","-",["binary","+",["binary","-",["binary","*",["binary","*",["name","n23"],["name","n34"]],["name","n42"]],["binary","*",["binary","*",["name","n24"],["name","n33"]],["name","n42"]]],["binary","*",["binary","*",["name","n24"],["name","n32"]],["name","n43"]]],["binary","*",["binary","*",["name","n22"],["name","n34"]],["name","n43"]]],["binary","*",["binary","*",["name","n23"],["name","n32"]],["name","n44"]]],["binary","*",["binary","*",["name","n22"],["name","n33"]],["name","n44"]]]]],["stat",["assign",true,["sub",["name","te"],["num",4]],["binary","-",["binary","+",["binary","+",["binary","-",["binary","-",["binary","*",["binary","*",["name","n14"],["name","n33"]],["name","n42"]],["binary","*",["binary","*",["name","n13"],["name","n34"]],["name","n42"]]],["binary","*",["binary","*",["name","n14"],["name","n32"]],["name","n43"]]],["binary","*",["binary","*",["name","n12"],["name","n34"]],["name","n43"]]],["binary","*",["binary","*",["name","n13"],["name","n32"]],["name","n44"]]],["binary","*",["binary","*",["name","n12"],["name","n33"]],["name","n44"]]]]],["stat",["assign",true,["sub",["name","te"],["num",8]],["binary","+",["binary","-",["binary","-",["binary","+",["binary","-",["binary","*",["binary","*",["name","n13"],["name","n24"]],["name","n42"]],["binary","*",["binary","*",["name","n14"],["name","n23"]],["name","n42"]]],["binary","*",["binary","*",["name","n14"],["name","n22"]],["name","n43"]]],["binary","*",["binary","*",["name","n12"],["name","n24"]],["name","n43"]]],["binary","*",["binary","*",["name","n13"],["name","n22"]],["name","n44"]]],["binary","*",["binary","*",["name","n12"],["name","n23"]],["name","n44"]]]]],["stat",["assign",true,["sub",["name","te"],["num",12]],["binary","-",["binary","+",["binary","+",["binary","-",["binary","-",["binary","*",["binary","*",["name","n14"],["name","n23"]],["name","n32"]],["binary","*",["binary","*",["name","n13"],["name","n24"]],["name","n32"]]],["binary","*",["binary","*",["name","n14"],["name","n22"]],["name","n33"]]],["binary","*",["binary","*",["name","n12"],["name","n24"]],["name","n33"]]],["binary","*",["binary","*",["name","n13"],["name","n22"]],["name","n34"]]],["binary","*",["binary","*",["name","n12"],["name","n23"]],["name","n34"]]]]],["stat",["assign",true,["sub",["name","te"],["num",1]],["binary","-",["binary","+",["binary","+",["binary","-",["binary","-",["binary","*",["binary","*",["name","n24"],["name","n33"]],["name","n41"]],["binary","*",["binary","*",["name","n23"],["name","n34"]],["name","n41"]]],["binary","*",["binary","*",["name","n24"],["name","n31"]],["name","n43"]]],["binary","*",["binary","*",["name","n21"],["name","n34"]],["name","n43"]]],["binary","*",["binary","*",["name","n23"],["name","n31"]],["name","n44"]]],["binary","*",["binary","*",["name","n21"],["name","n33"]],["name","n44"]]]]],["stat",["assign",true,["sub",["name","te"],["num",5]],["binary","+",["binary","-",["binary","-",["binary","+",["binary","-",["binary","*",["binary","*",["name","n13"],["name","n34"]],["name","n41"]],["binary","*",["binary","*",["name","n14"],["name","n33"]],["name","n41"]]],["binary","*",["binary","*",["name","n14"],["name","n31"]],["name","n43"]]],["binary","*",["binary","*",["name","n11"],["name","n34"]],["name","n43"]]],["binary","*",["binary","*",["name","n13"],["name","n31"]],["name","n44"]]],["binary","*",["binary","*",["name","n11"],["name","n33"]],["name","n44"]]]]],["stat",["assign",true,["sub",["name","te"],["num",9]],["binary","-",["binary","+",["binary","+",["binary","-",["binary","-",["binary","*",["binary","*",["name","n14"],["name","n23"]],["name","n41"]],["binary","*",["binary","*",["name","n13"],["name","n24"]],["name","n41"]]],["binary","*",["binary","*",["name","n14"],["name","n21"]],["name","n43"]]],["binary","*",["binary","*",["name","n11"],["name","n24"]],["name","n43"]]],["binary","*",["binary","*",["name","n13"],["name","n21"]],["name","n44"]]],["binary","*",["binary","*",["name","n11"],["name","n23"]],["name","n44"]]]]],["stat",["assign",true,["sub",["name","te"],["num",13]],["binary","+",["binary","-",["binary","-",["binary","+",["binary","-",["binary","*",["binary","*",["name","n13"],["name","n24"]],["name","n31"]],["binary","*",["binary","*",["name","n14"],["name","n23"]],["name","n31"]]],["binary","*",["binary","*",["name","n14"],["name","n21"]],["name","n33"]]],["binary","*",["binary","*",["name","n11"],["name","n24"]],["name","n33"]]],["binary","*",["binary","*",["name","n13"],["name","n21"]],["name","n34"]]],["binary","*",["binary","*",["name","n11"],["name","n23"]],["name","n34"]]]]],["stat",["assign",true,["sub",["name","te"],["num",2]],["binary","+",["binary","-",["binary","-",["binary","+",["binary","-",["binary","*",["binary","*",["name","n22"],["name","n34"]],["name","n41"]],["binary","*",["binary","*",["name","n24"],["name","n32"]],["name","n41"]]],["binary","*",["binary","*",["name","n24"],["name","n31"]],["name","n42"]]],["binary","*",["binary","*",["name","n21"],["name","n34"]],["name","n42"]]],["binary","*",["binary","*",["name","n22"],["name","n31"]],["name","n44"]]],["binary","*",["binary","*",["name","n21"],["name","n32"]],["name","n44"]]]]],["stat",["assign",true,["sub",["name","te"],["num",6]],["binary","-",["binary","+",["binary","+",["binary","-",["binary","-",["binary","*",["binary","*",["name","n14"],["name","n32"]],["name","n41"]],["binary","*",["binary","*",["name","n12"],["name","n34"]],["name","n41"]]],["binary","*",["binary","*",["name","n14"],["name","n31"]],["name","n42"]]],["binary","*",["binary","*",["name","n11"],["name","n34"]],["name","n42"]]],["binary","*",["binary","*",["name","n12"],["name","n31"]],["name","n44"]]],["binary","*",["binary","*",["name","n11"],["name","n32"]],["name","n44"]]]]],["stat",["assign",true,["sub",["name","te"],["num",10]],["binary","+",["binary","-",["binary","-",["binary","+",["binary","-",["binary","*",["binary","*",["name","n12"],["name","n24"]],["name","n41"]],["binary","*",["binary","*",["name","n14"],["name","n22"]],["name","n41"]]],["binary","*",["binary","*",["name","n14"],["name","n21"]],["name","n42"]]],["binary","*",["binary","*",["name","n11"],["name","n24"]],["name","n42"]]],["binary","*",["binary","*",["name","n12"],["name","n21"]],["name","n44"]]],["binary","*",["binary","*",["name","n11"],["name","n22"]],["name","n44"]]]]],["stat",["assign",true,["sub",["name","te"],["num",14]],["binary","-",["binary","+",["binary","+",["binary","-",["binary","-",["binary","*",["binary","*",["name","n14"],["name","n22"]],["name","n31"]],["binary","*",["binary","*",["name","n12"],["name","n24"]],["name","n31"]]],["binary","*",["binary","*",["name","n14"],["name","n21"]],["name","n32"]]],["binary","*",["binary","*",["name","n11"],["name","n24"]],["name","n32"]]],["binary","*",["binary","*",["name","n12"],["name","n21"]],["name","n34"]]],["binary","*",["binary","*",["name","n11"],["name","n22"]],["name","n34"]]]]],["stat",["assign",true,["sub",["name","te"],["num",3]],["binary","-",["binary","+",["binary","+",["binary","-",["binary","-",["binary","*",["binary","*",["name","n23"],["name","n32"]],["name","n41"]],["binary","*",["binary","*",["name","n22"],["name","n33"]],["name","n41"]]],["binary","*",["binary","*",["name","n23"],["name","n31"]],["name","n42"]]],["binary","*",["binary","*",["name","n21"],["name","n33"]],["name","n42"]]],["binary","*",["binary","*",["name","n22"],["name","n31"]],["name","n43"]]],["binary","*",["binary","*",["name","n21"],["name","n32"]],["name","n43"]]]]],["stat",["assign",true,["sub",["name","te"],["num",7]],["binary","+",["binary","-",["binary","-",["binary","+",["binary","-",["binary","*",["binary","*",["name","n12"],["name","n33"]],["name","n41"]],["binary","*",["binary","*",["name","n13"],["name","n32"]],["name","n41"]]],["binary","*",["binary","*",["name","n13"],["name","n31"]],["name","n42"]]],["binary","*",["binary","*",["name","n11"],["name","n33"]],["name","n42"]]],["binary","*",["binary","*",["name","n12"],["name","n31"]],["name","n43"]]],["binary","*",["binary","*",["name","n11"],["name","n32"]],["name","n43"]]]]],["stat",["assign",true,["sub",["name","te"],["num",11]],["binary","-",["binary","+",["binary","+",["binary","-",["binary","-",["binary","*",["binary","*",["name","n13"],["name","n22"]],["name","n41"]],["binary","*",["binary","*",["name","n12"],["name","n23"]],["name","n41"]]],["binary","*",["binary","*",["name","n13"],["name","n21"]],["name","n42"]]],["binary","*",["binary","*",["name","n11"],["name","n23"]],["name","n42"]]],["binary","*",["binary","*",["name","n12"],["name","n21"]],["name","n43"]]],["binary","*",["binary","*",["name","n11"],["name","n22"]],["name","n43"]]]]],["stat",["assign",true,["sub",["name","te"],["num",15]],["binary","+",["binary","-",["binary","-",["binary","+",["binary","-",["binary","*",["binary","*",["name","n12"],["name","n23"]],["name","n31"]],["binary","*",["binary","*",["name","n13"],["name","n22"]],["name","n31"]]],["binary","*",["binary","*",["name","n13"],["name","n21"]],["name","n32"]]],["binary","*",["binary","*",["name","n11"],["name","n23"]],["name","n32"]]],["binary","*",["binary","*",["name","n12"],["name","n21"]],["name","n33"]]],["binary","*",["binary","*",["name","n11"],["name","n22"]],["name","n33"]]]]],["stat",["call",["dot",["name","this"],"multiplyScalar"],[["binary","/",["num",1],["call",["dot",["name","m"],"determinant"],[]]]]]],["return",["name","this"]]]]],["setRotationFromEuler",["function",null,["v","order"],[["var",[["te",["dot",["name","this"],"elements"]]]],["var",[["x",["dot",["name","v"],"x"]],["y",["dot",["name","v"],"y"]],["z",["dot",["name","v"],"z"]]]],["var",[["a",["call",["dot",["name","Math"],"cos"],[["name","x"]]]],["b",["call",["dot",["name","Math"],"sin"],[["name","x"]]]]]],["var",[["c",["call",["dot",["name","Math"],"cos"],[["name","y"]]]],["d",["call",["dot",["name","Math"],"sin"],[["name","y"]]]]]],["var",[["e",["call",["dot",["name","Math"],"cos"],[["name","z"]]]],["f",["call",["dot",["name","Math"],"sin"],[["name","z"]]]]]],["switch",["name","order"],[[["string","YXZ"],[["var",[["ce",["binary","*",["name","c"],["name","e"]]],["cf",["binary","*",["name","c"],["name","f"]]],["de",["binary","*",["name","d"],["name","e"]]],["df",["binary","*",["name","d"],["name","f"]]]]],["stat",["assign",true,["sub",["name","te"],["num",0]],["binary","+",["name","ce"],["binary","*",["name","df"],["name","b"]]]]],["stat",["assign",true,["sub",["name","te"],["num",4]],["binary","-",["binary","*",["name","de"],["name","b"]],["name","cf"]]]],["stat",["assign",true,["sub",["name","te"],["num",8]],["binary","*",["name","a"],["name","d"]]]],["stat",["assign",true,["sub",["name","te"],["num",1]],["binary","*",["name","a"],["name","f"]]]],["stat",["assign",true,["sub",["name","te"],["num",5]],["binary","*",["name","a"],["name","e"]]]],["stat",["assign",true,["sub",["name","te"],["num",9]],["unary-prefix","-",["name","b"]]]],["stat",["assign",true,["sub",["name","te"],["num",2]],["binary","-",["binary","*",["name","cf"],["name","b"]],["name","de"]]]],["stat",["assign",true,["sub",["name","te"],["num",6]],["binary","+",["name","df"],["binary","*",["name","ce"],["name","b"]]]]],["stat",["assign",true,["sub",["name","te"],["num",10]],["binary","*",["name","a"],["name","c"]]]],["break",null]]],[["string","ZXY"],[["var",[["ce",["binary","*",["name","c"],["name","e"]]],["cf",["binary","*",["name","c"],["name","f"]]],["de",["binary","*",["name","d"],["name","e"]]],["df",["binary","*",["name","d"],["name","f"]]]]],["stat",["assign",true,["sub",["name","te"],["num",0]],["binary","-",["name","ce"],["binary","*",["name","df"],["name","b"]]]]],["stat",["assign",true,["sub",["name","te"],["num",4]],["binary","*",["unary-prefix","-",["name","a"]],["name","f"]]]],["stat",["assign",true,["sub",["name","te"],["num",8]],["binary","+",["name","de"],["binary","*",["name","cf"],["name","b"]]]]],["stat",["assign",true,["sub",["name","te"],["num",1]],["binary","+",["name","cf"],["binary","*",["name","de"],["name","b"]]]]],["stat",["assign",true,["sub",["name","te"],["num",5]],["binary","*",["name","a"],["name","e"]]]],["stat",["assign",true,["sub",["name","te"],["num",9]],["binary","-",["name","df"],["binary","*",["name","ce"],["name","b"]]]]],["stat",["assign",true,["sub",["name","te"],["num",2]],["binary","*",["unary-prefix","-",["name","a"]],["name","d"]]]],["stat",["assign",true,["sub",["name","te"],["num",6]],["name","b"]]],["stat",["assign",true,["sub",["name","te"],["num",10]],["binary","*",["name","a"],["name","c"]]]],["break",null]]],[["string","ZYX"],[["var",[["ae",["binary","*",["name","a"],["name","e"]]],["af",["binary","*",["name","a"],["name","f"]]],["be",["binary","*",["name","b"],["name","e"]]],["bf",["binary","*",["name","b"],["name","f"]]]]],["stat",["assign",true,["sub",["name","te"],["num",0]],["binary","*",["name","c"],["name","e"]]]],["stat",["assign",true,["sub",["name","te"],["num",4]],["binary","-",["binary","*",["name","be"],["name","d"]],["name","af"]]]],["stat",["assign",true,["sub",["name","te"],["num",8]],["binary","+",["binary","*",["name","ae"],["name","d"]],["name","bf"]]]],["stat",["assign",true,["sub",["name","te"],["num",1]],["binary","*",["name","c"],["name","f"]]]],["stat",["assign",true,["sub",["name","te"],["num",5]],["binary","+",["binary","*",["name","bf"],["name","d"]],["name","ae"]]]],["stat",["assign",true,["sub",["name","te"],["num",9]],["binary","-",["binary","*",["name","af"],["name","d"]],["name","be"]]]],["stat",["assign",true,["sub",["name","te"],["num",2]],["unary-prefix","-",["name","d"]]]],["stat",["assign",true,["sub",["name","te"],["num",6]],["binary","*",["name","b"],["name","c"]]]],["stat",["assign",true,["sub",["name","te"],["num",10]],["binary","*",["name","a"],["name","c"]]]],["break",null]]],[["string","YZX"],[["var",[["ac",["binary","*",["name","a"],["name","c"]]],["ad",["binary","*",["name","a"],["name","d"]]],["bc",["binary","*",["name","b"],["name","c"]]],["bd",["binary","*",["name","b"],["name","d"]]]]],["stat",["assign",true,["sub",["name","te"],["num",0]],["binary","*",["name","c"],["name","e"]]]],["stat",["assign",true,["sub",["name","te"],["num",4]],["binary","-",["name","bd"],["binary","*",["name","ac"],["name","f"]]]]],["stat",["assign",true,["sub",["name","te"],["num",8]],["binary","+",["binary","*",["name","bc"],["name","f"]],["name","ad"]]]],["stat",["assign",true,["sub",["name","te"],["num",1]],["name","f"]]],["stat",["assign",true,["sub",["name","te"],["num",5]],["binary","*",["name","a"],["name","e"]]]],["stat",["assign",true,["sub",["name","te"],["num",9]],["binary","*",["unary-prefix","-",["name","b"]],["name","e"]]]],["stat",["assign",true,["sub",["name","te"],["num",2]],["binary","*",["unary-prefix","-",["name","d"]],["name","e"]]]],["stat",["assign",true,["sub",["name","te"],["num",6]],["binary","+",["binary","*",["name","ad"],["name","f"]],["name","bc"]]]],["stat",["assign",true,["sub",["name","te"],["num",10]],["binary","-",["name","ac"],["binary","*",["name","bd"],["name","f"]]]]],["break",null]]],[["string","XZY"],[["var",[["ac",["binary","*",["name","a"],["name","c"]]],["ad",["binary","*",["name","a"],["name","d"]]],["bc",["binary","*",["name","b"],["name","c"]]],["bd",["binary","*",["name","b"],["name","d"]]]]],["stat",["assign",true,["sub",["name","te"],["num",0]],["binary","*",["name","c"],["name","e"]]]],["stat",["assign",true,["sub",["name","te"],["num",4]],["unary-prefix","-",["name","f"]]]],["stat",["assign",true,["sub",["name","te"],["num",8]],["binary","*",["name","d"],["name","e"]]]],["stat",["assign",true,["sub",["name","te"],["num",1]],["binary","+",["binary","*",["name","ac"],["name","f"]],["name","bd"]]]],["stat",["assign",true,["sub",["name","te"],["num",5]],["binary","*",["name","a"],["name","e"]]]],["stat",["assign",true,["sub",["name","te"],["num",9]],["binary","-",["binary","*",["name","ad"],["name","f"]],["name","bc"]]]],["stat",["assign",true,["sub",["name","te"],["num",2]],["binary","-",["binary","*",["name","bc"],["name","f"]],["name","ad"]]]],["stat",["assign",true,["sub",["name","te"],["num",6]],["binary","*",["name","b"],["name","e"]]]],["stat",["assign",true,["sub",["name","te"],["num",10]],["binary","+",["binary","*",["name","bd"],["name","f"]],["name","ac"]]]],["break",null]]],[null,[["var",[["ae",["binary","*",["name","a"],["name","e"]]],["af",["binary","*",["name","a"],["name","f"]]],["be",["binary","*",["name","b"],["name","e"]]],["bf",["binary","*",["name","b"],["name","f"]]]]],["stat",["assign",true,["sub",["name","te"],["num",0]],["binary","*",["name","c"],["name","e"]]]],["stat",["assign",true,["sub",["name","te"],["num",4]],["binary","*",["unary-prefix","-",["name","c"]],["name","f"]]]],["stat",["assign",true,["sub",["name","te"],["num",8]],["name","d"]]],["stat",["assign",true,["sub",["name","te"],["num",1]],["binary","+",["name","af"],["binary","*",["name","be"],["name","d"]]]]],["stat",["assign",true,["sub",["name","te"],["num",5]],["binary","-",["name","ae"],["binary","*",["name","bf"],["name","d"]]]]],["stat",["assign",true,["sub",["name","te"],["num",9]],["binary","*",["unary-prefix","-",["name","b"]],["name","c"]]]],["stat",["assign",true,["sub",["name","te"],["num",2]],["binary","-",["name","bf"],["binary","*",["name","ae"],["name","d"]]]]],["stat",["assign",true,["sub",["name","te"],["num",6]],["binary","+",["name","be"],["binary","*",["name","af"],["name","d"]]]]],["stat",["assign",true,["sub",["name","te"],["num",10]],["binary","*",["name","a"],["name","c"]]]],["break",null]]]]],["return",["name","this"]]]]],["setRotationFromQuaternion",["function",null,["q"],[["var",[["te",["dot",["name","this"],"elements"]]]],["var",[["x",["dot",["name","q"],"x"]],["y",["dot",["name","q"],"y"]],["z",["dot",["name","q"],"z"]],["w",["dot",["name","q"],"w"]]]],["var",[["x2",["binary","+",["name","x"],["name","x"]]],["y2",["binary","+",["name","y"],["name","y"]]],["z2",["binary","+",["name","z"],["name","z"]]]]],["var",[["xx",["binary","*",["name","x"],["name","x2"]]],["xy",["binary","*",["name","x"],["name","y2"]]],["xz",["binary","*",["name","x"],["name","z2"]]]]],["var",[["yy",["binary","*",["name","y"],["name","y2"]]],["yz",["binary","*",["name","y"],["name","z2"]]],["zz",["binary","*",["name","z"],["name","z2"]]]]],["var",[["wx",["binary","*",["name","w"],["name","x2"]]],["wy",["binary","*",["name","w"],["name","y2"]]],["wz",["binary","*",["name","w"],["name","z2"]]]]],["stat",["assign",true,["sub",["name","te"],["num",0]],["binary","-",["num",1],["binary","+",["name","yy"],["name","zz"]]]]],["stat",["assign",true,["sub",["name","te"],["num",4]],["binary","-",["name","xy"],["name","wz"]]]],["stat",["assign",true,["sub",["name","te"],["num",8]],["binary","+",["name","xz"],["name","wy"]]]],["stat",["assign",true,["sub",["name","te"],["num",1]],["binary","+",["name","xy"],["name","wz"]]]],["stat",["assign",true,["sub",["name","te"],["num",5]],["binary","-",["num",1],["binary","+",["name","xx"],["name","zz"]]]]],["stat",["assign",true,["sub",["name","te"],["num",9]],["binary","-",["name","yz"],["name","wx"]]]],["stat",["assign",true,["sub",["name","te"],["num",2]],["binary","-",["name","xz"],["name","wy"]]]],["stat",["assign",true,["sub",["name","te"],["num",6]],["binary","+",["name","yz"],["name","wx"]]]],["stat",["assign",true,["sub",["name","te"],["num",10]],["binary","-",["num",1],["binary","+",["name","xx"],["name","yy"]]]]],["return",["name","this"]]]]],["compose",["function",null,["translation","rotation","scale"],[["var",[["te",["dot",["name","this"],"elements"]]]],["var",[["mRotation",["dot",["dot",["name","THREE"],"Matrix4"],"__m1"]]]],["var",[["mScale",["dot",["dot",["name","THREE"],"Matrix4"],"__m2"]]]],["stat",["call",["dot",["name","mRotation"],"identity"],[]]],["stat",["call",["dot",["name","mRotation"],"setRotationFromQuaternion"],[["name","rotation"]]]],["stat",["call",["dot",["name","mScale"],"makeScale"],[["dot",["name","scale"],"x"],["dot",["name","scale"],"y"],["dot",["name","scale"],"z"]]]],["stat",["call",["dot",["name","this"],"multiply"],[["name","mRotation"],["name","mScale"]]]],["stat",["assign",true,["sub",["name","te"],["num",12]],["dot",["name","translation"],"x"]]],["stat",["assign",true,["sub",["name","te"],["num",13]],["dot",["name","translation"],"y"]]],["stat",["assign",true,["sub",["name","te"],["num",14]],["dot",["name","translation"],"z"]]],["return",["name","this"]]]]],["decompose",["function",null,["translation","rotation","scale"],[["var",[["te",["dot",["name","this"],"elements"]]]],["var",[["x",["dot",["dot",["name","THREE"],"Matrix4"],"__v1"]]]],["var",[["y",["dot",["dot",["name","THREE"],"Matrix4"],"__v2"]]]],["var",[["z",["dot",["dot",["name","THREE"],"Matrix4"],"__v3"]]]],["stat",["call",["dot",["name","x"],"set"],[["sub",["name","te"],["num",0]],["sub",["name","te"],["num",1]],["sub",["name","te"],["num",2]]]]],["stat",["call",["dot",["name","y"],"set"],[["sub",["name","te"],["num",4]],["sub",["name","te"],["num",5]],["sub",["name","te"],["num",6]]]]],["stat",["call",["dot",["name","z"],"set"],[["sub",["name","te"],["num",8]],["sub",["name","te"],["num",9]],["sub",["name","te"],["num",10]]]]],["stat",["assign",true,["name","translation"],["conditional",["binary","instanceof",["name","translation"],["dot",["name","THREE"],"Vector3"]],["name","translation"],["new",["dot",["name","THREE"],"Vector3"],[]]]]],["stat",["assign",true,["name","rotation"],["conditional",["binary","instanceof",["name","rotation"],["dot",["name","THREE"],"Quaternion"]],["name","rotation"],["new",["dot",["name","THREE"],"Quaternion"],[]]]]],["stat",["assign",true,["name","scale"],["conditional",["binary","instanceof",["name","scale"],["dot",["name","THREE"],"Vector3"]],["name","scale"],["new",["dot",["name","THREE"],"Vector3"],[]]]]],["stat",["assign",true,["dot",["name","scale"],"x"],["call",["dot",["name","x"],"length"],[]]]],["stat",["assign",true,["dot",["name","scale"],"y"],["call",["dot",["name","y"],"length"],[]]]],["stat",["assign",true,["dot",["name","scale"],"z"],["call",["dot",["name","z"],"length"],[]]]],["stat",["assign",true,["dot",["name","translation"],"x"],["sub",["name","te"],["num",12]]]],["stat",["assign",true,["dot",["name","translation"],"y"],["sub",["name","te"],["num",13]]]],["stat",["assign",true,["dot",["name","translation"],"z"],["sub",["name","te"],["num",14]]]],["var",[["matrix",["dot",["dot",["name","THREE"],"Matrix4"],"__m1"]]]],["stat",["call",["dot",["name","matrix"],"copy"],[["name","this"]]]],["stat",["assign","/",["sub",["dot",["name","matrix"],"elements"],["num",0]],["dot",["name","scale"],"x"]]],["stat",["assign","/",["sub",["dot",["name","matrix"],"elements"],["num",1]],["dot",["name","scale"],"x"]]],["stat",["assign","/",["sub",["dot",["name","matrix"],"elements"],["num",2]],["dot",["name","scale"],"x"]]],["stat",["assign","/",["sub",["dot",["name","matrix"],"elements"],["num",4]],["dot",["name","scale"],"y"]]],["stat",["assign","/",["sub",["dot",["name","matrix"],"elements"],["num",5]],["dot",["name","scale"],"y"]]],["stat",["assign","/",["sub",["dot",["name","matrix"],"elements"],["num",6]],["dot",["name","scale"],"y"]]],["stat",["assign","/",["sub",["dot",["name","matrix"],"elements"],["num",8]],["dot",["name","scale"],"z"]]],["stat",["assign","/",["sub",["dot",["name","matrix"],"elements"],["num",9]],["dot",["name","scale"],"z"]]],["stat",["assign","/",["sub",["dot",["name","matrix"],"elements"],["num",10]],["dot",["name","scale"],"z"]]],["stat",["call",["dot",["name","rotation"],"setFromRotationMatrix"],[["name","matrix"]]]],["return",["array",[["name","translation"],["name","rotation"],["name","scale"]]]]]]],["extractPosition",["function",null,["m"],[["var",[["te",["dot",["name","this"],"elements"]]]],["var",[["me",["dot",["name","m"],"elements"]]]],["stat",["assign",true,["sub",["name","te"],["num",12]],["sub",["name","me"],["num",12]]]],["stat",["assign",true,["sub",["name","te"],["num",13]],["sub",["name","me"],["num",13]]]],["stat",["assign",true,["sub",["name","te"],["num",14]],["sub",["name","me"],["num",14]]]],["return",["name","this"]]]]],["extractRotation",["function",null,["m"],[["var",[["te",["dot",["name","this"],"elements"]]]],["var",[["me",["dot",["name","m"],"elements"]]]],["var",[["vector",["dot",["dot",["name","THREE"],"Matrix4"],"__v1"]]]],["var",[["scaleX",["binary","/",["num",1],["call",["dot",["call",["dot",["name","vector"],"set"],[["sub",["name","me"],["num",0]],["sub",["name","me"],["num",1]],["sub",["name","me"],["num",2]]]],"length"],[]]]]]],["var",[["scaleY",["binary","/",["num",1],["call",["dot",["call",["dot",["name","vector"],"set"],[["sub",["name","me"],["num",4]],["sub",["name","me"],["num",5]],["sub",["name","me"],["num",6]]]],"length"],[]]]]]],["var",[["scaleZ",["binary","/",["num",1],["call",["dot",["call",["dot",["name","vector"],"set"],[["sub",["name","me"],["num",8]],["sub",["name","me"],["num",9]],["sub",["name","me"],["num",10]]]],"length"],[]]]]]],["stat",["assign",true,["sub",["name","te"],["num",0]],["binary","*",["sub",["name","me"],["num",0]],["name","scaleX"]]]],["stat",["assign",true,["sub",["name","te"],["num",1]],["binary","*",["sub",["name","me"],["num",1]],["name","scaleX"]]]],["stat",["assign",true,["sub",["name","te"],["num",2]],["binary","*",["sub",["name","me"],["num",2]],["name","scaleX"]]]],["stat",["assign",true,["sub",["name","te"],["num",4]],["binary","*",["sub",["name","me"],["num",4]],["name","scaleY"]]]],["stat",["assign",true,["sub",["name","te"],["num",5]],["binary","*",["sub",["name","me"],["num",5]],["name","scaleY"]]]],["stat",["assign",true,["sub",["name","te"],["num",6]],["binary","*",["sub",["name","me"],["num",6]],["name","scaleY"]]]],["stat",["assign",true,["sub",["name","te"],["num",8]],["binary","*",["sub",["name","me"],["num",8]],["name","scaleZ"]]]],["stat",["assign",true,["sub",["name","te"],["num",9]],["binary","*",["sub",["name","me"],["num",9]],["name","scaleZ"]]]],["stat",["assign",true,["sub",["name","te"],["num",10]],["binary","*",["sub",["name","me"],["num",10]],["name","scaleZ"]]]],["return",["name","this"]]]]],["translate",["function",null,["v"],[["var",[["te",["dot",["name","this"],"elements"]]]],["var",[["x",["dot",["name","v"],"x"]],["y",["dot",["name","v"],"y"]],["z",["dot",["name","v"],"z"]]]],["stat",["assign",true,["sub",["name","te"],["num",12]],["binary","+",["binary","+",["binary","+",["binary","*",["sub",["name","te"],["num",0]],["name","x"]],["binary","*",["sub",["name","te"],["num",4]],["name","y"]]],["binary","*",["sub",["name","te"],["num",8]],["name","z"]]],["sub",["name","te"],["num",12]]]]],["stat",["assign",true,["sub",["name","te"],["num",13]],["binary","+",["binary","+",["binary","+",["binary","*",["sub",["name","te"],["num",1]],["name","x"]],["binary","*",["sub",["name","te"],["num",5]],["name","y"]]],["binary","*",["sub",["name","te"],["num",9]],["name","z"]]],["sub",["name","te"],["num",13]]]]],["stat",["assign",true,["sub",["name","te"],["num",14]],["binary","+",["binary","+",["binary","+",["binary","*",["sub",["name","te"],["num",2]],["name","x"]],["binary","*",["sub",["name","te"],["num",6]],["name","y"]]],["binary","*",["sub",["name","te"],["num",10]],["name","z"]]],["sub",["name","te"],["num",14]]]]],["stat",["assign",true,["sub",["name","te"],["num",15]],["binary","+",["binary","+",["binary","+",["binary","*",["sub",["name","te"],["num",3]],["name","x"]],["binary","*",["sub",["name","te"],["num",7]],["name","y"]]],["binary","*",["sub",["name","te"],["num",11]],["name","z"]]],["sub",["name","te"],["num",15]]]]],["return",["name","this"]]]]],["rotateX",["function",null,["angle"],[["var",[["te",["dot",["name","this"],"elements"]]]],["var",[["m12",["sub",["name","te"],["num",4]]]]],["var",[["m22",["sub",["name","te"],["num",5]]]]],["var",[["m32",["sub",["name","te"],["num",6]]]]],["var",[["m42",["sub",["name","te"],["num",7]]]]],["var",[["m13",["sub",["name","te"],["num",8]]]]],["var",[["m23",["sub",["name","te"],["num",9]]]]],["var",[["m33",["sub",["name","te"],["num",10]]]]],["var",[["m43",["sub",["name","te"],["num",11]]]]],["var",[["c",["call",["dot",["name","Math"],"cos"],[["name","angle"]]]]]],["var",[["s",["call",["dot",["name","Math"],"sin"],[["name","angle"]]]]]],["stat",["assign",true,["sub",["name","te"],["num",4]],["binary","+",["binary","*",["name","c"],["name","m12"]],["binary","*",["name","s"],["name","m13"]]]]],["stat",["assign",true,["sub",["name","te"],["num",5]],["binary","+",["binary","*",["name","c"],["name","m22"]],["binary","*",["name","s"],["name","m23"]]]]],["stat",["assign",true,["sub",["name","te"],["num",6]],["binary","+",["binary","*",["name","c"],["name","m32"]],["binary","*",["name","s"],["name","m33"]]]]],["stat",["assign",true,["sub",["name","te"],["num",7]],["binary","+",["binary","*",["name","c"],["name","m42"]],["binary","*",["name","s"],["name","m43"]]]]],["stat",["assign",true,["sub",["name","te"],["num",8]],["binary","-",["binary","*",["name","c"],["name","m13"]],["binary","*",["name","s"],["name","m12"]]]]],["stat",["assign",true,["sub",["name","te"],["num",9]],["binary","-",["binary","*",["name","c"],["name","m23"]],["binary","*",["name","s"],["name","m22"]]]]],["stat",["assign",true,["sub",["name","te"],["num",10]],["binary","-",["binary","*",["name","c"],["name","m33"]],["binary","*",["name","s"],["name","m32"]]]]],["stat",["assign",true,["sub",["name","te"],["num",11]],["binary","-",["binary","*",["name","c"],["name","m43"]],["binary","*",["name","s"],["name","m42"]]]]],["return",["name","this"]]]]],["rotateY",["function",null,["angle"],[["var",[["te",["dot",["name","this"],"elements"]]]],["var",[["m11",["sub",["name","te"],["num",0]]]]],["var",[["m21",["sub",["name","te"],["num",1]]]]],["var",[["m31",["sub",["name","te"],["num",2]]]]],["var",[["m41",["sub",["name","te"],["num",3]]]]],["var",[["m13",["sub",["name","te"],["num",8]]]]],["var",[["m23",["sub",["name","te"],["num",9]]]]],["var",[["m33",["sub",["name","te"],["num",10]]]]],["var",[["m43",["sub",["name","te"],["num",11]]]]],["var",[["c",["call",["dot",["name","Math"],"cos"],[["name","angle"]]]]]],["var",[["s",["call",["dot",["name","Math"],"sin"],[["name","angle"]]]]]],["stat",["assign",true,["sub",["name","te"],["num",0]],["binary","-",["binary","*",["name","c"],["name","m11"]],["binary","*",["name","s"],["name","m13"]]]]],["stat",["assign",true,["sub",["name","te"],["num",1]],["binary","-",["binary","*",["name","c"],["name","m21"]],["binary","*",["name","s"],["name","m23"]]]]],["stat",["assign",true,["sub",["name","te"],["num",2]],["binary","-",["binary","*",["name","c"],["name","m31"]],["binary","*",["name","s"],["name","m33"]]]]],["stat",["assign",true,["sub",["name","te"],["num",3]],["binary","-",["binary","*",["name","c"],["name","m41"]],["binary","*",["name","s"],["name","m43"]]]]],["stat",["assign",true,["sub",["name","te"],["num",8]],["binary","+",["binary","*",["name","c"],["name","m13"]],["binary","*",["name","s"],["name","m11"]]]]],["stat",["assign",true,["sub",["name","te"],["num",9]],["binary","+",["binary","*",["name","c"],["name","m23"]],["binary","*",["name","s"],["name","m21"]]]]],["stat",["assign",true,["sub",["name","te"],["num",10]],["binary","+",["binary","*",["name","c"],["name","m33"]],["binary","*",["name","s"],["name","m31"]]]]],["stat",["assign",true,["sub",["name","te"],["num",11]],["binary","+",["binary","*",["name","c"],["name","m43"]],["binary","*",["name","s"],["name","m41"]]]]],["return",["name","this"]]]]],["rotateZ",["function",null,["angle"],[["var",[["te",["dot",["name","this"],"elements"]]]],["var",[["m11",["sub",["name","te"],["num",0]]]]],["var",[["m21",["sub",["name","te"],["num",1]]]]],["var",[["m31",["sub",["name","te"],["num",2]]]]],["var",[["m41",["sub",["name","te"],["num",3]]]]],["var",[["m12",["sub",["name","te"],["num",4]]]]],["var",[["m22",["sub",["name","te"],["num",5]]]]],["var",[["m32",["sub",["name","te"],["num",6]]]]],["var",[["m42",["sub",["name","te"],["num",7]]]]],["var",[["c",["call",["dot",["name","Math"],"cos"],[["name","angle"]]]]]],["var",[["s",["call",["dot",["name","Math"],"sin"],[["name","angle"]]]]]],["stat",["assign",true,["sub",["name","te"],["num",0]],["binary","+",["binary","*",["name","c"],["name","m11"]],["binary","*",["name","s"],["name","m12"]]]]],["stat",["assign",true,["sub",["name","te"],["num",1]],["binary","+",["binary","*",["name","c"],["name","m21"]],["binary","*",["name","s"],["name","m22"]]]]],["stat",["assign",true,["sub",["name","te"],["num",2]],["binary","+",["binary","*",["name","c"],["name","m31"]],["binary","*",["name","s"],["name","m32"]]]]],["stat",["assign",true,["sub",["name","te"],["num",3]],["binary","+",["binary","*",["name","c"],["name","m41"]],["binary","*",["name","s"],["name","m42"]]]]],["stat",["assign",true,["sub",["name","te"],["num",4]],["binary","-",["binary","*",["name","c"],["name","m12"]],["binary","*",["name","s"],["name","m11"]]]]],["stat",["assign",true,["sub",["name","te"],["num",5]],["binary","-",["binary","*",["name","c"],["name","m22"]],["binary","*",["name","s"],["name","m21"]]]]],["stat",["assign",true,["sub",["name","te"],["num",6]],["binary","-",["binary","*",["name","c"],["name","m32"]],["binary","*",["name","s"],["name","m31"]]]]],["stat",["assign",true,["sub",["name","te"],["num",7]],["binary","-",["binary","*",["name","c"],["name","m42"]],["binary","*",["name","s"],["name","m41"]]]]],["return",["name","this"]]]]],["rotateByAxis",["function",null,["axis","angle"],[["var",[["te",["dot",["name","this"],"elements"]]]],["if",["binary","&&",["binary","&&",["binary","===",["dot",["name","axis"],"x"],["num",1]],["binary","===",["dot",["name","axis"],"y"],["num",0]]],["binary","===",["dot",["name","axis"],"z"],["num",0]]],["block",[["return",["call",["dot",["name","this"],"rotateX"],[["name","angle"]]]]]],["if",["binary","&&",["binary","&&",["binary","===",["dot",["name","axis"],"x"],["num",0]],["binary","===",["dot",["name","axis"],"y"],["num",1]]],["binary","===",["dot",["name","axis"],"z"],["num",0]]],["block",[["return",["call",["dot",["name","this"],"rotateY"],[["name","angle"]]]]]],["if",["binary","&&",["binary","&&",["binary","===",["dot",["name","axis"],"x"],["num",0]],["binary","===",["dot",["name","axis"],"y"],["num",0]]],["binary","===",["dot",["name","axis"],"z"],["num",1]]],["block",[["return",["call",["dot",["name","this"],"rotateZ"],[["name","angle"]]]]]],null]]],["var",[["x",["dot",["name","axis"],"x"]],["y",["dot",["name","axis"],"y"]],["z",["dot",["name","axis"],"z"]]]],["var",[["n",["call",["dot",["name","Math"],"sqrt"],[["binary","+",["binary","+",["binary","*",["name","x"],["name","x"]],["binary","*",["name","y"],["name","y"]]],["binary","*",["name","z"],["name","z"]]]]]]]],["stat",["assign","/",["name","x"],["name","n"]]],["stat",["assign","/",["name","y"],["name","n"]]],["stat",["assign","/",["name","z"],["name","n"]]],["var",[["xx",["binary","*",["name","x"],["name","x"]]],["yy",["binary","*",["name","y"],["name","y"]]],["zz",["binary","*",["name","z"],["name","z"]]]]],["var",[["c",["call",["dot",["name","Math"],"cos"],[["name","angle"]]]]]],["var",[["s",["call",["dot",["name","Math"],"sin"],[["name","angle"]]]]]],["var",[["oneMinusCosine",["binary","-",["num",1],["name","c"]]]]],["var",[["xy",["binary","*",["binary","*",["name","x"],["name","y"]],["name","oneMinusCosine"]]]]],["var",[["xz",["binary","*",["binary","*",["name","x"],["name","z"]],["name","oneMinusCosine"]]]]],["var",[["yz",["binary","*",["binary","*",["name","y"],["name","z"]],["name","oneMinusCosine"]]]]],["var",[["xs",["binary","*",["name","x"],["name","s"]]]]],["var",[["ys",["binary","*",["name","y"],["name","s"]]]]],["var",[["zs",["binary","*",["name","z"],["name","s"]]]]],["var",[["r11",["binary","+",["name","xx"],["binary","*",["binary","-",["num",1],["name","xx"]],["name","c"]]]]]],["var",[["r21",["binary","+",["name","xy"],["name","zs"]]]]],["var",[["r31",["binary","-",["name","xz"],["name","ys"]]]]],["var",[["r12",["binary","-",["name","xy"],["name","zs"]]]]],["var",[["r22",["binary","+",["name","yy"],["binary","*",["binary","-",["num",1],["name","yy"]],["name","c"]]]]]],["var",[["r32",["binary","+",["name","yz"],["name","xs"]]]]],["var",[["r13",["binary","+",["name","xz"],["name","ys"]]]]],["var",[["r23",["binary","-",["name","yz"],["name","xs"]]]]],["var",[["r33",["binary","+",["name","zz"],["binary","*",["binary","-",["num",1],["name","zz"]],["name","c"]]]]]],["var",[["m11",["sub",["name","te"],["num",0]]],["m21",["sub",["name","te"],["num",1]]],["m31",["sub",["name","te"],["num",2]]],["m41",["sub",["name","te"],["num",3]]]]],["var",[["m12",["sub",["name","te"],["num",4]]],["m22",["sub",["name","te"],["num",5]]],["m32",["sub",["name","te"],["num",6]]],["m42",["sub",["name","te"],["num",7]]]]],["var",[["m13",["sub",["name","te"],["num",8]]],["m23",["sub",["name","te"],["num",9]]],["m33",["sub",["name","te"],["num",10]]],["m43",["sub",["name","te"],["num",11]]]]],["var",[["m14",["sub",["name","te"],["num",12]]],["m24",["sub",["name","te"],["num",13]]],["m34",["sub",["name","te"],["num",14]]],["m44",["sub",["name","te"],["num",15]]]]],["stat",["assign",true,["sub",["name","te"],["num",0]],["binary","+",["binary","+",["binary","*",["name","r11"],["name","m11"]],["binary","*",["name","r21"],["name","m12"]]],["binary","*",["name","r31"],["name","m13"]]]]],["stat",["assign",true,["sub",["name","te"],["num",1]],["binary","+",["binary","+",["binary","*",["name","r11"],["name","m21"]],["binary","*",["name","r21"],["name","m22"]]],["binary","*",["name","r31"],["name","m23"]]]]],["stat",["assign",true,["sub",["name","te"],["num",2]],["binary","+",["binary","+",["binary","*",["name","r11"],["name","m31"]],["binary","*",["name","r21"],["name","m32"]]],["binary","*",["name","r31"],["name","m33"]]]]],["stat",["assign",true,["sub",["name","te"],["num",3]],["binary","+",["binary","+",["binary","*",["name","r11"],["name","m41"]],["binary","*",["name","r21"],["name","m42"]]],["binary","*",["name","r31"],["name","m43"]]]]],["stat",["assign",true,["sub",["name","te"],["num",4]],["binary","+",["binary","+",["binary","*",["name","r12"],["name","m11"]],["binary","*",["name","r22"],["name","m12"]]],["binary","*",["name","r32"],["name","m13"]]]]],["stat",["assign",true,["sub",["name","te"],["num",5]],["binary","+",["binary","+",["binary","*",["name","r12"],["name","m21"]],["binary","*",["name","r22"],["name","m22"]]],["binary","*",["name","r32"],["name","m23"]]]]],["stat",["assign",true,["sub",["name","te"],["num",6]],["binary","+",["binary","+",["binary","*",["name","r12"],["name","m31"]],["binary","*",["name","r22"],["name","m32"]]],["binary","*",["name","r32"],["name","m33"]]]]],["stat",["assign",true,["sub",["name","te"],["num",7]],["binary","+",["binary","+",["binary","*",["name","r12"],["name","m41"]],["binary","*",["name","r22"],["name","m42"]]],["binary","*",["name","r32"],["name","m43"]]]]],["stat",["assign",true,["sub",["name","te"],["num",8]],["binary","+",["binary","+",["binary","*",["name","r13"],["name","m11"]],["binary","*",["name","r23"],["name","m12"]]],["binary","*",["name","r33"],["name","m13"]]]]],["stat",["assign",true,["sub",["name","te"],["num",9]],["binary","+",["binary","+",["binary","*",["name","r13"],["name","m21"]],["binary","*",["name","r23"],["name","m22"]]],["binary","*",["name","r33"],["name","m23"]]]]],["stat",["assign",true,["sub",["name","te"],["num",10]],["binary","+",["binary","+",["binary","*",["name","r13"],["name","m31"]],["binary","*",["name","r23"],["name","m32"]]],["binary","*",["name","r33"],["name","m33"]]]]],["stat",["assign",true,["sub",["name","te"],["num",11]],["binary","+",["binary","+",["binary","*",["name","r13"],["name","m41"]],["binary","*",["name","r23"],["name","m42"]]],["binary","*",["name","r33"],["name","m43"]]]]],["return",["name","this"]]]]],["scale",["function",null,["v"],[["var",[["te",["dot",["name","this"],"elements"]]]],["var",[["x",["dot",["name","v"],"x"]],["y",["dot",["name","v"],"y"]],["z",["dot",["name","v"],"z"]]]],["stat",["assign","*",["sub",["name","te"],["num",0]],["name","x"]]],["stat",["assign","*",["sub",["name","te"],["num",4]],["name","y"]]],["stat",["assign","*",["sub",["name","te"],["num",8]],["name","z"]]],["stat",["assign","*",["sub",["name","te"],["num",1]],["name","x"]]],["stat",["assign","*",["sub",["name","te"],["num",5]],["name","y"]]],["stat",["assign","*",["sub",["name","te"],["num",9]],["name","z"]]],["stat",["assign","*",["sub",["name","te"],["num",2]],["name","x"]]],["stat",["assign","*",["sub",["name","te"],["num",6]],["name","y"]]],["stat",["assign","*",["sub",["name","te"],["num",10]],["name","z"]]],["stat",["assign","*",["sub",["name","te"],["num",3]],["name","x"]]],["stat",["assign","*",["sub",["name","te"],["num",7]],["name","y"]]],["stat",["assign","*",["sub",["name","te"],["num",11]],["name","z"]]],["return",["name","this"]]]]],["getMaxScaleOnAxis",["function",null,[],[["var",[["te",["dot",["name","this"],"elements"]]]],["var",[["scaleXSq",["binary","+",["binary","+",["binary","*",["sub",["name","te"],["num",0]],["sub",["name","te"],["num",0]]],["binary","*",["sub",["name","te"],["num",1]],["sub",["name","te"],["num",1]]]],["binary","*",["sub",["name","te"],["num",2]],["sub",["name","te"],["num",2]]]]]]],["var",[["scaleYSq",["binary","+",["binary","+",["binary","*",["sub",["name","te"],["num",4]],["sub",["name","te"],["num",4]]],["binary","*",["sub",["name","te"],["num",5]],["sub",["name","te"],["num",5]]]],["binary","*",["sub",["name","te"],["num",6]],["sub",["name","te"],["num",6]]]]]]],["var",[["scaleZSq",["binary","+",["binary","+",["binary","*",["sub",["name","te"],["num",8]],["sub",["name","te"],["num",8]]],["binary","*",["sub",["name","te"],["num",9]],["sub",["name","te"],["num",9]]]],["binary","*",["sub",["name","te"],["num",10]],["sub",["name","te"],["num",10]]]]]]],["return",["call",["dot",["name","Math"],"sqrt"],[["call",["dot",["name","Math"],"max"],[["name","scaleXSq"],["call",["dot",["name","Math"],"max"],[["name","scaleYSq"],["name","scaleZSq"]]]]]]]]]]],["makeTranslation",["function",null,["x","y","z"],[["stat",["call",["dot",["name","this"],"set"],[["num",1],["num",0],["num",0],["name","x"],["num",0],["num",1],["num",0],["name","y"],["num",0],["num",0],["num",1],["name","z"],["num",0],["num",0],["num",0],["num",1]]]],["return",["name","this"]]]]],["makeRotationX",["function",null,["theta"],[["var",[["c",["call",["dot",["name","Math"],"cos"],[["name","theta"]]]],["s",["call",["dot",["name","Math"],"sin"],[["name","theta"]]]]]],["stat",["call",["dot",["name","this"],"set"],[["num",1],["num",0],["num",0],["num",0],["num",0],["name","c"],["unary-prefix","-",["name","s"]],["num",0],["num",0],["name","s"],["name","c"],["num",0],["num",0],["num",0],["num",0],["num",1]]]],["return",["name","this"]]]]],["makeRotationY",["function",null,["theta"],[["var",[["c",["call",["dot",["name","Math"],"cos"],[["name","theta"]]]],["s",["call",["dot",["name","Math"],"sin"],[["name","theta"]]]]]],["stat",["call",["dot",["name","this"],"set"],[["name","c"],["num",0],["name","s"],["num",0],["num",0],["num",1],["num",0],["num",0],["unary-prefix","-",["name","s"]],["num",0],["name","c"],["num",0],["num",0],["num",0],["num",0],["num",1]]]],["return",["name","this"]]]]],["makeRotationZ",["function",null,["theta"],[["var",[["c",["call",["dot",["name","Math"],"cos"],[["name","theta"]]]],["s",["call",["dot",["name","Math"],"sin"],[["name","theta"]]]]]],["stat",["call",["dot",["name","this"],"set"],[["name","c"],["unary-prefix","-",["name","s"]],["num",0],["num",0],["name","s"],["name","c"],["num",0],["num",0],["num",0],["num",0],["num",1],["num",0],["num",0],["num",0],["num",0],["num",1]]]],["return",["name","this"]]]]],["makeRotationAxis",["function",null,["axis","angle"],[["var",[["c",["call",["dot",["name","Math"],"cos"],[["name","angle"]]]]]],["var",[["s",["call",["dot",["name","Math"],"sin"],[["name","angle"]]]]]],["var",[["t",["binary","-",["num",1],["name","c"]]]]],["var",[["x",["dot",["name","axis"],"x"]],["y",["dot",["name","axis"],"y"]],["z",["dot",["name","axis"],"z"]]]],["var",[["tx",["binary","*",["name","t"],["name","x"]]],["ty",["binary","*",["name","t"],["name","y"]]]]],["stat",["call",["dot",["name","this"],"set"],[["binary","+",["binary","*",["name","tx"],["name","x"]],["name","c"]],["binary","-",["binary","*",["name","tx"],["name","y"]],["binary","*",["name","s"],["name","z"]]],["binary","+",["binary","*",["name","tx"],["name","z"]],["binary","*",["name","s"],["name","y"]]],["num",0],["binary","+",["binary","*",["name","tx"],["name","y"]],["binary","*",["name","s"],["name","z"]]],["binary","+",["binary","*",["name","ty"],["name","y"]],["name","c"]],["binary","-",["binary","*",["name","ty"],["name","z"]],["binary","*",["name","s"],["name","x"]]],["num",0],["binary","-",["binary","*",["name","tx"],["name","z"]],["binary","*",["name","s"],["name","y"]]],["binary","+",["binary","*",["name","ty"],["name","z"]],["binary","*",["name","s"],["name","x"]]],["binary","+",["binary","*",["binary","*",["name","t"],["name","z"]],["name","z"]],["name","c"]],["num",0],["num",0],["num",0],["num",0],["num",1]]]],["return",["name","this"]]]]],["makeScale",["function",null,["x","y","z"],[["stat",["call",["dot",["name","this"],"set"],[["name","x"],["num",0],["num",0],["num",0],["num",0],["name","y"],["num",0],["num",0],["num",0],["num",0],["name","z"],["num",0],["num",0],["num",0],["num",0],["num",1]]]],["return",["name","this"]]]]],["makeFrustum",["function",null,["left","right","bottom","top","near","far"],[["var",[["te",["dot",["name","this"],"elements"]]]],["var",[["x",["binary","/",["binary","*",["num",2],["name","near"]],["binary","-",["name","right"],["name","left"]]]]]],["var",[["y",["binary","/",["binary","*",["num",2],["name","near"]],["binary","-",["name","top"],["name","bottom"]]]]]],["var",[["a",["binary","/",["binary","+",["name","right"],["name","left"]],["binary","-",["name","right"],["name","left"]]]]]],["var",[["b",["binary","/",["binary","+",["name","top"],["name","bottom"]],["binary","-",["name","top"],["name","bottom"]]]]]],["var",[["c",["binary","/",["unary-prefix","-",["binary","+",["name","far"],["name","near"]]],["binary","-",["name","far"],["name","near"]]]]]],["var",[["d",["binary","/",["binary","*",["binary","*",["unary-prefix","-",["num",2]],["name","far"]],["name","near"]],["binary","-",["name","far"],["name","near"]]]]]],["stat",["assign",true,["sub",["name","te"],["num",0]],["name","x"]]],["stat",["assign",true,["sub",["name","te"],["num",4]],["num",0]]],["stat",["assign",true,["sub",["name","te"],["num",8]],["name","a"]]],["stat",["assign",true,["sub",["name","te"],["num",12]],["num",0]]],["stat",["assign",true,["sub",["name","te"],["num",1]],["num",0]]],["stat",["assign",true,["sub",["name","te"],["num",5]],["name","y"]]],["stat",["assign",true,["sub",["name","te"],["num",9]],["name","b"]]],["stat",["assign",true,["sub",["name","te"],["num",13]],["num",0]]],["stat",["assign",true,["sub",["name","te"],["num",2]],["num",0]]],["stat",["assign",true,["sub",["name","te"],["num",6]],["num",0]]],["stat",["assign",true,["sub",["name","te"],["num",10]],["name","c"]]],["stat",["assign",true,["sub",["name","te"],["num",14]],["name","d"]]],["stat",["assign",true,["sub",["name","te"],["num",3]],["num",0]]],["stat",["assign",true,["sub",["name","te"],["num",7]],["num",0]]],["stat",["assign",true,["sub",["name","te"],["num",11]],["unary-prefix","-",["num",1]]]],["stat",["assign",true,["sub",["name","te"],["num",15]],["num",0]]],["return",["name","this"]]]]],["makePerspective",["function",null,["fov","aspect","near","far"],[["var",[["ymax",["binary","*",["name","near"],["call",["dot",["name","Math"],"tan"],[["binary","/",["binary","*",["name","fov"],["dot",["name","Math"],"PI"]],["num",360]]]]]]]],["var",[["ymin",["unary-prefix","-",["name","ymax"]]]]],["var",[["xmin",["binary","*",["name","ymin"],["name","aspect"]]]]],["var",[["xmax",["binary","*",["name","ymax"],["name","aspect"]]]]],["return",["call",["dot",["name","this"],"makeFrustum"],[["name","xmin"],["name","xmax"],["name","ymin"],["name","ymax"],["name","near"],["name","far"]]]]]]],["makeOrthographic",["function",null,["left","right","top","bottom","near","far"],[["var",[["te",["dot",["name","this"],"elements"]]]],["var",[["w",["binary","-",["name","right"],["name","left"]]]]],["var",[["h",["binary","-",["name","top"],["name","bottom"]]]]],["var",[["p",["binary","-",["name","far"],["name","near"]]]]],["var",[["x",["binary","/",["binary","+",["name","right"],["name","left"]],["name","w"]]]]],["var",[["y",["binary","/",["binary","+",["name","top"],["name","bottom"]],["name","h"]]]]],["var",[["z",["binary","/",["binary","+",["name","far"],["name","near"]],["name","p"]]]]],["stat",["assign",true,["sub",["name","te"],["num",0]],["binary","/",["num",2],["name","w"]]]],["stat",["assign",true,["sub",["name","te"],["num",4]],["num",0]]],["stat",["assign",true,["sub",["name","te"],["num",8]],["num",0]]],["stat",["assign",true,["sub",["name","te"],["num",12]],["unary-prefix","-",["name","x"]]]],["stat",["assign",true,["sub",["name","te"],["num",1]],["num",0]]],["stat",["assign",true,["sub",["name","te"],["num",5]],["binary","/",["num",2],["name","h"]]]],["stat",["assign",true,["sub",["name","te"],["num",9]],["num",0]]],["stat",["assign",true,["sub",["name","te"],["num",13]],["unary-prefix","-",["name","y"]]]],["stat",["assign",true,["sub",["name","te"],["num",2]],["num",0]]],["stat",["assign",true,["sub",["name","te"],["num",6]],["num",0]]],["stat",["assign",true,["sub",["name","te"],["num",10]],["binary","/",["unary-prefix","-",["num",2]],["name","p"]]]],["stat",["assign",true,["sub",["name","te"],["num",14]],["unary-prefix","-",["name","z"]]]],["stat",["assign",true,["sub",["name","te"],["num",3]],["num",0]]],["stat",["assign",true,["sub",["name","te"],["num",7]],["num",0]]],["stat",["assign",true,["sub",["name","te"],["num",11]],["num",0]]],["stat",["assign",true,["sub",["name","te"],["num",15]],["num",1]]],["return",["name","this"]]]]],["clone",["function",null,[],[["var",[["te",["dot",["name","this"],"elements"]]]],["return",["new",["dot",["name","THREE"],"Matrix4"],[["sub",["name","te"],["num",0]],["sub",["name","te"],["num",4]],["sub",["name","te"],["num",8]],["sub",["name","te"],["num",12]],["sub",["name","te"],["num",1]],["sub",["name","te"],["num",5]],["sub",["name","te"],["num",9]],["sub",["name","te"],["num",13]],["sub",["name","te"],["num",2]],["sub",["name","te"],["num",6]],["sub",["name","te"],["num",10]],["sub",["name","te"],["num",14]],["sub",["name","te"],["num",3]],["sub",["name","te"],["num",7]],["sub",["name","te"],["num",11]],["sub",["name","te"],["num",15]]]]]]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"Matrix4"],"__v1"],["new",["dot",["name","THREE"],"Vector3"],[]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"Matrix4"],"__v2"],["new",["dot",["name","THREE"],"Vector3"],[]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"Matrix4"],"__v3"],["new",["dot",["name","THREE"],"Vector3"],[]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"Matrix4"],"__m1"],["new",["dot",["name","THREE"],"Matrix4"],[]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"Matrix4"],"__m2"],["new",["dot",["name","THREE"],"Matrix4"],[]]]],["stat",["assign",true,["dot",["name","THREE"],"Object3D"],["function",null,[],[["stat",["assign",true,["dot",["name","this"],"id"],["unary-postfix","++",["dot",["name","THREE"],"Object3DCount"]]]],["stat",["assign",true,["dot",["name","this"],"name"],["string",""]]],["stat",["assign",true,["dot",["name","this"],"parent"],["name","undefined"]]],["stat",["assign",true,["dot",["name","this"],"children"],["array",[]]]],["stat",["assign",true,["dot",["name","this"],"up"],["new",["dot",["name","THREE"],"Vector3"],[["num",0],["num",1],["num",0]]]]],["stat",["assign",true,["dot",["name","this"],"position"],["new",["dot",["name","THREE"],"Vector3"],[]]]],["stat",["assign",true,["dot",["name","this"],"rotation"],["new",["dot",["name","THREE"],"Vector3"],[]]]],["stat",["assign",true,["dot",["name","this"],"eulerOrder"],["string","XYZ"]]],["stat",["assign",true,["dot",["name","this"],"scale"],["new",["dot",["name","THREE"],"Vector3"],[["num",1],["num",1],["num",1]]]]],["stat",["assign",true,["dot",["name","this"],"doubleSided"],["name","false"]]],["stat",["assign",true,["dot",["name","this"],"flipSided"],["name","false"]]],["stat",["assign",true,["dot",["name","this"],"renderDepth"],["name","null"]]],["stat",["assign",true,["dot",["name","this"],"rotationAutoUpdate"],["name","true"]]],["stat",["assign",true,["dot",["name","this"],"matrix"],["new",["dot",["name","THREE"],"Matrix4"],[]]]],["stat",["assign",true,["dot",["name","this"],"matrixWorld"],["new",["dot",["name","THREE"],"Matrix4"],[]]]],["stat",["assign",true,["dot",["name","this"],"matrixRotationWorld"],["new",["dot",["name","THREE"],"Matrix4"],[]]]],["stat",["assign",true,["dot",["name","this"],"matrixAutoUpdate"],["name","true"]]],["stat",["assign",true,["dot",["name","this"],"matrixWorldNeedsUpdate"],["name","true"]]],["stat",["assign",true,["dot",["name","this"],"quaternion"],["new",["dot",["name","THREE"],"Quaternion"],[]]]],["stat",["assign",true,["dot",["name","this"],"useQuaternion"],["name","false"]]],["stat",["assign",true,["dot",["name","this"],"boundRadius"],["num",0]]],["stat",["assign",true,["dot",["name","this"],"boundRadiusScale"],["num",1]]],["stat",["assign",true,["dot",["name","this"],"visible"],["name","true"]]],["stat",["assign",true,["dot",["name","this"],"castShadow"],["name","false"]]],["stat",["assign",true,["dot",["name","this"],"receiveShadow"],["name","false"]]],["stat",["assign",true,["dot",["name","this"],"frustumCulled"],["name","true"]]],["stat",["assign",true,["dot",["name","this"],"_vector"],["new",["dot",["name","THREE"],"Vector3"],[]]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"Object3D"],"prototype"],["object",[["constructor",["dot",["name","THREE"],"Object3D"]],["applyMatrix",["function",null,["matrix"],[["stat",["call",["dot",["dot",["name","this"],"matrix"],"multiply"],[["name","matrix"],["dot",["name","this"],"matrix"]]]],["stat",["call",["dot",["dot",["name","this"],"scale"],"getScaleFromMatrix"],[["dot",["name","this"],"matrix"]]]],["stat",["call",["dot",["dot",["name","this"],"rotation"],"getRotationFromMatrix"],[["dot",["name","this"],"matrix"],["dot",["name","this"],"scale"]]]],["stat",["call",["dot",["dot",["name","this"],"position"],"getPositionFromMatrix"],[["dot",["name","this"],"matrix"]]]]]]],["translate",["function",null,["distance","axis"],[["stat",["call",["dot",["dot",["name","this"],"matrix"],"rotateAxis"],[["name","axis"]]]],["stat",["call",["dot",["dot",["name","this"],"position"],"addSelf"],[["call",["dot",["name","axis"],"multiplyScalar"],[["name","distance"]]]]]]]]],["translateX",["function",null,["distance"],[["stat",["call",["dot",["name","this"],"translate"],[["name","distance"],["call",["dot",["dot",["name","this"],"_vector"],"set"],[["num",1],["num",0],["num",0]]]]]]]]],["translateY",["function",null,["distance"],[["stat",["call",["dot",["name","this"],"translate"],[["name","distance"],["call",["dot",["dot",["name","this"],"_vector"],"set"],[["num",0],["num",1],["num",0]]]]]]]]],["translateZ",["function",null,["distance"],[["stat",["call",["dot",["name","this"],"translate"],[["name","distance"],["call",["dot",["dot",["name","this"],"_vector"],"set"],[["num",0],["num",0],["num",1]]]]]]]]],["lookAt",["function",null,["vector"],[["stat",["call",["dot",["dot",["name","this"],"matrix"],"lookAt"],[["name","vector"],["dot",["name","this"],"position"],["dot",["name","this"],"up"]]]],["if",["dot",["name","this"],"rotationAutoUpdate"],["block",[["stat",["call",["dot",["dot",["name","this"],"rotation"],"getRotationFromMatrix"],[["dot",["name","this"],"matrix"]]]]]],null]]]],["add",["function",null,["object"],[["if",["binary","===",["name","object"],["name","this"]],["block",[["stat",["call",["dot",["name","console"],"warn"],[["string","THREE.Object3D.add: An object can't be added as a child of itself."]]]],["return",null]]],null],["if",["binary","instanceof",["name","object"],["dot",["name","THREE"],"Object3D"]],["block",[["if",["binary","!==",["dot",["name","object"],"parent"],["name","undefined"]],["block",[["stat",["call",["dot",["dot",["name","object"],"parent"],"remove"],[["name","object"]]]]]],null],["stat",["assign",true,["dot",["name","object"],"parent"],["name","this"]]],["stat",["call",["dot",["dot",["name","this"],"children"],"push"],[["name","object"]]]],["var",[["scene",["name","this"]]]],["while",["binary","!==",["dot",["name","scene"],"parent"],["name","undefined"]],["block",[["stat",["assign",true,["name","scene"],["dot",["name","scene"],"parent"]]]]]],["if",["binary","&&",["binary","!==",["name","scene"],["name","undefined"]],["binary","instanceof",["name","scene"],["dot",["name","THREE"],"Scene"]]],["block",[["stat",["call",["dot",["name","scene"],"__addObject"],[["name","object"]]]]]],null]]],null]]]],["remove",["function",null,["object"],[["var",[["index",["call",["dot",["dot",["name","this"],"children"],"indexOf"],[["name","object"]]]]]],["if",["binary","!==",["name","index"],["unary-prefix","-",["num",1]]],["block",[["stat",["assign",true,["dot",["name","object"],"parent"],["name","undefined"]]],["stat",["call",["dot",["dot",["name","this"],"children"],"splice"],[["name","index"],["num",1]]]],["var",[["scene",["name","this"]]]],["while",["binary","!==",["dot",["name","scene"],"parent"],["name","undefined"]],["block",[["stat",["assign",true,["name","scene"],["dot",["name","scene"],"parent"]]]]]],["if",["binary","&&",["binary","!==",["name","scene"],["name","undefined"]],["binary","instanceof",["name","scene"],["dot",["name","THREE"],"Scene"]]],["block",[["stat",["call",["dot",["name","scene"],"__removeObject"],[["name","object"]]]]]],null]]],null]]]],["getChildByName",["function",null,["name","recursive"],[["var",[["c"],["cl"],["child"]]],["for",["seq",["assign",true,["name","c"],["num",0]],["assign",true,["name","cl"],["dot",["dot",["name","this"],"children"],"length"]]],["binary","<",["name","c"],["name","cl"]],["unary-postfix","++",["name","c"]],["block",[["stat",["assign",true,["name","child"],["sub",["dot",["name","this"],"children"],["name","c"]]]],["if",["binary","===",["dot",["name","child"],"name"],["name","name"]],["block",[["return",["name","child"]]]],null],["if",["name","recursive"],["block",[["stat",["assign",true,["name","child"],["call",["dot",["name","child"],"getChildByName"],[["name","name"],["name","recursive"]]]]],["if",["binary","!==",["name","child"],["name","undefined"]],["block",[["return",["name","child"]]]],null]]],null]]]],["return",["name","undefined"]]]]],["updateMatrix",["function",null,[],[["stat",["call",["dot",["dot",["name","this"],"matrix"],"setPosition"],[["dot",["name","this"],"position"]]]],["if",["dot",["name","this"],"useQuaternion"],["block",[["stat",["call",["dot",["dot",["name","this"],"matrix"],"setRotationFromQuaternion"],[["dot",["name","this"],"quaternion"]]]]]],["block",[["stat",["call",["dot",["dot",["name","this"],"matrix"],"setRotationFromEuler"],[["dot",["name","this"],"rotation"],["dot",["name","this"],"eulerOrder"]]]]]]],["if",["binary","||",["binary","||",["binary","!==",["dot",["dot",["name","this"],"scale"],"x"],["num",1]],["binary","!==",["dot",["dot",["name","this"],"scale"],"y"],["num",1]]],["binary","!==",["dot",["dot",["name","this"],"scale"],"z"],["num",1]]],["block",[["stat",["call",["dot",["dot",["name","this"],"matrix"],"scale"],[["dot",["name","this"],"scale"]]]],["stat",["assign",true,["dot",["name","this"],"boundRadiusScale"],["call",["dot",["name","Math"],"max"],[["dot",["dot",["name","this"],"scale"],"x"],["call",["dot",["name","Math"],"max"],[["dot",["dot",["name","this"],"scale"],"y"],["dot",["dot",["name","this"],"scale"],"z"]]]]]]]]],null],["stat",["assign",true,["dot",["name","this"],"matrixWorldNeedsUpdate"],["name","true"]]]]]],["updateMatrixWorld",["function",null,["force"],[["stat",["binary","&&",["dot",["name","this"],"matrixAutoUpdate"],["call",["dot",["name","this"],"updateMatrix"],[]]]],["if",["binary","||",["dot",["name","this"],"matrixWorldNeedsUpdate"],["name","force"]],["block",[["if",["dot",["name","this"],"parent"],["block",[["stat",["call",["dot",["dot",["name","this"],"matrixWorld"],"multiply"],[["dot",["dot",["name","this"],"parent"],"matrixWorld"],["dot",["name","this"],"matrix"]]]]]],["block",[["stat",["call",["dot",["dot",["name","this"],"matrixWorld"],"copy"],[["dot",["name","this"],"matrix"]]]]]]],["stat",["assign",true,["dot",["name","this"],"matrixWorldNeedsUpdate"],["name","false"]]],["stat",["assign",true,["name","force"],["name","true"]]]]],null],["for",["var",[["i",["num",0]],["l",["dot",["dot",["name","this"],"children"],"length"]]]],["binary","<",["name","i"],["name","l"]],["unary-postfix","++",["name","i"]],["block",[["stat",["call",["dot",["sub",["dot",["name","this"],"children"],["name","i"]],"updateMatrixWorld"],[["name","force"]]]]]]]]]]]]]],["stat",["assign",true,["dot",["name","THREE"],"Object3DCount"],["num",0]]],["stat",["assign",true,["dot",["name","THREE"],"Projector"],["function",null,[],[["var",[["_object"],["_objectCount"],["_objectPool",["array",[]]],["_vertex"],["_vertexCount"],["_vertexPool",["array",[]]],["_face"],["_face3Count"],["_face3Pool",["array",[]]],["_face4Count"],["_face4Pool",["array",[]]],["_line"],["_lineCount"],["_linePool",["array",[]]],["_particle"],["_particleCount"],["_particlePool",["array",[]]],["_renderData",["object",[["objects",["array",[]]],["sprites",["array",[]]],["lights",["array",[]]],["elements",["array",[]]]]]],["_vector3",["new",["dot",["name","THREE"],"Vector3"],[]]],["_vector4",["new",["dot",["name","THREE"],"Vector4"],[]]],["_projScreenMatrix",["new",["dot",["name","THREE"],"Matrix4"],[]]],["_projScreenobjectMatrixWorld",["new",["dot",["name","THREE"],"Matrix4"],[]]],["_frustum",["new",["dot",["name","THREE"],"Frustum"],[]]],["_clippedVertex1PositionScreen",["new",["dot",["name","THREE"],"Vector4"],[]]],["_clippedVertex2PositionScreen",["new",["dot",["name","THREE"],"Vector4"],[]]],["_face3VertexNormals"]]],["stat",["assign",true,["dot",["name","this"],"projectVector"],["function",null,["vector","camera"],[["stat",["call",["dot",["dot",["name","camera"],"matrixWorldInverse"],"getInverse"],[["dot",["name","camera"],"matrixWorld"]]]],["stat",["call",["dot",["name","_projScreenMatrix"],"multiply"],[["dot",["name","camera"],"projectionMatrix"],["dot",["name","camera"],"matrixWorldInverse"]]]],["stat",["call",["dot",["name","_projScreenMatrix"],"multiplyVector3"],[["name","vector"]]]],["return",["name","vector"]]]]]],["stat",["assign",true,["dot",["name","this"],"unprojectVector"],["function",null,["vector","camera"],[["stat",["call",["dot",["dot",["name","camera"],"projectionMatrixInverse"],"getInverse"],[["dot",["name","camera"],"projectionMatrix"]]]],["stat",["call",["dot",["name","_projScreenMatrix"],"multiply"],[["dot",["name","camera"],"matrixWorld"],["dot",["name","camera"],"projectionMatrixInverse"]]]],["stat",["call",["dot",["name","_projScreenMatrix"],"multiplyVector3"],[["name","vector"]]]],["return",["name","vector"]]]]]],["stat",["assign",true,["dot",["name","this"],"pickingRay"],["function",null,["vector","camera"],[["var",[["end"],["ray"],["t"]]],["stat",["assign",true,["dot",["name","vector"],"z"],["unary-prefix","-",["num",1]]]],["stat",["assign",true,["name","end"],["new",["dot",["name","THREE"],"Vector3"],[["dot",["name","vector"],"x"],["dot",["name","vector"],"y"],["num",1]]]]],["stat",["call",["dot",["name","this"],"unprojectVector"],[["name","vector"],["name","camera"]]]],["stat",["call",["dot",["name","this"],"unprojectVector"],[["name","end"],["name","camera"]]]],["stat",["call",["dot",["call",["dot",["name","end"],"subSelf"],[["name","vector"]]],"normalize"],[]]],["return",["new",["dot",["name","THREE"],"Ray"],[["name","vector"],["name","end"]]]]]]]],["stat",["assign",true,["dot",["name","this"],"projectGraph"],["function",null,["root","sort"],[["stat",["assign",true,["name","_objectCount"],["num",0]]],["stat",["assign",true,["dot",["dot",["name","_renderData"],"objects"],"length"],["num",0]]],["stat",["assign",true,["dot",["dot",["name","_renderData"],"sprites"],"length"],["num",0]]],["stat",["assign",true,["dot",["dot",["name","_renderData"],"lights"],"length"],["num",0]]],["var",[["projectObject",["function",null,["object"],[["if",["binary","===",["dot",["name","object"],"visible"],["name","false"]],["return",null],null],["if",["binary","&&",["binary","||",["binary","instanceof",["name","object"],["dot",["name","THREE"],"Mesh"]],["binary","instanceof",["name","object"],["dot",["name","THREE"],"Line"]]],["binary","||",["binary","===",["dot",["name","object"],"frustumCulled"],["name","false"]],["call",["dot",["name","_frustum"],"contains"],[["name","object"]]]]],["block",[["stat",["call",["dot",["name","_vector3"],"copy"],[["call",["dot",["dot",["name","object"],"matrixWorld"],"getPosition"],[]]]]],["stat",["call",["dot",["name","_projScreenMatrix"],"multiplyVector3"],[["name","_vector3"]]]],["stat",["assign",true,["name","_object"],["call",["name","getNextObjectInPool"],[]]]],["stat",["assign",true,["dot",["name","_object"],"object"],["name","object"]]],["stat",["assign",true,["dot",["name","_object"],"z"],["dot",["name","_vector3"],"z"]]],["stat",["call",["dot",["dot",["name","_renderData"],"objects"],"push"],[["name","_object"]]]]]],["if",["binary","||",["binary","instanceof",["name","object"],["dot",["name","THREE"],"Sprite"]],["binary","instanceof",["name","object"],["dot",["name","THREE"],"Particle"]]],["block",[["stat",["call",["dot",["name","_vector3"],"copy"],[["call",["dot",["dot",["name","object"],"matrixWorld"],"getPosition"],[]]]]],["stat",["call",["dot",["name","_projScreenMatrix"],"multiplyVector3"],[["name","_vector3"]]]],["stat",["assign",true,["name","_object"],["call",["name","getNextObjectInPool"],[]]]],["stat",["assign",true,["dot",["name","_object"],"object"],["name","object"]]],["stat",["assign",true,["dot",["name","_object"],"z"],["dot",["name","_vector3"],"z"]]],["stat",["call",["dot",["dot",["name","_renderData"],"sprites"],"push"],[["name","_object"]]]]]],["if",["binary","instanceof",["name","object"],["dot",["name","THREE"],"Light"]],["block",[["stat",["call",["dot",["dot",["name","_renderData"],"lights"],"push"],[["name","object"]]]]]],null]]],["for",["var",[["c",["num",0]],["cl",["dot",["dot",["name","object"],"children"],"length"]]]],["binary","<",["name","c"],["name","cl"]],["unary-postfix","++",["name","c"]],["block",[["stat",["call",["name","projectObject"],[["sub",["dot",["name","object"],"children"],["name","c"]]]]]]]]]]]]],["stat",["call",["name","projectObject"],[["name","root"]]]],["stat",["binary","&&",["name","sort"],["call",["dot",["dot",["name","_renderData"],"objects"],"sort"],[["name","painterSort"]]]]],["return",["name","_renderData"]]]]]],["stat",["assign",true,["dot",["name","this"],"projectScene"],["function",null,["scene","camera","sort"],[["var",[["near",["dot",["name","camera"],"near"]],["far",["dot",["name","camera"],"far"]],["visible",["name","false"]],["o"],["ol"],["v"],["vl"],["f"],["fl"],["n"],["nl"],["c"],["cl"],["u"],["ul"],["object"],["objectMatrixWorld"],["objectMatrixWorldRotation"],["geometry"],["geometryMaterials"],["vertices"],["vertex"],["vertexPositionScreen"],["faces"],["face"],["faceVertexNormals"],["normal"],["faceVertexUvs"],["uvs"],["v1"],["v2"],["v3"],["v4"]]],["stat",["assign",true,["name","_face3Count"],["num",0]]],["stat",["assign",true,["name","_face4Count"],["num",0]]],["stat",["assign",true,["name","_lineCount"],["num",0]]],["stat",["assign",true,["name","_particleCount"],["num",0]]],["stat",["assign",true,["dot",["dot",["name","_renderData"],"elements"],"length"],["num",0]]],["if",["binary","===",["dot",["name","camera"],"parent"],["name","undefined"]],["block",[["stat",["call",["dot",["name","console"],"warn"],[["string","DEPRECATED: Camera hasn't been added to a Scene. Adding it..."]]]],["stat",["call",["dot",["name","scene"],"add"],[["name","camera"]]]]]],null],["stat",["call",["dot",["name","scene"],"updateMatrixWorld"],[]]],["stat",["call",["dot",["dot",["name","camera"],"matrixWorldInverse"],"getInverse"],[["dot",["name","camera"],"matrixWorld"]]]],["stat",["call",["dot",["name","_projScreenMatrix"],"multiply"],[["dot",["name","camera"],"projectionMatrix"],["dot",["name","camera"],"matrixWorldInverse"]]]],["stat",["call",["dot",["name","_frustum"],"setFromMatrix"],[["name","_projScreenMatrix"]]]],["stat",["assign",true,["name","_renderData"],["call",["dot",["name","this"],"projectGraph"],[["name","scene"],["name","false"]]]]],["for",["seq",["assign",true,["name","o"],["num",0]],["assign",true,["name","ol"],["dot",["dot",["name","_renderData"],"objects"],"length"]]],["binary","<",["name","o"],["name","ol"]],["unary-postfix","++",["name","o"]],["block",[["stat",["assign",true,["name","object"],["dot",["sub",["dot",["name","_renderData"],"objects"],["name","o"]],"object"]]],["stat",["assign",true,["name","objectMatrixWorld"],["dot",["name","object"],"matrixWorld"]]],["stat",["assign",true,["name","_vertexCount"],["num",0]]],["if",["binary","instanceof",["name","object"],["dot",["name","THREE"],"Mesh"]],["block",[["stat",["assign",true,["name","geometry"],["dot",["name","object"],"geometry"]]],["stat",["assign",true,["name","geometryMaterials"],["dot",["dot",["name","object"],"geometry"],"materials"]]],["stat",["assign",true,["name","vertices"],["dot",["name","geometry"],"vertices"]]],["stat",["assign",true,["name","faces"],["dot",["name","geometry"],"faces"]]],["stat",["assign",true,["name","faceVertexUvs"],["dot",["name","geometry"],"faceVertexUvs"]]],["stat",["assign",true,["name","objectMatrixWorldRotation"],["call",["dot",["dot",["name","object"],"matrixRotationWorld"],"extractRotation"],[["name","objectMatrixWorld"]]]]],["for",["seq",["assign",true,["name","v"],["num",0]],["assign",true,["name","vl"],["dot",["name","vertices"],"length"]]],["binary","<",["name","v"],["name","vl"]],["unary-postfix","++",["name","v"]],["block",[["stat",["assign",true,["name","_vertex"],["call",["name","getNextVertexInPool"],[]]]],["stat",["call",["dot",["dot",["name","_vertex"],"positionWorld"],"copy"],[["sub",["name","vertices"],["name","v"]]]]],["stat",["call",["dot",["name","objectMatrixWorld"],"multiplyVector3"],[["dot",["name","_vertex"],"positionWorld"]]]],["stat",["call",["dot",["dot",["name","_vertex"],"positionScreen"],"copy"],[["dot",["name","_vertex"],"positionWorld"]]]],["stat",["call",["dot",["name","_projScreenMatrix"],"multiplyVector4"],[["dot",["name","_vertex"],"positionScreen"]]]],["stat",["assign","/",["dot",["dot",["name","_vertex"],"positionScreen"],"x"],["dot",["dot",["name","_vertex"],"positionScreen"],"w"]]],["stat",["assign","/",["dot",["dot",["name","_vertex"],"positionScreen"],"y"],["dot",["dot",["name","_vertex"],"positionScreen"],"w"]]],["stat",["assign",true,["dot",["name","_vertex"],"visible"],["binary","&&",["binary",">",["dot",["dot",["name","_vertex"],"positionScreen"],"z"],["name","near"]],["binary","<",["dot",["dot",["name","_vertex"],"positionScreen"],"z"],["name","far"]]]]]]]],["for",["seq",["assign",true,["name","f"],["num",0]],["assign",true,["name","fl"],["dot",["name","faces"],"length"]]],["binary","<",["name","f"],["name","fl"]],["unary-postfix","++",["name","f"]],["block",[["stat",["assign",true,["name","face"],["sub",["name","faces"],["name","f"]]]],["if",["binary","instanceof",["name","face"],["dot",["name","THREE"],"Face3"]],["block",[["stat",["assign",true,["name","v1"],["sub",["name","_vertexPool"],["dot",["name","face"],"a"]]]],["stat",["assign",true,["name","v2"],["sub",["name","_vertexPool"],["dot",["name","face"],"b"]]]],["stat",["assign",true,["name","v3"],["sub",["name","_vertexPool"],["dot",["name","face"],"c"]]]],["if",["binary","&&",["binary","&&",["dot",["name","v1"],"visible"],["dot",["name","v2"],"visible"]],["dot",["name","v3"],"visible"]],["block",[["stat",["assign",true,["name","visible"],["binary","<",["binary","-",["binary","*",["binary","-",["dot",["dot",["name","v3"],"positionScreen"],"x"],["dot",["dot",["name","v1"],"positionScreen"],"x"]],["binary","-",["dot",["dot",["name","v2"],"positionScreen"],"y"],["dot",["dot",["name","v1"],"positionScreen"],"y"]]],["binary","*",["binary","-",["dot",["dot",["name","v3"],"positionScreen"],"y"],["dot",["dot",["name","v1"],"positionScreen"],"y"]],["binary","-",["dot",["dot",["name","v2"],"positionScreen"],"x"],["dot",["dot",["name","v1"],"positionScreen"],"x"]]]],["num",0]]]],["if",["binary","||",["dot",["name","object"],"doubleSided"],["binary","!=",["name","visible"],["dot",["name","object"],"flipSided"]]],["block",[["stat",["assign",true,["name","_face"],["call",["name","getNextFace3InPool"],[]]]],["stat",["call",["dot",["dot",["name","_face"],"v1"],"copy"],[["name","v1"]]]],["stat",["call",["dot",["dot",["name","_face"],"v2"],"copy"],[["name","v2"]]]],["stat",["call",["dot",["dot",["name","_face"],"v3"],"copy"],[["name","v3"]]]]]],["block",[["continue",null]]]]]],["block",[["continue",null]]]]]],["if",["binary","instanceof",["name","face"],["dot",["name","THREE"],"Face4"]],["block",[["stat",["assign",true,["name","v1"],["sub",["name","_vertexPool"],["dot",["name","face"],"a"]]]],["stat",["assign",true,["name","v2"],["sub",["name","_vertexPool"],["dot",["name","face"],"b"]]]],["stat",["assign",true,["name","v3"],["sub",["name","_vertexPool"],["dot",["name","face"],"c"]]]],["stat",["assign",true,["name","v4"],["sub",["name","_vertexPool"],["dot",["name","face"],"d"]]]],["if",["binary","&&",["binary","&&",["binary","&&",["dot",["name","v1"],"visible"],["dot",["name","v2"],"visible"]],["dot",["name","v3"],"visible"]],["dot",["name","v4"],"visible"]],["block",[["stat",["assign",true,["name","visible"],["binary","||",["binary","<",["binary","-",["binary","*",["binary","-",["dot",["dot",["name","v4"],"positionScreen"],"x"],["dot",["dot",["name","v1"],"positionScreen"],"x"]],["binary","-",["dot",["dot",["name","v2"],"positionScreen"],"y"],["dot",["dot",["name","v1"],"positionScreen"],"y"]]],["binary","*",["binary","-",["dot",["dot",["name","v4"],"positionScreen"],"y"],["dot",["dot",["name","v1"],"positionScreen"],"y"]],["binary","-",["dot",["dot",["name","v2"],"positionScreen"],"x"],["dot",["dot",["name","v1"],"positionScreen"],"x"]]]],["num",0]],["binary","<",["binary","-",["binary","*",["binary","-",["dot",["dot",["name","v2"],"positionScreen"],"x"],["dot",["dot",["name","v3"],"positionScreen"],"x"]],["binary","-",["dot",["dot",["name","v4"],"positionScreen"],"y"],["dot",["dot",["name","v3"],"positionScreen"],"y"]]],["binary","*",["binary","-",["dot",["dot",["name","v2"],"positionScreen"],"y"],["dot",["dot",["name","v3"],"positionScreen"],"y"]],["binary","-",["dot",["dot",["name","v4"],"positionScreen"],"x"],["dot",["dot",["name","v3"],"positionScreen"],"x"]]]],["num",0]]]]],["if",["binary","||",["dot",["name","object"],"doubleSided"],["binary","!=",["name","visible"],["dot",["name","object"],"flipSided"]]],["block",[["stat",["assign",true,["name","_face"],["call",["name","getNextFace4InPool"],[]]]],["stat",["call",["dot",["dot",["name","_face"],"v1"],"copy"],[["name","v1"]]]],["stat",["call",["dot",["dot",["name","_face"],"v2"],"copy"],[["name","v2"]]]],["stat",["call",["dot",["dot",["name","_face"],"v3"],"copy"],[["name","v3"]]]],["stat",["call",["dot",["dot",["name","_face"],"v4"],"copy"],[["name","v4"]]]]]],["block",[["continue",null]]]]]],["block",[["continue",null]]]]]],null]],["stat",["call",["dot",["dot",["name","_face"],"normalWorld"],"copy"],[["dot",["name","face"],"normal"]]]],["if",["binary","&&",["unary-prefix","!",["name","visible"]],["binary","||",["dot",["name","object"],"flipSided"],["dot",["name","object"],"doubleSided"]]],["stat",["call",["dot",["dot",["name","_face"],"normalWorld"],"negate"],[]]],null],["stat",["call",["dot",["name","objectMatrixWorldRotation"],"multiplyVector3"],[["dot",["name","_face"],"normalWorld"]]]],["stat",["call",["dot",["dot",["name","_face"],"centroidWorld"],"copy"],[["dot",["name","face"],"centroid"]]]],["stat",["call",["dot",["name","objectMatrixWorld"],"multiplyVector3"],[["dot",["name","_face"],"centroidWorld"]]]],["stat",["call",["dot",["dot",["name","_face"],"centroidScreen"],"copy"],[["dot",["name","_face"],"centroidWorld"]]]],["stat",["call",["dot",["name","_projScreenMatrix"],"multiplyVector3"],[["dot",["name","_face"],"centroidScreen"]]]],["stat",["assign",true,["name","faceVertexNormals"],["dot",["name","face"],"vertexNormals"]]],["for",["seq",["assign",true,["name","n"],["num",0]],["assign",true,["name","nl"],["dot",["name","faceVertexNormals"],"length"]]],["binary","<",["name","n"],["name","nl"]],["unary-postfix","++",["name","n"]],["block",[["stat",["assign",true,["name","normal"],["sub",["dot",["name","_face"],"vertexNormalsWorld"],["name","n"]]]],["stat",["call",["dot",["name","normal"],"copy"],[["sub",["name","faceVertexNormals"],["name","n"]]]]],["if",["binary","&&",["unary-prefix","!",["name","visible"]],["binary","||",["dot",["name","object"],"flipSided"],["dot",["name","object"],"doubleSided"]]],["stat",["call",["dot",["name","normal"],"negate"],[]]],null],["stat",["call",["dot",["name","objectMatrixWorldRotation"],"multiplyVector3"],[["name","normal"]]]]]]],["for",["seq",["assign",true,["name","c"],["num",0]],["assign",true,["name","cl"],["dot",["name","faceVertexUvs"],"length"]]],["binary","<",["name","c"],["name","cl"]],["unary-postfix","++",["name","c"]],["block",[["stat",["assign",true,["name","uvs"],["sub",["sub",["name","faceVertexUvs"],["name","c"]],["name","f"]]]],["if",["unary-prefix","!",["name","uvs"]],["continue",null],null],["for",["seq",["assign",true,["name","u"],["num",0]],["assign",true,["name","ul"],["dot",["name","uvs"],"length"]]],["binary","<",["name","u"],["name","ul"]],["unary-postfix","++",["name","u"]],["block",[["stat",["assign",true,["sub",["sub",["dot",["name","_face"],"uvs"],["name","c"]],["name","u"]],["sub",["name","uvs"],["name","u"]]]]]]]]]],["stat",["assign",true,["dot",["name","_face"],"material"],["dot",["name","object"],"material"]]],["stat",["assign",true,["dot",["name","_face"],"faceMaterial"],["conditional",["binary","!==",["dot",["name","face"],"materialIndex"],["name","null"]],["sub",["name","geometryMaterials"],["dot",["name","face"],"materialIndex"]],["name","null"]]]],["stat",["assign",true,["dot",["name","_face"],"z"],["dot",["dot",["name","_face"],"centroidScreen"],"z"]]],["stat",["call",["dot",["dot",["name","_renderData"],"elements"],"push"],[["name","_face"]]]]]]]]],["if",["binary","instanceof",["name","object"],["dot",["name","THREE"],"Line"]],["block",[["stat",["call",["dot",["name","_projScreenobjectMatrixWorld"],"multiply"],[["name","_projScreenMatrix"],["name","objectMatrixWorld"]]]],["stat",["assign",true,["name","vertices"],["dot",["dot",["name","object"],"geometry"],"vertices"]]],["stat",["assign",true,["name","v1"],["call",["name","getNextVertexInPool"],[]]]],["stat",["call",["dot",["dot",["name","v1"],"positionScreen"],"copy"],[["sub",["name","vertices"],["num",0]]]]],["stat",["call",["dot",["name","_projScreenobjectMatrixWorld"],"multiplyVector4"],[["dot",["name","v1"],"positionScreen"]]]],["var",[["step",["conditional",["binary","===",["dot",["name","object"],"type"],["dot",["name","THREE"],"LinePieces"]],["num",2],["num",1]]]]],["for",["seq",["assign",true,["name","v"],["num",1]],["assign",true,["name","vl"],["dot",["name","vertices"],"length"]]],["binary","<",["name","v"],["name","vl"]],["unary-postfix","++",["name","v"]],["block",[["stat",["assign",true,["name","v1"],["call",["name","getNextVertexInPool"],[]]]],["stat",["call",["dot",["dot",["name","v1"],"positionScreen"],"copy"],[["sub",["name","vertices"],["name","v"]]]]],["stat",["call",["dot",["name","_projScreenobjectMatrixWorld"],"multiplyVector4"],[["dot",["name","v1"],"positionScreen"]]]],["if",["binary",">",["binary","%",["binary","+",["name","v"],["num",1]],["name","step"]],["num",0]],["continue",null],null],["stat",["assign",true,["name","v2"],["sub",["name","_vertexPool"],["binary","-",["name","_vertexCount"],["num",2]]]]],["stat",["call",["dot",["name","_clippedVertex1PositionScreen"],"copy"],[["dot",["name","v1"],"positionScreen"]]]],["stat",["call",["dot",["name","_clippedVertex2PositionScreen"],"copy"],[["dot",["name","v2"],"positionScreen"]]]],["if",["call",["name","clipLine"],[["name","_clippedVertex1PositionScreen"],["name","_clippedVertex2PositionScreen"]]],["block",[["stat",["call",["dot",["name","_clippedVertex1PositionScreen"],"multiplyScalar"],[["binary","/",["num",1],["dot",["name","_clippedVertex1PositionScreen"],"w"]]]]],["stat",["call",["dot",["name","_clippedVertex2PositionScreen"],"multiplyScalar"],[["binary","/",["num",1],["dot",["name","_clippedVertex2PositionScreen"],"w"]]]]],["stat",["assign",true,["name","_line"],["call",["name","getNextLineInPool"],[]]]],["stat",["call",["dot",["dot",["dot",["name","_line"],"v1"],"positionScreen"],"copy"],[["name","_clippedVertex1PositionScreen"]]]],["stat",["call",["dot",["dot",["dot",["name","_line"],"v2"],"positionScreen"],"copy"],[["name","_clippedVertex2PositionScreen"]]]],["stat",["assign",true,["dot",["name","_line"],"z"],["call",["dot",["name","Math"],"max"],[["dot",["name","_clippedVertex1PositionScreen"],"z"],["dot",["name","_clippedVertex2PositionScreen"],"z"]]]]],["stat",["assign",true,["dot",["name","_line"],"material"],["dot",["name","object"],"material"]]],["stat",["call",["dot",["dot",["name","_renderData"],"elements"],"push"],[["name","_line"]]]]]],null]]]]]],null]]]]],["for",["seq",["assign",true,["name","o"],["num",0]],["assign",true,["name","ol"],["dot",["dot",["name","_renderData"],"sprites"],"length"]]],["binary","<",["name","o"],["name","ol"]],["unary-postfix","++",["name","o"]],["block",[["stat",["assign",true,["name","object"],["dot",["sub",["dot",["name","_renderData"],"sprites"],["name","o"]],"object"]]],["stat",["assign",true,["name","objectMatrixWorld"],["dot",["name","object"],"matrixWorld"]]],["if",["binary","instanceof",["name","object"],["dot",["name","THREE"],"Particle"]],["block",[["stat",["call",["dot",["name","_vector4"],"set"],[["sub",["dot",["name","objectMatrixWorld"],"elements"],["num",12]],["sub",["dot",["name","objectMatrixWorld"],"elements"],["num",13]],["sub",["dot",["name","objectMatrixWorld"],"elements"],["num",14]],["num",1]]]],["stat",["call",["dot",["name","_projScreenMatrix"],"multiplyVector4"],[["name","_vector4"]]]],["stat",["assign","/",["dot",["name","_vector4"],"z"],["dot",["name","_vector4"],"w"]]],["if",["binary","&&",["binary",">",["dot",["name","_vector4"],"z"],["num",0]],["binary","<",["dot",["name","_vector4"],"z"],["num",1]]],["block",[["stat",["assign",true,["name","_particle"],["call",["name","getNextParticleInPool"],[]]]],["stat",["assign",true,["dot",["name","_particle"],"x"],["binary","/",["dot",["name","_vector4"],"x"],["dot",["name","_vector4"],"w"]]]],["stat",["assign",true,["dot",["name","_particle"],"y"],["binary","/",["dot",["name","_vector4"],"y"],["dot",["name","_vector4"],"w"]]]],["stat",["assign",true,["dot",["name","_particle"],"z"],["dot",["name","_vector4"],"z"]]],["stat",["assign",true,["dot",["name","_particle"],"rotation"],["dot",["dot",["name","object"],"rotation"],"z"]]],["stat",["assign",true,["dot",["dot",["name","_particle"],"scale"],"x"],["binary","*",["dot",["dot",["name","object"],"scale"],"x"],["call",["dot",["name","Math"],"abs"],[["binary","-",["dot",["name","_particle"],"x"],["binary","/",["binary","+",["dot",["name","_vector4"],"x"],["sub",["dot",["dot",["name","camera"],"projectionMatrix"],"elements"],["num",0]]],["binary","+",["dot",["name","_vector4"],"w"],["sub",["dot",["dot",["name","camera"],"projectionMatrix"],"elements"],["num",12]]]]]]]]]],["stat",["assign",true,["dot",["dot",["name","_particle"],"scale"],"y"],["binary","*",["dot",["dot",["name","object"],"scale"],"y"],["call",["dot",["name","Math"],"abs"],[["binary","-",["dot",["name","_particle"],"y"],["binary","/",["binary","+",["dot",["name","_vector4"],"y"],["sub",["dot",["dot",["name","camera"],"projectionMatrix"],"elements"],["num",5]]],["binary","+",["dot",["name","_vector4"],"w"],["sub",["dot",["dot",["name","camera"],"projectionMatrix"],"elements"],["num",13]]]]]]]]]],["stat",["assign",true,["dot",["name","_particle"],"material"],["dot",["name","object"],"material"]]],["stat",["call",["dot",["dot",["name","_renderData"],"elements"],"push"],[["name","_particle"]]]]]],null]]],null]]]],["stat",["binary","&&",["name","sort"],["call",["dot",["dot",["name","_renderData"],"elements"],"sort"],[["name","painterSort"]]]]],["return",["name","_renderData"]]]]]],["defun","getNextObjectInPool",[],[["var",[["object",["assign",true,["sub",["name","_objectPool"],["name","_objectCount"]],["binary","||",["sub",["name","_objectPool"],["name","_objectCount"]],["new",["dot",["name","THREE"],"RenderableObject"],[]]]]]]],["stat",["unary-postfix","++",["name","_objectCount"]]],["return",["name","object"]]]],["defun","getNextVertexInPool",[],[["var",[["vertex",["assign",true,["sub",["name","_vertexPool"],["name","_vertexCount"]],["binary","||",["sub",["name","_vertexPool"],["name","_vertexCount"]],["new",["dot",["name","THREE"],"RenderableVertex"],[]]]]]]],["stat",["unary-postfix","++",["name","_vertexCount"]]],["return",["name","vertex"]]]],["defun","getNextFace3InPool",[],[["var",[["face",["assign",true,["sub",["name","_face3Pool"],["name","_face3Count"]],["binary","||",["sub",["name","_face3Pool"],["name","_face3Count"]],["new",["dot",["name","THREE"],"RenderableFace3"],[]]]]]]],["stat",["unary-postfix","++",["name","_face3Count"]]],["return",["name","face"]]]],["defun","getNextFace4InPool",[],[["var",[["face",["assign",true,["sub",["name","_face4Pool"],["name","_face4Count"]],["binary","||",["sub",["name","_face4Pool"],["name","_face4Count"]],["new",["dot",["name","THREE"],"RenderableFace4"],[]]]]]]],["stat",["unary-postfix","++",["name","_face4Count"]]],["return",["name","face"]]]],["defun","getNextLineInPool",[],[["var",[["line",["assign",true,["sub",["name","_linePool"],["name","_lineCount"]],["binary","||",["sub",["name","_linePool"],["name","_lineCount"]],["new",["dot",["name","THREE"],"RenderableLine"],[]]]]]]],["stat",["unary-postfix","++",["name","_lineCount"]]],["return",["name","line"]]]],["defun","getNextParticleInPool",[],[["var",[["particle",["assign",true,["sub",["name","_particlePool"],["name","_particleCount"]],["binary","||",["sub",["name","_particlePool"],["name","_particleCount"]],["new",["dot",["name","THREE"],"RenderableParticle"],[]]]]]]],["stat",["unary-postfix","++",["name","_particleCount"]]],["return",["name","particle"]]]],["defun","painterSort",["a","b"],[["return",["binary","-",["dot",["name","b"],"z"],["dot",["name","a"],"z"]]]]],["defun","clipLine",["s1","s2"],[["var",[["alpha1",["num",0]],["alpha2",["num",1]],["bc1near",["binary","+",["dot",["name","s1"],"z"],["dot",["name","s1"],"w"]]],["bc2near",["binary","+",["dot",["name","s2"],"z"],["dot",["name","s2"],"w"]]],["bc1far",["binary","+",["unary-prefix","-",["dot",["name","s1"],"z"]],["dot",["name","s1"],"w"]]],["bc2far",["binary","+",["unary-prefix","-",["dot",["name","s2"],"z"]],["dot",["name","s2"],"w"]]]]],["if",["binary","&&",["binary","&&",["binary","&&",["binary",">=",["name","bc1near"],["num",0]],["binary",">=",["name","bc2near"],["num",0]]],["binary",">=",["name","bc1far"],["num",0]]],["binary",">=",["name","bc2far"],["num",0]]],["block",[["return",["name","true"]]]],["if",["binary","||",["binary","&&",["binary","<",["name","bc1near"],["num",0]],["binary","<",["name","bc2near"],["num",0]]],["binary","&&",["binary","<",["name","bc1far"],["num",0]],["binary","<",["name","bc2far"],["num",0]]]],["block",[["return",["name","false"]]]],["block",[["if",["binary","<",["name","bc1near"],["num",0]],["block",[["stat",["assign",true,["name","alpha1"],["call",["dot",["name","Math"],"max"],[["name","alpha1"],["binary","/",["name","bc1near"],["binary","-",["name","bc1near"],["name","bc2near"]]]]]]]]],["if",["binary","<",["name","bc2near"],["num",0]],["block",[["stat",["assign",true,["name","alpha2"],["call",["dot",["name","Math"],"min"],[["name","alpha2"],["binary","/",["name","bc1near"],["binary","-",["name","bc1near"],["name","bc2near"]]]]]]]]],null]],["if",["binary","<",["name","bc1far"],["num",0]],["block",[["stat",["assign",true,["name","alpha1"],["call",["dot",["name","Math"],"max"],[["name","alpha1"],["binary","/",["name","bc1far"],["binary","-",["name","bc1far"],["name","bc2far"]]]]]]]]],["if",["binary","<",["name","bc2far"],["num",0]],["block",[["stat",["assign",true,["name","alpha2"],["call",["dot",["name","Math"],"min"],[["name","alpha2"],["binary","/",["name","bc1far"],["binary","-",["name","bc1far"],["name","bc2far"]]]]]]]]],null]],["if",["binary","<",["name","alpha2"],["name","alpha1"]],["block",[["return",["name","false"]]]],["block",[["stat",["call",["dot",["name","s1"],"lerpSelf"],[["name","s2"],["name","alpha1"]]]],["stat",["call",["dot",["name","s2"],"lerpSelf"],[["name","s1"],["binary","-",["num",1],["name","alpha2"]]]]],["return",["name","true"]]]]]]]]]]]]]]],["stat",["assign",true,["dot",["name","THREE"],"Quaternion"],["function",null,["x","y","z","w"],[["stat",["assign",true,["dot",["name","this"],"x"],["binary","||",["name","x"],["num",0]]]],["stat",["assign",true,["dot",["name","this"],"y"],["binary","||",["name","y"],["num",0]]]],["stat",["assign",true,["dot",["name","this"],"z"],["binary","||",["name","z"],["num",0]]]],["stat",["assign",true,["dot",["name","this"],"w"],["conditional",["binary","!==",["name","w"],["name","undefined"]],["name","w"],["num",1]]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"Quaternion"],"prototype"],["object",[["constructor",["dot",["name","THREE"],"Quaternion"]],["set",["function",null,["x","y","z","w"],[["stat",["assign",true,["dot",["name","this"],"x"],["name","x"]]],["stat",["assign",true,["dot",["name","this"],"y"],["name","y"]]],["stat",["assign",true,["dot",["name","this"],"z"],["name","z"]]],["stat",["assign",true,["dot",["name","this"],"w"],["name","w"]]],["return",["name","this"]]]]],["copy",["function",null,["q"],[["stat",["assign",true,["dot",["name","this"],"x"],["dot",["name","q"],"x"]]],["stat",["assign",true,["dot",["name","this"],"y"],["dot",["name","q"],"y"]]],["stat",["assign",true,["dot",["name","this"],"z"],["dot",["name","q"],"z"]]],["stat",["assign",true,["dot",["name","this"],"w"],["dot",["name","q"],"w"]]],["return",["name","this"]]]]],["setFromEuler",["function",null,["vector"],[["var",[["c",["binary","/",["dot",["name","Math"],"PI"],["num",360]]],["x",["binary","*",["dot",["name","vector"],"x"],["name","c"]]],["y",["binary","*",["dot",["name","vector"],"y"],["name","c"]]],["z",["binary","*",["dot",["name","vector"],"z"],["name","c"]]],["c1",["call",["dot",["name","Math"],"cos"],[["name","y"]]]],["s1",["call",["dot",["name","Math"],"sin"],[["name","y"]]]],["c2",["call",["dot",["name","Math"],"cos"],[["unary-prefix","-",["name","z"]]]]],["s2",["call",["dot",["name","Math"],"sin"],[["unary-prefix","-",["name","z"]]]]],["c3",["call",["dot",["name","Math"],"cos"],[["name","x"]]]],["s3",["call",["dot",["name","Math"],"sin"],[["name","x"]]]],["c1c2",["binary","*",["name","c1"],["name","c2"]]],["s1s2",["binary","*",["name","s1"],["name","s2"]]]]],["stat",["assign",true,["dot",["name","this"],"w"],["binary","-",["binary","*",["name","c1c2"],["name","c3"]],["binary","*",["name","s1s2"],["name","s3"]]]]],["stat",["assign",true,["dot",["name","this"],"x"],["binary","+",["binary","*",["name","c1c2"],["name","s3"]],["binary","*",["name","s1s2"],["name","c3"]]]]],["stat",["assign",true,["dot",["name","this"],"y"],["binary","+",["binary","*",["binary","*",["name","s1"],["name","c2"]],["name","c3"]],["binary","*",["binary","*",["name","c1"],["name","s2"]],["name","s3"]]]]],["stat",["assign",true,["dot",["name","this"],"z"],["binary","-",["binary","*",["binary","*",["name","c1"],["name","s2"]],["name","c3"]],["binary","*",["binary","*",["name","s1"],["name","c2"]],["name","s3"]]]]],["return",["name","this"]]]]],["setFromAxisAngle",["function",null,["axis","angle"],[["var",[["halfAngle",["binary","/",["name","angle"],["num",2]]],["s",["call",["dot",["name","Math"],"sin"],[["name","halfAngle"]]]]]],["stat",["assign",true,["dot",["name","this"],"x"],["binary","*",["dot",["name","axis"],"x"],["name","s"]]]],["stat",["assign",true,["dot",["name","this"],"y"],["binary","*",["dot",["name","axis"],"y"],["name","s"]]]],["stat",["assign",true,["dot",["name","this"],"z"],["binary","*",["dot",["name","axis"],"z"],["name","s"]]]],["stat",["assign",true,["dot",["name","this"],"w"],["call",["dot",["name","Math"],"cos"],[["name","halfAngle"]]]]],["return",["name","this"]]]]],["setFromRotationMatrix",["function",null,["m"],[["defun","copySign",["a","b"],[["return",["conditional",["binary","<",["name","b"],["num",0]],["unary-prefix","-",["call",["dot",["name","Math"],"abs"],[["name","a"]]]],["call",["dot",["name","Math"],"abs"],[["name","a"]]]]]]],["var",[["absQ",["call",["dot",["name","Math"],"pow"],[["call",["dot",["name","m"],"determinant"],[]],["binary","/",["num",1],["num",3]]]]]]],["stat",["assign",true,["dot",["name","this"],"w"],["binary","/",["call",["dot",["name","Math"],"sqrt"],[["call",["dot",["name","Math"],"max"],[["num",0],["binary","+",["binary","+",["binary","+",["name","absQ"],["sub",["dot",["name","m"],"elements"],["num",0]]],["sub",["dot",["name","m"],"elements"],["num",5]]],["sub",["dot",["name","m"],"elements"],["num",10]]]]]]],["num",2]]]],["stat",["assign",true,["dot",["name","this"],"x"],["binary","/",["call",["dot",["name","Math"],"sqrt"],[["call",["dot",["name","Math"],"max"],[["num",0],["binary","-",["binary","-",["binary","+",["name","absQ"],["sub",["dot",["name","m"],"elements"],["num",0]]],["sub",["dot",["name","m"],"elements"],["num",5]]],["sub",["dot",["name","m"],"elements"],["num",10]]]]]]],["num",2]]]],["stat",["assign",true,["dot",["name","this"],"y"],["binary","/",["call",["dot",["name","Math"],"sqrt"],[["call",["dot",["name","Math"],"max"],[["num",0],["binary","-",["binary","+",["binary","-",["name","absQ"],["sub",["dot",["name","m"],"elements"],["num",0]]],["sub",["dot",["name","m"],"elements"],["num",5]]],["sub",["dot",["name","m"],"elements"],["num",10]]]]]]],["num",2]]]],["stat",["assign",true,["dot",["name","this"],"z"],["binary","/",["call",["dot",["name","Math"],"sqrt"],[["call",["dot",["name","Math"],"max"],[["num",0],["binary","+",["binary","-",["binary","-",["name","absQ"],["sub",["dot",["name","m"],"elements"],["num",0]]],["sub",["dot",["name","m"],"elements"],["num",5]]],["sub",["dot",["name","m"],"elements"],["num",10]]]]]]],["num",2]]]],["stat",["assign",true,["dot",["name","this"],"x"],["call",["name","copySign"],[["dot",["name","this"],"x"],["binary","-",["sub",["dot",["name","m"],"elements"],["num",6]],["sub",["dot",["name","m"],"elements"],["num",9]]]]]]],["stat",["assign",true,["dot",["name","this"],"y"],["call",["name","copySign"],[["dot",["name","this"],"y"],["binary","-",["sub",["dot",["name","m"],"elements"],["num",8]],["sub",["dot",["name","m"],"elements"],["num",2]]]]]]],["stat",["assign",true,["dot",["name","this"],"z"],["call",["name","copySign"],[["dot",["name","this"],"z"],["binary","-",["sub",["dot",["name","m"],"elements"],["num",1]],["sub",["dot",["name","m"],"elements"],["num",4]]]]]]],["stat",["call",["dot",["name","this"],"normalize"],[]]],["return",["name","this"]]]]],["calculateW",["function",null,[],[["stat",["assign",true,["dot",["name","this"],"w"],["unary-prefix","-",["call",["dot",["name","Math"],"sqrt"],[["call",["dot",["name","Math"],"abs"],[["binary","-",["binary","-",["binary","-",["num",1],["binary","*",["dot",["name","this"],"x"],["dot",["name","this"],"x"]]],["binary","*",["dot",["name","this"],"y"],["dot",["name","this"],"y"]]],["binary","*",["dot",["name","this"],"z"],["dot",["name","this"],"z"]]]]]]]]]],["return",["name","this"]]]]],["inverse",["function",null,[],[["stat",["assign","*",["dot",["name","this"],"x"],["unary-prefix","-",["num",1]]]],["stat",["assign","*",["dot",["name","this"],"y"],["unary-prefix","-",["num",1]]]],["stat",["assign","*",["dot",["name","this"],"z"],["unary-prefix","-",["num",1]]]],["return",["name","this"]]]]],["length",["function",null,[],[["return",["call",["dot",["name","Math"],"sqrt"],[["binary","+",["binary","+",["binary","+",["binary","*",["dot",["name","this"],"x"],["dot",["name","this"],"x"]],["binary","*",["dot",["name","this"],"y"],["dot",["name","this"],"y"]]],["binary","*",["dot",["name","this"],"z"],["dot",["name","this"],"z"]]],["binary","*",["dot",["name","this"],"w"],["dot",["name","this"],"w"]]]]]]]]],["normalize",["function",null,[],[["var",[["l",["call",["dot",["name","Math"],"sqrt"],[["binary","+",["binary","+",["binary","+",["binary","*",["dot",["name","this"],"x"],["dot",["name","this"],"x"]],["binary","*",["dot",["name","this"],"y"],["dot",["name","this"],"y"]]],["binary","*",["dot",["name","this"],"z"],["dot",["name","this"],"z"]]],["binary","*",["dot",["name","this"],"w"],["dot",["name","this"],"w"]]]]]]]],["if",["binary","===",["name","l"],["num",0]],["block",[["stat",["assign",true,["dot",["name","this"],"x"],["num",0]]],["stat",["assign",true,["dot",["name","this"],"y"],["num",0]]],["stat",["assign",true,["dot",["name","this"],"z"],["num",0]]],["stat",["assign",true,["dot",["name","this"],"w"],["num",0]]]]],["block",[["stat",["assign",true,["name","l"],["binary","/",["num",1],["name","l"]]]],["stat",["assign",true,["dot",["name","this"],"x"],["binary","*",["dot",["name","this"],"x"],["name","l"]]]],["stat",["assign",true,["dot",["name","this"],"y"],["binary","*",["dot",["name","this"],"y"],["name","l"]]]],["stat",["assign",true,["dot",["name","this"],"z"],["binary","*",["dot",["name","this"],"z"],["name","l"]]]],["stat",["assign",true,["dot",["name","this"],"w"],["binary","*",["dot",["name","this"],"w"],["name","l"]]]]]]],["return",["name","this"]]]]],["multiply",["function",null,["a","b"],[["stat",["assign",true,["dot",["name","this"],"x"],["binary","+",["binary","-",["binary","+",["binary","*",["dot",["name","a"],"x"],["dot",["name","b"],"w"]],["binary","*",["dot",["name","a"],"y"],["dot",["name","b"],"z"]]],["binary","*",["dot",["name","a"],"z"],["dot",["name","b"],"y"]]],["binary","*",["dot",["name","a"],"w"],["dot",["name","b"],"x"]]]]],["stat",["assign",true,["dot",["name","this"],"y"],["binary","+",["binary","+",["binary","+",["binary","*",["unary-prefix","-",["dot",["name","a"],"x"]],["dot",["name","b"],"z"]],["binary","*",["dot",["name","a"],"y"],["dot",["name","b"],"w"]]],["binary","*",["dot",["name","a"],"z"],["dot",["name","b"],"x"]]],["binary","*",["dot",["name","a"],"w"],["dot",["name","b"],"y"]]]]],["stat",["assign",true,["dot",["name","this"],"z"],["binary","+",["binary","+",["binary","-",["binary","*",["dot",["name","a"],"x"],["dot",["name","b"],"y"]],["binary","*",["dot",["name","a"],"y"],["dot",["name","b"],"x"]]],["binary","*",["dot",["name","a"],"z"],["dot",["name","b"],"w"]]],["binary","*",["dot",["name","a"],"w"],["dot",["name","b"],"z"]]]]],["stat",["assign",true,["dot",["name","this"],"w"],["binary","+",["binary","-",["binary","-",["binary","*",["unary-prefix","-",["dot",["name","a"],"x"]],["dot",["name","b"],"x"]],["binary","*",["dot",["name","a"],"y"],["dot",["name","b"],"y"]]],["binary","*",["dot",["name","a"],"z"],["dot",["name","b"],"z"]]],["binary","*",["dot",["name","a"],"w"],["dot",["name","b"],"w"]]]]],["return",["name","this"]]]]],["multiplySelf",["function",null,["b"],[["var",[["qax",["dot",["name","this"],"x"]],["qay",["dot",["name","this"],"y"]],["qaz",["dot",["name","this"],"z"]],["qaw",["dot",["name","this"],"w"]],["qbx",["dot",["name","b"],"x"]],["qby",["dot",["name","b"],"y"]],["qbz",["dot",["name","b"],"z"]],["qbw",["dot",["name","b"],"w"]]]],["stat",["assign",true,["dot",["name","this"],"x"],["binary","-",["binary","+",["binary","+",["binary","*",["name","qax"],["name","qbw"]],["binary","*",["name","qaw"],["name","qbx"]]],["binary","*",["name","qay"],["name","qbz"]]],["binary","*",["name","qaz"],["name","qby"]]]]],["stat",["assign",true,["dot",["name","this"],"y"],["binary","-",["binary","+",["binary","+",["binary","*",["name","qay"],["name","qbw"]],["binary","*",["name","qaw"],["name","qby"]]],["binary","*",["name","qaz"],["name","qbx"]]],["binary","*",["name","qax"],["name","qbz"]]]]],["stat",["assign",true,["dot",["name","this"],"z"],["binary","-",["binary","+",["binary","+",["binary","*",["name","qaz"],["name","qbw"]],["binary","*",["name","qaw"],["name","qbz"]]],["binary","*",["name","qax"],["name","qby"]]],["binary","*",["name","qay"],["name","qbx"]]]]],["stat",["assign",true,["dot",["name","this"],"w"],["binary","-",["binary","-",["binary","-",["binary","*",["name","qaw"],["name","qbw"]],["binary","*",["name","qax"],["name","qbx"]]],["binary","*",["name","qay"],["name","qby"]]],["binary","*",["name","qaz"],["name","qbz"]]]]],["return",["name","this"]]]]],["multiplyVector3",["function",null,["vector","dest"],[["if",["unary-prefix","!",["name","dest"]],["block",[["stat",["assign",true,["name","dest"],["name","vector"]]]]],null],["var",[["x",["dot",["name","vector"],"x"]],["y",["dot",["name","vector"],"y"]],["z",["dot",["name","vector"],"z"]],["qx",["dot",["name","this"],"x"]],["qy",["dot",["name","this"],"y"]],["qz",["dot",["name","this"],"z"]],["qw",["dot",["name","this"],"w"]]]],["var",[["ix",["binary","-",["binary","+",["binary","*",["name","qw"],["name","x"]],["binary","*",["name","qy"],["name","z"]]],["binary","*",["name","qz"],["name","y"]]]],["iy",["binary","-",["binary","+",["binary","*",["name","qw"],["name","y"]],["binary","*",["name","qz"],["name","x"]]],["binary","*",["name","qx"],["name","z"]]]],["iz",["binary","-",["binary","+",["binary","*",["name","qw"],["name","z"]],["binary","*",["name","qx"],["name","y"]]],["binary","*",["name","qy"],["name","x"]]]],["iw",["binary","-",["binary","-",["binary","*",["unary-prefix","-",["name","qx"]],["name","x"]],["binary","*",["name","qy"],["name","y"]]],["binary","*",["name","qz"],["name","z"]]]]]],["stat",["assign",true,["dot",["name","dest"],"x"],["binary","-",["binary","+",["binary","+",["binary","*",["name","ix"],["name","qw"]],["binary","*",["name","iw"],["unary-prefix","-",["name","qx"]]]],["binary","*",["name","iy"],["unary-prefix","-",["name","qz"]]]],["binary","*",["name","iz"],["unary-prefix","-",["name","qy"]]]]]],["stat",["assign",true,["dot",["name","dest"],"y"],["binary","-",["binary","+",["binary","+",["binary","*",["name","iy"],["name","qw"]],["binary","*",["name","iw"],["unary-prefix","-",["name","qy"]]]],["binary","*",["name","iz"],["unary-prefix","-",["name","qx"]]]],["binary","*",["name","ix"],["unary-prefix","-",["name","qz"]]]]]],["stat",["assign",true,["dot",["name","dest"],"z"],["binary","-",["binary","+",["binary","+",["binary","*",["name","iz"],["name","qw"]],["binary","*",["name","iw"],["unary-prefix","-",["name","qz"]]]],["binary","*",["name","ix"],["unary-prefix","-",["name","qy"]]]],["binary","*",["name","iy"],["unary-prefix","-",["name","qx"]]]]]],["return",["name","dest"]]]]],["clone",["function",null,[],[["return",["new",["dot",["name","THREE"],"Quaternion"],[["dot",["name","this"],"x"],["dot",["name","this"],"y"],["dot",["name","this"],"z"],["dot",["name","this"],"w"]]]]]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"Quaternion"],"slerp"],["function",null,["qa","qb","qm","t"],[["var",[["cosHalfTheta",["binary","+",["binary","+",["binary","+",["binary","*",["dot",["name","qa"],"w"],["dot",["name","qb"],"w"]],["binary","*",["dot",["name","qa"],"x"],["dot",["name","qb"],"x"]]],["binary","*",["dot",["name","qa"],"y"],["dot",["name","qb"],"y"]]],["binary","*",["dot",["name","qa"],"z"],["dot",["name","qb"],"z"]]]]]],["if",["binary","<",["name","cosHalfTheta"],["num",0]],["block",[["stat",["assign",true,["dot",["name","qm"],"w"],["unary-prefix","-",["dot",["name","qb"],"w"]]]],["stat",["assign",true,["dot",["name","qm"],"x"],["unary-prefix","-",["dot",["name","qb"],"x"]]]],["stat",["assign",true,["dot",["name","qm"],"y"],["unary-prefix","-",["dot",["name","qb"],"y"]]]],["stat",["assign",true,["dot",["name","qm"],"z"],["unary-prefix","-",["dot",["name","qb"],"z"]]]],["stat",["assign",true,["name","cosHalfTheta"],["unary-prefix","-",["name","cosHalfTheta"]]]]]],["block",[["stat",["call",["dot",["name","qm"],"copy"],[["name","qb"]]]]]]],["if",["binary",">=",["call",["dot",["name","Math"],"abs"],[["name","cosHalfTheta"]]],["num",1]],["block",[["stat",["assign",true,["dot",["name","qm"],"w"],["dot",["name","qa"],"w"]]],["stat",["assign",true,["dot",["name","qm"],"x"],["dot",["name","qa"],"x"]]],["stat",["assign",true,["dot",["name","qm"],"y"],["dot",["name","qa"],"y"]]],["stat",["assign",true,["dot",["name","qm"],"z"],["dot",["name","qa"],"z"]]],["return",["name","qm"]]]],null],["var",[["halfTheta",["call",["dot",["name","Math"],"acos"],[["name","cosHalfTheta"]]]],["sinHalfTheta",["call",["dot",["name","Math"],"sqrt"],[["binary","-",["num",1],["binary","*",["name","cosHalfTheta"],["name","cosHalfTheta"]]]]]]]],["if",["binary","<",["call",["dot",["name","Math"],"abs"],[["name","sinHalfTheta"]]],["num",0.001]],["block",[["stat",["assign",true,["dot",["name","qm"],"w"],["binary","*",["num",0.5],["binary","+",["dot",["name","qa"],"w"],["dot",["name","qb"],"w"]]]]],["stat",["assign",true,["dot",["name","qm"],"x"],["binary","*",["num",0.5],["binary","+",["dot",["name","qa"],"x"],["dot",["name","qb"],"x"]]]]],["stat",["assign",true,["dot",["name","qm"],"y"],["binary","*",["num",0.5],["binary","+",["dot",["name","qa"],"y"],["dot",["name","qb"],"y"]]]]],["stat",["assign",true,["dot",["name","qm"],"z"],["binary","*",["num",0.5],["binary","+",["dot",["name","qa"],"z"],["dot",["name","qb"],"z"]]]]],["return",["name","qm"]]]],null],["var",[["ratioA",["binary","/",["call",["dot",["name","Math"],"sin"],[["binary","*",["binary","-",["num",1],["name","t"]],["name","halfTheta"]]]],["name","sinHalfTheta"]]],["ratioB",["binary","/",["call",["dot",["name","Math"],"sin"],[["binary","*",["name","t"],["name","halfTheta"]]]],["name","sinHalfTheta"]]]]],["stat",["assign",true,["dot",["name","qm"],"w"],["binary","+",["binary","*",["dot",["name","qa"],"w"],["name","ratioA"]],["binary","*",["dot",["name","qm"],"w"],["name","ratioB"]]]]],["stat",["assign",true,["dot",["name","qm"],"x"],["binary","+",["binary","*",["dot",["name","qa"],"x"],["name","ratioA"]],["binary","*",["dot",["name","qm"],"x"],["name","ratioB"]]]]],["stat",["assign",true,["dot",["name","qm"],"y"],["binary","+",["binary","*",["dot",["name","qa"],"y"],["name","ratioA"]],["binary","*",["dot",["name","qm"],"y"],["name","ratioB"]]]]],["stat",["assign",true,["dot",["name","qm"],"z"],["binary","+",["binary","*",["dot",["name","qa"],"z"],["name","ratioA"]],["binary","*",["dot",["name","qm"],"z"],["name","ratioB"]]]]],["return",["name","qm"]]]]]],["stat",["assign",true,["dot",["name","THREE"],"Vertex"],["function",null,[],[["stat",["call",["dot",["name","console"],"warn"],[["string","THREE.Vertex has been DEPRECATED. Use THREE.Vector3 instead."]]]]]]]],["stat",["assign",true,["dot",["name","THREE"],"Face3"],["function",null,["a","b","c","normal","color","materialIndex"],[["stat",["assign",true,["dot",["name","this"],"a"],["name","a"]]],["stat",["assign",true,["dot",["name","this"],"b"],["name","b"]]],["stat",["assign",true,["dot",["name","this"],"c"],["name","c"]]],["stat",["assign",true,["dot",["name","this"],"normal"],["conditional",["binary","instanceof",["name","normal"],["dot",["name","THREE"],"Vector3"]],["name","normal"],["new",["dot",["name","THREE"],"Vector3"],[]]]]],["stat",["assign",true,["dot",["name","this"],"vertexNormals"],["conditional",["binary","instanceof",["name","normal"],["name","Array"]],["name","normal"],["array",[]]]]],["stat",["assign",true,["dot",["name","this"],"color"],["conditional",["binary","instanceof",["name","color"],["dot",["name","THREE"],"Color"]],["name","color"],["new",["dot",["name","THREE"],"Color"],[]]]]],["stat",["assign",true,["dot",["name","this"],"vertexColors"],["conditional",["binary","instanceof",["name","color"],["name","Array"]],["name","color"],["array",[]]]]],["stat",["assign",true,["dot",["name","this"],"vertexTangents"],["array",[]]]],["stat",["assign",true,["dot",["name","this"],"materialIndex"],["name","materialIndex"]]],["stat",["assign",true,["dot",["name","this"],"centroid"],["new",["dot",["name","THREE"],"Vector3"],[]]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"Face3"],"prototype"],["object",[["constructor",["dot",["name","THREE"],"Face3"]],["clone",["function",null,[],[["var",[["face",["new",["dot",["name","THREE"],"Face3"],[["dot",["name","this"],"a"],["dot",["name","this"],"b"],["dot",["name","this"],"c"]]]]]],["stat",["call",["dot",["dot",["name","face"],"normal"],"copy"],[["dot",["name","this"],"normal"]]]],["stat",["call",["dot",["dot",["name","face"],"color"],"copy"],[["dot",["name","this"],"color"]]]],["stat",["call",["dot",["dot",["name","face"],"centroid"],"copy"],[["dot",["name","this"],"centroid"]]]],["stat",["assign",true,["dot",["name","face"],"materialIndex"],["dot",["name","this"],"materialIndex"]]],["var",[["i"],["il"]]],["for",["seq",["assign",true,["name","i"],["num",0]],["assign",true,["name","il"],["dot",["dot",["name","this"],"vertexNormals"],"length"]]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["stat",["assign",true,["sub",["dot",["name","face"],"vertexNormals"],["name","i"]],["call",["dot",["sub",["dot",["name","this"],"vertexNormals"],["name","i"]],"clone"],[]]]]],["for",["seq",["assign",true,["name","i"],["num",0]],["assign",true,["name","il"],["dot",["dot",["name","this"],"vertexColors"],"length"]]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["stat",["assign",true,["sub",["dot",["name","face"],"vertexColors"],["name","i"]],["call",["dot",["sub",["dot",["name","this"],"vertexColors"],["name","i"]],"clone"],[]]]]],["for",["seq",["assign",true,["name","i"],["num",0]],["assign",true,["name","il"],["dot",["dot",["name","this"],"vertexTangents"],"length"]]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["stat",["assign",true,["sub",["dot",["name","face"],"vertexTangents"],["name","i"]],["call",["dot",["sub",["dot",["name","this"],"vertexTangents"],["name","i"]],"clone"],[]]]]],["return",["name","face"]]]]]]]]],["stat",["assign",true,["dot",["name","THREE"],"Face4"],["function",null,["a","b","c","d","normal","color","materialIndex"],[["stat",["assign",true,["dot",["name","this"],"a"],["name","a"]]],["stat",["assign",true,["dot",["name","this"],"b"],["name","b"]]],["stat",["assign",true,["dot",["name","this"],"c"],["name","c"]]],["stat",["assign",true,["dot",["name","this"],"d"],["name","d"]]],["stat",["assign",true,["dot",["name","this"],"normal"],["conditional",["binary","instanceof",["name","normal"],["dot",["name","THREE"],"Vector3"]],["name","normal"],["new",["dot",["name","THREE"],"Vector3"],[]]]]],["stat",["assign",true,["dot",["name","this"],"vertexNormals"],["conditional",["binary","instanceof",["name","normal"],["name","Array"]],["name","normal"],["array",[]]]]],["stat",["assign",true,["dot",["name","this"],"color"],["conditional",["binary","instanceof",["name","color"],["dot",["name","THREE"],"Color"]],["name","color"],["new",["dot",["name","THREE"],"Color"],[]]]]],["stat",["assign",true,["dot",["name","this"],"vertexColors"],["conditional",["binary","instanceof",["name","color"],["name","Array"]],["name","color"],["array",[]]]]],["stat",["assign",true,["dot",["name","this"],"vertexTangents"],["array",[]]]],["stat",["assign",true,["dot",["name","this"],"materialIndex"],["name","materialIndex"]]],["stat",["assign",true,["dot",["name","this"],"centroid"],["new",["dot",["name","THREE"],"Vector3"],[]]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"Face4"],"prototype"],["object",[["constructor",["dot",["name","THREE"],"Face4"]],["clone",["function",null,[],[["var",[["face",["new",["dot",["name","THREE"],"Face4"],[["dot",["name","this"],"a"],["dot",["name","this"],"b"],["dot",["name","this"],"c"],["dot",["name","this"],"d"]]]]]],["stat",["call",["dot",["dot",["name","face"],"normal"],"copy"],[["dot",["name","this"],"normal"]]]],["stat",["call",["dot",["dot",["name","face"],"color"],"copy"],[["dot",["name","this"],"color"]]]],["stat",["call",["dot",["dot",["name","face"],"centroid"],"copy"],[["dot",["name","this"],"centroid"]]]],["stat",["assign",true,["dot",["name","face"],"materialIndex"],["dot",["name","this"],"materialIndex"]]],["var",[["i"],["il"]]],["for",["seq",["assign",true,["name","i"],["num",0]],["assign",true,["name","il"],["dot",["dot",["name","this"],"vertexNormals"],"length"]]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["stat",["assign",true,["sub",["dot",["name","face"],"vertexNormals"],["name","i"]],["call",["dot",["sub",["dot",["name","this"],"vertexNormals"],["name","i"]],"clone"],[]]]]],["for",["seq",["assign",true,["name","i"],["num",0]],["assign",true,["name","il"],["dot",["dot",["name","this"],"vertexColors"],"length"]]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["stat",["assign",true,["sub",["dot",["name","face"],"vertexColors"],["name","i"]],["call",["dot",["sub",["dot",["name","this"],"vertexColors"],["name","i"]],"clone"],[]]]]],["for",["seq",["assign",true,["name","i"],["num",0]],["assign",true,["name","il"],["dot",["dot",["name","this"],"vertexTangents"],"length"]]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["stat",["assign",true,["sub",["dot",["name","face"],"vertexTangents"],["name","i"]],["call",["dot",["sub",["dot",["name","this"],"vertexTangents"],["name","i"]],"clone"],[]]]]],["return",["name","face"]]]]]]]]],["stat",["assign",true,["dot",["name","THREE"],"UV"],["function",null,["u","v"],[["stat",["assign",true,["dot",["name","this"],"u"],["binary","||",["name","u"],["num",0]]]],["stat",["assign",true,["dot",["name","this"],"v"],["binary","||",["name","v"],["num",0]]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"UV"],"prototype"],["object",[["constructor",["dot",["name","THREE"],"UV"]],["set",["function",null,["u","v"],[["stat",["assign",true,["dot",["name","this"],"u"],["name","u"]]],["stat",["assign",true,["dot",["name","this"],"v"],["name","v"]]],["return",["name","this"]]]]],["copy",["function",null,["uv"],[["stat",["assign",true,["dot",["name","this"],"u"],["dot",["name","uv"],"u"]]],["stat",["assign",true,["dot",["name","this"],"v"],["dot",["name","uv"],"v"]]],["return",["name","this"]]]]],["lerpSelf",["function",null,["uv","alpha"],[["stat",["assign","+",["dot",["name","this"],"u"],["binary","*",["binary","-",["dot",["name","uv"],"u"],["dot",["name","this"],"u"]],["name","alpha"]]]],["stat",["assign","+",["dot",["name","this"],"v"],["binary","*",["binary","-",["dot",["name","uv"],"v"],["dot",["name","this"],"v"]],["name","alpha"]]]],["return",["name","this"]]]]],["clone",["function",null,[],[["return",["new",["dot",["name","THREE"],"UV"],[["dot",["name","this"],"u"],["dot",["name","this"],"v"]]]]]]]]]]],["stat",["assign",true,["dot",["name","THREE"],"Geometry"],["function",null,[],[["stat",["assign",true,["dot",["name","this"],"id"],["unary-postfix","++",["dot",["name","THREE"],"GeometryCount"]]]],["stat",["assign",true,["dot",["name","this"],"vertices"],["array",[]]]],["stat",["assign",true,["dot",["name","this"],"colors"],["array",[]]]],["stat",["assign",true,["dot",["name","this"],"materials"],["array",[]]]],["stat",["assign",true,["dot",["name","this"],"faces"],["array",[]]]],["stat",["assign",true,["dot",["name","this"],"faceUvs"],["array",[["array",[]]]]]],["stat",["assign",true,["dot",["name","this"],"faceVertexUvs"],["array",[["array",[]]]]]],["stat",["assign",true,["dot",["name","this"],"morphTargets"],["array",[]]]],["stat",["assign",true,["dot",["name","this"],"morphColors"],["array",[]]]],["stat",["assign",true,["dot",["name","this"],"morphNormals"],["array",[]]]],["stat",["assign",true,["dot",["name","this"],"skinWeights"],["array",[]]]],["stat",["assign",true,["dot",["name","this"],"skinIndices"],["array",[]]]],["stat",["assign",true,["dot",["name","this"],"boundingBox"],["name","null"]]],["stat",["assign",true,["dot",["name","this"],"boundingSphere"],["name","null"]]],["stat",["assign",true,["dot",["name","this"],"hasTangents"],["name","false"]]],["stat",["assign",true,["dot",["name","this"],"dynamic"],["name","false"]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"Geometry"],"prototype"],["object",[["constructor",["dot",["name","THREE"],"Geometry"]],["applyMatrix",["function",null,["matrix"],[["var",[["matrixRotation",["new",["dot",["name","THREE"],"Matrix4"],[]]]]],["stat",["call",["dot",["name","matrixRotation"],"extractRotation"],[["name","matrix"]]]],["for",["var",[["i",["num",0]],["il",["dot",["dot",["name","this"],"vertices"],"length"]]]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["block",[["var",[["vertex",["sub",["dot",["name","this"],"vertices"],["name","i"]]]]],["stat",["call",["dot",["name","matrix"],"multiplyVector3"],[["name","vertex"]]]]]]],["for",["var",[["i",["num",0]],["il",["dot",["dot",["name","this"],"faces"],"length"]]]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["block",[["var",[["face",["sub",["dot",["name","this"],"faces"],["name","i"]]]]],["stat",["call",["dot",["name","matrixRotation"],"multiplyVector3"],[["dot",["name","face"],"normal"]]]],["for",["var",[["j",["num",0]],["jl",["dot",["dot",["name","face"],"vertexNormals"],"length"]]]],["binary","<",["name","j"],["name","jl"]],["unary-postfix","++",["name","j"]],["block",[["stat",["call",["dot",["name","matrixRotation"],"multiplyVector3"],[["sub",["dot",["name","face"],"vertexNormals"],["name","j"]]]]]]]],["stat",["call",["dot",["name","matrix"],"multiplyVector3"],[["dot",["name","face"],"centroid"]]]]]]]]]],["computeCentroids",["function",null,[],[["var",[["f"],["fl"],["face"]]],["for",["seq",["assign",true,["name","f"],["num",0]],["assign",true,["name","fl"],["dot",["dot",["name","this"],"faces"],"length"]]],["binary","<",["name","f"],["name","fl"]],["unary-postfix","++",["name","f"]],["block",[["stat",["assign",true,["name","face"],["sub",["dot",["name","this"],"faces"],["name","f"]]]],["stat",["call",["dot",["dot",["name","face"],"centroid"],"set"],[["num",0],["num",0],["num",0]]]],["if",["binary","instanceof",["name","face"],["dot",["name","THREE"],"Face3"]],["block",[["stat",["call",["dot",["dot",["name","face"],"centroid"],"addSelf"],[["sub",["dot",["name","this"],"vertices"],["dot",["name","face"],"a"]]]]],["stat",["call",["dot",["dot",["name","face"],"centroid"],"addSelf"],[["sub",["dot",["name","this"],"vertices"],["dot",["name","face"],"b"]]]]],["stat",["call",["dot",["dot",["name","face"],"centroid"],"addSelf"],[["sub",["dot",["name","this"],"vertices"],["dot",["name","face"],"c"]]]]],["stat",["call",["dot",["dot",["name","face"],"centroid"],"divideScalar"],[["num",3]]]]]],["if",["binary","instanceof",["name","face"],["dot",["name","THREE"],"Face4"]],["block",[["stat",["call",["dot",["dot",["name","face"],"centroid"],"addSelf"],[["sub",["dot",["name","this"],"vertices"],["dot",["name","face"],"a"]]]]],["stat",["call",["dot",["dot",["name","face"],"centroid"],"addSelf"],[["sub",["dot",["name","this"],"vertices"],["dot",["name","face"],"b"]]]]],["stat",["call",["dot",["dot",["name","face"],"centroid"],"addSelf"],[["sub",["dot",["name","this"],"vertices"],["dot",["name","face"],"c"]]]]],["stat",["call",["dot",["dot",["name","face"],"centroid"],"addSelf"],[["sub",["dot",["name","this"],"vertices"],["dot",["name","face"],"d"]]]]],["stat",["call",["dot",["dot",["name","face"],"centroid"],"divideScalar"],[["num",4]]]]]],null]]]]]]]],["computeFaceNormals",["function",null,[],[["var",[["n"],["nl"],["v"],["vl"],["vertex"],["f"],["fl"],["face"],["vA"],["vB"],["vC"],["cb",["new",["dot",["name","THREE"],"Vector3"],[]]],["ab",["new",["dot",["name","THREE"],"Vector3"],[]]]]],["for",["seq",["assign",true,["name","f"],["num",0]],["assign",true,["name","fl"],["dot",["dot",["name","this"],"faces"],"length"]]],["binary","<",["name","f"],["name","fl"]],["unary-postfix","++",["name","f"]],["block",[["stat",["assign",true,["name","face"],["sub",["dot",["name","this"],"faces"],["name","f"]]]],["stat",["assign",true,["name","vA"],["sub",["dot",["name","this"],"vertices"],["dot",["name","face"],"a"]]]],["stat",["assign",true,["name","vB"],["sub",["dot",["name","this"],"vertices"],["dot",["name","face"],"b"]]]],["stat",["assign",true,["name","vC"],["sub",["dot",["name","this"],"vertices"],["dot",["name","face"],"c"]]]],["stat",["call",["dot",["name","cb"],"sub"],[["name","vC"],["name","vB"]]]],["stat",["call",["dot",["name","ab"],"sub"],[["name","vA"],["name","vB"]]]],["stat",["call",["dot",["name","cb"],"crossSelf"],[["name","ab"]]]],["if",["unary-prefix","!",["call",["dot",["name","cb"],"isZero"],[]]],["block",[["stat",["call",["dot",["name","cb"],"normalize"],[]]]]],null],["stat",["call",["dot",["dot",["name","face"],"normal"],"copy"],[["name","cb"]]]]]]]]]],["computeVertexNormals",["function",null,[],[["var",[["v"],["vl"],["f"],["fl"],["face"],["vertices"]]],["if",["binary","===",["dot",["name","this"],"__tmpVertices"],["name","undefined"]],["block",[["stat",["assign",true,["dot",["name","this"],"__tmpVertices"],["new",["name","Array"],[["dot",["dot",["name","this"],"vertices"],"length"]]]]],["stat",["assign",true,["name","vertices"],["dot",["name","this"],"__tmpVertices"]]],["for",["seq",["assign",true,["name","v"],["num",0]],["assign",true,["name","vl"],["dot",["dot",["name","this"],"vertices"],"length"]]],["binary","<",["name","v"],["name","vl"]],["unary-postfix","++",["name","v"]],["block",[["stat",["assign",true,["sub",["name","vertices"],["name","v"]],["new",["dot",["name","THREE"],"Vector3"],[]]]]]]],["for",["seq",["assign",true,["name","f"],["num",0]],["assign",true,["name","fl"],["dot",["dot",["name","this"],"faces"],"length"]]],["binary","<",["name","f"],["name","fl"]],["unary-postfix","++",["name","f"]],["block",[["stat",["assign",true,["name","face"],["sub",["dot",["name","this"],"faces"],["name","f"]]]],["if",["binary","instanceof",["name","face"],["dot",["name","THREE"],"Face3"]],["block",[["stat",["assign",true,["dot",["name","face"],"vertexNormals"],["array",[["new",["dot",["name","THREE"],"Vector3"],[]],["new",["dot",["name","THREE"],"Vector3"],[]],["new",["dot",["name","THREE"],"Vector3"],[]]]]]]]],["if",["binary","instanceof",["name","face"],["dot",["name","THREE"],"Face4"]],["block",[["stat",["assign",true,["dot",["name","face"],"vertexNormals"],["array",[["new",["dot",["name","THREE"],"Vector3"],[]],["new",["dot",["name","THREE"],"Vector3"],[]],["new",["dot",["name","THREE"],"Vector3"],[]],["new",["dot",["name","THREE"],"Vector3"],[]]]]]]]],null]]]]]]],["block",[["stat",["assign",true,["name","vertices"],["dot",["name","this"],"__tmpVertices"]]],["for",["seq",["assign",true,["name","v"],["num",0]],["assign",true,["name","vl"],["dot",["dot",["name","this"],"vertices"],"length"]]],["binary","<",["name","v"],["name","vl"]],["unary-postfix","++",["name","v"]],["block",[["stat",["call",["dot",["sub",["name","vertices"],["name","v"]],"set"],[["num",0],["num",0],["num",0]]]]]]]]]],["for",["seq",["assign",true,["name","f"],["num",0]],["assign",true,["name","fl"],["dot",["dot",["name","this"],"faces"],"length"]]],["binary","<",["name","f"],["name","fl"]],["unary-postfix","++",["name","f"]],["block",[["stat",["assign",true,["name","face"],["sub",["dot",["name","this"],"faces"],["name","f"]]]],["if",["binary","instanceof",["name","face"],["dot",["name","THREE"],"Face3"]],["block",[["stat",["call",["dot",["sub",["name","vertices"],["dot",["name","face"],"a"]],"addSelf"],[["dot",["name","face"],"normal"]]]],["stat",["call",["dot",["sub",["name","vertices"],["dot",["name","face"],"b"]],"addSelf"],[["dot",["name","face"],"normal"]]]],["stat",["call",["dot",["sub",["name","vertices"],["dot",["name","face"],"c"]],"addSelf"],[["dot",["name","face"],"normal"]]]]]],["if",["binary","instanceof",["name","face"],["dot",["name","THREE"],"Face4"]],["block",[["stat",["call",["dot",["sub",["name","vertices"],["dot",["name","face"],"a"]],"addSelf"],[["dot",["name","face"],"normal"]]]],["stat",["call",["dot",["sub",["name","vertices"],["dot",["name","face"],"b"]],"addSelf"],[["dot",["name","face"],"normal"]]]],["stat",["call",["dot",["sub",["name","vertices"],["dot",["name","face"],"c"]],"addSelf"],[["dot",["name","face"],"normal"]]]],["stat",["call",["dot",["sub",["name","vertices"],["dot",["name","face"],"d"]],"addSelf"],[["dot",["name","face"],"normal"]]]]]],null]]]]],["for",["seq",["assign",true,["name","v"],["num",0]],["assign",true,["name","vl"],["dot",["dot",["name","this"],"vertices"],"length"]]],["binary","<",["name","v"],["name","vl"]],["unary-postfix","++",["name","v"]],["block",[["stat",["call",["dot",["sub",["name","vertices"],["name","v"]],"normalize"],[]]]]]],["for",["seq",["assign",true,["name","f"],["num",0]],["assign",true,["name","fl"],["dot",["dot",["name","this"],"faces"],"length"]]],["binary","<",["name","f"],["name","fl"]],["unary-postfix","++",["name","f"]],["block",[["stat",["assign",true,["name","face"],["sub",["dot",["name","this"],"faces"],["name","f"]]]],["if",["binary","instanceof",["name","face"],["dot",["name","THREE"],"Face3"]],["block",[["stat",["call",["dot",["sub",["dot",["name","face"],"vertexNormals"],["num",0]],"copy"],[["sub",["name","vertices"],["dot",["name","face"],"a"]]]]],["stat",["call",["dot",["sub",["dot",["name","face"],"vertexNormals"],["num",1]],"copy"],[["sub",["name","vertices"],["dot",["name","face"],"b"]]]]],["stat",["call",["dot",["sub",["dot",["name","face"],"vertexNormals"],["num",2]],"copy"],[["sub",["name","vertices"],["dot",["name","face"],"c"]]]]]]],["if",["binary","instanceof",["name","face"],["dot",["name","THREE"],"Face4"]],["block",[["stat",["call",["dot",["sub",["dot",["name","face"],"vertexNormals"],["num",0]],"copy"],[["sub",["name","vertices"],["dot",["name","face"],"a"]]]]],["stat",["call",["dot",["sub",["dot",["name","face"],"vertexNormals"],["num",1]],"copy"],[["sub",["name","vertices"],["dot",["name","face"],"b"]]]]],["stat",["call",["dot",["sub",["dot",["name","face"],"vertexNormals"],["num",2]],"copy"],[["sub",["name","vertices"],["dot",["name","face"],"c"]]]]],["stat",["call",["dot",["sub",["dot",["name","face"],"vertexNormals"],["num",3]],"copy"],[["sub",["name","vertices"],["dot",["name","face"],"d"]]]]]]],null]]]]]]]],["computeMorphNormals",["function",null,[],[["var",[["i"],["il"],["f"],["fl"],["face"]]],["for",["seq",["assign",true,["name","f"],["num",0]],["assign",true,["name","fl"],["dot",["dot",["name","this"],"faces"],"length"]]],["binary","<",["name","f"],["name","fl"]],["unary-postfix","++",["name","f"]],["block",[["stat",["assign",true,["name","face"],["sub",["dot",["name","this"],"faces"],["name","f"]]]],["if",["unary-prefix","!",["dot",["name","face"],"__originalFaceNormal"]],["block",[["stat",["assign",true,["dot",["name","face"],"__originalFaceNormal"],["call",["dot",["dot",["name","face"],"normal"],"clone"],[]]]]]],["block",[["stat",["call",["dot",["dot",["name","face"],"__originalFaceNormal"],"copy"],[["dot",["name","face"],"normal"]]]]]]],["if",["unary-prefix","!",["dot",["name","face"],"__originalVertexNormals"]],["stat",["assign",true,["dot",["name","face"],"__originalVertexNormals"],["array",[]]]],null],["for",["seq",["assign",true,["name","i"],["num",0]],["assign",true,["name","il"],["dot",["dot",["name","face"],"vertexNormals"],"length"]]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["block",[["if",["unary-prefix","!",["sub",["dot",["name","face"],"__originalVertexNormals"],["name","i"]]],["block",[["stat",["assign",true,["sub",["dot",["name","face"],"__originalVertexNormals"],["name","i"]],["call",["dot",["sub",["dot",["name","face"],"vertexNormals"],["name","i"]],"clone"],[]]]]]],["block",[["stat",["call",["dot",["sub",["dot",["name","face"],"__originalVertexNormals"],["name","i"]],"copy"],[["sub",["dot",["name","face"],"vertexNormals"],["name","i"]]]]]]]]]]]]]],["var",[["tmpGeo",["new",["dot",["name","THREE"],"Geometry"],[]]]]],["stat",["assign",true,["dot",["name","tmpGeo"],"faces"],["dot",["name","this"],"faces"]]],["for",["seq",["assign",true,["name","i"],["num",0]],["assign",true,["name","il"],["dot",["dot",["name","this"],"morphTargets"],"length"]]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["block",[["if",["unary-prefix","!",["sub",["dot",["name","this"],"morphNormals"],["name","i"]]],["block",[["stat",["assign",true,["sub",["dot",["name","this"],"morphNormals"],["name","i"]],["object",[]]]],["stat",["assign",true,["dot",["sub",["dot",["name","this"],"morphNormals"],["name","i"]],"faceNormals"],["array",[]]]],["stat",["assign",true,["dot",["sub",["dot",["name","this"],"morphNormals"],["name","i"]],"vertexNormals"],["array",[]]]],["var",[["dstNormalsFace",["dot",["sub",["dot",["name","this"],"morphNormals"],["name","i"]],"faceNormals"]]]],["var",[["dstNormalsVertex",["dot",["sub",["dot",["name","this"],"morphNormals"],["name","i"]],"vertexNormals"]]]],["var",[["faceNormal"],["vertexNormals"]]],["for",["seq",["assign",true,["name","f"],["num",0]],["assign",true,["name","fl"],["dot",["dot",["name","this"],"faces"],"length"]]],["binary","<",["name","f"],["name","fl"]],["unary-postfix","++",["name","f"]],["block",[["stat",["assign",true,["name","face"],["sub",["dot",["name","this"],"faces"],["name","f"]]]],["stat",["assign",true,["name","faceNormal"],["new",["dot",["name","THREE"],"Vector3"],[]]]],["if",["binary","instanceof",["name","face"],["dot",["name","THREE"],"Face3"]],["block",[["stat",["assign",true,["name","vertexNormals"],["object",[["a",["new",["dot",["name","THREE"],"Vector3"],[]]],["b",["new",["dot",["name","THREE"],"Vector3"],[]]],["c",["new",["dot",["name","THREE"],"Vector3"],[]]]]]]]]],["block",[["stat",["assign",true,["name","vertexNormals"],["object",[["a",["new",["dot",["name","THREE"],"Vector3"],[]]],["b",["new",["dot",["name","THREE"],"Vector3"],[]]],["c",["new",["dot",["name","THREE"],"Vector3"],[]]],["d",["new",["dot",["name","THREE"],"Vector3"],[]]]]]]]]]],["stat",["call",["dot",["name","dstNormalsFace"],"push"],[["name","faceNormal"]]]],["stat",["call",["dot",["name","dstNormalsVertex"],"push"],[["name","vertexNormals"]]]]]]]]],null],["var",[["morphNormals",["sub",["dot",["name","this"],"morphNormals"],["name","i"]]]]],["stat",["assign",true,["dot",["name","tmpGeo"],"vertices"],["dot",["sub",["dot",["name","this"],"morphTargets"],["name","i"]],"vertices"]]],["stat",["call",["dot",["name","tmpGeo"],"computeFaceNormals"],[]]],["stat",["call",["dot",["name","tmpGeo"],"computeVertexNormals"],[]]],["var",[["faceNormal"],["vertexNormals"]]],["for",["seq",["assign",true,["name","f"],["num",0]],["assign",true,["name","fl"],["dot",["dot",["name","this"],"faces"],"length"]]],["binary","<",["name","f"],["name","fl"]],["unary-postfix","++",["name","f"]],["block",[["stat",["assign",true,["name","face"],["sub",["dot",["name","this"],"faces"],["name","f"]]]],["stat",["assign",true,["name","faceNormal"],["sub",["dot",["name","morphNormals"],"faceNormals"],["name","f"]]]],["stat",["assign",true,["name","vertexNormals"],["sub",["dot",["name","morphNormals"],"vertexNormals"],["name","f"]]]],["stat",["call",["dot",["name","faceNormal"],"copy"],[["dot",["name","face"],"normal"]]]],["if",["binary","instanceof",["name","face"],["dot",["name","THREE"],"Face3"]],["block",[["stat",["call",["dot",["dot",["name","vertexNormals"],"a"],"copy"],[["sub",["dot",["name","face"],"vertexNormals"],["num",0]]]]],["stat",["call",["dot",["dot",["name","vertexNormals"],"b"],"copy"],[["sub",["dot",["name","face"],"vertexNormals"],["num",1]]]]],["stat",["call",["dot",["dot",["name","vertexNormals"],"c"],"copy"],[["sub",["dot",["name","face"],"vertexNormals"],["num",2]]]]]]],["block",[["stat",["call",["dot",["dot",["name","vertexNormals"],"a"],"copy"],[["sub",["dot",["name","face"],"vertexNormals"],["num",0]]]]],["stat",["call",["dot",["dot",["name","vertexNormals"],"b"],"copy"],[["sub",["dot",["name","face"],"vertexNormals"],["num",1]]]]],["stat",["call",["dot",["dot",["name","vertexNormals"],"c"],"copy"],[["sub",["dot",["name","face"],"vertexNormals"],["num",2]]]]],["stat",["call",["dot",["dot",["name","vertexNormals"],"d"],"copy"],[["sub",["dot",["name","face"],"vertexNormals"],["num",3]]]]]]]]]]]]]],["for",["seq",["assign",true,["name","f"],["num",0]],["assign",true,["name","fl"],["dot",["dot",["name","this"],"faces"],"length"]]],["binary","<",["name","f"],["name","fl"]],["unary-postfix","++",["name","f"]],["block",[["stat",["assign",true,["name","face"],["sub",["dot",["name","this"],"faces"],["name","f"]]]],["stat",["assign",true,["dot",["name","face"],"normal"],["dot",["name","face"],"__originalFaceNormal"]]],["stat",["assign",true,["dot",["name","face"],"vertexNormals"],["dot",["name","face"],"__originalVertexNormals"]]]]]]]]],["computeTangents",["function",null,[],[["var",[["f"],["fl"],["v"],["vl"],["i"],["il"],["vertexIndex"],["face"],["uv"],["vA"],["vB"],["vC"],["uvA"],["uvB"],["uvC"],["x1"],["x2"],["y1"],["y2"],["z1"],["z2"],["s1"],["s2"],["t1"],["t2"],["r"],["t"],["test"],["tan1",["array",[]]],["tan2",["array",[]]],["sdir",["new",["dot",["name","THREE"],"Vector3"],[]]],["tdir",["new",["dot",["name","THREE"],"Vector3"],[]]],["tmp",["new",["dot",["name","THREE"],"Vector3"],[]]],["tmp2",["new",["dot",["name","THREE"],"Vector3"],[]]],["n",["new",["dot",["name","THREE"],"Vector3"],[]]],["w"]]],["for",["seq",["assign",true,["name","v"],["num",0]],["assign",true,["name","vl"],["dot",["dot",["name","this"],"vertices"],"length"]]],["binary","<",["name","v"],["name","vl"]],["unary-postfix","++",["name","v"]],["block",[["stat",["assign",true,["sub",["name","tan1"],["name","v"]],["new",["dot",["name","THREE"],"Vector3"],[]]]],["stat",["assign",true,["sub",["name","tan2"],["name","v"]],["new",["dot",["name","THREE"],"Vector3"],[]]]]]]],["defun","handleTriangle",["context","a","b","c","ua","ub","uc"],[["stat",["assign",true,["name","vA"],["sub",["dot",["name","context"],"vertices"],["name","a"]]]],["stat",["assign",true,["name","vB"],["sub",["dot",["name","context"],"vertices"],["name","b"]]]],["stat",["assign",true,["name","vC"],["sub",["dot",["name","context"],"vertices"],["name","c"]]]],["stat",["assign",true,["name","uvA"],["sub",["name","uv"],["name","ua"]]]],["stat",["assign",true,["name","uvB"],["sub",["name","uv"],["name","ub"]]]],["stat",["assign",true,["name","uvC"],["sub",["name","uv"],["name","uc"]]]],["stat",["assign",true,["name","x1"],["binary","-",["dot",["name","vB"],"x"],["dot",["name","vA"],"x"]]]],["stat",["assign",true,["name","x2"],["binary","-",["dot",["name","vC"],"x"],["dot",["name","vA"],"x"]]]],["stat",["assign",true,["name","y1"],["binary","-",["dot",["name","vB"],"y"],["dot",["name","vA"],"y"]]]],["stat",["assign",true,["name","y2"],["binary","-",["dot",["name","vC"],"y"],["dot",["name","vA"],"y"]]]],["stat",["assign",true,["name","z1"],["binary","-",["dot",["name","vB"],"z"],["dot",["name","vA"],"z"]]]],["stat",["assign",true,["name","z2"],["binary","-",["dot",["name","vC"],"z"],["dot",["name","vA"],"z"]]]],["stat",["assign",true,["name","s1"],["binary","-",["dot",["name","uvB"],"u"],["dot",["name","uvA"],"u"]]]],["stat",["assign",true,["name","s2"],["binary","-",["dot",["name","uvC"],"u"],["dot",["name","uvA"],"u"]]]],["stat",["assign",true,["name","t1"],["binary","-",["dot",["name","uvB"],"v"],["dot",["name","uvA"],"v"]]]],["stat",["assign",true,["name","t2"],["binary","-",["dot",["name","uvC"],"v"],["dot",["name","uvA"],"v"]]]],["stat",["assign",true,["name","r"],["binary","/",["num",1],["binary","-",["binary","*",["name","s1"],["name","t2"]],["binary","*",["name","s2"],["name","t1"]]]]]],["stat",["call",["dot",["name","sdir"],"set"],[["binary","*",["binary","-",["binary","*",["name","t2"],["name","x1"]],["binary","*",["name","t1"],["name","x2"]]],["name","r"]],["binary","*",["binary","-",["binary","*",["name","t2"],["name","y1"]],["binary","*",["name","t1"],["name","y2"]]],["name","r"]],["binary","*",["binary","-",["binary","*",["name","t2"],["name","z1"]],["binary","*",["name","t1"],["name","z2"]]],["name","r"]]]]],["stat",["call",["dot",["name","tdir"],"set"],[["binary","*",["binary","-",["binary","*",["name","s1"],["name","x2"]],["binary","*",["name","s2"],["name","x1"]]],["name","r"]],["binary","*",["binary","-",["binary","*",["name","s1"],["name","y2"]],["binary","*",["name","s2"],["name","y1"]]],["name","r"]],["binary","*",["binary","-",["binary","*",["name","s1"],["name","z2"]],["binary","*",["name","s2"],["name","z1"]]],["name","r"]]]]],["stat",["call",["dot",["sub",["name","tan1"],["name","a"]],"addSelf"],[["name","sdir"]]]],["stat",["call",["dot",["sub",["name","tan1"],["name","b"]],"addSelf"],[["name","sdir"]]]],["stat",["call",["dot",["sub",["name","tan1"],["name","c"]],"addSelf"],[["name","sdir"]]]],["stat",["call",["dot",["sub",["name","tan2"],["name","a"]],"addSelf"],[["name","tdir"]]]],["stat",["call",["dot",["sub",["name","tan2"],["name","b"]],"addSelf"],[["name","tdir"]]]],["stat",["call",["dot",["sub",["name","tan2"],["name","c"]],"addSelf"],[["name","tdir"]]]]]],["for",["seq",["assign",true,["name","f"],["num",0]],["assign",true,["name","fl"],["dot",["dot",["name","this"],"faces"],"length"]]],["binary","<",["name","f"],["name","fl"]],["unary-postfix","++",["name","f"]],["block",[["stat",["assign",true,["name","face"],["sub",["dot",["name","this"],"faces"],["name","f"]]]],["stat",["assign",true,["name","uv"],["sub",["sub",["dot",["name","this"],"faceVertexUvs"],["num",0]],["name","f"]]]],["if",["binary","instanceof",["name","face"],["dot",["name","THREE"],"Face3"]],["block",[["stat",["call",["name","handleTriangle"],[["name","this"],["dot",["name","face"],"a"],["dot",["name","face"],"b"],["dot",["name","face"],"c"],["num",0],["num",1],["num",2]]]]]],["if",["binary","instanceof",["name","face"],["dot",["name","THREE"],"Face4"]],["block",[["stat",["call",["name","handleTriangle"],[["name","this"],["dot",["name","face"],"a"],["dot",["name","face"],"b"],["dot",["name","face"],"d"],["num",0],["num",1],["num",3]]]],["stat",["call",["name","handleTriangle"],[["name","this"],["dot",["name","face"],"b"],["dot",["name","face"],"c"],["dot",["name","face"],"d"],["num",1],["num",2],["num",3]]]]]],null]]]]],["var",[["faceIndex",["array",[["string","a"],["string","b"],["string","c"],["string","d"]]]]]],["for",["seq",["assign",true,["name","f"],["num",0]],["assign",true,["name","fl"],["dot",["dot",["name","this"],"faces"],"length"]]],["binary","<",["name","f"],["name","fl"]],["unary-postfix","++",["name","f"]],["block",[["stat",["assign",true,["name","face"],["sub",["dot",["name","this"],"faces"],["name","f"]]]],["for",["assign",true,["name","i"],["num",0]],["binary","<",["name","i"],["dot",["dot",["name","face"],"vertexNormals"],"length"]],["unary-postfix","++",["name","i"]],["block",[["stat",["call",["dot",["name","n"],"copy"],[["sub",["dot",["name","face"],"vertexNormals"],["name","i"]]]]],["stat",["assign",true,["name","vertexIndex"],["sub",["name","face"],["sub",["name","faceIndex"],["name","i"]]]]],["stat",["assign",true,["name","t"],["sub",["name","tan1"],["name","vertexIndex"]]]],["stat",["call",["dot",["name","tmp"],"copy"],[["name","t"]]]],["stat",["call",["dot",["call",["dot",["name","tmp"],"subSelf"],[["call",["dot",["name","n"],"multiplyScalar"],[["call",["dot",["name","n"],"dot"],[["name","t"]]]]]]],"normalize"],[]]],["stat",["call",["dot",["name","tmp2"],"cross"],[["sub",["dot",["name","face"],"vertexNormals"],["name","i"]],["name","t"]]]],["stat",["assign",true,["name","test"],["call",["dot",["name","tmp2"],"dot"],[["sub",["name","tan2"],["name","vertexIndex"]]]]]],["stat",["assign",true,["name","w"],["conditional",["binary","<",["name","test"],["num",0]],["unary-prefix","-",["num",1]],["num",1]]]],["stat",["assign",true,["sub",["dot",["name","face"],"vertexTangents"],["name","i"]],["new",["dot",["name","THREE"],"Vector4"],[["dot",["name","tmp"],"x"],["dot",["name","tmp"],"y"],["dot",["name","tmp"],"z"],["name","w"]]]]]]]]]]],["stat",["assign",true,["dot",["name","this"],"hasTangents"],["name","true"]]]]]],["computeBoundingBox",["function",null,[],[["if",["unary-prefix","!",["dot",["name","this"],"boundingBox"]],["block",[["stat",["assign",true,["dot",["name","this"],"boundingBox"],["object",[["min",["new",["dot",["name","THREE"],"Vector3"],[]]],["max",["new",["dot",["name","THREE"],"Vector3"],[]]]]]]]]],null],["if",["binary",">",["dot",["dot",["name","this"],"vertices"],"length"],["num",0]],["block",[["var",[["position"],["firstPosition",["sub",["dot",["name","this"],"vertices"],["num",0]]]]],["stat",["call",["dot",["dot",["dot",["name","this"],"boundingBox"],"min"],"copy"],[["name","firstPosition"]]]],["stat",["call",["dot",["dot",["dot",["name","this"],"boundingBox"],"max"],"copy"],[["name","firstPosition"]]]],["var",[["min",["dot",["dot",["name","this"],"boundingBox"],"min"]],["max",["dot",["dot",["name","this"],"boundingBox"],"max"]]]],["for",["var",[["v",["num",1]],["vl",["dot",["dot",["name","this"],"vertices"],"length"]]]],["binary","<",["name","v"],["name","vl"]],["unary-postfix","++",["name","v"]],["block",[["stat",["assign",true,["name","position"],["sub",["dot",["name","this"],"vertices"],["name","v"]]]],["if",["binary","<",["dot",["name","position"],"x"],["dot",["name","min"],"x"]],["block",[["stat",["assign",true,["dot",["name","min"],"x"],["dot",["name","position"],"x"]]]]],["if",["binary",">",["dot",["name","position"],"x"],["dot",["name","max"],"x"]],["block",[["stat",["assign",true,["dot",["name","max"],"x"],["dot",["name","position"],"x"]]]]],null]],["if",["binary","<",["dot",["name","position"],"y"],["dot",["name","min"],"y"]],["block",[["stat",["assign",true,["dot",["name","min"],"y"],["dot",["name","position"],"y"]]]]],["if",["binary",">",["dot",["name","position"],"y"],["dot",["name","max"],"y"]],["block",[["stat",["assign",true,["dot",["name","max"],"y"],["dot",["name","position"],"y"]]]]],null]],["if",["binary","<",["dot",["name","position"],"z"],["dot",["name","min"],"z"]],["block",[["stat",["assign",true,["dot",["name","min"],"z"],["dot",["name","position"],"z"]]]]],["if",["binary",">",["dot",["name","position"],"z"],["dot",["name","max"],"z"]],["block",[["stat",["assign",true,["dot",["name","max"],"z"],["dot",["name","position"],"z"]]]]],null]]]]]]],["block",[["stat",["call",["dot",["dot",["dot",["name","this"],"boundingBox"],"min"],"set"],[["num",0],["num",0],["num",0]]]],["stat",["call",["dot",["dot",["dot",["name","this"],"boundingBox"],"max"],"set"],[["num",0],["num",0],["num",0]]]]]]]]]],["computeBoundingSphere",["function",null,[],[["if",["unary-prefix","!",["dot",["name","this"],"boundingSphere"]],["stat",["assign",true,["dot",["name","this"],"boundingSphere"],["object",[["radius",["num",0]]]]]],null],["var",[["radius"],["maxRadius",["num",0]]]],["for",["var",[["v",["num",0]],["vl",["dot",["dot",["name","this"],"vertices"],"length"]]]],["binary","<",["name","v"],["name","vl"]],["unary-postfix","++",["name","v"]],["block",[["stat",["assign",true,["name","radius"],["call",["dot",["sub",["dot",["name","this"],"vertices"],["name","v"]],"length"],[]]]],["if",["binary",">",["name","radius"],["name","maxRadius"]],["stat",["assign",true,["name","maxRadius"],["name","radius"]]],null]]]],["stat",["assign",true,["dot",["dot",["name","this"],"boundingSphere"],"radius"],["name","maxRadius"]]]]]],["mergeVertices",["function",null,[],[["var",[["verticesMap",["object",[]]]]],["var",[["unique",["array",[]]],["changes",["array",[]]]]],["var",[["v"],["key"]]],["var",[["precisionPoints",["num",4]]]],["var",[["precision",["call",["dot",["name","Math"],"pow"],[["num",10],["name","precisionPoints"]]]]]],["var",[["i"],["il"],["face"]]],["var",[["abcd",["string","abcd"]],["o"],["k"],["j"],["jl"],["u"]]],["for",["seq",["assign",true,["name","i"],["num",0]],["assign",true,["name","il"],["dot",["dot",["name","this"],"vertices"],"length"]]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","v"],["sub",["dot",["name","this"],"vertices"],["name","i"]]]],["stat",["assign",true,["name","key"],["call",["dot",["array",[["call",["dot",["name","Math"],"round"],[["binary","*",["dot",["name","v"],"x"],["name","precision"]]]],["call",["dot",["name","Math"],"round"],[["binary","*",["dot",["name","v"],"y"],["name","precision"]]]],["call",["dot",["name","Math"],"round"],[["binary","*",["dot",["name","v"],"z"],["name","precision"]]]]]],"join"],[["string","_"]]]]],["if",["binary","===",["sub",["name","verticesMap"],["name","key"]],["name","undefined"]],["block",[["stat",["assign",true,["sub",["name","verticesMap"],["name","key"]],["name","i"]]],["stat",["call",["dot",["name","unique"],"push"],[["sub",["dot",["name","this"],"vertices"],["name","i"]]]]],["stat",["assign",true,["sub",["name","changes"],["name","i"]],["binary","-",["dot",["name","unique"],"length"],["num",1]]]]]],["block",[["stat",["assign",true,["sub",["name","changes"],["name","i"]],["sub",["name","changes"],["sub",["name","verticesMap"],["name","key"]]]]]]]]]]],["block"],["for",["seq",["assign",true,["name","i"],["num",0]],["assign",true,["name","il"],["dot",["dot",["name","this"],"faces"],"length"]]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","face"],["sub",["dot",["name","this"],"faces"],["name","i"]]]],["if",["binary","instanceof",["name","face"],["dot",["name","THREE"],"Face3"]],["block",[["stat",["assign",true,["dot",["name","face"],"a"],["sub",["name","changes"],["dot",["name","face"],"a"]]]],["stat",["assign",true,["dot",["name","face"],"b"],["sub",["name","changes"],["dot",["name","face"],"b"]]]],["stat",["assign",true,["dot",["name","face"],"c"],["sub",["name","changes"],["dot",["name","face"],"c"]]]]]],["if",["binary","instanceof",["name","face"],["dot",["name","THREE"],"Face4"]],["block",[["stat",["assign",true,["dot",["name","face"],"a"],["sub",["name","changes"],["dot",["name","face"],"a"]]]],["stat",["assign",true,["dot",["name","face"],"b"],["sub",["name","changes"],["dot",["name","face"],"b"]]]],["stat",["assign",true,["dot",["name","face"],"c"],["sub",["name","changes"],["dot",["name","face"],"c"]]]],["stat",["assign",true,["dot",["name","face"],"d"],["sub",["name","changes"],["dot",["name","face"],"d"]]]],["stat",["assign",true,["name","o"],["array",[["dot",["name","face"],"a"],["dot",["name","face"],"b"],["dot",["name","face"],"c"],["dot",["name","face"],"d"]]]]],["for",["assign",true,["name","k"],["num",3]],["binary",">",["name","k"],["num",0]],["unary-postfix","--",["name","k"]],["block",[["if",["binary","!=",["call",["dot",["name","o"],"indexOf"],[["sub",["name","face"],["sub",["name","abcd"],["name","k"]]]]],["name","k"]],["block",[["stat",["call",["dot",["name","o"],"splice"],[["name","k"],["num",1]]]],["stat",["assign",true,["sub",["dot",["name","this"],"faces"],["name","i"]],["new",["dot",["name","THREE"],"Face3"],[["sub",["name","o"],["num",0]],["sub",["name","o"],["num",1]],["sub",["name","o"],["num",2]]]]]],["for",["seq",["assign",true,["name","j"],["num",0]],["assign",true,["name","jl"],["dot",["dot",["name","this"],"faceVertexUvs"],"length"]]],["binary","<",["name","j"],["name","jl"]],["unary-postfix","++",["name","j"]],["block",[["stat",["assign",true,["name","u"],["sub",["sub",["dot",["name","this"],"faceVertexUvs"],["name","j"]],["name","i"]]]],["if",["name","u"],["stat",["call",["dot",["name","u"],"splice"],[["name","k"],["num",1]]]],null]]]],["break",null]]],null]]]]]],null]]]]],["var",[["diff",["binary","-",["dot",["dot",["name","this"],"vertices"],"length"],["dot",["name","unique"],"length"]]]]],["stat",["assign",true,["dot",["name","this"],"vertices"],["name","unique"]]],["return",["name","diff"]]]]]]]]],["stat",["assign",true,["dot",["name","THREE"],"GeometryCount"],["num",0]]],["stat",["assign",true,["dot",["name","THREE"],"Spline"],["function",null,["points"],[["stat",["assign",true,["dot",["name","this"],"points"],["name","points"]]],["var",[["c",["array",[]]],["v3",["object",[["x",["num",0]],["y",["num",0]],["z",["num",0]]]]],["point"],["intPoint"],["weight"],["w2"],["w3"],["pa"],["pb"],["pc"],["pd"]]],["stat",["assign",true,["dot",["name","this"],"initFromArray"],["function",null,["a"],[["stat",["assign",true,["dot",["name","this"],"points"],["array",[]]]],["for",["var",[["i",["num",0]]]],["binary","<",["name","i"],["dot",["name","a"],"length"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["sub",["dot",["name","this"],"points"],["name","i"]],["object",[["x",["sub",["sub",["name","a"],["name","i"]],["num",0]]],["y",["sub",["sub",["name","a"],["name","i"]],["num",1]]],["z",["sub",["sub",["name","a"],["name","i"]],["num",2]]]]]]]]]]]]]],["stat",["assign",true,["dot",["name","this"],"getPoint"],["function",null,["k"],[["stat",["assign",true,["name","point"],["binary","*",["binary","-",["dot",["dot",["name","this"],"points"],"length"],["num",1]],["name","k"]]]],["stat",["assign",true,["name","intPoint"],["call",["dot",["name","Math"],"floor"],[["name","point"]]]]],["stat",["assign",true,["name","weight"],["binary","-",["name","point"],["name","intPoint"]]]],["stat",["assign",true,["sub",["name","c"],["num",0]],["conditional",["binary","===",["name","intPoint"],["num",0]],["name","intPoint"],["binary","-",["name","intPoint"],["num",1]]]]],["stat",["assign",true,["sub",["name","c"],["num",1]],["name","intPoint"]]],["stat",["assign",true,["sub",["name","c"],["num",2]],["conditional",["binary",">",["name","intPoint"],["binary","-",["dot",["dot",["name","this"],"points"],"length"],["num",2]]],["binary","-",["dot",["dot",["name","this"],"points"],"length"],["num",1]],["binary","+",["name","intPoint"],["num",1]]]]],["stat",["assign",true,["sub",["name","c"],["num",3]],["conditional",["binary",">",["name","intPoint"],["binary","-",["dot",["dot",["name","this"],"points"],"length"],["num",3]]],["binary","-",["dot",["dot",["name","this"],"points"],"length"],["num",1]],["binary","+",["name","intPoint"],["num",2]]]]],["stat",["assign",true,["name","pa"],["sub",["dot",["name","this"],"points"],["sub",["name","c"],["num",0]]]]],["stat",["assign",true,["name","pb"],["sub",["dot",["name","this"],"points"],["sub",["name","c"],["num",1]]]]],["stat",["assign",true,["name","pc"],["sub",["dot",["name","this"],"points"],["sub",["name","c"],["num",2]]]]],["stat",["assign",true,["name","pd"],["sub",["dot",["name","this"],"points"],["sub",["name","c"],["num",3]]]]],["stat",["assign",true,["name","w2"],["binary","*",["name","weight"],["name","weight"]]]],["stat",["assign",true,["name","w3"],["binary","*",["name","weight"],["name","w2"]]]],["stat",["assign",true,["dot",["name","v3"],"x"],["call",["name","interpolate"],[["dot",["name","pa"],"x"],["dot",["name","pb"],"x"],["dot",["name","pc"],"x"],["dot",["name","pd"],"x"],["name","weight"],["name","w2"],["name","w3"]]]]],["stat",["assign",true,["dot",["name","v3"],"y"],["call",["name","interpolate"],[["dot",["name","pa"],"y"],["dot",["name","pb"],"y"],["dot",["name","pc"],"y"],["dot",["name","pd"],"y"],["name","weight"],["name","w2"],["name","w3"]]]]],["stat",["assign",true,["dot",["name","v3"],"z"],["call",["name","interpolate"],[["dot",["name","pa"],"z"],["dot",["name","pb"],"z"],["dot",["name","pc"],"z"],["dot",["name","pd"],"z"],["name","weight"],["name","w2"],["name","w3"]]]]],["return",["name","v3"]]]]]],["stat",["assign",true,["dot",["name","this"],"getControlPointsArray"],["function",null,[],[["var",[["i"],["p"],["l",["dot",["dot",["name","this"],"points"],"length"]],["coords",["array",[]]]]],["for",["assign",true,["name","i"],["num",0]],["binary","<",["name","i"],["name","l"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","p"],["sub",["dot",["name","this"],"points"],["name","i"]]]],["stat",["assign",true,["sub",["name","coords"],["name","i"]],["array",[["dot",["name","p"],"x"],["dot",["name","p"],"y"],["dot",["name","p"],"z"]]]]]]]],["return",["name","coords"]]]]]],["stat",["assign",true,["dot",["name","this"],"getLength"],["function",null,["nSubDivisions"],[["var",[["i"],["index"],["nSamples"],["position"],["point",["num",0]],["intPoint",["num",0]],["oldIntPoint",["num",0]],["oldPosition",["new",["dot",["name","THREE"],"Vector3"],[]]],["tmpVec",["new",["dot",["name","THREE"],"Vector3"],[]]],["chunkLengths",["array",[]]],["totalLength",["num",0]]]],["stat",["assign",true,["sub",["name","chunkLengths"],["num",0]],["num",0]]],["if",["unary-prefix","!",["name","nSubDivisions"]],["stat",["assign",true,["name","nSubDivisions"],["num",100]]],null],["stat",["assign",true,["name","nSamples"],["binary","*",["dot",["dot",["name","this"],"points"],"length"],["name","nSubDivisions"]]]],["stat",["call",["dot",["name","oldPosition"],"copy"],[["sub",["dot",["name","this"],"points"],["num",0]]]]],["for",["assign",true,["name","i"],["num",1]],["binary","<",["name","i"],["name","nSamples"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","index"],["binary","/",["name","i"],["name","nSamples"]]]],["stat",["assign",true,["name","position"],["call",["dot",["name","this"],"getPoint"],[["name","index"]]]]],["stat",["call",["dot",["name","tmpVec"],"copy"],[["name","position"]]]],["stat",["assign","+",["name","totalLength"],["call",["dot",["name","tmpVec"],"distanceTo"],[["name","oldPosition"]]]]],["stat",["call",["dot",["name","oldPosition"],"copy"],[["name","position"]]]],["stat",["assign",true,["name","point"],["binary","*",["binary","-",["dot",["dot",["name","this"],"points"],"length"],["num",1]],["name","index"]]]],["stat",["assign",true,["name","intPoint"],["call",["dot",["name","Math"],"floor"],[["name","point"]]]]],["if",["binary","!=",["name","intPoint"],["name","oldIntPoint"]],["block",[["stat",["assign",true,["sub",["name","chunkLengths"],["name","intPoint"]],["name","totalLength"]]],["stat",["assign",true,["name","oldIntPoint"],["name","intPoint"]]]]],null]]]],["stat",["assign",true,["sub",["name","chunkLengths"],["dot",["name","chunkLengths"],"length"]],["name","totalLength"]]],["return",["object",[["chunks",["name","chunkLengths"]],["total",["name","totalLength"]]]]]]]]],["stat",["assign",true,["dot",["name","this"],"reparametrizeByArcLength"],["function",null,["samplingCoef"],[["var",[["i"],["j"],["index"],["indexCurrent"],["indexNext"],["linearDistance"],["realDistance"],["sampling"],["position"],["newpoints",["array",[]]],["tmpVec",["new",["dot",["name","THREE"],"Vector3"],[]]],["sl",["call",["dot",["name","this"],"getLength"],[]]]]],["stat",["call",["dot",["name","newpoints"],"push"],[["call",["dot",["call",["dot",["name","tmpVec"],"copy"],[["sub",["dot",["name","this"],"points"],["num",0]]]],"clone"],[]]]]],["for",["assign",true,["name","i"],["num",1]],["binary","<",["name","i"],["dot",["dot",["name","this"],"points"],"length"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","realDistance"],["binary","-",["sub",["dot",["name","sl"],"chunks"],["name","i"]],["sub",["dot",["name","sl"],"chunks"],["binary","-",["name","i"],["num",1]]]]]],["stat",["assign",true,["name","sampling"],["call",["dot",["name","Math"],"ceil"],[["binary","/",["binary","*",["name","samplingCoef"],["name","realDistance"]],["dot",["name","sl"],"total"]]]]]],["stat",["assign",true,["name","indexCurrent"],["binary","/",["binary","-",["name","i"],["num",1]],["binary","-",["dot",["dot",["name","this"],"points"],"length"],["num",1]]]]],["stat",["assign",true,["name","indexNext"],["binary","/",["name","i"],["binary","-",["dot",["dot",["name","this"],"points"],"length"],["num",1]]]]],["for",["assign",true,["name","j"],["num",1]],["binary","<",["name","j"],["binary","-",["name","sampling"],["num",1]]],["unary-postfix","++",["name","j"]],["block",[["stat",["assign",true,["name","index"],["binary","+",["name","indexCurrent"],["binary","*",["binary","*",["name","j"],["binary","/",["num",1],["name","sampling"]]],["binary","-",["name","indexNext"],["name","indexCurrent"]]]]]],["stat",["assign",true,["name","position"],["call",["dot",["name","this"],"getPoint"],[["name","index"]]]]],["stat",["call",["dot",["name","newpoints"],"push"],[["call",["dot",["call",["dot",["name","tmpVec"],"copy"],[["name","position"]]],"clone"],[]]]]]]]],["stat",["call",["dot",["name","newpoints"],"push"],[["call",["dot",["call",["dot",["name","tmpVec"],"copy"],[["sub",["dot",["name","this"],"points"],["name","i"]]]],"clone"],[]]]]]]]],["stat",["assign",true,["dot",["name","this"],"points"],["name","newpoints"]]]]]]],["defun","interpolate",["p0","p1","p2","p3","t","t2","t3"],[["var",[["v0",["binary","*",["binary","-",["name","p2"],["name","p0"]],["num",0.5]]],["v1",["binary","*",["binary","-",["name","p3"],["name","p1"]],["num",0.5]]]]],["return",["binary","+",["binary","+",["binary","+",["binary","*",["binary","+",["binary","+",["binary","*",["num",2],["binary","-",["name","p1"],["name","p2"]]],["name","v0"]],["name","v1"]],["name","t3"]],["binary","*",["binary","-",["binary","-",["binary","*",["unary-prefix","-",["num",3]],["binary","-",["name","p1"],["name","p2"]]],["binary","*",["num",2],["name","v0"]]],["name","v1"]],["name","t2"]]],["binary","*",["name","v0"],["name","t"]]],["name","p1"]]]]],["block"]]]]],["stat",["assign",true,["dot",["name","THREE"],"Camera"],["function",null,[],[["stat",["call",["dot",["dot",["name","THREE"],"Object3D"],"call"],[["name","this"]]]],["stat",["assign",true,["dot",["name","this"],"matrixWorldInverse"],["new",["dot",["name","THREE"],"Matrix4"],[]]]],["stat",["assign",true,["dot",["name","this"],"projectionMatrix"],["new",["dot",["name","THREE"],"Matrix4"],[]]]],["stat",["assign",true,["dot",["name","this"],"projectionMatrixInverse"],["new",["dot",["name","THREE"],"Matrix4"],[]]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"Camera"],"prototype"],["new",["dot",["name","THREE"],"Object3D"],[]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"Camera"],"prototype"],"constructor"],["dot",["name","THREE"],"Camera"]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"Camera"],"prototype"],"lookAt"],["function",null,["vector"],[["stat",["call",["dot",["dot",["name","this"],"matrix"],"lookAt"],[["dot",["name","this"],"position"],["name","vector"],["dot",["name","this"],"up"]]]],["if",["dot",["name","this"],"rotationAutoUpdate"],["block",[["stat",["call",["dot",["dot",["name","this"],"rotation"],"getRotationFromMatrix"],[["dot",["name","this"],"matrix"]]]]]],null]]]]],["stat",["assign",true,["dot",["name","THREE"],"OrthographicCamera"],["function",null,["left","right","top","bottom","near","far"],[["stat",["call",["dot",["dot",["name","THREE"],"Camera"],"call"],[["name","this"]]]],["stat",["assign",true,["dot",["name","this"],"left"],["name","left"]]],["stat",["assign",true,["dot",["name","this"],"right"],["name","right"]]],["stat",["assign",true,["dot",["name","this"],"top"],["name","top"]]],["stat",["assign",true,["dot",["name","this"],"bottom"],["name","bottom"]]],["stat",["assign",true,["dot",["name","this"],"near"],["conditional",["binary","!==",["name","near"],["name","undefined"]],["name","near"],["num",0.1]]]],["stat",["assign",true,["dot",["name","this"],"far"],["conditional",["binary","!==",["name","far"],["name","undefined"]],["name","far"],["num",2000]]]],["stat",["call",["dot",["name","this"],"updateProjectionMatrix"],[]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"OrthographicCamera"],"prototype"],["new",["dot",["name","THREE"],"Camera"],[]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"OrthographicCamera"],"prototype"],"constructor"],["dot",["name","THREE"],"OrthographicCamera"]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"OrthographicCamera"],"prototype"],"updateProjectionMatrix"],["function",null,[],[["stat",["call",["dot",["dot",["name","this"],"projectionMatrix"],"makeOrthographic"],[["dot",["name","this"],"left"],["dot",["name","this"],"right"],["dot",["name","this"],"top"],["dot",["name","this"],"bottom"],["dot",["name","this"],"near"],["dot",["name","this"],"far"]]]]]]]],["stat",["assign",true,["dot",["name","THREE"],"PerspectiveCamera"],["function",null,["fov","aspect","near","far"],[["stat",["call",["dot",["dot",["name","THREE"],"Camera"],"call"],[["name","this"]]]],["stat",["assign",true,["dot",["name","this"],"fov"],["conditional",["binary","!==",["name","fov"],["name","undefined"]],["name","fov"],["num",50]]]],["stat",["assign",true,["dot",["name","this"],"aspect"],["conditional",["binary","!==",["name","aspect"],["name","undefined"]],["name","aspect"],["num",1]]]],["stat",["assign",true,["dot",["name","this"],"near"],["conditional",["binary","!==",["name","near"],["name","undefined"]],["name","near"],["num",0.1]]]],["stat",["assign",true,["dot",["name","this"],"far"],["conditional",["binary","!==",["name","far"],["name","undefined"]],["name","far"],["num",2000]]]],["stat",["call",["dot",["name","this"],"updateProjectionMatrix"],[]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"PerspectiveCamera"],"prototype"],["new",["dot",["name","THREE"],"Camera"],[]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"PerspectiveCamera"],"prototype"],"constructor"],["dot",["name","THREE"],"PerspectiveCamera"]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"PerspectiveCamera"],"prototype"],"setLens"],["function",null,["focalLength","frameHeight"],[["stat",["assign",true,["name","frameHeight"],["conditional",["binary","!==",["name","frameHeight"],["name","undefined"]],["name","frameHeight"],["num",24]]]],["stat",["assign",true,["dot",["name","this"],"fov"],["binary","*",["binary","*",["num",2],["call",["dot",["name","Math"],"atan"],[["binary","/",["name","frameHeight"],["binary","*",["name","focalLength"],["num",2]]]]]],["binary","/",["num",180],["dot",["name","Math"],"PI"]]]]],["stat",["call",["dot",["name","this"],"updateProjectionMatrix"],[]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"PerspectiveCamera"],"prototype"],"setViewOffset"],["function",null,["fullWidth","fullHeight","x","y","width","height"],[["stat",["assign",true,["dot",["name","this"],"fullWidth"],["name","fullWidth"]]],["stat",["assign",true,["dot",["name","this"],"fullHeight"],["name","fullHeight"]]],["stat",["assign",true,["dot",["name","this"],"x"],["name","x"]]],["stat",["assign",true,["dot",["name","this"],"y"],["name","y"]]],["stat",["assign",true,["dot",["name","this"],"width"],["name","width"]]],["stat",["assign",true,["dot",["name","this"],"height"],["name","height"]]],["stat",["call",["dot",["name","this"],"updateProjectionMatrix"],[]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"PerspectiveCamera"],"prototype"],"updateProjectionMatrix"],["function",null,[],[["if",["dot",["name","this"],"fullWidth"],["block",[["var",[["aspect",["binary","/",["dot",["name","this"],"fullWidth"],["dot",["name","this"],"fullHeight"]]]]],["var",[["top",["binary","*",["call",["dot",["name","Math"],"tan"],[["binary","/",["binary","*",["dot",["name","this"],"fov"],["dot",["name","Math"],"PI"]],["num",360]]]],["dot",["name","this"],"near"]]]]],["var",[["bottom",["unary-prefix","-",["name","top"]]]]],["var",[["left",["binary","*",["name","aspect"],["name","bottom"]]]]],["var",[["right",["binary","*",["name","aspect"],["name","top"]]]]],["var",[["width",["call",["dot",["name","Math"],"abs"],[["binary","-",["name","right"],["name","left"]]]]]]],["var",[["height",["call",["dot",["name","Math"],"abs"],[["binary","-",["name","top"],["name","bottom"]]]]]]],["stat",["call",["dot",["dot",["name","this"],"projectionMatrix"],"makeFrustum"],[["binary","+",["name","left"],["binary","/",["binary","*",["dot",["name","this"],"x"],["name","width"]],["dot",["name","this"],"fullWidth"]]],["binary","+",["name","left"],["binary","/",["binary","*",["binary","+",["dot",["name","this"],"x"],["dot",["name","this"],"width"]],["name","width"]],["dot",["name","this"],"fullWidth"]]],["binary","-",["name","top"],["binary","/",["binary","*",["binary","+",["dot",["name","this"],"y"],["dot",["name","this"],"height"]],["name","height"]],["dot",["name","this"],"fullHeight"]]],["binary","-",["name","top"],["binary","/",["binary","*",["dot",["name","this"],"y"],["name","height"]],["dot",["name","this"],"fullHeight"]]],["dot",["name","this"],"near"],["dot",["name","this"],"far"]]]]]],["block",[["stat",["call",["dot",["dot",["name","this"],"projectionMatrix"],"makePerspective"],[["dot",["name","this"],"fov"],["dot",["name","this"],"aspect"],["dot",["name","this"],"near"],["dot",["name","this"],"far"]]]]]]]]]]],["stat",["assign",true,["dot",["name","THREE"],"Light"],["function",null,["hex"],[["stat",["call",["dot",["dot",["name","THREE"],"Object3D"],"call"],[["name","this"]]]],["stat",["assign",true,["dot",["name","this"],"color"],["new",["dot",["name","THREE"],"Color"],[["name","hex"]]]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"Light"],"prototype"],["new",["dot",["name","THREE"],"Object3D"],[]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"Light"],"prototype"],"constructor"],["dot",["name","THREE"],"Light"]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"Light"],"prototype"],"supr"],["dot",["dot",["name","THREE"],"Object3D"],"prototype"]]],["stat",["assign",true,["dot",["name","THREE"],"AmbientLight"],["function",null,["hex"],[["stat",["call",["dot",["dot",["name","THREE"],"Light"],"call"],[["name","this"],["name","hex"]]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"AmbientLight"],"prototype"],["new",["dot",["name","THREE"],"Light"],[]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"AmbientLight"],"prototype"],"constructor"],["dot",["name","THREE"],"AmbientLight"]]],["stat",["assign",true,["dot",["name","THREE"],"DirectionalLight"],["function",null,["hex","intensity","distance"],[["stat",["call",["dot",["dot",["name","THREE"],"Light"],"call"],[["name","this"],["name","hex"]]]],["stat",["assign",true,["dot",["name","this"],"position"],["new",["dot",["name","THREE"],"Vector3"],[["num",0],["num",1],["num",0]]]]],["stat",["assign",true,["dot",["name","this"],"target"],["new",["dot",["name","THREE"],"Object3D"],[]]]],["stat",["assign",true,["dot",["name","this"],"intensity"],["conditional",["binary","!==",["name","intensity"],["name","undefined"]],["name","intensity"],["num",1]]]],["stat",["assign",true,["dot",["name","this"],"distance"],["conditional",["binary","!==",["name","distance"],["name","undefined"]],["name","distance"],["num",0]]]],["stat",["assign",true,["dot",["name","this"],"castShadow"],["name","false"]]],["stat",["assign",true,["dot",["name","this"],"onlyShadow"],["name","false"]]],["stat",["assign",true,["dot",["name","this"],"shadowCameraNear"],["num",50]]],["stat",["assign",true,["dot",["name","this"],"shadowCameraFar"],["num",5000]]],["stat",["assign",true,["dot",["name","this"],"shadowCameraLeft"],["unary-prefix","-",["num",500]]]],["stat",["assign",true,["dot",["name","this"],"shadowCameraRight"],["num",500]]],["stat",["assign",true,["dot",["name","this"],"shadowCameraTop"],["num",500]]],["stat",["assign",true,["dot",["name","this"],"shadowCameraBottom"],["unary-prefix","-",["num",500]]]],["stat",["assign",true,["dot",["name","this"],"shadowCameraVisible"],["name","false"]]],["stat",["assign",true,["dot",["name","this"],"shadowBias"],["num",0]]],["stat",["assign",true,["dot",["name","this"],"shadowDarkness"],["num",0.5]]],["stat",["assign",true,["dot",["name","this"],"shadowMapWidth"],["num",512]]],["stat",["assign",true,["dot",["name","this"],"shadowMapHeight"],["num",512]]],["stat",["assign",true,["dot",["name","this"],"shadowCascade"],["name","false"]]],["stat",["assign",true,["dot",["name","this"],"shadowCascadeOffset"],["new",["dot",["name","THREE"],"Vector3"],[["num",0],["num",0],["unary-prefix","-",["num",1000]]]]]],["stat",["assign",true,["dot",["name","this"],"shadowCascadeCount"],["num",2]]],["stat",["assign",true,["dot",["name","this"],"shadowCascadeBias"],["array",[["num",0],["num",0],["num",0]]]]],["stat",["assign",true,["dot",["name","this"],"shadowCascadeWidth"],["array",[["num",512],["num",512],["num",512]]]]],["stat",["assign",true,["dot",["name","this"],"shadowCascadeHeight"],["array",[["num",512],["num",512],["num",512]]]]],["stat",["assign",true,["dot",["name","this"],"shadowCascadeNearZ"],["array",[["unary-prefix","-",["num",1]],["num",0.99],["num",0.998]]]]],["stat",["assign",true,["dot",["name","this"],"shadowCascadeFarZ"],["array",[["num",0.99],["num",0.998],["num",1]]]]],["stat",["assign",true,["dot",["name","this"],"shadowCascadeArray"],["array",[]]]],["stat",["assign",true,["dot",["name","this"],"shadowMap"],["name","null"]]],["stat",["assign",true,["dot",["name","this"],"shadowMapSize"],["name","null"]]],["stat",["assign",true,["dot",["name","this"],"shadowCamera"],["name","null"]]],["stat",["assign",true,["dot",["name","this"],"shadowMatrix"],["name","null"]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"DirectionalLight"],"prototype"],["new",["dot",["name","THREE"],"Light"],[]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"DirectionalLight"],"prototype"],"constructor"],["dot",["name","THREE"],"DirectionalLight"]]],["stat",["assign",true,["dot",["name","THREE"],"PointLight"],["function",null,["hex","intensity","distance"],[["stat",["call",["dot",["dot",["name","THREE"],"Light"],"call"],[["name","this"],["name","hex"]]]],["stat",["assign",true,["dot",["name","this"],"position"],["new",["dot",["name","THREE"],"Vector3"],[["num",0],["num",0],["num",0]]]]],["stat",["assign",true,["dot",["name","this"],"intensity"],["conditional",["binary","!==",["name","intensity"],["name","undefined"]],["name","intensity"],["num",1]]]],["stat",["assign",true,["dot",["name","this"],"distance"],["conditional",["binary","!==",["name","distance"],["name","undefined"]],["name","distance"],["num",0]]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"PointLight"],"prototype"],["new",["dot",["name","THREE"],"Light"],[]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"PointLight"],"prototype"],"constructor"],["dot",["name","THREE"],"PointLight"]]],["stat",["assign",true,["dot",["name","THREE"],"SpotLight"],["function",null,["hex","intensity","distance","angle","exponent"],[["stat",["call",["dot",["dot",["name","THREE"],"Light"],"call"],[["name","this"],["name","hex"]]]],["stat",["assign",true,["dot",["name","this"],"position"],["new",["dot",["name","THREE"],"Vector3"],[["num",0],["num",1],["num",0]]]]],["stat",["assign",true,["dot",["name","this"],"target"],["new",["dot",["name","THREE"],"Object3D"],[]]]],["stat",["assign",true,["dot",["name","this"],"intensity"],["conditional",["binary","!==",["name","intensity"],["name","undefined"]],["name","intensity"],["num",1]]]],["stat",["assign",true,["dot",["name","this"],"distance"],["conditional",["binary","!==",["name","distance"],["name","undefined"]],["name","distance"],["num",0]]]],["stat",["assign",true,["dot",["name","this"],"angle"],["conditional",["binary","!==",["name","angle"],["name","undefined"]],["name","angle"],["binary","/",["dot",["name","Math"],"PI"],["num",2]]]]],["stat",["assign",true,["dot",["name","this"],"exponent"],["conditional",["binary","!==",["name","exponent"],["name","undefined"]],["name","exponent"],["num",10]]]],["stat",["assign",true,["dot",["name","this"],"castShadow"],["name","false"]]],["stat",["assign",true,["dot",["name","this"],"onlyShadow"],["name","false"]]],["stat",["assign",true,["dot",["name","this"],"shadowCameraNear"],["num",50]]],["stat",["assign",true,["dot",["name","this"],"shadowCameraFar"],["num",5000]]],["stat",["assign",true,["dot",["name","this"],"shadowCameraFov"],["num",50]]],["stat",["assign",true,["dot",["name","this"],"shadowCameraVisible"],["name","false"]]],["stat",["assign",true,["dot",["name","this"],"shadowBias"],["num",0]]],["stat",["assign",true,["dot",["name","this"],"shadowDarkness"],["num",0.5]]],["stat",["assign",true,["dot",["name","this"],"shadowMapWidth"],["num",512]]],["stat",["assign",true,["dot",["name","this"],"shadowMapHeight"],["num",512]]],["stat",["assign",true,["dot",["name","this"],"shadowMap"],["name","null"]]],["stat",["assign",true,["dot",["name","this"],"shadowMapSize"],["name","null"]]],["stat",["assign",true,["dot",["name","this"],"shadowCamera"],["name","null"]]],["stat",["assign",true,["dot",["name","this"],"shadowMatrix"],["name","null"]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"SpotLight"],"prototype"],["new",["dot",["name","THREE"],"Light"],[]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"SpotLight"],"prototype"],"constructor"],["dot",["name","THREE"],"SpotLight"]]],["stat",["assign",true,["dot",["name","THREE"],"Loader"],["function",null,["showStatus"],[["stat",["assign",true,["dot",["name","this"],"showStatus"],["name","showStatus"]]],["stat",["assign",true,["dot",["name","this"],"statusDomElement"],["conditional",["name","showStatus"],["call",["dot",["dot",["dot",["name","THREE"],"Loader"],"prototype"],"addStatusElement"],[]],["name","null"]]]],["stat",["assign",true,["dot",["name","this"],"onLoadStart"],["function",null,[],[]]]],["stat",["assign",true,["dot",["name","this"],"onLoadProgress"],["function",null,[],[]]]],["stat",["assign",true,["dot",["name","this"],"onLoadComplete"],["function",null,[],[]]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"Loader"],"prototype"],["object",[["constructor",["dot",["name","THREE"],"Loader"]],["crossOrigin",["string","anonymous"]],["addStatusElement",["function",null,[],[["var",[["e",["call",["dot",["name","document"],"createElement"],[["string","div"]]]]]],["stat",["assign",true,["dot",["dot",["name","e"],"style"],"position"],["string","absolute"]]],["stat",["assign",true,["dot",["dot",["name","e"],"style"],"right"],["string","0px"]]],["stat",["assign",true,["dot",["dot",["name","e"],"style"],"top"],["string","0px"]]],["stat",["assign",true,["dot",["dot",["name","e"],"style"],"fontSize"],["string","0.8em"]]],["stat",["assign",true,["dot",["dot",["name","e"],"style"],"textAlign"],["string","left"]]],["stat",["assign",true,["dot",["dot",["name","e"],"style"],"background"],["string","rgba(0,0,0,0.25)"]]],["stat",["assign",true,["dot",["dot",["name","e"],"style"],"color"],["string","#fff"]]],["stat",["assign",true,["dot",["dot",["name","e"],"style"],"width"],["string","120px"]]],["stat",["assign",true,["dot",["dot",["name","e"],"style"],"padding"],["string","0.5em 0.5em 0.5em 0.5em"]]],["stat",["assign",true,["dot",["dot",["name","e"],"style"],"zIndex"],["num",1000]]],["stat",["assign",true,["dot",["name","e"],"innerHTML"],["string","Loading ..."]]],["return",["name","e"]]]]],["updateProgress",["function",null,["progress"],[["var",[["message",["string","Loaded "]]]],["if",["dot",["name","progress"],"total"],["block",[["stat",["assign","+",["name","message"],["binary","+",["call",["dot",["binary","/",["binary","*",["num",100],["dot",["name","progress"],"loaded"]],["dot",["name","progress"],"total"]],"toFixed"],[["num",0]]],["string","%"]]]]]],["block",[["stat",["assign","+",["name","message"],["binary","+",["call",["dot",["binary","/",["dot",["name","progress"],"loaded"],["num",1000]],"toFixed"],[["num",2]]],["string"," KB"]]]]]]],["stat",["assign",true,["dot",["dot",["name","this"],"statusDomElement"],"innerHTML"],["name","message"]]]]]],["extractUrlBase",["function",null,["url"],[["var",[["parts",["call",["dot",["name","url"],"split"],[["string","/"]]]]]],["stat",["call",["dot",["name","parts"],"pop"],[]]],["return",["binary","+",["conditional",["binary","<",["dot",["name","parts"],"length"],["num",1]],["string","."],["call",["dot",["name","parts"],"join"],[["string","/"]]]],["string","/"]]]]]],["initMaterials",["function",null,["scope","materials","texturePath"],[["stat",["assign",true,["dot",["name","scope"],"materials"],["array",[]]]],["for",["var",[["i",["num",0]]]],["binary","<",["name","i"],["dot",["name","materials"],"length"]],["unary-prefix","++",["name","i"]],["block",[["stat",["assign",true,["sub",["dot",["name","scope"],"materials"],["name","i"]],["call",["dot",["dot",["dot",["name","THREE"],"Loader"],"prototype"],"createMaterial"],[["sub",["name","materials"],["name","i"]],["name","texturePath"]]]]]]]]]]],["hasNormals",["function",null,["scope"],[["var",[["m"],["i"],["il",["dot",["dot",["name","scope"],"materials"],"length"]]]],["for",["assign",true,["name","i"],["num",0]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","m"],["sub",["dot",["name","scope"],"materials"],["name","i"]]]],["if",["binary","instanceof",["name","m"],["dot",["name","THREE"],"ShaderMaterial"]],["return",["name","true"]],null]]]],["return",["name","false"]]]]],["createMaterial",["function",null,["m","texturePath"],[["var",[["_this",["name","this"]]]],["defun","is_pow2",["n"],[["var",[["l",["binary","/",["call",["dot",["name","Math"],"log"],[["name","n"]]],["dot",["name","Math"],"LN2"]]]]],["return",["binary","==",["call",["dot",["name","Math"],"floor"],[["name","l"]]],["name","l"]]]]],["defun","nearest_pow2",["n"],[["var",[["l",["binary","/",["call",["dot",["name","Math"],"log"],[["name","n"]]],["dot",["name","Math"],"LN2"]]]]],["return",["call",["dot",["name","Math"],"pow"],[["num",2],["call",["dot",["name","Math"],"round"],[["name","l"]]]]]]]],["defun","load_image",["where","url"],[["var",[["image",["new",["name","Image"],[]]]]],["stat",["assign",true,["dot",["name","image"],"onload"],["function",null,[],[["if",["binary","||",["unary-prefix","!",["call",["name","is_pow2"],[["dot",["name","this"],"width"]]]],["unary-prefix","!",["call",["name","is_pow2"],[["dot",["name","this"],"height"]]]]],["block",[["var",[["width",["call",["name","nearest_pow2"],[["dot",["name","this"],"width"]]]]]],["var",[["height",["call",["name","nearest_pow2"],[["dot",["name","this"],"height"]]]]]],["stat",["assign",true,["dot",["dot",["name","where"],"image"],"width"],["name","width"]]],["stat",["assign",true,["dot",["dot",["name","where"],"image"],"height"],["name","height"]]],["stat",["call",["dot",["call",["dot",["dot",["name","where"],"image"],"getContext"],[["string","2d"]]],"drawImage"],[["name","this"],["num",0],["num",0],["name","width"],["name","height"]]]]]],["block",[["stat",["assign",true,["dot",["name","where"],"image"],["name","this"]]]]]],["stat",["assign",true,["dot",["name","where"],"needsUpdate"],["name","true"]]]]]]],["stat",["assign",true,["dot",["name","image"],"crossOrigin"],["dot",["name","_this"],"crossOrigin"]]],["stat",["assign",true,["dot",["name","image"],"src"],["name","url"]]]]],["defun","create_texture",["where","name","sourceFile","repeat","offset","wrap"],[["var",[["texture",["call",["dot",["name","document"],"createElement"],[["string","canvas"]]]]]],["stat",["assign",true,["sub",["name","where"],["name","name"]],["new",["dot",["name","THREE"],"Texture"],[["name","texture"]]]]],["stat",["assign",true,["dot",["sub",["name","where"],["name","name"]],"sourceFile"],["name","sourceFile"]]],["if",["name","repeat"],["block",[["stat",["call",["dot",["dot",["sub",["name","where"],["name","name"]],"repeat"],"set"],[["sub",["name","repeat"],["num",0]],["sub",["name","repeat"],["num",1]]]]],["if",["binary","!=",["sub",["name","repeat"],["num",0]],["num",1]],["stat",["assign",true,["dot",["sub",["name","where"],["name","name"]],"wrapS"],["dot",["name","THREE"],"RepeatWrapping"]]],null],["if",["binary","!=",["sub",["name","repeat"],["num",1]],["num",1]],["stat",["assign",true,["dot",["sub",["name","where"],["name","name"]],"wrapT"],["dot",["name","THREE"],"RepeatWrapping"]]],null]]],null],["if",["name","offset"],["block",[["stat",["call",["dot",["dot",["sub",["name","where"],["name","name"]],"offset"],"set"],[["sub",["name","offset"],["num",0]],["sub",["name","offset"],["num",1]]]]]]],null],["if",["name","wrap"],["block",[["var",[["wrapMap",["object",[["repeat",["dot",["name","THREE"],"RepeatWrapping"]],["mirror",["dot",["name","THREE"],"MirroredRepeatWrapping"]]]]]]],["if",["binary","!==",["sub",["name","wrapMap"],["sub",["name","wrap"],["num",0]]],["name","undefined"]],["stat",["assign",true,["dot",["sub",["name","where"],["name","name"]],"wrapS"],["sub",["name","wrapMap"],["sub",["name","wrap"],["num",0]]]]],null],["if",["binary","!==",["sub",["name","wrapMap"],["sub",["name","wrap"],["num",1]]],["name","undefined"]],["stat",["assign",true,["dot",["sub",["name","where"],["name","name"]],"wrapT"],["sub",["name","wrapMap"],["sub",["name","wrap"],["num",1]]]]],null]]],null],["stat",["call",["name","load_image"],[["sub",["name","where"],["name","name"]],["binary","+",["binary","+",["name","texturePath"],["string","/"]],["name","sourceFile"]]]]]]],["defun","rgb2hex",["rgb"],[["return",["binary","+",["binary","+",["binary","<<",["binary","*",["sub",["name","rgb"],["num",0]],["num",255]],["num",16]],["binary","<<",["binary","*",["sub",["name","rgb"],["num",1]],["num",255]],["num",8]]],["binary","*",["sub",["name","rgb"],["num",2]],["num",255]]]]]],["var",[["mtype",["string","MeshLambertMaterial"]]]],["var",[["mpars",["object",[["color",["num",15658734]],["opacity",["num",1]],["map",["name","null"]],["lightMap",["name","null"]],["normalMap",["name","null"]],["wireframe",["dot",["name","m"],"wireframe"]]]]]]],["if",["dot",["name","m"],"shading"],["block",[["var",[["shading",["call",["dot",["dot",["name","m"],"shading"],"toLowerCase"],[]]]]],["if",["binary","===",["name","shading"],["string","phong"]],["stat",["assign",true,["name","mtype"],["string","MeshPhongMaterial"]]],["if",["binary","===",["name","shading"],["string","basic"]],["stat",["assign",true,["name","mtype"],["string","MeshBasicMaterial"]]],null]]]],null],["if",["binary","&&",["binary","!==",["dot",["name","m"],"blending"],["name","undefined"]],["binary","!==",["sub",["name","THREE"],["dot",["name","m"],"blending"]],["name","undefined"]]],["block",[["stat",["assign",true,["dot",["name","mpars"],"blending"],["sub",["name","THREE"],["dot",["name","m"],"blending"]]]]]],null],["if",["binary","||",["binary","!==",["dot",["name","m"],"transparent"],["name","undefined"]],["binary","<",["dot",["name","m"],"opacity"],["num",1]]],["block",[["stat",["assign",true,["dot",["name","mpars"],"transparent"],["dot",["name","m"],"transparent"]]]]],null],["if",["binary","!==",["dot",["name","m"],"depthTest"],["name","undefined"]],["block",[["stat",["assign",true,["dot",["name","mpars"],"depthTest"],["dot",["name","m"],"depthTest"]]]]],null],["if",["binary","!==",["dot",["name","m"],"depthWrite"],["name","undefined"]],["block",[["stat",["assign",true,["dot",["name","mpars"],"depthWrite"],["dot",["name","m"],"depthWrite"]]]]],null],["if",["binary","!==",["dot",["name","m"],"vertexColors"],["name","undefined"]],["block",[["if",["binary","==",["dot",["name","m"],"vertexColors"],["string","face"]],["block",[["stat",["assign",true,["dot",["name","mpars"],"vertexColors"],["dot",["name","THREE"],"FaceColors"]]]]],["if",["dot",["name","m"],"vertexColors"],["block",[["stat",["assign",true,["dot",["name","mpars"],"vertexColors"],["dot",["name","THREE"],"VertexColors"]]]]],null]]]],null],["if",["dot",["name","m"],"colorDiffuse"],["block",[["stat",["assign",true,["dot",["name","mpars"],"color"],["call",["name","rgb2hex"],[["dot",["name","m"],"colorDiffuse"]]]]]]],["if",["dot",["name","m"],"DbgColor"],["block",[["stat",["assign",true,["dot",["name","mpars"],"color"],["dot",["name","m"],"DbgColor"]]]]],null]],["if",["dot",["name","m"],"colorSpecular"],["block",[["stat",["assign",true,["dot",["name","mpars"],"specular"],["call",["name","rgb2hex"],[["dot",["name","m"],"colorSpecular"]]]]]]],null],["if",["dot",["name","m"],"colorAmbient"],["block",[["stat",["assign",true,["dot",["name","mpars"],"ambient"],["call",["name","rgb2hex"],[["dot",["name","m"],"colorAmbient"]]]]]]],null],["if",["dot",["name","m"],"transparency"],["block",[["stat",["assign",true,["dot",["name","mpars"],"opacity"],["dot",["name","m"],"transparency"]]]]],null],["if",["dot",["name","m"],"specularCoef"],["block",[["stat",["assign",true,["dot",["name","mpars"],"shininess"],["dot",["name","m"],"specularCoef"]]]]],null],["if",["binary","&&",["dot",["name","m"],"mapDiffuse"],["name","texturePath"]],["block",[["stat",["call",["name","create_texture"],[["name","mpars"],["string","map"],["dot",["name","m"],"mapDiffuse"],["dot",["name","m"],"mapDiffuseRepeat"],["dot",["name","m"],"mapDiffuseOffset"],["dot",["name","m"],"mapDiffuseWrap"]]]]]],null],["if",["binary","&&",["dot",["name","m"],"mapLight"],["name","texturePath"]],["block",[["stat",["call",["name","create_texture"],[["name","mpars"],["string","lightMap"],["dot",["name","m"],"mapLight"],["dot",["name","m"],"mapLightRepeat"],["dot",["name","m"],"mapLightOffset"],["dot",["name","m"],"mapLightWrap"]]]]]],null],["if",["binary","&&",["dot",["name","m"],"mapNormal"],["name","texturePath"]],["block",[["stat",["call",["name","create_texture"],[["name","mpars"],["string","normalMap"],["dot",["name","m"],"mapNormal"],["dot",["name","m"],"mapNormalRepeat"],["dot",["name","m"],"mapNormalOffset"],["dot",["name","m"],"mapNormalWrap"]]]]]],null],["if",["binary","&&",["dot",["name","m"],"mapSpecular"],["name","texturePath"]],["block",[["stat",["call",["name","create_texture"],[["name","mpars"],["string","specularMap"],["dot",["name","m"],"mapSpecular"],["dot",["name","m"],"mapSpecularRepeat"],["dot",["name","m"],"mapSpecularOffset"],["dot",["name","m"],"mapSpecularWrap"]]]]]],null],["if",["dot",["name","m"],"mapNormal"],["block",[["var",[["shader",["sub",["dot",["dot",["name","THREE"],"ShaderUtils"],"lib"],["string","normal"]]]]],["var",[["uniforms",["call",["dot",["dot",["name","THREE"],"UniformsUtils"],"clone"],[["dot",["name","shader"],"uniforms"]]]]]],["stat",["assign",true,["dot",["sub",["name","uniforms"],["string","tNormal"]],"texture"],["dot",["name","mpars"],"normalMap"]]],["if",["dot",["name","m"],"mapNormalFactor"],["block",[["stat",["assign",true,["dot",["sub",["name","uniforms"],["string","uNormalScale"]],"value"],["dot",["name","m"],"mapNormalFactor"]]]]],null],["if",["dot",["name","mpars"],"map"],["block",[["stat",["assign",true,["dot",["sub",["name","uniforms"],["string","tDiffuse"]],"texture"],["dot",["name","mpars"],"map"]]],["stat",["assign",true,["dot",["sub",["name","uniforms"],["string","enableDiffuse"]],"value"],["name","true"]]]]],null],["if",["dot",["name","mpars"],"specularMap"],["block",[["stat",["assign",true,["dot",["sub",["name","uniforms"],["string","tSpecular"]],"texture"],["dot",["name","mpars"],"specularMap"]]],["stat",["assign",true,["dot",["sub",["name","uniforms"],["string","enableSpecular"]],"value"],["name","true"]]]]],null],["if",["dot",["name","mpars"],"lightMap"],["block",[["stat",["assign",true,["dot",["sub",["name","uniforms"],["string","tAO"]],"texture"],["dot",["name","mpars"],"lightMap"]]],["stat",["assign",true,["dot",["sub",["name","uniforms"],["string","enableAO"]],"value"],["name","true"]]]]],null],["stat",["call",["dot",["dot",["sub",["name","uniforms"],["string","uDiffuseColor"]],"value"],"setHex"],[["dot",["name","mpars"],"color"]]]],["stat",["call",["dot",["dot",["sub",["name","uniforms"],["string","uSpecularColor"]],"value"],"setHex"],[["dot",["name","mpars"],"specular"]]]],["stat",["call",["dot",["dot",["sub",["name","uniforms"],["string","uAmbientColor"]],"value"],"setHex"],[["dot",["name","mpars"],"ambient"]]]],["stat",["assign",true,["dot",["sub",["name","uniforms"],["string","uShininess"]],"value"],["dot",["name","mpars"],"shininess"]]],["if",["binary","!==",["dot",["name","mpars"],"opacity"],["name","undefined"]],["block",[["stat",["assign",true,["dot",["sub",["name","uniforms"],["string","uOpacity"]],"value"],["dot",["name","mpars"],"opacity"]]]]],null],["var",[["parameters",["object",[["fragmentShader",["dot",["name","shader"],"fragmentShader"]],["vertexShader",["dot",["name","shader"],"vertexShader"]],["uniforms",["name","uniforms"]],["lights",["name","true"]],["fog",["name","true"]]]]]]],["var",[["material",["new",["dot",["name","THREE"],"ShaderMaterial"],[["name","parameters"]]]]]]]],["block",[["var",[["material",["new",["sub",["name","THREE"],["name","mtype"]],[["name","mpars"]]]]]]]]],["if",["binary","!==",["dot",["name","m"],"DbgName"],["name","undefined"]],["stat",["assign",true,["dot",["name","material"],"name"],["dot",["name","m"],"DbgName"]]],null],["return",["name","material"]]]]]]]]],["stat",["assign",true,["dot",["name","THREE"],"BinaryLoader"],["function",null,["showStatus"],[["stat",["call",["dot",["dot",["name","THREE"],"Loader"],"call"],[["name","this"],["name","showStatus"]]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"BinaryLoader"],"prototype"],["new",["dot",["name","THREE"],"Loader"],[]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"BinaryLoader"],"prototype"],"constructor"],["dot",["name","THREE"],"BinaryLoader"]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"BinaryLoader"],"prototype"],"load"],["function",null,["url","callback","texturePath","binaryPath"],[["stat",["assign",true,["name","texturePath"],["conditional",["name","texturePath"],["name","texturePath"],["call",["dot",["name","this"],"extractUrlBase"],[["name","url"]]]]]],["stat",["assign",true,["name","binaryPath"],["conditional",["name","binaryPath"],["name","binaryPath"],["call",["dot",["name","this"],"extractUrlBase"],[["name","url"]]]]]],["var",[["callbackProgress",["conditional",["dot",["name","this"],"showProgress"],["dot",["dot",["dot",["name","THREE"],"Loader"],"prototype"],"updateProgress"],["name","null"]]]]],["stat",["call",["dot",["name","this"],"onLoadStart"],[]]],["stat",["call",["dot",["name","this"],"loadAjaxJSON"],[["name","this"],["name","url"],["name","callback"],["name","texturePath"],["name","binaryPath"],["name","callbackProgress"]]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"BinaryLoader"],"prototype"],"loadAjaxJSON"],["function",null,["context","url","callback","texturePath","binaryPath","callbackProgress"],[["var",[["xhr",["new",["name","XMLHttpRequest"],[]]]]],["stat",["assign",true,["dot",["name","xhr"],"onreadystatechange"],["function",null,[],[["if",["binary","==",["dot",["name","xhr"],"readyState"],["num",4]],["block",[["if",["binary","||",["binary","==",["dot",["name","xhr"],"status"],["num",200]],["binary","==",["dot",["name","xhr"],"status"],["num",0]]],["block",[["var",[["json",["call",["dot",["name","JSON"],"parse"],[["dot",["name","xhr"],"responseText"]]]]]],["stat",["call",["dot",["name","context"],"loadAjaxBuffers"],[["name","json"],["name","callback"],["name","binaryPath"],["name","texturePath"],["name","callbackProgress"]]]]]],["block",[["stat",["call",["dot",["name","console"],"error"],[["binary","+",["binary","+",["binary","+",["binary","+",["string","THREE.BinaryLoader: Couldn't load ["],["name","url"]],["string","] ["]],["dot",["name","xhr"],"status"]],["string","]"]]]]]]]]]],null]]]]],["stat",["call",["dot",["name","xhr"],"open"],[["string","GET"],["name","url"],["name","true"]]]],["if",["dot",["name","xhr"],"overrideMimeType"],["stat",["call",["dot",["name","xhr"],"overrideMimeType"],[["string","text/plain; charset=x-user-defined"]]]],null],["stat",["call",["dot",["name","xhr"],"setRequestHeader"],[["string","Content-Type"],["string","text/plain"]]]],["stat",["call",["dot",["name","xhr"],"send"],[["name","null"]]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"BinaryLoader"],"prototype"],"loadAjaxBuffers"],["function",null,["json","callback","binaryPath","texturePath","callbackProgress"],[["var",[["xhr",["new",["name","XMLHttpRequest"],[]]],["url",["binary","+",["binary","+",["name","binaryPath"],["string","/"]],["dot",["name","json"],"buffers"]]]]],["var",[["length",["num",0]]]],["stat",["assign",true,["dot",["name","xhr"],"onreadystatechange"],["function",null,[],[["if",["binary","==",["dot",["name","xhr"],"readyState"],["num",4]],["block",[["if",["binary","||",["binary","==",["dot",["name","xhr"],"status"],["num",200]],["binary","==",["dot",["name","xhr"],"status"],["num",0]]],["block",[["stat",["call",["dot",["dot",["dot",["name","THREE"],"BinaryLoader"],"prototype"],"createBinModel"],[["dot",["name","xhr"],"response"],["name","callback"],["name","texturePath"],["dot",["name","json"],"materials"]]]]]],["block",[["stat",["call",["dot",["name","console"],"error"],[["binary","+",["binary","+",["binary","+",["binary","+",["string","THREE.BinaryLoader: Couldn't load ["],["name","url"]],["string","] ["]],["dot",["name","xhr"],"status"]],["string","]"]]]]]]]]]],["if",["binary","==",["dot",["name","xhr"],"readyState"],["num",3]],["block",[["if",["name","callbackProgress"],["block",[["if",["binary","==",["name","length"],["num",0]],["block",[["stat",["assign",true,["name","length"],["call",["dot",["name","xhr"],"getResponseHeader"],[["string","Content-Length"]]]]]]],null],["stat",["call",["name","callbackProgress"],[["object",[["total",["name","length"]],["loaded",["dot",["dot",["name","xhr"],"responseText"],"length"]]]]]]]]],null]]],["if",["binary","==",["dot",["name","xhr"],"readyState"],["num",2]],["block",[["stat",["assign",true,["name","length"],["call",["dot",["name","xhr"],"getResponseHeader"],[["string","Content-Length"]]]]]]],null]]]]]]],["stat",["call",["dot",["name","xhr"],"open"],[["string","GET"],["name","url"],["name","true"]]]],["stat",["assign",true,["dot",["name","xhr"],"responseType"],["string","arraybuffer"]]],["stat",["call",["dot",["name","xhr"],"send"],[["name","null"]]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"BinaryLoader"],"prototype"],"createBinModel"],["function",null,["data","callback","texturePath","materials"],[["var",[["Model",["function",null,["texturePath"],[["var",[["scope",["name","this"]],["currentOffset",["num",0]],["md"],["normals",["array",[]]],["uvs",["array",[]]],["start_tri_flat"],["start_tri_smooth"],["start_tri_flat_uv"],["start_tri_smooth_uv"],["start_quad_flat"],["start_quad_smooth"],["start_quad_flat_uv"],["start_quad_smooth_uv"],["tri_size"],["quad_size"],["len_tri_flat"],["len_tri_smooth"],["len_tri_flat_uv"],["len_tri_smooth_uv"],["len_quad_flat"],["len_quad_smooth"],["len_quad_flat_uv"],["len_quad_smooth_uv"]]],["stat",["call",["dot",["dot",["name","THREE"],"Geometry"],"call"],[["name","this"]]]],["stat",["call",["dot",["dot",["dot",["name","THREE"],"Loader"],"prototype"],"initMaterials"],[["name","scope"],["name","materials"],["name","texturePath"]]]],["stat",["assign",true,["name","md"],["call",["name","parseMetaData"],[["name","data"],["name","currentOffset"]]]]],["stat",["assign","+",["name","currentOffset"],["dot",["name","md"],"header_bytes"]]],["stat",["assign",true,["name","tri_size"],["binary","+",["binary","*",["dot",["name","md"],"vertex_index_bytes"],["num",3]],["dot",["name","md"],"material_index_bytes"]]]],["stat",["assign",true,["name","quad_size"],["binary","+",["binary","*",["dot",["name","md"],"vertex_index_bytes"],["num",4]],["dot",["name","md"],"material_index_bytes"]]]],["stat",["assign",true,["name","len_tri_flat"],["binary","*",["dot",["name","md"],"ntri_flat"],["name","tri_size"]]]],["stat",["assign",true,["name","len_tri_smooth"],["binary","*",["dot",["name","md"],"ntri_smooth"],["binary","+",["name","tri_size"],["binary","*",["dot",["name","md"],"normal_index_bytes"],["num",3]]]]]],["stat",["assign",true,["name","len_tri_flat_uv"],["binary","*",["dot",["name","md"],"ntri_flat_uv"],["binary","+",["name","tri_size"],["binary","*",["dot",["name","md"],"uv_index_bytes"],["num",3]]]]]],["stat",["assign",true,["name","len_tri_smooth_uv"],["binary","*",["dot",["name","md"],"ntri_smooth_uv"],["binary","+",["binary","+",["name","tri_size"],["binary","*",["dot",["name","md"],"normal_index_bytes"],["num",3]]],["binary","*",["dot",["name","md"],"uv_index_bytes"],["num",3]]]]]],["stat",["assign",true,["name","len_quad_flat"],["binary","*",["dot",["name","md"],"nquad_flat"],["name","quad_size"]]]],["stat",["assign",true,["name","len_quad_smooth"],["binary","*",["dot",["name","md"],"nquad_smooth"],["binary","+",["name","quad_size"],["binary","*",["dot",["name","md"],"normal_index_bytes"],["num",4]]]]]],["stat",["assign",true,["name","len_quad_flat_uv"],["binary","*",["dot",["name","md"],"nquad_flat_uv"],["binary","+",["name","quad_size"],["binary","*",["dot",["name","md"],"uv_index_bytes"],["num",4]]]]]],["stat",["assign",true,["name","len_quad_smooth_uv"],["binary","*",["dot",["name","md"],"nquad_smooth_uv"],["binary","+",["binary","+",["name","quad_size"],["binary","*",["dot",["name","md"],"normal_index_bytes"],["num",4]]],["binary","*",["dot",["name","md"],"uv_index_bytes"],["num",4]]]]]],["stat",["assign","+",["name","currentOffset"],["call",["name","init_vertices"],[["name","currentOffset"]]]]],["stat",["assign","+",["name","currentOffset"],["call",["name","init_normals"],[["name","currentOffset"]]]]],["stat",["assign","+",["name","currentOffset"],["call",["name","handlePadding"],[["binary","*",["dot",["name","md"],"nnormals"],["num",3]]]]]],["stat",["assign","+",["name","currentOffset"],["call",["name","init_uvs"],[["name","currentOffset"]]]]],["stat",["assign",true,["name","start_tri_flat"],["name","currentOffset"]]],["stat",["assign",true,["name","start_tri_smooth"],["binary","+",["binary","+",["name","start_tri_flat"],["name","len_tri_flat"]],["call",["name","handlePadding"],[["binary","*",["dot",["name","md"],"ntri_flat"],["num",2]]]]]]],["stat",["assign",true,["name","start_tri_flat_uv"],["binary","+",["binary","+",["name","start_tri_smooth"],["name","len_tri_smooth"]],["call",["name","handlePadding"],[["binary","*",["dot",["name","md"],"ntri_smooth"],["num",2]]]]]]],["stat",["assign",true,["name","start_tri_smooth_uv"],["binary","+",["binary","+",["name","start_tri_flat_uv"],["name","len_tri_flat_uv"]],["call",["name","handlePadding"],[["binary","*",["dot",["name","md"],"ntri_flat_uv"],["num",2]]]]]]],["stat",["assign",true,["name","start_quad_flat"],["binary","+",["binary","+",["name","start_tri_smooth_uv"],["name","len_tri_smooth_uv"]],["call",["name","handlePadding"],[["binary","*",["dot",["name","md"],"ntri_smooth_uv"],["num",2]]]]]]],["stat",["assign",true,["name","start_quad_smooth"],["binary","+",["binary","+",["name","start_quad_flat"],["name","len_quad_flat"]],["call",["name","handlePadding"],[["binary","*",["dot",["name","md"],"nquad_flat"],["num",2]]]]]]],["stat",["assign",true,["name","start_quad_flat_uv"],["binary","+",["binary","+",["name","start_quad_smooth"],["name","len_quad_smooth"]],["call",["name","handlePadding"],[["binary","*",["dot",["name","md"],"nquad_smooth"],["num",2]]]]]]],["stat",["assign",true,["name","start_quad_smooth_uv"],["binary","+",["binary","+",["name","start_quad_flat_uv"],["name","len_quad_flat_uv"]],["call",["name","handlePadding"],[["binary","*",["dot",["name","md"],"nquad_flat_uv"],["num",2]]]]]]],["stat",["call",["name","init_triangles_flat_uv"],[["name","start_tri_flat_uv"]]]],["stat",["call",["name","init_triangles_smooth_uv"],[["name","start_tri_smooth_uv"]]]],["stat",["call",["name","init_quads_flat_uv"],[["name","start_quad_flat_uv"]]]],["stat",["call",["name","init_quads_smooth_uv"],[["name","start_quad_smooth_uv"]]]],["stat",["call",["name","init_triangles_flat"],[["name","start_tri_flat"]]]],["stat",["call",["name","init_triangles_smooth"],[["name","start_tri_smooth"]]]],["stat",["call",["name","init_quads_flat"],[["name","start_quad_flat"]]]],["stat",["call",["name","init_quads_smooth"],[["name","start_quad_smooth"]]]],["stat",["call",["dot",["name","this"],"computeCentroids"],[]]],["stat",["call",["dot",["name","this"],"computeFaceNormals"],[]]],["if",["call",["dot",["dot",["dot",["name","THREE"],"Loader"],"prototype"],"hasNormals"],[["name","this"]]],["stat",["call",["dot",["name","this"],"computeTangents"],[]]],null],["defun","handlePadding",["n"],[["return",["conditional",["binary","%",["name","n"],["num",4]],["binary","-",["num",4],["binary","%",["name","n"],["num",4]]],["num",0]]]]],["block"],["defun","parseMetaData",["data","offset"],[["var",[["metaData",["object",[["signature",["call",["name","parseString"],[["name","data"],["name","offset"],["num",12]]]],["header_bytes",["call",["name","parseUChar8"],[["name","data"],["binary","+",["name","offset"],["num",12]]]]],["vertex_coordinate_bytes",["call",["name","parseUChar8"],[["name","data"],["binary","+",["name","offset"],["num",13]]]]],["normal_coordinate_bytes",["call",["name","parseUChar8"],[["name","data"],["binary","+",["name","offset"],["num",14]]]]],["uv_coordinate_bytes",["call",["name","parseUChar8"],[["name","data"],["binary","+",["name","offset"],["num",15]]]]],["vertex_index_bytes",["call",["name","parseUChar8"],[["name","data"],["binary","+",["name","offset"],["num",16]]]]],["normal_index_bytes",["call",["name","parseUChar8"],[["name","data"],["binary","+",["name","offset"],["num",17]]]]],["uv_index_bytes",["call",["name","parseUChar8"],[["name","data"],["binary","+",["name","offset"],["num",18]]]]],["material_index_bytes",["call",["name","parseUChar8"],[["name","data"],["binary","+",["name","offset"],["num",19]]]]],["nvertices",["call",["name","parseUInt32"],[["name","data"],["binary","+",["name","offset"],["num",20]]]]],["nnormals",["call",["name","parseUInt32"],[["name","data"],["binary","+",["binary","+",["name","offset"],["num",20]],["binary","*",["num",4],["num",1]]]]]],["nuvs",["call",["name","parseUInt32"],[["name","data"],["binary","+",["binary","+",["name","offset"],["num",20]],["binary","*",["num",4],["num",2]]]]]],["ntri_flat",["call",["name","parseUInt32"],[["name","data"],["binary","+",["binary","+",["name","offset"],["num",20]],["binary","*",["num",4],["num",3]]]]]],["ntri_smooth",["call",["name","parseUInt32"],[["name","data"],["binary","+",["binary","+",["name","offset"],["num",20]],["binary","*",["num",4],["num",4]]]]]],["ntri_flat_uv",["call",["name","parseUInt32"],[["name","data"],["binary","+",["binary","+",["name","offset"],["num",20]],["binary","*",["num",4],["num",5]]]]]],["ntri_smooth_uv",["call",["name","parseUInt32"],[["name","data"],["binary","+",["binary","+",["name","offset"],["num",20]],["binary","*",["num",4],["num",6]]]]]],["nquad_flat",["call",["name","parseUInt32"],[["name","data"],["binary","+",["binary","+",["name","offset"],["num",20]],["binary","*",["num",4],["num",7]]]]]],["nquad_smooth",["call",["name","parseUInt32"],[["name","data"],["binary","+",["binary","+",["name","offset"],["num",20]],["binary","*",["num",4],["num",8]]]]]],["nquad_flat_uv",["call",["name","parseUInt32"],[["name","data"],["binary","+",["binary","+",["name","offset"],["num",20]],["binary","*",["num",4],["num",9]]]]]],["nquad_smooth_uv",["call",["name","parseUInt32"],[["name","data"],["binary","+",["binary","+",["name","offset"],["num",20]],["binary","*",["num",4],["num",10]]]]]]]]]]],["return",["name","metaData"]]]],["block"],["defun","parseString",["data","offset","length"],[["var",[["charArray",["new",["name","Uint8Array"],[["name","data"],["name","offset"],["name","length"]]]]]],["var",[["text",["string",""]]]],["for",["var",[["i",["num",0]]]],["binary","<",["name","i"],["name","length"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign","+",["name","text"],["call",["dot",["name","String"],"fromCharCode"],[["sub",["name","charArray"],["binary","+",["name","offset"],["name","i"]]]]]]]]]],["return",["name","text"]]]],["block"],["defun","parseUChar8",["data","offset"],[["var",[["charArray",["new",["name","Uint8Array"],[["name","data"],["name","offset"],["num",1]]]]]],["return",["sub",["name","charArray"],["num",0]]]]],["block"],["defun","parseUInt32",["data","offset"],[["var",[["intArray",["new",["name","Uint32Array"],[["name","data"],["name","offset"],["num",1]]]]]],["return",["sub",["name","intArray"],["num",0]]]]],["block"],["defun","init_vertices",["start"],[["var",[["nElements",["dot",["name","md"],"nvertices"]]]],["var",[["coordArray",["new",["name","Float32Array"],[["name","data"],["name","start"],["binary","*",["name","nElements"],["num",3]]]]]]],["var",[["i"],["x"],["y"],["z"]]],["for",["assign",true,["name","i"],["num",0]],["binary","<",["name","i"],["name","nElements"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","x"],["sub",["name","coordArray"],["binary","*",["name","i"],["num",3]]]]],["stat",["assign",true,["name","y"],["sub",["name","coordArray"],["binary","+",["binary","*",["name","i"],["num",3]],["num",1]]]]],["stat",["assign",true,["name","z"],["sub",["name","coordArray"],["binary","+",["binary","*",["name","i"],["num",3]],["num",2]]]]],["stat",["call",["name","vertex"],[["name","scope"],["name","x"],["name","y"],["name","z"]]]]]]],["return",["binary","*",["binary","*",["name","nElements"],["num",3]],["dot",["name","Float32Array"],"BYTES_PER_ELEMENT"]]]]],["block"],["defun","init_normals",["start"],[["var",[["nElements",["dot",["name","md"],"nnormals"]]]],["if",["name","nElements"],["block",[["var",[["normalArray",["new",["name","Int8Array"],[["name","data"],["name","start"],["binary","*",["name","nElements"],["num",3]]]]]]],["var",[["i"],["x"],["y"],["z"]]],["for",["assign",true,["name","i"],["num",0]],["binary","<",["name","i"],["name","nElements"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","x"],["sub",["name","normalArray"],["binary","*",["name","i"],["num",3]]]]],["stat",["assign",true,["name","y"],["sub",["name","normalArray"],["binary","+",["binary","*",["name","i"],["num",3]],["num",1]]]]],["stat",["assign",true,["name","z"],["sub",["name","normalArray"],["binary","+",["binary","*",["name","i"],["num",3]],["num",2]]]]],["stat",["call",["dot",["name","normals"],"push"],[["binary","/",["name","x"],["num",127]],["binary","/",["name","y"],["num",127]],["binary","/",["name","z"],["num",127]]]]]]]]]],null],["return",["binary","*",["binary","*",["name","nElements"],["num",3]],["dot",["name","Int8Array"],"BYTES_PER_ELEMENT"]]]]],["block"],["defun","init_uvs",["start"],[["var",[["nElements",["dot",["name","md"],"nuvs"]]]],["if",["name","nElements"],["block",[["var",[["uvArray",["new",["name","Float32Array"],[["name","data"],["name","start"],["binary","*",["name","nElements"],["num",2]]]]]]],["var",[["i"],["u"],["v"]]],["for",["assign",true,["name","i"],["num",0]],["binary","<",["name","i"],["name","nElements"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","u"],["sub",["name","uvArray"],["binary","*",["name","i"],["num",2]]]]],["stat",["assign",true,["name","v"],["sub",["name","uvArray"],["binary","+",["binary","*",["name","i"],["num",2]],["num",1]]]]],["stat",["call",["dot",["name","uvs"],"push"],[["name","u"],["name","v"]]]]]]]]],null],["return",["binary","*",["binary","*",["name","nElements"],["num",2]],["dot",["name","Float32Array"],"BYTES_PER_ELEMENT"]]]]],["block"],["defun","init_uvs3",["nElements","offset"],[["var",[["i"],["uva"],["uvb"],["uvc"],["u1"],["u2"],["u3"],["v1"],["v2"],["v3"]]],["var",[["uvIndexBuffer",["new",["name","Uint32Array"],[["name","data"],["name","offset"],["binary","*",["num",3],["name","nElements"]]]]]]],["for",["assign",true,["name","i"],["num",0]],["binary","<",["name","i"],["name","nElements"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","uva"],["sub",["name","uvIndexBuffer"],["binary","*",["name","i"],["num",3]]]]],["stat",["assign",true,["name","uvb"],["sub",["name","uvIndexBuffer"],["binary","+",["binary","*",["name","i"],["num",3]],["num",1]]]]],["stat",["assign",true,["name","uvc"],["sub",["name","uvIndexBuffer"],["binary","+",["binary","*",["name","i"],["num",3]],["num",2]]]]],["stat",["assign",true,["name","u1"],["sub",["name","uvs"],["binary","*",["name","uva"],["num",2]]]]],["stat",["assign",true,["name","v1"],["sub",["name","uvs"],["binary","+",["binary","*",["name","uva"],["num",2]],["num",1]]]]],["stat",["assign",true,["name","u2"],["sub",["name","uvs"],["binary","*",["name","uvb"],["num",2]]]]],["stat",["assign",true,["name","v2"],["sub",["name","uvs"],["binary","+",["binary","*",["name","uvb"],["num",2]],["num",1]]]]],["stat",["assign",true,["name","u3"],["sub",["name","uvs"],["binary","*",["name","uvc"],["num",2]]]]],["stat",["assign",true,["name","v3"],["sub",["name","uvs"],["binary","+",["binary","*",["name","uvc"],["num",2]],["num",1]]]]],["stat",["call",["name","uv3"],[["sub",["dot",["name","scope"],"faceVertexUvs"],["num",0]],["name","u1"],["name","v1"],["name","u2"],["name","v2"],["name","u3"],["name","v3"]]]]]]]]],["block"],["defun","init_uvs4",["nElements","offset"],[["var",[["i"],["uva"],["uvb"],["uvc"],["uvd"],["u1"],["u2"],["u3"],["u4"],["v1"],["v2"],["v3"],["v4"]]],["var",[["uvIndexBuffer",["new",["name","Uint32Array"],[["name","data"],["name","offset"],["binary","*",["num",4],["name","nElements"]]]]]]],["for",["assign",true,["name","i"],["num",0]],["binary","<",["name","i"],["name","nElements"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","uva"],["sub",["name","uvIndexBuffer"],["binary","*",["name","i"],["num",4]]]]],["stat",["assign",true,["name","uvb"],["sub",["name","uvIndexBuffer"],["binary","+",["binary","*",["name","i"],["num",4]],["num",1]]]]],["stat",["assign",true,["name","uvc"],["sub",["name","uvIndexBuffer"],["binary","+",["binary","*",["name","i"],["num",4]],["num",2]]]]],["stat",["assign",true,["name","uvd"],["sub",["name","uvIndexBuffer"],["binary","+",["binary","*",["name","i"],["num",4]],["num",3]]]]],["stat",["assign",true,["name","u1"],["sub",["name","uvs"],["binary","*",["name","uva"],["num",2]]]]],["stat",["assign",true,["name","v1"],["sub",["name","uvs"],["binary","+",["binary","*",["name","uva"],["num",2]],["num",1]]]]],["stat",["assign",true,["name","u2"],["sub",["name","uvs"],["binary","*",["name","uvb"],["num",2]]]]],["stat",["assign",true,["name","v2"],["sub",["name","uvs"],["binary","+",["binary","*",["name","uvb"],["num",2]],["num",1]]]]],["stat",["assign",true,["name","u3"],["sub",["name","uvs"],["binary","*",["name","uvc"],["num",2]]]]],["stat",["assign",true,["name","v3"],["sub",["name","uvs"],["binary","+",["binary","*",["name","uvc"],["num",2]],["num",1]]]]],["stat",["assign",true,["name","u4"],["sub",["name","uvs"],["binary","*",["name","uvd"],["num",2]]]]],["stat",["assign",true,["name","v4"],["sub",["name","uvs"],["binary","+",["binary","*",["name","uvd"],["num",2]],["num",1]]]]],["stat",["call",["name","uv4"],[["sub",["dot",["name","scope"],"faceVertexUvs"],["num",0]],["name","u1"],["name","v1"],["name","u2"],["name","v2"],["name","u3"],["name","v3"],["name","u4"],["name","v4"]]]]]]]]],["block"],["defun","init_faces3_flat",["nElements","offsetVertices","offsetMaterials"],[["var",[["i"],["a"],["b"],["c"],["m"]]],["var",[["vertexIndexBuffer",["new",["name","Uint32Array"],[["name","data"],["name","offsetVertices"],["binary","*",["num",3],["name","nElements"]]]]]]],["var",[["materialIndexBuffer",["new",["name","Uint16Array"],[["name","data"],["name","offsetMaterials"],["name","nElements"]]]]]],["for",["assign",true,["name","i"],["num",0]],["binary","<",["name","i"],["name","nElements"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","a"],["sub",["name","vertexIndexBuffer"],["binary","*",["name","i"],["num",3]]]]],["stat",["assign",true,["name","b"],["sub",["name","vertexIndexBuffer"],["binary","+",["binary","*",["name","i"],["num",3]],["num",1]]]]],["stat",["assign",true,["name","c"],["sub",["name","vertexIndexBuffer"],["binary","+",["binary","*",["name","i"],["num",3]],["num",2]]]]],["stat",["assign",true,["name","m"],["sub",["name","materialIndexBuffer"],["name","i"]]]],["stat",["call",["name","f3"],[["name","scope"],["name","a"],["name","b"],["name","c"],["name","m"]]]]]]]]],["block"],["defun","init_faces4_flat",["nElements","offsetVertices","offsetMaterials"],[["var",[["i"],["a"],["b"],["c"],["d"],["m"]]],["var",[["vertexIndexBuffer",["new",["name","Uint32Array"],[["name","data"],["name","offsetVertices"],["binary","*",["num",4],["name","nElements"]]]]]]],["var",[["materialIndexBuffer",["new",["name","Uint16Array"],[["name","data"],["name","offsetMaterials"],["name","nElements"]]]]]],["for",["assign",true,["name","i"],["num",0]],["binary","<",["name","i"],["name","nElements"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","a"],["sub",["name","vertexIndexBuffer"],["binary","*",["name","i"],["num",4]]]]],["stat",["assign",true,["name","b"],["sub",["name","vertexIndexBuffer"],["binary","+",["binary","*",["name","i"],["num",4]],["num",1]]]]],["stat",["assign",true,["name","c"],["sub",["name","vertexIndexBuffer"],["binary","+",["binary","*",["name","i"],["num",4]],["num",2]]]]],["stat",["assign",true,["name","d"],["sub",["name","vertexIndexBuffer"],["binary","+",["binary","*",["name","i"],["num",4]],["num",3]]]]],["stat",["assign",true,["name","m"],["sub",["name","materialIndexBuffer"],["name","i"]]]],["stat",["call",["name","f4"],[["name","scope"],["name","a"],["name","b"],["name","c"],["name","d"],["name","m"]]]]]]]]],["block"],["defun","init_faces3_smooth",["nElements","offsetVertices","offsetNormals","offsetMaterials"],[["var",[["i"],["a"],["b"],["c"],["m"]]],["var",[["na"],["nb"],["nc"]]],["var",[["vertexIndexBuffer",["new",["name","Uint32Array"],[["name","data"],["name","offsetVertices"],["binary","*",["num",3],["name","nElements"]]]]]]],["var",[["normalIndexBuffer",["new",["name","Uint32Array"],[["name","data"],["name","offsetNormals"],["binary","*",["num",3],["name","nElements"]]]]]]],["var",[["materialIndexBuffer",["new",["name","Uint16Array"],[["name","data"],["name","offsetMaterials"],["name","nElements"]]]]]],["for",["assign",true,["name","i"],["num",0]],["binary","<",["name","i"],["name","nElements"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","a"],["sub",["name","vertexIndexBuffer"],["binary","*",["name","i"],["num",3]]]]],["stat",["assign",true,["name","b"],["sub",["name","vertexIndexBuffer"],["binary","+",["binary","*",["name","i"],["num",3]],["num",1]]]]],["stat",["assign",true,["name","c"],["sub",["name","vertexIndexBuffer"],["binary","+",["binary","*",["name","i"],["num",3]],["num",2]]]]],["stat",["assign",true,["name","na"],["sub",["name","normalIndexBuffer"],["binary","*",["name","i"],["num",3]]]]],["stat",["assign",true,["name","nb"],["sub",["name","normalIndexBuffer"],["binary","+",["binary","*",["name","i"],["num",3]],["num",1]]]]],["stat",["assign",true,["name","nc"],["sub",["name","normalIndexBuffer"],["binary","+",["binary","*",["name","i"],["num",3]],["num",2]]]]],["stat",["assign",true,["name","m"],["sub",["name","materialIndexBuffer"],["name","i"]]]],["stat",["call",["name","f3n"],[["name","scope"],["name","normals"],["name","a"],["name","b"],["name","c"],["name","m"],["name","na"],["name","nb"],["name","nc"]]]]]]]]],["block"],["defun","init_faces4_smooth",["nElements","offsetVertices","offsetNormals","offsetMaterials"],[["var",[["i"],["a"],["b"],["c"],["d"],["m"]]],["var",[["na"],["nb"],["nc"],["nd"]]],["var",[["vertexIndexBuffer",["new",["name","Uint32Array"],[["name","data"],["name","offsetVertices"],["binary","*",["num",4],["name","nElements"]]]]]]],["var",[["normalIndexBuffer",["new",["name","Uint32Array"],[["name","data"],["name","offsetNormals"],["binary","*",["num",4],["name","nElements"]]]]]]],["var",[["materialIndexBuffer",["new",["name","Uint16Array"],[["name","data"],["name","offsetMaterials"],["name","nElements"]]]]]],["for",["assign",true,["name","i"],["num",0]],["binary","<",["name","i"],["name","nElements"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","a"],["sub",["name","vertexIndexBuffer"],["binary","*",["name","i"],["num",4]]]]],["stat",["assign",true,["name","b"],["sub",["name","vertexIndexBuffer"],["binary","+",["binary","*",["name","i"],["num",4]],["num",1]]]]],["stat",["assign",true,["name","c"],["sub",["name","vertexIndexBuffer"],["binary","+",["binary","*",["name","i"],["num",4]],["num",2]]]]],["stat",["assign",true,["name","d"],["sub",["name","vertexIndexBuffer"],["binary","+",["binary","*",["name","i"],["num",4]],["num",3]]]]],["stat",["assign",true,["name","na"],["sub",["name","normalIndexBuffer"],["binary","*",["name","i"],["num",4]]]]],["stat",["assign",true,["name","nb"],["sub",["name","normalIndexBuffer"],["binary","+",["binary","*",["name","i"],["num",4]],["num",1]]]]],["stat",["assign",true,["name","nc"],["sub",["name","normalIndexBuffer"],["binary","+",["binary","*",["name","i"],["num",4]],["num",2]]]]],["stat",["assign",true,["name","nd"],["sub",["name","normalIndexBuffer"],["binary","+",["binary","*",["name","i"],["num",4]],["num",3]]]]],["stat",["assign",true,["name","m"],["sub",["name","materialIndexBuffer"],["name","i"]]]],["stat",["call",["name","f4n"],[["name","scope"],["name","normals"],["name","a"],["name","b"],["name","c"],["name","d"],["name","m"],["name","na"],["name","nb"],["name","nc"],["name","nd"]]]]]]]]],["block"],["defun","init_triangles_flat",["start"],[["var",[["nElements",["dot",["name","md"],"ntri_flat"]]]],["if",["name","nElements"],["block",[["var",[["offsetMaterials",["binary","+",["name","start"],["binary","*",["binary","*",["name","nElements"],["dot",["name","Uint32Array"],"BYTES_PER_ELEMENT"]],["num",3]]]]]],["stat",["call",["name","init_faces3_flat"],[["name","nElements"],["name","start"],["name","offsetMaterials"]]]]]],null]]],["block"],["defun","init_triangles_flat_uv",["start"],[["var",[["nElements",["dot",["name","md"],"ntri_flat_uv"]]]],["if",["name","nElements"],["block",[["var",[["offsetUvs",["binary","+",["name","start"],["binary","*",["binary","*",["name","nElements"],["dot",["name","Uint32Array"],"BYTES_PER_ELEMENT"]],["num",3]]]]]],["var",[["offsetMaterials",["binary","+",["name","offsetUvs"],["binary","*",["binary","*",["name","nElements"],["dot",["name","Uint32Array"],"BYTES_PER_ELEMENT"]],["num",3]]]]]],["stat",["call",["name","init_faces3_flat"],[["name","nElements"],["name","start"],["name","offsetMaterials"]]]],["stat",["call",["name","init_uvs3"],[["name","nElements"],["name","offsetUvs"]]]]]],null]]],["block"],["defun","init_triangles_smooth",["start"],[["var",[["nElements",["dot",["name","md"],"ntri_smooth"]]]],["if",["name","nElements"],["block",[["var",[["offsetNormals",["binary","+",["name","start"],["binary","*",["binary","*",["name","nElements"],["dot",["name","Uint32Array"],"BYTES_PER_ELEMENT"]],["num",3]]]]]],["var",[["offsetMaterials",["binary","+",["name","offsetNormals"],["binary","*",["binary","*",["name","nElements"],["dot",["name","Uint32Array"],"BYTES_PER_ELEMENT"]],["num",3]]]]]],["stat",["call",["name","init_faces3_smooth"],[["name","nElements"],["name","start"],["name","offsetNormals"],["name","offsetMaterials"]]]]]],null]]],["block"],["defun","init_triangles_smooth_uv",["start"],[["var",[["nElements",["dot",["name","md"],"ntri_smooth_uv"]]]],["if",["name","nElements"],["block",[["var",[["offsetNormals",["binary","+",["name","start"],["binary","*",["binary","*",["name","nElements"],["dot",["name","Uint32Array"],"BYTES_PER_ELEMENT"]],["num",3]]]]]],["var",[["offsetUvs",["binary","+",["name","offsetNormals"],["binary","*",["binary","*",["name","nElements"],["dot",["name","Uint32Array"],"BYTES_PER_ELEMENT"]],["num",3]]]]]],["var",[["offsetMaterials",["binary","+",["name","offsetUvs"],["binary","*",["binary","*",["name","nElements"],["dot",["name","Uint32Array"],"BYTES_PER_ELEMENT"]],["num",3]]]]]],["stat",["call",["name","init_faces3_smooth"],[["name","nElements"],["name","start"],["name","offsetNormals"],["name","offsetMaterials"]]]],["stat",["call",["name","init_uvs3"],[["name","nElements"],["name","offsetUvs"]]]]]],null]]],["block"],["defun","init_quads_flat",["start"],[["var",[["nElements",["dot",["name","md"],"nquad_flat"]]]],["if",["name","nElements"],["block",[["var",[["offsetMaterials",["binary","+",["name","start"],["binary","*",["binary","*",["name","nElements"],["dot",["name","Uint32Array"],"BYTES_PER_ELEMENT"]],["num",4]]]]]],["stat",["call",["name","init_faces4_flat"],[["name","nElements"],["name","start"],["name","offsetMaterials"]]]]]],null]]],["block"],["defun","init_quads_flat_uv",["start"],[["var",[["nElements",["dot",["name","md"],"nquad_flat_uv"]]]],["if",["name","nElements"],["block",[["var",[["offsetUvs",["binary","+",["name","start"],["binary","*",["binary","*",["name","nElements"],["dot",["name","Uint32Array"],"BYTES_PER_ELEMENT"]],["num",4]]]]]],["var",[["offsetMaterials",["binary","+",["name","offsetUvs"],["binary","*",["binary","*",["name","nElements"],["dot",["name","Uint32Array"],"BYTES_PER_ELEMENT"]],["num",4]]]]]],["stat",["call",["name","init_faces4_flat"],[["name","nElements"],["name","start"],["name","offsetMaterials"]]]],["stat",["call",["name","init_uvs4"],[["name","nElements"],["name","offsetUvs"]]]]]],null]]],["block"],["defun","init_quads_smooth",["start"],[["var",[["nElements",["dot",["name","md"],"nquad_smooth"]]]],["if",["name","nElements"],["block",[["var",[["offsetNormals",["binary","+",["name","start"],["binary","*",["binary","*",["name","nElements"],["dot",["name","Uint32Array"],"BYTES_PER_ELEMENT"]],["num",4]]]]]],["var",[["offsetMaterials",["binary","+",["name","offsetNormals"],["binary","*",["binary","*",["name","nElements"],["dot",["name","Uint32Array"],"BYTES_PER_ELEMENT"]],["num",4]]]]]],["stat",["call",["name","init_faces4_smooth"],[["name","nElements"],["name","start"],["name","offsetNormals"],["name","offsetMaterials"]]]]]],null]]],["block"],["defun","init_quads_smooth_uv",["start"],[["var",[["nElements",["dot",["name","md"],"nquad_smooth_uv"]]]],["if",["name","nElements"],["block",[["var",[["offsetNormals",["binary","+",["name","start"],["binary","*",["binary","*",["name","nElements"],["dot",["name","Uint32Array"],"BYTES_PER_ELEMENT"]],["num",4]]]]]],["var",[["offsetUvs",["binary","+",["name","offsetNormals"],["binary","*",["binary","*",["name","nElements"],["dot",["name","Uint32Array"],"BYTES_PER_ELEMENT"]],["num",4]]]]]],["var",[["offsetMaterials",["binary","+",["name","offsetUvs"],["binary","*",["binary","*",["name","nElements"],["dot",["name","Uint32Array"],"BYTES_PER_ELEMENT"]],["num",4]]]]]],["stat",["call",["name","init_faces4_smooth"],[["name","nElements"],["name","start"],["name","offsetNormals"],["name","offsetMaterials"]]]],["stat",["call",["name","init_uvs4"],[["name","nElements"],["name","offsetUvs"]]]]]],null]]],["block"]]]]]],["defun","vertex",["scope","x","y","z"],[["stat",["call",["dot",["dot",["name","scope"],"vertices"],"push"],[["new",["dot",["name","THREE"],"Vector3"],[["name","x"],["name","y"],["name","z"]]]]]]]],["block"],["defun","f3",["scope","a","b","c","mi"],[["stat",["call",["dot",["dot",["name","scope"],"faces"],"push"],[["new",["dot",["name","THREE"],"Face3"],[["name","a"],["name","b"],["name","c"],["name","null"],["name","null"],["name","mi"]]]]]]]],["block"],["defun","f4",["scope","a","b","c","d","mi"],[["stat",["call",["dot",["dot",["name","scope"],"faces"],"push"],[["new",["dot",["name","THREE"],"Face4"],[["name","a"],["name","b"],["name","c"],["name","d"],["name","null"],["name","null"],["name","mi"]]]]]]]],["block"],["defun","f3n",["scope","normals","a","b","c","mi","na","nb","nc"],[["var",[["nax",["sub",["name","normals"],["binary","*",["name","na"],["num",3]]]],["nay",["sub",["name","normals"],["binary","+",["binary","*",["name","na"],["num",3]],["num",1]]]],["naz",["sub",["name","normals"],["binary","+",["binary","*",["name","na"],["num",3]],["num",2]]]],["nbx",["sub",["name","normals"],["binary","*",["name","nb"],["num",3]]]],["nby",["sub",["name","normals"],["binary","+",["binary","*",["name","nb"],["num",3]],["num",1]]]],["nbz",["sub",["name","normals"],["binary","+",["binary","*",["name","nb"],["num",3]],["num",2]]]],["ncx",["sub",["name","normals"],["binary","*",["name","nc"],["num",3]]]],["ncy",["sub",["name","normals"],["binary","+",["binary","*",["name","nc"],["num",3]],["num",1]]]],["ncz",["sub",["name","normals"],["binary","+",["binary","*",["name","nc"],["num",3]],["num",2]]]]]],["stat",["call",["dot",["dot",["name","scope"],"faces"],"push"],[["new",["dot",["name","THREE"],"Face3"],[["name","a"],["name","b"],["name","c"],["array",[["new",["dot",["name","THREE"],"Vector3"],[["name","nax"],["name","nay"],["name","naz"]]],["new",["dot",["name","THREE"],"Vector3"],[["name","nbx"],["name","nby"],["name","nbz"]]],["new",["dot",["name","THREE"],"Vector3"],[["name","ncx"],["name","ncy"],["name","ncz"]]]]],["name","null"],["name","mi"]]]]]]]],["block"],["defun","f4n",["scope","normals","a","b","c","d","mi","na","nb","nc","nd"],[["var",[["nax",["sub",["name","normals"],["binary","*",["name","na"],["num",3]]]],["nay",["sub",["name","normals"],["binary","+",["binary","*",["name","na"],["num",3]],["num",1]]]],["naz",["sub",["name","normals"],["binary","+",["binary","*",["name","na"],["num",3]],["num",2]]]],["nbx",["sub",["name","normals"],["binary","*",["name","nb"],["num",3]]]],["nby",["sub",["name","normals"],["binary","+",["binary","*",["name","nb"],["num",3]],["num",1]]]],["nbz",["sub",["name","normals"],["binary","+",["binary","*",["name","nb"],["num",3]],["num",2]]]],["ncx",["sub",["name","normals"],["binary","*",["name","nc"],["num",3]]]],["ncy",["sub",["name","normals"],["binary","+",["binary","*",["name","nc"],["num",3]],["num",1]]]],["ncz",["sub",["name","normals"],["binary","+",["binary","*",["name","nc"],["num",3]],["num",2]]]],["ndx",["sub",["name","normals"],["binary","*",["name","nd"],["num",3]]]],["ndy",["sub",["name","normals"],["binary","+",["binary","*",["name","nd"],["num",3]],["num",1]]]],["ndz",["sub",["name","normals"],["binary","+",["binary","*",["name","nd"],["num",3]],["num",2]]]]]],["stat",["call",["dot",["dot",["name","scope"],"faces"],"push"],[["new",["dot",["name","THREE"],"Face4"],[["name","a"],["name","b"],["name","c"],["name","d"],["array",[["new",["dot",["name","THREE"],"Vector3"],[["name","nax"],["name","nay"],["name","naz"]]],["new",["dot",["name","THREE"],"Vector3"],[["name","nbx"],["name","nby"],["name","nbz"]]],["new",["dot",["name","THREE"],"Vector3"],[["name","ncx"],["name","ncy"],["name","ncz"]]],["new",["dot",["name","THREE"],"Vector3"],[["name","ndx"],["name","ndy"],["name","ndz"]]]]],["name","null"],["name","mi"]]]]]]]],["block"],["defun","uv3",["where","u1","v1","u2","v2","u3","v3"],[["var",[["uv",["array",[]]]]],["stat",["call",["dot",["name","uv"],"push"],[["new",["dot",["name","THREE"],"UV"],[["name","u1"],["name","v1"]]]]]],["stat",["call",["dot",["name","uv"],"push"],[["new",["dot",["name","THREE"],"UV"],[["name","u2"],["name","v2"]]]]]],["stat",["call",["dot",["name","uv"],"push"],[["new",["dot",["name","THREE"],"UV"],[["name","u3"],["name","v3"]]]]]],["stat",["call",["dot",["name","where"],"push"],[["name","uv"]]]]]],["block"],["defun","uv4",["where","u1","v1","u2","v2","u3","v3","u4","v4"],[["var",[["uv",["array",[]]]]],["stat",["call",["dot",["name","uv"],"push"],[["new",["dot",["name","THREE"],"UV"],[["name","u1"],["name","v1"]]]]]],["stat",["call",["dot",["name","uv"],"push"],[["new",["dot",["name","THREE"],"UV"],[["name","u2"],["name","v2"]]]]]],["stat",["call",["dot",["name","uv"],"push"],[["new",["dot",["name","THREE"],"UV"],[["name","u3"],["name","v3"]]]]]],["stat",["call",["dot",["name","uv"],"push"],[["new",["dot",["name","THREE"],"UV"],[["name","u4"],["name","v4"]]]]]],["stat",["call",["dot",["name","where"],"push"],[["name","uv"]]]]]],["block"],["stat",["assign",true,["dot",["name","Model"],"prototype"],["new",["dot",["name","THREE"],"Geometry"],[]]]],["stat",["assign",true,["dot",["dot",["name","Model"],"prototype"],"constructor"],["name","Model"]]],["stat",["call",["name","callback"],[["new",["name","Model"],[["name","texturePath"]]]]]]]]]],["stat",["assign",true,["dot",["name","THREE"],"JSONLoader"],["function",null,["showStatus"],[["stat",["call",["dot",["dot",["name","THREE"],"Loader"],"call"],[["name","this"],["name","showStatus"]]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"JSONLoader"],"prototype"],["new",["dot",["name","THREE"],"Loader"],[]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"JSONLoader"],"prototype"],"constructor"],["dot",["name","THREE"],"JSONLoader"]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"JSONLoader"],"prototype"],"load"],["function",null,["url","callback","texturePath"],[["var",[["worker"],["scope",["name","this"]]]],["stat",["assign",true,["name","texturePath"],["conditional",["name","texturePath"],["name","texturePath"],["call",["dot",["name","this"],"extractUrlBase"],[["name","url"]]]]]],["stat",["call",["dot",["name","this"],"onLoadStart"],[]]],["stat",["call",["dot",["name","this"],"loadAjaxJSON"],[["name","this"],["name","url"],["name","callback"],["name","texturePath"]]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"JSONLoader"],"prototype"],"loadAjaxJSON"],["function",null,["context","url","callback","texturePath","callbackProgress"],[["var",[["xhr",["new",["name","XMLHttpRequest"],[]]]]],["var",[["length",["num",0]]]],["stat",["assign",true,["dot",["name","xhr"],"onreadystatechange"],["function",null,[],[["if",["binary","===",["dot",["name","xhr"],"readyState"],["dot",["name","xhr"],"DONE"]],["block",[["if",["binary","||",["binary","===",["dot",["name","xhr"],"status"],["num",200]],["binary","===",["dot",["name","xhr"],"status"],["num",0]]],["block",[["if",["dot",["name","xhr"],"responseText"],["block",[["var",[["json",["call",["dot",["name","JSON"],"parse"],[["dot",["name","xhr"],"responseText"]]]]]],["stat",["call",["dot",["name","context"],"createModel"],[["name","json"],["name","callback"],["name","texturePath"]]]]]],["block",[["stat",["call",["dot",["name","console"],"warn"],[["binary","+",["binary","+",["string","THREE.JSONLoader: ["],["name","url"]],["string","] seems to be unreachable or file there is empty"]]]]]]]],["stat",["call",["dot",["name","context"],"onLoadComplete"],[]]]]],["block",[["stat",["call",["dot",["name","console"],"error"],[["binary","+",["binary","+",["binary","+",["binary","+",["string","THREE.JSONLoader: Couldn't load ["],["name","url"]],["string","] ["]],["dot",["name","xhr"],"status"]],["string","]"]]]]]]]]]],["if",["binary","===",["dot",["name","xhr"],"readyState"],["dot",["name","xhr"],"LOADING"]],["block",[["if",["name","callbackProgress"],["block",[["if",["binary","===",["name","length"],["num",0]],["block",[["stat",["assign",true,["name","length"],["call",["dot",["name","xhr"],"getResponseHeader"],[["string","Content-Length"]]]]]]],null],["stat",["call",["name","callbackProgress"],[["object",[["total",["name","length"]],["loaded",["dot",["dot",["name","xhr"],"responseText"],"length"]]]]]]]]],null]]],["if",["binary","===",["dot",["name","xhr"],"readyState"],["dot",["name","xhr"],"HEADERS_RECEIVED"]],["block",[["stat",["assign",true,["name","length"],["call",["dot",["name","xhr"],"getResponseHeader"],[["string","Content-Length"]]]]]]],null]]]]]]],["stat",["call",["dot",["name","xhr"],"open"],[["string","GET"],["name","url"],["name","true"]]]],["if",["dot",["name","xhr"],"overrideMimeType"],["stat",["call",["dot",["name","xhr"],"overrideMimeType"],[["string","text/plain; charset=x-user-defined"]]]],null],["stat",["call",["dot",["name","xhr"],"setRequestHeader"],[["string","Content-Type"],["string","text/plain"]]]],["stat",["call",["dot",["name","xhr"],"send"],[["name","null"]]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"JSONLoader"],"prototype"],"createModel"],["function",null,["json","callback","texturePath"],[["var",[["scope",["name","this"]],["geometry",["new",["dot",["name","THREE"],"Geometry"],[]]],["scale",["conditional",["binary","!==",["dot",["name","json"],"scale"],["name","undefined"]],["binary","/",["num",1],["dot",["name","json"],"scale"]],["num",1]]]]],["stat",["call",["dot",["name","this"],"initMaterials"],[["name","geometry"],["dot",["name","json"],"materials"],["name","texturePath"]]]],["stat",["call",["name","parseModel"],[["name","scale"]]]],["stat",["call",["name","parseSkin"],[]]],["stat",["call",["name","parseMorphing"],[["name","scale"]]]],["stat",["call",["dot",["name","geometry"],"computeCentroids"],[]]],["stat",["call",["dot",["name","geometry"],"computeFaceNormals"],[]]],["if",["call",["dot",["name","this"],"hasNormals"],[["name","geometry"]]],["stat",["call",["dot",["name","geometry"],"computeTangents"],[]]],null],["defun","parseModel",["scale"],[["defun","isBitSet",["value","position"],[["return",["binary","&",["name","value"],["binary","<<",["num",1],["name","position"]]]]]],["var",[["i"],["j"],["fi"],["offset"],["zLength"],["nVertices"],["colorIndex"],["normalIndex"],["uvIndex"],["materialIndex"],["type"],["isQuad"],["hasMaterial"],["hasFaceUv"],["hasFaceVertexUv"],["hasFaceNormal"],["hasFaceVertexNormal"],["hasFaceColor"],["hasFaceVertexColor"],["vertex"],["face"],["color"],["normal"],["uvLayer"],["uvs"],["u"],["v"],["faces",["dot",["name","json"],"faces"]],["vertices",["dot",["name","json"],"vertices"]],["normals",["dot",["name","json"],"normals"]],["colors",["dot",["name","json"],"colors"]],["nUvLayers",["num",0]]]],["for",["assign",true,["name","i"],["num",0]],["binary","<",["name","i"],["dot",["dot",["name","json"],"uvs"],"length"]],["unary-postfix","++",["name","i"]],["block",[["if",["dot",["sub",["dot",["name","json"],"uvs"],["name","i"]],"length"],["stat",["unary-postfix","++",["name","nUvLayers"]]],null]]]],["for",["assign",true,["name","i"],["num",0]],["binary","<",["name","i"],["name","nUvLayers"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["sub",["dot",["name","geometry"],"faceUvs"],["name","i"]],["array",[]]]],["stat",["assign",true,["sub",["dot",["name","geometry"],"faceVertexUvs"],["name","i"]],["array",[]]]]]]],["stat",["assign",true,["name","offset"],["num",0]]],["stat",["assign",true,["name","zLength"],["dot",["name","vertices"],"length"]]],["while",["binary","<",["name","offset"],["name","zLength"]],["block",[["stat",["assign",true,["name","vertex"],["new",["dot",["name","THREE"],"Vector3"],[]]]],["stat",["assign",true,["dot",["name","vertex"],"x"],["binary","*",["sub",["name","vertices"],["unary-postfix","++",["name","offset"]]],["name","scale"]]]],["stat",["assign",true,["dot",["name","vertex"],"y"],["binary","*",["sub",["name","vertices"],["unary-postfix","++",["name","offset"]]],["name","scale"]]]],["stat",["assign",true,["dot",["name","vertex"],"z"],["binary","*",["sub",["name","vertices"],["unary-postfix","++",["name","offset"]]],["name","scale"]]]],["stat",["call",["dot",["dot",["name","geometry"],"vertices"],"push"],[["name","vertex"]]]]]]],["stat",["assign",true,["name","offset"],["num",0]]],["stat",["assign",true,["name","zLength"],["dot",["name","faces"],"length"]]],["while",["binary","<",["name","offset"],["name","zLength"]],["block",[["stat",["assign",true,["name","type"],["sub",["name","faces"],["unary-postfix","++",["name","offset"]]]]],["stat",["assign",true,["name","isQuad"],["call",["name","isBitSet"],[["name","type"],["num",0]]]]],["stat",["assign",true,["name","hasMaterial"],["call",["name","isBitSet"],[["name","type"],["num",1]]]]],["stat",["assign",true,["name","hasFaceUv"],["call",["name","isBitSet"],[["name","type"],["num",2]]]]],["stat",["assign",true,["name","hasFaceVertexUv"],["call",["name","isBitSet"],[["name","type"],["num",3]]]]],["stat",["assign",true,["name","hasFaceNormal"],["call",["name","isBitSet"],[["name","type"],["num",4]]]]],["stat",["assign",true,["name","hasFaceVertexNormal"],["call",["name","isBitSet"],[["name","type"],["num",5]]]]],["stat",["assign",true,["name","hasFaceColor"],["call",["name","isBitSet"],[["name","type"],["num",6]]]]],["stat",["assign",true,["name","hasFaceVertexColor"],["call",["name","isBitSet"],[["name","type"],["num",7]]]]],["if",["name","isQuad"],["block",[["stat",["assign",true,["name","face"],["new",["dot",["name","THREE"],"Face4"],[]]]],["stat",["assign",true,["dot",["name","face"],"a"],["sub",["name","faces"],["unary-postfix","++",["name","offset"]]]]],["stat",["assign",true,["dot",["name","face"],"b"],["sub",["name","faces"],["unary-postfix","++",["name","offset"]]]]],["stat",["assign",true,["dot",["name","face"],"c"],["sub",["name","faces"],["unary-postfix","++",["name","offset"]]]]],["stat",["assign",true,["dot",["name","face"],"d"],["sub",["name","faces"],["unary-postfix","++",["name","offset"]]]]],["stat",["assign",true,["name","nVertices"],["num",4]]]]],["block",[["stat",["assign",true,["name","face"],["new",["dot",["name","THREE"],"Face3"],[]]]],["stat",["assign",true,["dot",["name","face"],"a"],["sub",["name","faces"],["unary-postfix","++",["name","offset"]]]]],["stat",["assign",true,["dot",["name","face"],"b"],["sub",["name","faces"],["unary-postfix","++",["name","offset"]]]]],["stat",["assign",true,["dot",["name","face"],"c"],["sub",["name","faces"],["unary-postfix","++",["name","offset"]]]]],["stat",["assign",true,["name","nVertices"],["num",3]]]]]],["if",["name","hasMaterial"],["block",[["stat",["assign",true,["name","materialIndex"],["sub",["name","faces"],["unary-postfix","++",["name","offset"]]]]],["stat",["assign",true,["dot",["name","face"],"materialIndex"],["name","materialIndex"]]]]],null],["stat",["assign",true,["name","fi"],["dot",["dot",["name","geometry"],"faces"],"length"]]],["if",["name","hasFaceUv"],["block",[["for",["assign",true,["name","i"],["num",0]],["binary","<",["name","i"],["name","nUvLayers"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","uvLayer"],["sub",["dot",["name","json"],"uvs"],["name","i"]]]],["stat",["assign",true,["name","uvIndex"],["sub",["name","faces"],["unary-postfix","++",["name","offset"]]]]],["stat",["assign",true,["name","u"],["sub",["name","uvLayer"],["binary","*",["name","uvIndex"],["num",2]]]]],["stat",["assign",true,["name","v"],["sub",["name","uvLayer"],["binary","+",["binary","*",["name","uvIndex"],["num",2]],["num",1]]]]],["stat",["assign",true,["sub",["sub",["dot",["name","geometry"],"faceUvs"],["name","i"]],["name","fi"]],["new",["dot",["name","THREE"],"UV"],[["name","u"],["name","v"]]]]]]]]]],null],["if",["name","hasFaceVertexUv"],["block",[["for",["assign",true,["name","i"],["num",0]],["binary","<",["name","i"],["name","nUvLayers"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","uvLayer"],["sub",["dot",["name","json"],"uvs"],["name","i"]]]],["stat",["assign",true,["name","uvs"],["array",[]]]],["for",["assign",true,["name","j"],["num",0]],["binary","<",["name","j"],["name","nVertices"]],["unary-postfix","++",["name","j"]],["block",[["stat",["assign",true,["name","uvIndex"],["sub",["name","faces"],["unary-postfix","++",["name","offset"]]]]],["stat",["assign",true,["name","u"],["sub",["name","uvLayer"],["binary","*",["name","uvIndex"],["num",2]]]]],["stat",["assign",true,["name","v"],["sub",["name","uvLayer"],["binary","+",["binary","*",["name","uvIndex"],["num",2]],["num",1]]]]],["stat",["assign",true,["sub",["name","uvs"],["name","j"]],["new",["dot",["name","THREE"],"UV"],[["name","u"],["name","v"]]]]]]]],["stat",["assign",true,["sub",["sub",["dot",["name","geometry"],"faceVertexUvs"],["name","i"]],["name","fi"]],["name","uvs"]]]]]]]],null],["if",["name","hasFaceNormal"],["block",[["stat",["assign",true,["name","normalIndex"],["binary","*",["sub",["name","faces"],["unary-postfix","++",["name","offset"]]],["num",3]]]],["stat",["assign",true,["name","normal"],["new",["dot",["name","THREE"],"Vector3"],[]]]],["stat",["assign",true,["dot",["name","normal"],"x"],["sub",["name","normals"],["unary-postfix","++",["name","normalIndex"]]]]],["stat",["assign",true,["dot",["name","normal"],"y"],["sub",["name","normals"],["unary-postfix","++",["name","normalIndex"]]]]],["stat",["assign",true,["dot",["name","normal"],"z"],["sub",["name","normals"],["name","normalIndex"]]]],["stat",["assign",true,["dot",["name","face"],"normal"],["name","normal"]]]]],null],["if",["name","hasFaceVertexNormal"],["block",[["for",["assign",true,["name","i"],["num",0]],["binary","<",["name","i"],["name","nVertices"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","normalIndex"],["binary","*",["sub",["name","faces"],["unary-postfix","++",["name","offset"]]],["num",3]]]],["stat",["assign",true,["name","normal"],["new",["dot",["name","THREE"],"Vector3"],[]]]],["stat",["assign",true,["dot",["name","normal"],"x"],["sub",["name","normals"],["unary-postfix","++",["name","normalIndex"]]]]],["stat",["assign",true,["dot",["name","normal"],"y"],["sub",["name","normals"],["unary-postfix","++",["name","normalIndex"]]]]],["stat",["assign",true,["dot",["name","normal"],"z"],["sub",["name","normals"],["name","normalIndex"]]]],["stat",["call",["dot",["dot",["name","face"],"vertexNormals"],"push"],[["name","normal"]]]]]]]]],null],["if",["name","hasFaceColor"],["block",[["stat",["assign",true,["name","colorIndex"],["sub",["name","faces"],["unary-postfix","++",["name","offset"]]]]],["stat",["assign",true,["name","color"],["new",["dot",["name","THREE"],"Color"],[["sub",["name","colors"],["name","colorIndex"]]]]]],["stat",["assign",true,["dot",["name","face"],"color"],["name","color"]]]]],null],["if",["name","hasFaceVertexColor"],["block",[["for",["assign",true,["name","i"],["num",0]],["binary","<",["name","i"],["name","nVertices"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","colorIndex"],["sub",["name","faces"],["unary-postfix","++",["name","offset"]]]]],["stat",["assign",true,["name","color"],["new",["dot",["name","THREE"],"Color"],[["sub",["name","colors"],["name","colorIndex"]]]]]],["stat",["call",["dot",["dot",["name","face"],"vertexColors"],"push"],[["name","color"]]]]]]]]],null],["stat",["call",["dot",["dot",["name","geometry"],"faces"],"push"],[["name","face"]]]]]]]]],["block"],["defun","parseSkin",[],[["var",[["i"],["l"],["x"],["y"],["z"],["w"],["a"],["b"],["c"],["d"]]],["if",["dot",["name","json"],"skinWeights"],["block",[["for",["seq",["assign",true,["name","i"],["num",0]],["assign",true,["name","l"],["dot",["dot",["name","json"],"skinWeights"],"length"]]],["binary","<",["name","i"],["name","l"]],["assign","+",["name","i"],["num",2]],["block",[["stat",["assign",true,["name","x"],["sub",["dot",["name","json"],"skinWeights"],["name","i"]]]],["stat",["assign",true,["name","y"],["sub",["dot",["name","json"],"skinWeights"],["binary","+",["name","i"],["num",1]]]]],["stat",["assign",true,["name","z"],["num",0]]],["stat",["assign",true,["name","w"],["num",0]]],["stat",["call",["dot",["dot",["name","geometry"],"skinWeights"],"push"],[["new",["dot",["name","THREE"],"Vector4"],[["name","x"],["name","y"],["name","z"],["name","w"]]]]]]]]]]],null],["if",["dot",["name","json"],"skinIndices"],["block",[["for",["seq",["assign",true,["name","i"],["num",0]],["assign",true,["name","l"],["dot",["dot",["name","json"],"skinIndices"],"length"]]],["binary","<",["name","i"],["name","l"]],["assign","+",["name","i"],["num",2]],["block",[["stat",["assign",true,["name","a"],["sub",["dot",["name","json"],"skinIndices"],["name","i"]]]],["stat",["assign",true,["name","b"],["sub",["dot",["name","json"],"skinIndices"],["binary","+",["name","i"],["num",1]]]]],["stat",["assign",true,["name","c"],["num",0]]],["stat",["assign",true,["name","d"],["num",0]]],["stat",["call",["dot",["dot",["name","geometry"],"skinIndices"],"push"],[["new",["dot",["name","THREE"],"Vector4"],[["name","a"],["name","b"],["name","c"],["name","d"]]]]]]]]]]],null],["stat",["assign",true,["dot",["name","geometry"],"bones"],["dot",["name","json"],"bones"]]],["stat",["assign",true,["dot",["name","geometry"],"animation"],["dot",["name","json"],"animation"]]]]],["block"],["defun","parseMorphing",["scale"],[["if",["binary","!==",["dot",["name","json"],"morphTargets"],["name","undefined"]],["block",[["var",[["i"],["l"],["v"],["vl"],["dstVertices"],["srcVertices"]]],["for",["seq",["assign",true,["name","i"],["num",0]],["assign",true,["name","l"],["dot",["dot",["name","json"],"morphTargets"],"length"]]],["binary","<",["name","i"],["name","l"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["sub",["dot",["name","geometry"],"morphTargets"],["name","i"]],["object",[]]]],["stat",["assign",true,["dot",["sub",["dot",["name","geometry"],"morphTargets"],["name","i"]],"name"],["dot",["sub",["dot",["name","json"],"morphTargets"],["name","i"]],"name"]]],["stat",["assign",true,["dot",["sub",["dot",["name","geometry"],"morphTargets"],["name","i"]],"vertices"],["array",[]]]],["stat",["assign",true,["name","dstVertices"],["dot",["sub",["dot",["name","geometry"],"morphTargets"],["name","i"]],"vertices"]]],["stat",["assign",true,["name","srcVertices"],["dot",["sub",["dot",["name","json"],"morphTargets"],["name","i"]],"vertices"]]],["for",["seq",["assign",true,["name","v"],["num",0]],["assign",true,["name","vl"],["dot",["name","srcVertices"],"length"]]],["binary","<",["name","v"],["name","vl"]],["assign","+",["name","v"],["num",3]],["block",[["var",[["vertex",["new",["dot",["name","THREE"],"Vector3"],[]]]]],["stat",["assign",true,["dot",["name","vertex"],"x"],["binary","*",["sub",["name","srcVertices"],["name","v"]],["name","scale"]]]],["stat",["assign",true,["dot",["name","vertex"],"y"],["binary","*",["sub",["name","srcVertices"],["binary","+",["name","v"],["num",1]]],["name","scale"]]]],["stat",["assign",true,["dot",["name","vertex"],"z"],["binary","*",["sub",["name","srcVertices"],["binary","+",["name","v"],["num",2]]],["name","scale"]]]],["stat",["call",["dot",["name","dstVertices"],"push"],[["name","vertex"]]]]]]]]]]]],null],["if",["binary","!==",["dot",["name","json"],"morphColors"],["name","undefined"]],["block",[["var",[["i"],["l"],["c"],["cl"],["dstColors"],["srcColors"],["color"]]],["for",["seq",["assign",true,["name","i"],["num",0]],["assign",true,["name","l"],["dot",["dot",["name","json"],"morphColors"],"length"]]],["binary","<",["name","i"],["name","l"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["sub",["dot",["name","geometry"],"morphColors"],["name","i"]],["object",[]]]],["stat",["assign",true,["dot",["sub",["dot",["name","geometry"],"morphColors"],["name","i"]],"name"],["dot",["sub",["dot",["name","json"],"morphColors"],["name","i"]],"name"]]],["stat",["assign",true,["dot",["sub",["dot",["name","geometry"],"morphColors"],["name","i"]],"colors"],["array",[]]]],["stat",["assign",true,["name","dstColors"],["dot",["sub",["dot",["name","geometry"],"morphColors"],["name","i"]],"colors"]]],["stat",["assign",true,["name","srcColors"],["dot",["sub",["dot",["name","json"],"morphColors"],["name","i"]],"colors"]]],["for",["seq",["assign",true,["name","c"],["num",0]],["assign",true,["name","cl"],["dot",["name","srcColors"],"length"]]],["binary","<",["name","c"],["name","cl"]],["assign","+",["name","c"],["num",3]],["block",[["stat",["assign",true,["name","color"],["new",["dot",["name","THREE"],"Color"],[["num",16755200]]]]],["stat",["call",["dot",["name","color"],"setRGB"],[["sub",["name","srcColors"],["name","c"]],["sub",["name","srcColors"],["binary","+",["name","c"],["num",1]]],["sub",["name","srcColors"],["binary","+",["name","c"],["num",2]]]]]],["stat",["call",["dot",["name","dstColors"],"push"],[["name","color"]]]]]]]]]]]],null]]],["block"],["stat",["call",["name","callback"],[["name","geometry"]]]]]]]],["stat",["assign",true,["dot",["name","THREE"],"SceneLoader"],["function",null,[],[["stat",["assign",true,["dot",["name","this"],"onLoadStart"],["function",null,[],[]]]],["stat",["assign",true,["dot",["name","this"],"onLoadProgress"],["function",null,[],[]]]],["stat",["assign",true,["dot",["name","this"],"onLoadComplete"],["function",null,[],[]]]],["stat",["assign",true,["dot",["name","this"],"callbackSync"],["function",null,[],[]]]],["stat",["assign",true,["dot",["name","this"],"callbackProgress"],["function",null,[],[]]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"SceneLoader"],"prototype"],"constructor"],["dot",["name","THREE"],"SceneLoader"]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"SceneLoader"],"prototype"],"load"],["function",null,["url","callbackFinished"],[["var",[["context",["name","this"]]]],["var",[["xhr",["new",["name","XMLHttpRequest"],[]]]]],["stat",["assign",true,["dot",["name","xhr"],"onreadystatechange"],["function",null,[],[["if",["binary","==",["dot",["name","xhr"],"readyState"],["num",4]],["block",[["if",["binary","||",["binary","==",["dot",["name","xhr"],"status"],["num",200]],["binary","==",["dot",["name","xhr"],"status"],["num",0]]],["block",[["var",[["json",["call",["dot",["name","JSON"],"parse"],[["dot",["name","xhr"],"responseText"]]]]]],["stat",["call",["dot",["name","context"],"createScene"],[["name","json"],["name","callbackFinished"],["name","url"]]]]]],["block",[["stat",["call",["dot",["name","console"],"error"],[["binary","+",["binary","+",["binary","+",["binary","+",["string","THREE.SceneLoader: Couldn't load ["],["name","url"]],["string","] ["]],["dot",["name","xhr"],"status"]],["string","]"]]]]]]]]]],null]]]]],["stat",["call",["dot",["name","xhr"],"open"],[["string","GET"],["name","url"],["name","true"]]]],["if",["dot",["name","xhr"],"overrideMimeType"],["stat",["call",["dot",["name","xhr"],"overrideMimeType"],[["string","text/plain; charset=x-user-defined"]]]],null],["stat",["call",["dot",["name","xhr"],"setRequestHeader"],[["string","Content-Type"],["string","text/plain"]]]],["stat",["call",["dot",["name","xhr"],"send"],[["name","null"]]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"SceneLoader"],"prototype"],"createScene"],["function",null,["json","callbackFinished","url"],[["var",[["scope",["name","this"]]]],["var",[["urlBase",["call",["dot",["dot",["dot",["name","THREE"],"Loader"],"prototype"],"extractUrlBase"],[["name","url"]]]]]],["var",[["dg"],["dm"],["dd"],["dl"],["dc"],["df"],["dt"],["g"],["o"],["m"],["l"],["d"],["p"],["r"],["q"],["s"],["c"],["t"],["f"],["tt"],["pp"],["u"],["geometry"],["material"],["camera"],["fog"],["texture"],["images"],["light"],["data"],["binLoader"],["jsonLoader"],["counter_models"],["counter_textures"],["total_models"],["total_textures"],["result"]]],["stat",["assign",true,["name","data"],["name","json"]]],["stat",["assign",true,["name","binLoader"],["new",["dot",["name","THREE"],"BinaryLoader"],[]]]],["stat",["assign",true,["name","jsonLoader"],["new",["dot",["name","THREE"],"JSONLoader"],[]]]],["stat",["assign",true,["name","counter_models"],["num",0]]],["stat",["assign",true,["name","counter_textures"],["num",0]]],["stat",["assign",true,["name","result"],["object",[["scene",["new",["dot",["name","THREE"],"Scene"],[]]],["geometries",["object",[]]],["materials",["object",[]]],["textures",["object",[]]],["objects",["object",[]]],["cameras",["object",[]]],["lights",["object",[]]],["fogs",["object",[]]],["empties",["object",[]]]]]]],["if",["dot",["name","data"],"transform"],["block",[["var",[["position",["dot",["dot",["name","data"],"transform"],"position"]],["rotation",["dot",["dot",["name","data"],"transform"],"rotation"]],["scale",["dot",["dot",["name","data"],"transform"],"scale"]]]],["if",["name","position"],["stat",["call",["dot",["dot",["dot",["name","result"],"scene"],"position"],"set"],[["sub",["name","position"],["num",0]],["sub",["name","position"],["num",1]],["sub",["name","position"],["num",2]]]]],null],["if",["name","rotation"],["stat",["call",["dot",["dot",["dot",["name","result"],"scene"],"rotation"],"set"],[["sub",["name","rotation"],["num",0]],["sub",["name","rotation"],["num",1]],["sub",["name","rotation"],["num",2]]]]],null],["if",["name","scale"],["stat",["call",["dot",["dot",["dot",["name","result"],"scene"],"scale"],"set"],[["sub",["name","scale"],["num",0]],["sub",["name","scale"],["num",1]],["sub",["name","scale"],["num",2]]]]],null],["if",["binary","||",["binary","||",["name","position"],["name","rotation"]],["name","scale"]],["block",[["stat",["call",["dot",["dot",["name","result"],"scene"],"updateMatrix"],[]]],["stat",["call",["dot",["dot",["name","result"],"scene"],"updateMatrixWorld"],[]]]]],null]]],null],["defun","get_url",["source_url","url_type"],[["if",["binary","==",["name","url_type"],["string","relativeToHTML"]],["block",[["return",["name","source_url"]]]],["block",[["return",["binary","+",["binary","+",["name","urlBase"],["string","/"]],["name","source_url"]]]]]]]],["block"],["defun","handle_objects",[],[["var",[["object"]]],["for-in",["name","dd"],["name","dd"],["dot",["name","data"],"objects"],["block",[["if",["unary-prefix","!",["sub",["dot",["name","result"],"objects"],["name","dd"]]],["block",[["stat",["assign",true,["name","o"],["sub",["dot",["name","data"],"objects"],["name","dd"]]]],["if",["binary","!==",["dot",["name","o"],"geometry"],["name","undefined"]],["block",[["stat",["assign",true,["name","geometry"],["sub",["dot",["name","result"],"geometries"],["dot",["name","o"],"geometry"]]]],["if",["name","geometry"],["block",[["var",[["hasNormals",["name","false"]]]],["stat",["assign",true,["name","material"],["sub",["dot",["name","result"],"materials"],["sub",["dot",["name","o"],"materials"],["num",0]]]]],["stat",["assign",true,["name","hasNormals"],["binary","instanceof",["name","material"],["dot",["name","THREE"],"ShaderMaterial"]]]],["if",["name","hasNormals"],["block",[["stat",["call",["dot",["name","geometry"],"computeTangents"],[]]]]],null],["stat",["assign",true,["name","p"],["dot",["name","o"],"position"]]],["stat",["assign",true,["name","r"],["dot",["name","o"],"rotation"]]],["stat",["assign",true,["name","q"],["dot",["name","o"],"quaternion"]]],["stat",["assign",true,["name","s"],["dot",["name","o"],"scale"]]],["stat",["assign",true,["name","m"],["dot",["name","o"],"matrix"]]],["stat",["assign",true,["name","q"],["num",0]]],["if",["binary","==",["dot",["dot",["name","o"],"materials"],"length"],["num",0]],["block",[["stat",["assign",true,["name","material"],["new",["dot",["name","THREE"],"MeshFaceMaterial"],[]]]]]],null],["if",["binary",">",["dot",["dot",["name","o"],"materials"],"length"],["num",1]],["block",[["stat",["assign",true,["name","material"],["new",["dot",["name","THREE"],"MeshFaceMaterial"],[]]]]]],null],["stat",["assign",true,["name","object"],["new",["dot",["name","THREE"],"Mesh"],[["name","geometry"],["name","material"]]]]],["stat",["assign",true,["dot",["name","object"],"name"],["name","dd"]]],["if",["name","m"],["block",[["stat",["assign",true,["dot",["name","object"],"matrixAutoUpdate"],["name","false"]]],["stat",["call",["dot",["dot",["name","object"],"matrix"],"set"],[["sub",["name","m"],["num",0]],["sub",["name","m"],["num",1]],["sub",["name","m"],["num",2]],["sub",["name","m"],["num",3]],["sub",["name","m"],["num",4]],["sub",["name","m"],["num",5]],["sub",["name","m"],["num",6]],["sub",["name","m"],["num",7]],["sub",["name","m"],["num",8]],["sub",["name","m"],["num",9]],["sub",["name","m"],["num",10]],["sub",["name","m"],["num",11]],["sub",["name","m"],["num",12]],["sub",["name","m"],["num",13]],["sub",["name","m"],["num",14]],["sub",["name","m"],["num",15]]]]]]],["block",[["stat",["call",["dot",["dot",["name","object"],"position"],"set"],[["sub",["name","p"],["num",0]],["sub",["name","p"],["num",1]],["sub",["name","p"],["num",2]]]]],["if",["name","q"],["block",[["stat",["call",["dot",["dot",["name","object"],"quaternion"],"set"],[["sub",["name","q"],["num",0]],["sub",["name","q"],["num",1]],["sub",["name","q"],["num",2]],["sub",["name","q"],["num",3]]]]],["stat",["assign",true,["dot",["name","object"],"useQuaternion"],["name","true"]]]]],["block",[["stat",["call",["dot",["dot",["name","object"],"rotation"],"set"],[["sub",["name","r"],["num",0]],["sub",["name","r"],["num",1]],["sub",["name","r"],["num",2]]]]]]]],["stat",["call",["dot",["dot",["name","object"],"scale"],"set"],[["sub",["name","s"],["num",0]],["sub",["name","s"],["num",1]],["sub",["name","s"],["num",2]]]]]]]],["stat",["assign",true,["dot",["name","object"],"visible"],["dot",["name","o"],"visible"]]],["stat",["assign",true,["dot",["name","object"],"doubleSided"],["dot",["name","o"],"doubleSided"]]],["stat",["assign",true,["dot",["name","object"],"castShadow"],["dot",["name","o"],"castShadow"]]],["stat",["assign",true,["dot",["name","object"],"receiveShadow"],["dot",["name","o"],"receiveShadow"]]],["stat",["call",["dot",["dot",["name","result"],"scene"],"add"],[["name","object"]]]],["stat",["assign",true,["sub",["dot",["name","result"],"objects"],["name","dd"]],["name","object"]]]]],null]]],["block",[["stat",["assign",true,["name","p"],["dot",["name","o"],"position"]]],["stat",["assign",true,["name","r"],["dot",["name","o"],"rotation"]]],["stat",["assign",true,["name","q"],["dot",["name","o"],"quaternion"]]],["stat",["assign",true,["name","s"],["dot",["name","o"],"scale"]]],["stat",["assign",true,["name","q"],["num",0]]],["stat",["assign",true,["name","object"],["new",["dot",["name","THREE"],"Object3D"],[]]]],["stat",["assign",true,["dot",["name","object"],"name"],["name","dd"]]],["stat",["call",["dot",["dot",["name","object"],"position"],"set"],[["sub",["name","p"],["num",0]],["sub",["name","p"],["num",1]],["sub",["name","p"],["num",2]]]]],["if",["name","q"],["block",[["stat",["call",["dot",["dot",["name","object"],"quaternion"],"set"],[["sub",["name","q"],["num",0]],["sub",["name","q"],["num",1]],["sub",["name","q"],["num",2]],["sub",["name","q"],["num",3]]]]],["stat",["assign",true,["dot",["name","object"],"useQuaternion"],["name","true"]]]]],["block",[["stat",["call",["dot",["dot",["name","object"],"rotation"],"set"],[["sub",["name","r"],["num",0]],["sub",["name","r"],["num",1]],["sub",["name","r"],["num",2]]]]]]]],["stat",["call",["dot",["dot",["name","object"],"scale"],"set"],[["sub",["name","s"],["num",0]],["sub",["name","s"],["num",1]],["sub",["name","s"],["num",2]]]]],["stat",["assign",true,["dot",["name","object"],"visible"],["conditional",["binary","!==",["dot",["name","o"],"visible"],["name","undefined"]],["dot",["name","o"],"visible"],["name","false"]]]],["stat",["call",["dot",["dot",["name","result"],"scene"],"add"],[["name","object"]]]],["stat",["assign",true,["sub",["dot",["name","result"],"objects"],["name","dd"]],["name","object"]]],["stat",["assign",true,["sub",["dot",["name","result"],"empties"],["name","dd"]],["name","object"]]]]]]]],null]]]]]],["block"],["defun","handle_mesh",["geo","id"],[["stat",["assign",true,["sub",["dot",["name","result"],"geometries"],["name","id"]],["name","geo"]]],["stat",["call",["name","handle_objects"],[]]]]],["block"],["defun","create_callback",["id"],[["return",["function",null,["geo"],[["stat",["call",["name","handle_mesh"],[["name","geo"],["name","id"]]]],["stat",["assign","-",["name","counter_models"],["num",1]]],["stat",["call",["dot",["name","scope"],"onLoadComplete"],[]]],["stat",["call",["name","async_callback_gate"],[]]]]]]]],["block"],["defun","create_callback_embed",["id"],[["return",["function",null,["geo"],[["stat",["assign",true,["sub",["dot",["name","result"],"geometries"],["name","id"]],["name","geo"]]]]]]]],["block"],["defun","async_callback_gate",[],[["var",[["progress",["object",[["totalModels",["name","total_models"]],["totalTextures",["name","total_textures"]],["loadedModels",["binary","-",["name","total_models"],["name","counter_models"]]],["loadedTextures",["binary","-",["name","total_textures"],["name","counter_textures"]]]]]]]],["stat",["call",["dot",["name","scope"],"callbackProgress"],[["name","progress"],["name","result"]]]],["stat",["call",["dot",["name","scope"],"onLoadProgress"],[]]],["if",["binary","&&",["binary","==",["name","counter_models"],["num",0]],["binary","==",["name","counter_textures"],["num",0]]],["block",[["stat",["call",["name","callbackFinished"],[["name","result"]]]]]],null]]],["block"],["var",[["callbackTexture",["function",null,["images"],[["stat",["assign","-",["name","counter_textures"],["num",1]]],["stat",["call",["name","async_callback_gate"],[]]],["stat",["call",["dot",["name","scope"],"onLoadComplete"],[]]]]]]]],["for-in",["name","dc"],["name","dc"],["dot",["name","data"],"cameras"],["block",[["stat",["assign",true,["name","c"],["sub",["dot",["name","data"],"cameras"],["name","dc"]]]],["if",["binary","==",["dot",["name","c"],"type"],["string","perspective"]],["block",[["stat",["assign",true,["name","camera"],["new",["dot",["name","THREE"],"PerspectiveCamera"],[["dot",["name","c"],"fov"],["dot",["name","c"],"aspect"],["dot",["name","c"],"near"],["dot",["name","c"],"far"]]]]]]],["if",["binary","==",["dot",["name","c"],"type"],["string","ortho"]],["block",[["stat",["assign",true,["name","camera"],["new",["dot",["name","THREE"],"OrthographicCamera"],[["dot",["name","c"],"left"],["dot",["name","c"],"right"],["dot",["name","c"],"top"],["dot",["name","c"],"bottom"],["dot",["name","c"],"near"],["dot",["name","c"],"far"]]]]]]],null]],["stat",["assign",true,["name","p"],["dot",["name","c"],"position"]]],["stat",["assign",true,["name","t"],["dot",["name","c"],"target"]]],["stat",["assign",true,["name","u"],["dot",["name","c"],"up"]]],["stat",["call",["dot",["dot",["name","camera"],"position"],"set"],[["sub",["name","p"],["num",0]],["sub",["name","p"],["num",1]],["sub",["name","p"],["num",2]]]]],["stat",["assign",true,["dot",["name","camera"],"target"],["new",["dot",["name","THREE"],"Vector3"],[["sub",["name","t"],["num",0]],["sub",["name","t"],["num",1]],["sub",["name","t"],["num",2]]]]]],["if",["name","u"],["stat",["call",["dot",["dot",["name","camera"],"up"],"set"],[["sub",["name","u"],["num",0]],["sub",["name","u"],["num",1]],["sub",["name","u"],["num",2]]]]],null],["stat",["assign",true,["sub",["dot",["name","result"],"cameras"],["name","dc"]],["name","camera"]]]]]],["var",[["hex"],["intensity"]]],["for-in",["name","dl"],["name","dl"],["dot",["name","data"],"lights"],["block",[["stat",["assign",true,["name","l"],["sub",["dot",["name","data"],"lights"],["name","dl"]]]],["stat",["assign",true,["name","hex"],["conditional",["binary","!==",["dot",["name","l"],"color"],["name","undefined"]],["dot",["name","l"],"color"],["num",16777215]]]],["stat",["assign",true,["name","intensity"],["conditional",["binary","!==",["dot",["name","l"],"intensity"],["name","undefined"]],["dot",["name","l"],"intensity"],["num",1]]]],["if",["binary","==",["dot",["name","l"],"type"],["string","directional"]],["block",[["stat",["assign",true,["name","p"],["dot",["name","l"],"direction"]]],["stat",["assign",true,["name","light"],["new",["dot",["name","THREE"],"DirectionalLight"],[["name","hex"],["name","intensity"]]]]],["stat",["call",["dot",["dot",["name","light"],"position"],"set"],[["sub",["name","p"],["num",0]],["sub",["name","p"],["num",1]],["sub",["name","p"],["num",2]]]]],["stat",["call",["dot",["dot",["name","light"],"position"],"normalize"],[]]]]],["if",["binary","==",["dot",["name","l"],"type"],["string","point"]],["block",[["stat",["assign",true,["name","p"],["dot",["name","l"],"position"]]],["stat",["assign",true,["name","d"],["dot",["name","l"],"distance"]]],["stat",["assign",true,["name","light"],["new",["dot",["name","THREE"],"PointLight"],[["name","hex"],["name","intensity"],["name","d"]]]]],["stat",["call",["dot",["dot",["name","light"],"position"],"set"],[["sub",["name","p"],["num",0]],["sub",["name","p"],["num",1]],["sub",["name","p"],["num",2]]]]]]],["if",["binary","==",["dot",["name","l"],"type"],["string","ambient"]],["block",[["stat",["assign",true,["name","light"],["new",["dot",["name","THREE"],"AmbientLight"],[["name","hex"]]]]]]],null]]],["stat",["call",["dot",["dot",["name","result"],"scene"],"add"],[["name","light"]]]],["stat",["assign",true,["sub",["dot",["name","result"],"lights"],["name","dl"]],["name","light"]]]]]],["for-in",["name","df"],["name","df"],["dot",["name","data"],"fogs"],["block",[["stat",["assign",true,["name","f"],["sub",["dot",["name","data"],"fogs"],["name","df"]]]],["if",["binary","==",["dot",["name","f"],"type"],["string","linear"]],["block",[["stat",["assign",true,["name","fog"],["new",["dot",["name","THREE"],"Fog"],[["num",0],["dot",["name","f"],"near"],["dot",["name","f"],"far"]]]]]]],["if",["binary","==",["dot",["name","f"],"type"],["string","exp2"]],["block",[["stat",["assign",true,["name","fog"],["new",["dot",["name","THREE"],"FogExp2"],[["num",0],["dot",["name","f"],"density"]]]]]]],null]],["stat",["assign",true,["name","c"],["dot",["name","f"],"color"]]],["stat",["call",["dot",["dot",["name","fog"],"color"],"setRGB"],[["sub",["name","c"],["num",0]],["sub",["name","c"],["num",1]],["sub",["name","c"],["num",2]]]]],["stat",["assign",true,["sub",["dot",["name","result"],"fogs"],["name","df"]],["name","fog"]]]]]],["if",["binary","&&",["dot",["name","result"],"cameras"],["dot",["dot",["name","data"],"defaults"],"camera"]],["block",[["stat",["assign",true,["dot",["name","result"],"currentCamera"],["sub",["dot",["name","result"],"cameras"],["dot",["dot",["name","data"],"defaults"],"camera"]]]]]],null],["if",["binary","&&",["dot",["name","result"],"fogs"],["dot",["dot",["name","data"],"defaults"],"fog"]],["block",[["stat",["assign",true,["dot",["dot",["name","result"],"scene"],"fog"],["sub",["dot",["name","result"],"fogs"],["dot",["dot",["name","data"],"defaults"],"fog"]]]]]],null],["stat",["assign",true,["name","c"],["dot",["dot",["name","data"],"defaults"],"bgcolor"]]],["stat",["assign",true,["dot",["name","result"],"bgColor"],["new",["dot",["name","THREE"],"Color"],[]]]],["stat",["call",["dot",["dot",["name","result"],"bgColor"],"setRGB"],[["sub",["name","c"],["num",0]],["sub",["name","c"],["num",1]],["sub",["name","c"],["num",2]]]]],["stat",["assign",true,["dot",["name","result"],"bgColorAlpha"],["dot",["dot",["name","data"],"defaults"],"bgalpha"]]],["for-in",["name","dg"],["name","dg"],["dot",["name","data"],"geometries"],["block",[["stat",["assign",true,["name","g"],["sub",["dot",["name","data"],"geometries"],["name","dg"]]]],["if",["binary","||",["binary","==",["dot",["name","g"],"type"],["string","bin_mesh"]],["binary","==",["dot",["name","g"],"type"],["string","ascii_mesh"]]],["block",[["stat",["assign","+",["name","counter_models"],["num",1]]],["stat",["call",["dot",["name","scope"],"onLoadStart"],[]]]]],null]]]],["stat",["assign",true,["name","total_models"],["name","counter_models"]]],["for-in",["name","dg"],["name","dg"],["dot",["name","data"],"geometries"],["block",[["stat",["assign",true,["name","g"],["sub",["dot",["name","data"],"geometries"],["name","dg"]]]],["if",["binary","==",["dot",["name","g"],"type"],["string","cube"]],["block",[["stat",["assign",true,["name","geometry"],["new",["dot",["name","THREE"],"CubeGeometry"],[["dot",["name","g"],"width"],["dot",["name","g"],"height"],["dot",["name","g"],"depth"],["dot",["name","g"],"segmentsWidth"],["dot",["name","g"],"segmentsHeight"],["dot",["name","g"],"segmentsDepth"],["name","null"],["dot",["name","g"],"flipped"],["dot",["name","g"],"sides"]]]]],["stat",["assign",true,["sub",["dot",["name","result"],"geometries"],["name","dg"]],["name","geometry"]]]]],["if",["binary","==",["dot",["name","g"],"type"],["string","plane"]],["block",[["stat",["assign",true,["name","geometry"],["new",["dot",["name","THREE"],"PlaneGeometry"],[["dot",["name","g"],"width"],["dot",["name","g"],"height"],["dot",["name","g"],"segmentsWidth"],["dot",["name","g"],"segmentsHeight"]]]]],["stat",["assign",true,["sub",["dot",["name","result"],"geometries"],["name","dg"]],["name","geometry"]]]]],["if",["binary","==",["dot",["name","g"],"type"],["string","sphere"]],["block",[["stat",["assign",true,["name","geometry"],["new",["dot",["name","THREE"],"SphereGeometry"],[["dot",["name","g"],"radius"],["dot",["name","g"],"segmentsWidth"],["dot",["name","g"],"segmentsHeight"]]]]],["stat",["assign",true,["sub",["dot",["name","result"],"geometries"],["name","dg"]],["name","geometry"]]]]],["if",["binary","==",["dot",["name","g"],"type"],["string","cylinder"]],["block",[["stat",["assign",true,["name","geometry"],["new",["dot",["name","THREE"],"CylinderGeometry"],[["dot",["name","g"],"topRad"],["dot",["name","g"],"botRad"],["dot",["name","g"],"height"],["dot",["name","g"],"radSegs"],["dot",["name","g"],"heightSegs"]]]]],["stat",["assign",true,["sub",["dot",["name","result"],"geometries"],["name","dg"]],["name","geometry"]]]]],["if",["binary","==",["dot",["name","g"],"type"],["string","torus"]],["block",[["stat",["assign",true,["name","geometry"],["new",["dot",["name","THREE"],"TorusGeometry"],[["dot",["name","g"],"radius"],["dot",["name","g"],"tube"],["dot",["name","g"],"segmentsR"],["dot",["name","g"],"segmentsT"]]]]],["stat",["assign",true,["sub",["dot",["name","result"],"geometries"],["name","dg"]],["name","geometry"]]]]],["if",["binary","==",["dot",["name","g"],"type"],["string","icosahedron"]],["block",[["stat",["assign",true,["name","geometry"],["new",["dot",["name","THREE"],"IcosahedronGeometry"],[["dot",["name","g"],"radius"],["dot",["name","g"],"subdivisions"]]]]],["stat",["assign",true,["sub",["dot",["name","result"],"geometries"],["name","dg"]],["name","geometry"]]]]],["if",["binary","==",["dot",["name","g"],"type"],["string","bin_mesh"]],["block",[["stat",["call",["dot",["name","binLoader"],"load"],[["call",["name","get_url"],[["dot",["name","g"],"url"],["dot",["name","data"],"urlBaseType"]]],["call",["name","create_callback"],[["name","dg"]]]]]]]],["if",["binary","==",["dot",["name","g"],"type"],["string","ascii_mesh"]],["block",[["stat",["call",["dot",["name","jsonLoader"],"load"],[["call",["name","get_url"],[["dot",["name","g"],"url"],["dot",["name","data"],"urlBaseType"]]],["call",["name","create_callback"],[["name","dg"]]]]]]]],["if",["binary","==",["dot",["name","g"],"type"],["string","embedded_mesh"]],["block",[["var",[["modelJson",["sub",["dot",["name","data"],"embeds"],["dot",["name","g"],"id"]]],["texture_path",["string",""]]]],["stat",["assign",true,["dot",["name","modelJson"],"metadata"],["dot",["name","data"],"metadata"]]],["if",["name","modelJson"],["block",[["stat",["call",["dot",["name","jsonLoader"],"createModel"],[["name","modelJson"],["call",["name","create_callback_embed"],[["name","dg"]]],["name","texture_path"]]]]]],null]]],null]]]]]]]]]]]],["for-in",["name","dt"],["name","dt"],["dot",["name","data"],"textures"],["block",[["stat",["assign",true,["name","tt"],["sub",["dot",["name","data"],"textures"],["name","dt"]]]],["if",["binary","instanceof",["dot",["name","tt"],"url"],["name","Array"]],["block",[["stat",["assign","+",["name","counter_textures"],["dot",["dot",["name","tt"],"url"],"length"]]],["for",["var",[["n",["num",0]]]],["binary","<",["name","n"],["dot",["dot",["name","tt"],"url"],"length"]],["unary-postfix","++",["name","n"]],["block",[["stat",["call",["dot",["name","scope"],"onLoadStart"],[]]]]]]]],["block",[["stat",["assign","+",["name","counter_textures"],["num",1]]],["stat",["call",["dot",["name","scope"],"onLoadStart"],[]]]]]]]]],["stat",["assign",true,["name","total_textures"],["name","counter_textures"]]],["for-in",["name","dt"],["name","dt"],["dot",["name","data"],"textures"],["block",[["stat",["assign",true,["name","tt"],["sub",["dot",["name","data"],"textures"],["name","dt"]]]],["if",["binary","&&",["binary","!=",["dot",["name","tt"],"mapping"],["name","undefined"]],["binary","!=",["sub",["name","THREE"],["dot",["name","tt"],"mapping"]],["name","undefined"]]],["block",[["stat",["assign",true,["dot",["name","tt"],"mapping"],["new",["sub",["name","THREE"],["dot",["name","tt"],"mapping"]],[]]]]]],null],["if",["binary","instanceof",["dot",["name","tt"],"url"],["name","Array"]],["block",[["var",[["url_array",["array",[]]]]],["for",["var",[["i",["num",0]]]],["binary","<",["name","i"],["dot",["dot",["name","tt"],"url"],"length"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["sub",["name","url_array"],["name","i"]],["call",["name","get_url"],[["sub",["dot",["name","tt"],"url"],["name","i"]],["dot",["name","data"],"urlBaseType"]]]]]]]],["stat",["assign",true,["name","texture"],["call",["dot",["dot",["name","THREE"],"ImageUtils"],"loadTextureCube"],[["name","url_array"],["dot",["name","tt"],"mapping"],["name","callbackTexture"]]]]]]],["block",[["stat",["assign",true,["name","texture"],["call",["dot",["dot",["name","THREE"],"ImageUtils"],"loadTexture"],[["call",["name","get_url"],[["dot",["name","tt"],"url"],["dot",["name","data"],"urlBaseType"]]],["dot",["name","tt"],"mapping"],["name","callbackTexture"]]]]],["if",["binary","!=",["sub",["name","THREE"],["dot",["name","tt"],"minFilter"]],["name","undefined"]],["stat",["assign",true,["dot",["name","texture"],"minFilter"],["sub",["name","THREE"],["dot",["name","tt"],"minFilter"]]]],null],["if",["binary","!=",["sub",["name","THREE"],["dot",["name","tt"],"magFilter"]],["name","undefined"]],["stat",["assign",true,["dot",["name","texture"],"magFilter"],["sub",["name","THREE"],["dot",["name","tt"],"magFilter"]]]],null],["if",["dot",["name","tt"],"repeat"],["block",[["stat",["call",["dot",["dot",["name","texture"],"repeat"],"set"],[["sub",["dot",["name","tt"],"repeat"],["num",0]],["sub",["dot",["name","tt"],"repeat"],["num",1]]]]],["if",["binary","!=",["sub",["dot",["name","tt"],"repeat"],["num",0]],["num",1]],["stat",["assign",true,["dot",["name","texture"],"wrapS"],["dot",["name","THREE"],"RepeatWrapping"]]],null],["if",["binary","!=",["sub",["dot",["name","tt"],"repeat"],["num",1]],["num",1]],["stat",["assign",true,["dot",["name","texture"],"wrapT"],["dot",["name","THREE"],"RepeatWrapping"]]],null]]],null],["if",["dot",["name","tt"],"offset"],["block",[["stat",["call",["dot",["dot",["name","texture"],"offset"],"set"],[["sub",["dot",["name","tt"],"offset"],["num",0]],["sub",["dot",["name","tt"],"offset"],["num",1]]]]]]],null],["if",["dot",["name","tt"],"wrap"],["block",[["var",[["wrapMap",["object",[["repeat",["dot",["name","THREE"],"RepeatWrapping"]],["mirror",["dot",["name","THREE"],"MirroredRepeatWrapping"]]]]]]],["if",["binary","!==",["sub",["name","wrapMap"],["sub",["dot",["name","tt"],"wrap"],["num",0]]],["name","undefined"]],["stat",["assign",true,["dot",["name","texture"],"wrapS"],["sub",["name","wrapMap"],["sub",["dot",["name","tt"],"wrap"],["num",0]]]]],null],["if",["binary","!==",["sub",["name","wrapMap"],["sub",["dot",["name","tt"],"wrap"],["num",1]]],["name","undefined"]],["stat",["assign",true,["dot",["name","texture"],"wrapT"],["sub",["name","wrapMap"],["sub",["dot",["name","tt"],"wrap"],["num",1]]]]],null]]],null]]]],["stat",["assign",true,["sub",["dot",["name","result"],"textures"],["name","dt"]],["name","texture"]]]]]],["for-in",["name","dm"],["name","dm"],["dot",["name","data"],"materials"],["block",[["stat",["assign",true,["name","m"],["sub",["dot",["name","data"],"materials"],["name","dm"]]]],["for-in",["name","pp"],["name","pp"],["dot",["name","m"],"parameters"],["block",[["if",["binary","||",["binary","||",["binary","==",["name","pp"],["string","envMap"]],["binary","==",["name","pp"],["string","map"]]],["binary","==",["name","pp"],["string","lightMap"]]],["block",[["stat",["assign",true,["sub",["dot",["name","m"],"parameters"],["name","pp"]],["sub",["dot",["name","result"],"textures"],["sub",["dot",["name","m"],"parameters"],["name","pp"]]]]]]],["if",["binary","==",["name","pp"],["string","shading"]],["block",[["stat",["assign",true,["sub",["dot",["name","m"],"parameters"],["name","pp"]],["conditional",["binary","==",["sub",["dot",["name","m"],"parameters"],["name","pp"]],["string","flat"]],["dot",["name","THREE"],"FlatShading"],["dot",["name","THREE"],"SmoothShading"]]]]]],["if",["binary","==",["name","pp"],["string","blending"]],["block",[["stat",["assign",true,["sub",["dot",["name","m"],"parameters"],["name","pp"]],["conditional",["sub",["name","THREE"],["sub",["dot",["name","m"],"parameters"],["name","pp"]]],["sub",["name","THREE"],["sub",["dot",["name","m"],"parameters"],["name","pp"]]],["dot",["name","THREE"],"NormalBlending"]]]]]],["if",["binary","==",["name","pp"],["string","combine"]],["block",[["stat",["assign",true,["sub",["dot",["name","m"],"parameters"],["name","pp"]],["conditional",["binary","==",["sub",["dot",["name","m"],"parameters"],["name","pp"]],["string","MixOperation"]],["dot",["name","THREE"],"MixOperation"],["dot",["name","THREE"],"MultiplyOperation"]]]]]],["if",["binary","==",["name","pp"],["string","vertexColors"]],["block",[["if",["binary","==",["sub",["dot",["name","m"],"parameters"],["name","pp"]],["string","face"]],["block",[["stat",["assign",true,["sub",["dot",["name","m"],"parameters"],["name","pp"]],["dot",["name","THREE"],"FaceColors"]]]]],["if",["sub",["dot",["name","m"],"parameters"],["name","pp"]],["block",[["stat",["assign",true,["sub",["dot",["name","m"],"parameters"],["name","pp"]],["dot",["name","THREE"],"VertexColors"]]]]],null]]]],null]]]]]]]],["if",["binary","&&",["binary","!==",["dot",["dot",["name","m"],"parameters"],"opacity"],["name","undefined"]],["binary","<",["dot",["dot",["name","m"],"parameters"],"opacity"],["num",1]]],["block",[["stat",["assign",true,["dot",["dot",["name","m"],"parameters"],"transparent"],["name","true"]]]]],null],["if",["dot",["dot",["name","m"],"parameters"],"normalMap"],["block",[["var",[["shader",["sub",["dot",["dot",["name","THREE"],"ShaderUtils"],"lib"],["string","normal"]]]]],["var",[["uniforms",["call",["dot",["dot",["name","THREE"],"UniformsUtils"],"clone"],[["dot",["name","shader"],"uniforms"]]]]]],["var",[["diffuse",["dot",["dot",["name","m"],"parameters"],"color"]]]],["var",[["specular",["dot",["dot",["name","m"],"parameters"],"specular"]]]],["var",[["ambient",["dot",["dot",["name","m"],"parameters"],"ambient"]]]],["var",[["shininess",["dot",["dot",["name","m"],"parameters"],"shininess"]]]],["stat",["assign",true,["dot",["sub",["name","uniforms"],["string","tNormal"]],"texture"],["sub",["dot",["name","result"],"textures"],["dot",["dot",["name","m"],"parameters"],"normalMap"]]]],["if",["dot",["dot",["name","m"],"parameters"],"normalMapFactor"],["block",[["stat",["assign",true,["dot",["sub",["name","uniforms"],["string","uNormalScale"]],"value"],["dot",["dot",["name","m"],"parameters"],"normalMapFactor"]]]]],null],["if",["dot",["dot",["name","m"],"parameters"],"map"],["block",[["stat",["assign",true,["dot",["sub",["name","uniforms"],["string","tDiffuse"]],"texture"],["dot",["dot",["name","m"],"parameters"],"map"]]],["stat",["assign",true,["dot",["sub",["name","uniforms"],["string","enableDiffuse"]],"value"],["name","true"]]]]],null],["if",["dot",["dot",["name","m"],"parameters"],"lightMap"],["block",[["stat",["assign",true,["dot",["sub",["name","uniforms"],["string","tAO"]],"texture"],["dot",["dot",["name","m"],"parameters"],"lightMap"]]],["stat",["assign",true,["dot",["sub",["name","uniforms"],["string","enableAO"]],"value"],["name","true"]]]]],null],["if",["dot",["dot",["name","m"],"parameters"],"specularMap"],["block",[["stat",["assign",true,["dot",["sub",["name","uniforms"],["string","tSpecular"]],"texture"],["sub",["dot",["name","result"],"textures"],["dot",["dot",["name","m"],"parameters"],"specularMap"]]]],["stat",["assign",true,["dot",["sub",["name","uniforms"],["string","enableSpecular"]],"value"],["name","true"]]]]],null],["stat",["call",["dot",["dot",["sub",["name","uniforms"],["string","uDiffuseColor"]],"value"],"setHex"],[["name","diffuse"]]]],["stat",["call",["dot",["dot",["sub",["name","uniforms"],["string","uSpecularColor"]],"value"],"setHex"],[["name","specular"]]]],["stat",["call",["dot",["dot",["sub",["name","uniforms"],["string","uAmbientColor"]],"value"],"setHex"],[["name","ambient"]]]],["stat",["assign",true,["dot",["sub",["name","uniforms"],["string","uShininess"]],"value"],["name","shininess"]]],["if",["dot",["dot",["name","m"],"parameters"],"opacity"],["block",[["stat",["assign",true,["dot",["sub",["name","uniforms"],["string","uOpacity"]],"value"],["dot",["dot",["name","m"],"parameters"],"opacity"]]]]],null],["var",[["parameters",["object",[["fragmentShader",["dot",["name","shader"],"fragmentShader"]],["vertexShader",["dot",["name","shader"],"vertexShader"]],["uniforms",["name","uniforms"]],["lights",["name","true"]],["fog",["name","true"]]]]]]],["stat",["assign",true,["name","material"],["new",["dot",["name","THREE"],"ShaderMaterial"],[["name","parameters"]]]]]]],["block",[["stat",["assign",true,["name","material"],["new",["sub",["name","THREE"],["dot",["name","m"],"type"]],[["dot",["name","m"],"parameters"]]]]]]]],["stat",["assign",true,["sub",["dot",["name","result"],"materials"],["name","dm"]],["name","material"]]]]]],["stat",["call",["name","handle_objects"],[]]],["stat",["call",["dot",["name","scope"],"callbackSync"],[["name","result"]]]],["stat",["call",["name","async_callback_gate"],[]]]]]]],["stat",["assign",true,["dot",["name","THREE"],"Material"],["function",null,["parameters"],[["stat",["assign",true,["name","parameters"],["binary","||",["name","parameters"],["object",[]]]]],["stat",["assign",true,["dot",["name","this"],"id"],["unary-postfix","++",["dot",["name","THREE"],"MaterialCount"]]]],["stat",["assign",true,["dot",["name","this"],"name"],["string",""]]],["stat",["assign",true,["dot",["name","this"],"opacity"],["conditional",["binary","!==",["dot",["name","parameters"],"opacity"],["name","undefined"]],["dot",["name","parameters"],"opacity"],["num",1]]]],["stat",["assign",true,["dot",["name","this"],"transparent"],["conditional",["binary","!==",["dot",["name","parameters"],"transparent"],["name","undefined"]],["dot",["name","parameters"],"transparent"],["name","false"]]]],["stat",["assign",true,["dot",["name","this"],"blending"],["conditional",["binary","!==",["dot",["name","parameters"],"blending"],["name","undefined"]],["dot",["name","parameters"],"blending"],["dot",["name","THREE"],"NormalBlending"]]]],["stat",["assign",true,["dot",["name","this"],"blendSrc"],["conditional",["binary","!==",["dot",["name","parameters"],"blendSrc"],["name","undefined"]],["dot",["name","parameters"],"blendSrc"],["dot",["name","THREE"],"SrcAlphaFactor"]]]],["stat",["assign",true,["dot",["name","this"],"blendDst"],["conditional",["binary","!==",["dot",["name","parameters"],"blendDst"],["name","undefined"]],["dot",["name","parameters"],"blendDst"],["dot",["name","THREE"],"OneMinusSrcAlphaFactor"]]]],["stat",["assign",true,["dot",["name","this"],"blendEquation"],["conditional",["binary","!==",["dot",["name","parameters"],"blendEquation"],["name","undefined"]],["dot",["name","parameters"],"blendEquation"],["dot",["name","THREE"],"AddEquation"]]]],["stat",["assign",true,["dot",["name","this"],"depthTest"],["conditional",["binary","!==",["dot",["name","parameters"],"depthTest"],["name","undefined"]],["dot",["name","parameters"],"depthTest"],["name","true"]]]],["stat",["assign",true,["dot",["name","this"],"depthWrite"],["conditional",["binary","!==",["dot",["name","parameters"],"depthWrite"],["name","undefined"]],["dot",["name","parameters"],"depthWrite"],["name","true"]]]],["stat",["assign",true,["dot",["name","this"],"polygonOffset"],["conditional",["binary","!==",["dot",["name","parameters"],"polygonOffset"],["name","undefined"]],["dot",["name","parameters"],"polygonOffset"],["name","false"]]]],["stat",["assign",true,["dot",["name","this"],"polygonOffsetFactor"],["conditional",["binary","!==",["dot",["name","parameters"],"polygonOffsetFactor"],["name","undefined"]],["dot",["name","parameters"],"polygonOffsetFactor"],["num",0]]]],["stat",["assign",true,["dot",["name","this"],"polygonOffsetUnits"],["conditional",["binary","!==",["dot",["name","parameters"],"polygonOffsetUnits"],["name","undefined"]],["dot",["name","parameters"],"polygonOffsetUnits"],["num",0]]]],["stat",["assign",true,["dot",["name","this"],"alphaTest"],["conditional",["binary","!==",["dot",["name","parameters"],"alphaTest"],["name","undefined"]],["dot",["name","parameters"],"alphaTest"],["num",0]]]],["stat",["assign",true,["dot",["name","this"],"overdraw"],["conditional",["binary","!==",["dot",["name","parameters"],"overdraw"],["name","undefined"]],["dot",["name","parameters"],"overdraw"],["name","false"]]]],["stat",["assign",true,["dot",["name","this"],"visible"],["name","true"]]],["stat",["assign",true,["dot",["name","this"],"needsUpdate"],["name","true"]]]]]]],["stat",["assign",true,["dot",["name","THREE"],"MaterialCount"],["num",0]]],["stat",["assign",true,["dot",["name","THREE"],"NoShading"],["num",0]]],["stat",["assign",true,["dot",["name","THREE"],"FlatShading"],["num",1]]],["stat",["assign",true,["dot",["name","THREE"],"SmoothShading"],["num",2]]],["stat",["assign",true,["dot",["name","THREE"],"NoColors"],["num",0]]],["stat",["assign",true,["dot",["name","THREE"],"FaceColors"],["num",1]]],["stat",["assign",true,["dot",["name","THREE"],"VertexColors"],["num",2]]],["stat",["assign",true,["dot",["name","THREE"],"NoBlending"],["num",0]]],["stat",["assign",true,["dot",["name","THREE"],"NormalBlending"],["num",1]]],["stat",["assign",true,["dot",["name","THREE"],"AdditiveBlending"],["num",2]]],["stat",["assign",true,["dot",["name","THREE"],"SubtractiveBlending"],["num",3]]],["stat",["assign",true,["dot",["name","THREE"],"MultiplyBlending"],["num",4]]],["stat",["assign",true,["dot",["name","THREE"],"AdditiveAlphaBlending"],["num",5]]],["stat",["assign",true,["dot",["name","THREE"],"CustomBlending"],["num",6]]],["stat",["assign",true,["dot",["name","THREE"],"AddEquation"],["num",100]]],["stat",["assign",true,["dot",["name","THREE"],"SubtractEquation"],["num",101]]],["stat",["assign",true,["dot",["name","THREE"],"ReverseSubtractEquation"],["num",102]]],["stat",["assign",true,["dot",["name","THREE"],"ZeroFactor"],["num",200]]],["stat",["assign",true,["dot",["name","THREE"],"OneFactor"],["num",201]]],["stat",["assign",true,["dot",["name","THREE"],"SrcColorFactor"],["num",202]]],["stat",["assign",true,["dot",["name","THREE"],"OneMinusSrcColorFactor"],["num",203]]],["stat",["assign",true,["dot",["name","THREE"],"SrcAlphaFactor"],["num",204]]],["stat",["assign",true,["dot",["name","THREE"],"OneMinusSrcAlphaFactor"],["num",205]]],["stat",["assign",true,["dot",["name","THREE"],"DstAlphaFactor"],["num",206]]],["stat",["assign",true,["dot",["name","THREE"],"OneMinusDstAlphaFactor"],["num",207]]],["stat",["assign",true,["dot",["name","THREE"],"DstColorFactor"],["num",208]]],["stat",["assign",true,["dot",["name","THREE"],"OneMinusDstColorFactor"],["num",209]]],["stat",["assign",true,["dot",["name","THREE"],"SrcAlphaSaturateFactor"],["num",210]]],["stat",["assign",true,["dot",["name","THREE"],"LineBasicMaterial"],["function",null,["parameters"],[["stat",["call",["dot",["dot",["name","THREE"],"Material"],"call"],[["name","this"],["name","parameters"]]]],["stat",["assign",true,["name","parameters"],["binary","||",["name","parameters"],["object",[]]]]],["stat",["assign",true,["dot",["name","this"],"color"],["conditional",["binary","!==",["dot",["name","parameters"],"color"],["name","undefined"]],["new",["dot",["name","THREE"],"Color"],[["dot",["name","parameters"],"color"]]],["new",["dot",["name","THREE"],"Color"],[["num",16777215]]]]]],["stat",["assign",true,["dot",["name","this"],"linewidth"],["conditional",["binary","!==",["dot",["name","parameters"],"linewidth"],["name","undefined"]],["dot",["name","parameters"],"linewidth"],["num",1]]]],["stat",["assign",true,["dot",["name","this"],"linecap"],["conditional",["binary","!==",["dot",["name","parameters"],"linecap"],["name","undefined"]],["dot",["name","parameters"],"linecap"],["string","round"]]]],["stat",["assign",true,["dot",["name","this"],"linejoin"],["conditional",["binary","!==",["dot",["name","parameters"],"linejoin"],["name","undefined"]],["dot",["name","parameters"],"linejoin"],["string","round"]]]],["stat",["assign",true,["dot",["name","this"],"vertexColors"],["conditional",["dot",["name","parameters"],"vertexColors"],["dot",["name","parameters"],"vertexColors"],["name","false"]]]],["stat",["assign",true,["dot",["name","this"],"fog"],["conditional",["binary","!==",["dot",["name","parameters"],"fog"],["name","undefined"]],["dot",["name","parameters"],"fog"],["name","true"]]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"LineBasicMaterial"],"prototype"],["new",["dot",["name","THREE"],"Material"],[]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"LineBasicMaterial"],"prototype"],"constructor"],["dot",["name","THREE"],"LineBasicMaterial"]]],["stat",["assign",true,["dot",["name","THREE"],"MeshBasicMaterial"],["function",null,["parameters"],[["stat",["call",["dot",["dot",["name","THREE"],"Material"],"call"],[["name","this"],["name","parameters"]]]],["stat",["assign",true,["name","parameters"],["binary","||",["name","parameters"],["object",[]]]]],["stat",["assign",true,["dot",["name","this"],"color"],["conditional",["binary","!==",["dot",["name","parameters"],"color"],["name","undefined"]],["new",["dot",["name","THREE"],"Color"],[["dot",["name","parameters"],"color"]]],["new",["dot",["name","THREE"],"Color"],[["num",16777215]]]]]],["stat",["assign",true,["dot",["name","this"],"map"],["conditional",["binary","!==",["dot",["name","parameters"],"map"],["name","undefined"]],["dot",["name","parameters"],"map"],["name","null"]]]],["stat",["assign",true,["dot",["name","this"],"lightMap"],["conditional",["binary","!==",["dot",["name","parameters"],"lightMap"],["name","undefined"]],["dot",["name","parameters"],"lightMap"],["name","null"]]]],["stat",["assign",true,["dot",["name","this"],"envMap"],["conditional",["binary","!==",["dot",["name","parameters"],"envMap"],["name","undefined"]],["dot",["name","parameters"],"envMap"],["name","null"]]]],["stat",["assign",true,["dot",["name","this"],"combine"],["conditional",["binary","!==",["dot",["name","parameters"],"combine"],["name","undefined"]],["dot",["name","parameters"],"combine"],["dot",["name","THREE"],"MultiplyOperation"]]]],["stat",["assign",true,["dot",["name","this"],"reflectivity"],["conditional",["binary","!==",["dot",["name","parameters"],"reflectivity"],["name","undefined"]],["dot",["name","parameters"],"reflectivity"],["num",1]]]],["stat",["assign",true,["dot",["name","this"],"refractionRatio"],["conditional",["binary","!==",["dot",["name","parameters"],"refractionRatio"],["name","undefined"]],["dot",["name","parameters"],"refractionRatio"],["num",0.98]]]],["stat",["assign",true,["dot",["name","this"],"fog"],["conditional",["binary","!==",["dot",["name","parameters"],"fog"],["name","undefined"]],["dot",["name","parameters"],"fog"],["name","true"]]]],["stat",["assign",true,["dot",["name","this"],"shading"],["conditional",["binary","!==",["dot",["name","parameters"],"shading"],["name","undefined"]],["dot",["name","parameters"],"shading"],["dot",["name","THREE"],"SmoothShading"]]]],["stat",["assign",true,["dot",["name","this"],"wireframe"],["conditional",["binary","!==",["dot",["name","parameters"],"wireframe"],["name","undefined"]],["dot",["name","parameters"],"wireframe"],["name","false"]]]],["stat",["assign",true,["dot",["name","this"],"wireframeLinewidth"],["conditional",["binary","!==",["dot",["name","parameters"],"wireframeLinewidth"],["name","undefined"]],["dot",["name","parameters"],"wireframeLinewidth"],["num",1]]]],["stat",["assign",true,["dot",["name","this"],"wireframeLinecap"],["conditional",["binary","!==",["dot",["name","parameters"],"wireframeLinecap"],["name","undefined"]],["dot",["name","parameters"],"wireframeLinecap"],["string","round"]]]],["stat",["assign",true,["dot",["name","this"],"wireframeLinejoin"],["conditional",["binary","!==",["dot",["name","parameters"],"wireframeLinejoin"],["name","undefined"]],["dot",["name","parameters"],"wireframeLinejoin"],["string","round"]]]],["stat",["assign",true,["dot",["name","this"],"vertexColors"],["conditional",["binary","!==",["dot",["name","parameters"],"vertexColors"],["name","undefined"]],["dot",["name","parameters"],"vertexColors"],["dot",["name","THREE"],"NoColors"]]]],["stat",["assign",true,["dot",["name","this"],"skinning"],["conditional",["binary","!==",["dot",["name","parameters"],"skinning"],["name","undefined"]],["dot",["name","parameters"],"skinning"],["name","false"]]]],["stat",["assign",true,["dot",["name","this"],"morphTargets"],["conditional",["binary","!==",["dot",["name","parameters"],"morphTargets"],["name","undefined"]],["dot",["name","parameters"],"morphTargets"],["name","false"]]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"MeshBasicMaterial"],"prototype"],["new",["dot",["name","THREE"],"Material"],[]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"MeshBasicMaterial"],"prototype"],"constructor"],["dot",["name","THREE"],"MeshBasicMaterial"]]],["stat",["assign",true,["dot",["name","THREE"],"MeshLambertMaterial"],["function",null,["parameters"],[["stat",["call",["dot",["dot",["name","THREE"],"Material"],"call"],[["name","this"],["name","parameters"]]]],["stat",["assign",true,["name","parameters"],["binary","||",["name","parameters"],["object",[]]]]],["stat",["assign",true,["dot",["name","this"],"color"],["conditional",["binary","!==",["dot",["name","parameters"],"color"],["name","undefined"]],["new",["dot",["name","THREE"],"Color"],[["dot",["name","parameters"],"color"]]],["new",["dot",["name","THREE"],"Color"],[["num",16777215]]]]]],["stat",["assign",true,["dot",["name","this"],"ambient"],["conditional",["binary","!==",["dot",["name","parameters"],"ambient"],["name","undefined"]],["new",["dot",["name","THREE"],"Color"],[["dot",["name","parameters"],"ambient"]]],["new",["dot",["name","THREE"],"Color"],[["num",16777215]]]]]],["stat",["assign",true,["dot",["name","this"],"emissive"],["conditional",["binary","!==",["dot",["name","parameters"],"emissive"],["name","undefined"]],["new",["dot",["name","THREE"],"Color"],[["dot",["name","parameters"],"emissive"]]],["new",["dot",["name","THREE"],"Color"],[["num",0]]]]]],["stat",["assign",true,["dot",["name","this"],"wrapAround"],["conditional",["binary","!==",["dot",["name","parameters"],"wrapAround"],["name","undefined"]],["dot",["name","parameters"],"wrapAround"],["name","false"]]]],["stat",["assign",true,["dot",["name","this"],"wrapRGB"],["new",["dot",["name","THREE"],"Vector3"],[["num",1],["num",1],["num",1]]]]],["stat",["assign",true,["dot",["name","this"],"map"],["conditional",["binary","!==",["dot",["name","parameters"],"map"],["name","undefined"]],["dot",["name","parameters"],"map"],["name","null"]]]],["stat",["assign",true,["dot",["name","this"],"lightMap"],["conditional",["binary","!==",["dot",["name","parameters"],"lightMap"],["name","undefined"]],["dot",["name","parameters"],"lightMap"],["name","null"]]]],["stat",["assign",true,["dot",["name","this"],"envMap"],["conditional",["binary","!==",["dot",["name","parameters"],"envMap"],["name","undefined"]],["dot",["name","parameters"],"envMap"],["name","null"]]]],["stat",["assign",true,["dot",["name","this"],"combine"],["conditional",["binary","!==",["dot",["name","parameters"],"combine"],["name","undefined"]],["dot",["name","parameters"],"combine"],["dot",["name","THREE"],"MultiplyOperation"]]]],["stat",["assign",true,["dot",["name","this"],"reflectivity"],["conditional",["binary","!==",["dot",["name","parameters"],"reflectivity"],["name","undefined"]],["dot",["name","parameters"],"reflectivity"],["num",1]]]],["stat",["assign",true,["dot",["name","this"],"refractionRatio"],["conditional",["binary","!==",["dot",["name","parameters"],"refractionRatio"],["name","undefined"]],["dot",["name","parameters"],"refractionRatio"],["num",0.98]]]],["stat",["assign",true,["dot",["name","this"],"fog"],["conditional",["binary","!==",["dot",["name","parameters"],"fog"],["name","undefined"]],["dot",["name","parameters"],"fog"],["name","true"]]]],["stat",["assign",true,["dot",["name","this"],"shading"],["conditional",["binary","!==",["dot",["name","parameters"],"shading"],["name","undefined"]],["dot",["name","parameters"],"shading"],["dot",["name","THREE"],"SmoothShading"]]]],["stat",["assign",true,["dot",["name","this"],"wireframe"],["conditional",["binary","!==",["dot",["name","parameters"],"wireframe"],["name","undefined"]],["dot",["name","parameters"],"wireframe"],["name","false"]]]],["stat",["assign",true,["dot",["name","this"],"wireframeLinewidth"],["conditional",["binary","!==",["dot",["name","parameters"],"wireframeLinewidth"],["name","undefined"]],["dot",["name","parameters"],"wireframeLinewidth"],["num",1]]]],["stat",["assign",true,["dot",["name","this"],"wireframeLinecap"],["conditional",["binary","!==",["dot",["name","parameters"],"wireframeLinecap"],["name","undefined"]],["dot",["name","parameters"],"wireframeLinecap"],["string","round"]]]],["stat",["assign",true,["dot",["name","this"],"wireframeLinejoin"],["conditional",["binary","!==",["dot",["name","parameters"],"wireframeLinejoin"],["name","undefined"]],["dot",["name","parameters"],"wireframeLinejoin"],["string","round"]]]],["stat",["assign",true,["dot",["name","this"],"vertexColors"],["conditional",["binary","!==",["dot",["name","parameters"],"vertexColors"],["name","undefined"]],["dot",["name","parameters"],"vertexColors"],["dot",["name","THREE"],"NoColors"]]]],["stat",["assign",true,["dot",["name","this"],"skinning"],["conditional",["binary","!==",["dot",["name","parameters"],"skinning"],["name","undefined"]],["dot",["name","parameters"],"skinning"],["name","false"]]]],["stat",["assign",true,["dot",["name","this"],"morphTargets"],["conditional",["binary","!==",["dot",["name","parameters"],"morphTargets"],["name","undefined"]],["dot",["name","parameters"],"morphTargets"],["name","false"]]]],["stat",["assign",true,["dot",["name","this"],"morphNormals"],["conditional",["binary","!==",["dot",["name","parameters"],"morphNormals"],["name","undefined"]],["dot",["name","parameters"],"morphNormals"],["name","false"]]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"MeshLambertMaterial"],"prototype"],["new",["dot",["name","THREE"],"Material"],[]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"MeshLambertMaterial"],"prototype"],"constructor"],["dot",["name","THREE"],"MeshLambertMaterial"]]],["stat",["assign",true,["dot",["name","THREE"],"MeshPhongMaterial"],["function",null,["parameters"],[["stat",["call",["dot",["dot",["name","THREE"],"Material"],"call"],[["name","this"],["name","parameters"]]]],["stat",["assign",true,["name","parameters"],["binary","||",["name","parameters"],["object",[]]]]],["stat",["assign",true,["dot",["name","this"],"color"],["conditional",["binary","!==",["dot",["name","parameters"],"color"],["name","undefined"]],["new",["dot",["name","THREE"],"Color"],[["dot",["name","parameters"],"color"]]],["new",["dot",["name","THREE"],"Color"],[["num",16777215]]]]]],["stat",["assign",true,["dot",["name","this"],"ambient"],["conditional",["binary","!==",["dot",["name","parameters"],"ambient"],["name","undefined"]],["new",["dot",["name","THREE"],"Color"],[["dot",["name","parameters"],"ambient"]]],["new",["dot",["name","THREE"],"Color"],[["num",16777215]]]]]],["stat",["assign",true,["dot",["name","this"],"emissive"],["conditional",["binary","!==",["dot",["name","parameters"],"emissive"],["name","undefined"]],["new",["dot",["name","THREE"],"Color"],[["dot",["name","parameters"],"emissive"]]],["new",["dot",["name","THREE"],"Color"],[["num",0]]]]]],["stat",["assign",true,["dot",["name","this"],"specular"],["conditional",["binary","!==",["dot",["name","parameters"],"specular"],["name","undefined"]],["new",["dot",["name","THREE"],"Color"],[["dot",["name","parameters"],"specular"]]],["new",["dot",["name","THREE"],"Color"],[["num",1118481]]]]]],["stat",["assign",true,["dot",["name","this"],"shininess"],["conditional",["binary","!==",["dot",["name","parameters"],"shininess"],["name","undefined"]],["dot",["name","parameters"],"shininess"],["num",30]]]],["stat",["assign",true,["dot",["name","this"],"metal"],["conditional",["binary","!==",["dot",["name","parameters"],"metal"],["name","undefined"]],["dot",["name","parameters"],"metal"],["name","false"]]]],["stat",["assign",true,["dot",["name","this"],"perPixel"],["conditional",["binary","!==",["dot",["name","parameters"],"perPixel"],["name","undefined"]],["dot",["name","parameters"],"perPixel"],["name","false"]]]],["stat",["assign",true,["dot",["name","this"],"wrapAround"],["conditional",["binary","!==",["dot",["name","parameters"],"wrapAround"],["name","undefined"]],["dot",["name","parameters"],"wrapAround"],["name","false"]]]],["stat",["assign",true,["dot",["name","this"],"wrapRGB"],["new",["dot",["name","THREE"],"Vector3"],[["num",1],["num",1],["num",1]]]]],["stat",["assign",true,["dot",["name","this"],"map"],["conditional",["binary","!==",["dot",["name","parameters"],"map"],["name","undefined"]],["dot",["name","parameters"],"map"],["name","null"]]]],["stat",["assign",true,["dot",["name","this"],"lightMap"],["conditional",["binary","!==",["dot",["name","parameters"],"lightMap"],["name","undefined"]],["dot",["name","parameters"],"lightMap"],["name","null"]]]],["stat",["assign",true,["dot",["name","this"],"envMap"],["conditional",["binary","!==",["dot",["name","parameters"],"envMap"],["name","undefined"]],["dot",["name","parameters"],"envMap"],["name","null"]]]],["stat",["assign",true,["dot",["name","this"],"combine"],["conditional",["binary","!==",["dot",["name","parameters"],"combine"],["name","undefined"]],["dot",["name","parameters"],"combine"],["dot",["name","THREE"],"MultiplyOperation"]]]],["stat",["assign",true,["dot",["name","this"],"reflectivity"],["conditional",["binary","!==",["dot",["name","parameters"],"reflectivity"],["name","undefined"]],["dot",["name","parameters"],"reflectivity"],["num",1]]]],["stat",["assign",true,["dot",["name","this"],"refractionRatio"],["conditional",["binary","!==",["dot",["name","parameters"],"refractionRatio"],["name","undefined"]],["dot",["name","parameters"],"refractionRatio"],["num",0.98]]]],["stat",["assign",true,["dot",["name","this"],"fog"],["conditional",["binary","!==",["dot",["name","parameters"],"fog"],["name","undefined"]],["dot",["name","parameters"],"fog"],["name","true"]]]],["stat",["assign",true,["dot",["name","this"],"shading"],["conditional",["binary","!==",["dot",["name","parameters"],"shading"],["name","undefined"]],["dot",["name","parameters"],"shading"],["dot",["name","THREE"],"SmoothShading"]]]],["stat",["assign",true,["dot",["name","this"],"wireframe"],["conditional",["binary","!==",["dot",["name","parameters"],"wireframe"],["name","undefined"]],["dot",["name","parameters"],"wireframe"],["name","false"]]]],["stat",["assign",true,["dot",["name","this"],"wireframeLinewidth"],["conditional",["binary","!==",["dot",["name","parameters"],"wireframeLinewidth"],["name","undefined"]],["dot",["name","parameters"],"wireframeLinewidth"],["num",1]]]],["stat",["assign",true,["dot",["name","this"],"wireframeLinecap"],["conditional",["binary","!==",["dot",["name","parameters"],"wireframeLinecap"],["name","undefined"]],["dot",["name","parameters"],"wireframeLinecap"],["string","round"]]]],["stat",["assign",true,["dot",["name","this"],"wireframeLinejoin"],["conditional",["binary","!==",["dot",["name","parameters"],"wireframeLinejoin"],["name","undefined"]],["dot",["name","parameters"],"wireframeLinejoin"],["string","round"]]]],["stat",["assign",true,["dot",["name","this"],"vertexColors"],["conditional",["binary","!==",["dot",["name","parameters"],"vertexColors"],["name","undefined"]],["dot",["name","parameters"],"vertexColors"],["dot",["name","THREE"],"NoColors"]]]],["stat",["assign",true,["dot",["name","this"],"skinning"],["conditional",["binary","!==",["dot",["name","parameters"],"skinning"],["name","undefined"]],["dot",["name","parameters"],"skinning"],["name","false"]]]],["stat",["assign",true,["dot",["name","this"],"morphTargets"],["conditional",["binary","!==",["dot",["name","parameters"],"morphTargets"],["name","undefined"]],["dot",["name","parameters"],"morphTargets"],["name","false"]]]],["stat",["assign",true,["dot",["name","this"],"morphNormals"],["conditional",["binary","!==",["dot",["name","parameters"],"morphNormals"],["name","undefined"]],["dot",["name","parameters"],"morphNormals"],["name","false"]]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"MeshPhongMaterial"],"prototype"],["new",["dot",["name","THREE"],"Material"],[]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"MeshPhongMaterial"],"prototype"],"constructor"],["dot",["name","THREE"],"MeshPhongMaterial"]]],["stat",["assign",true,["dot",["name","THREE"],"MeshDepthMaterial"],["function",null,["parameters"],[["stat",["call",["dot",["dot",["name","THREE"],"Material"],"call"],[["name","this"],["name","parameters"]]]],["stat",["assign",true,["name","parameters"],["binary","||",["name","parameters"],["object",[]]]]],["stat",["assign",true,["dot",["name","this"],"shading"],["conditional",["binary","!==",["dot",["name","parameters"],"shading"],["name","undefined"]],["dot",["name","parameters"],"shading"],["dot",["name","THREE"],"SmoothShading"]]]],["stat",["assign",true,["dot",["name","this"],"wireframe"],["conditional",["binary","!==",["dot",["name","parameters"],"wireframe"],["name","undefined"]],["dot",["name","parameters"],"wireframe"],["name","false"]]]],["stat",["assign",true,["dot",["name","this"],"wireframeLinewidth"],["conditional",["binary","!==",["dot",["name","parameters"],"wireframeLinewidth"],["name","undefined"]],["dot",["name","parameters"],"wireframeLinewidth"],["num",1]]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"MeshDepthMaterial"],"prototype"],["new",["dot",["name","THREE"],"Material"],[]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"MeshDepthMaterial"],"prototype"],"constructor"],["dot",["name","THREE"],"MeshDepthMaterial"]]],["stat",["assign",true,["dot",["name","THREE"],"MeshNormalMaterial"],["function",null,["parameters"],[["stat",["call",["dot",["dot",["name","THREE"],"Material"],"call"],[["name","this"],["name","parameters"]]]],["stat",["assign",true,["name","parameters"],["binary","||",["name","parameters"],["object",[]]]]],["stat",["assign",true,["dot",["name","this"],"shading"],["conditional",["dot",["name","parameters"],"shading"],["dot",["name","parameters"],"shading"],["dot",["name","THREE"],"FlatShading"]]]],["stat",["assign",true,["dot",["name","this"],"wireframe"],["conditional",["dot",["name","parameters"],"wireframe"],["dot",["name","parameters"],"wireframe"],["name","false"]]]],["stat",["assign",true,["dot",["name","this"],"wireframeLinewidth"],["conditional",["dot",["name","parameters"],"wireframeLinewidth"],["dot",["name","parameters"],"wireframeLinewidth"],["num",1]]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"MeshNormalMaterial"],"prototype"],["new",["dot",["name","THREE"],"Material"],[]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"MeshNormalMaterial"],"prototype"],"constructor"],["dot",["name","THREE"],"MeshNormalMaterial"]]],["stat",["assign",true,["dot",["name","THREE"],"MeshFaceMaterial"],["function",null,[],[]]]],["stat",["assign",true,["dot",["name","THREE"],"ParticleBasicMaterial"],["function",null,["parameters"],[["stat",["call",["dot",["dot",["name","THREE"],"Material"],"call"],[["name","this"],["name","parameters"]]]],["stat",["assign",true,["name","parameters"],["binary","||",["name","parameters"],["object",[]]]]],["stat",["assign",true,["dot",["name","this"],"color"],["conditional",["binary","!==",["dot",["name","parameters"],"color"],["name","undefined"]],["new",["dot",["name","THREE"],"Color"],[["dot",["name","parameters"],"color"]]],["new",["dot",["name","THREE"],"Color"],[["num",16777215]]]]]],["stat",["assign",true,["dot",["name","this"],"map"],["conditional",["binary","!==",["dot",["name","parameters"],"map"],["name","undefined"]],["dot",["name","parameters"],"map"],["name","null"]]]],["stat",["assign",true,["dot",["name","this"],"size"],["conditional",["binary","!==",["dot",["name","parameters"],"size"],["name","undefined"]],["dot",["name","parameters"],"size"],["num",1]]]],["stat",["assign",true,["dot",["name","this"],"sizeAttenuation"],["conditional",["binary","!==",["dot",["name","parameters"],"sizeAttenuation"],["name","undefined"]],["dot",["name","parameters"],"sizeAttenuation"],["name","true"]]]],["stat",["assign",true,["dot",["name","this"],"vertexColors"],["conditional",["binary","!==",["dot",["name","parameters"],"vertexColors"],["name","undefined"]],["dot",["name","parameters"],"vertexColors"],["name","false"]]]],["stat",["assign",true,["dot",["name","this"],"fog"],["conditional",["binary","!==",["dot",["name","parameters"],"fog"],["name","undefined"]],["dot",["name","parameters"],"fog"],["name","true"]]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"ParticleBasicMaterial"],"prototype"],["new",["dot",["name","THREE"],"Material"],[]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"ParticleBasicMaterial"],"prototype"],"constructor"],["dot",["name","THREE"],"ParticleBasicMaterial"]]],["stat",["assign",true,["dot",["name","THREE"],"ParticleCanvasMaterial"],["function",null,["parameters"],[["stat",["call",["dot",["dot",["name","THREE"],"Material"],"call"],[["name","this"],["name","parameters"]]]],["stat",["assign",true,["name","parameters"],["binary","||",["name","parameters"],["object",[]]]]],["stat",["assign",true,["dot",["name","this"],"color"],["conditional",["binary","!==",["dot",["name","parameters"],"color"],["name","undefined"]],["new",["dot",["name","THREE"],"Color"],[["dot",["name","parameters"],"color"]]],["new",["dot",["name","THREE"],"Color"],[["num",16777215]]]]]],["stat",["assign",true,["dot",["name","this"],"program"],["conditional",["binary","!==",["dot",["name","parameters"],"program"],["name","undefined"]],["dot",["name","parameters"],"program"],["function",null,["context","color"],[]]]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"ParticleCanvasMaterial"],"prototype"],["new",["dot",["name","THREE"],"Material"],[]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"ParticleCanvasMaterial"],"prototype"],"constructor"],["dot",["name","THREE"],"ParticleCanvasMaterial"]]],["stat",["assign",true,["dot",["name","THREE"],"ParticleDOMMaterial"],["function",null,["domElement"],[["stat",["call",["dot",["dot",["name","THREE"],"Material"],"call"],[["name","this"]]]],["stat",["assign",true,["dot",["name","this"],"domElement"],["name","domElement"]]]]]]],["stat",["assign",true,["dot",["name","THREE"],"ShaderMaterial"],["function",null,["parameters"],[["stat",["call",["dot",["dot",["name","THREE"],"Material"],"call"],[["name","this"],["name","parameters"]]]],["stat",["assign",true,["name","parameters"],["binary","||",["name","parameters"],["object",[]]]]],["stat",["assign",true,["dot",["name","this"],"fragmentShader"],["conditional",["binary","!==",["dot",["name","parameters"],"fragmentShader"],["name","undefined"]],["dot",["name","parameters"],"fragmentShader"],["string","void main() {}"]]]],["stat",["assign",true,["dot",["name","this"],"vertexShader"],["conditional",["binary","!==",["dot",["name","parameters"],"vertexShader"],["name","undefined"]],["dot",["name","parameters"],"vertexShader"],["string","void main() {}"]]]],["stat",["assign",true,["dot",["name","this"],"uniforms"],["conditional",["binary","!==",["dot",["name","parameters"],"uniforms"],["name","undefined"]],["dot",["name","parameters"],"uniforms"],["object",[]]]]],["stat",["assign",true,["dot",["name","this"],"attributes"],["dot",["name","parameters"],"attributes"]]],["stat",["assign",true,["dot",["name","this"],"shading"],["conditional",["binary","!==",["dot",["name","parameters"],"shading"],["name","undefined"]],["dot",["name","parameters"],"shading"],["dot",["name","THREE"],"SmoothShading"]]]],["stat",["assign",true,["dot",["name","this"],"wireframe"],["conditional",["binary","!==",["dot",["name","parameters"],"wireframe"],["name","undefined"]],["dot",["name","parameters"],"wireframe"],["name","false"]]]],["stat",["assign",true,["dot",["name","this"],"wireframeLinewidth"],["conditional",["binary","!==",["dot",["name","parameters"],"wireframeLinewidth"],["name","undefined"]],["dot",["name","parameters"],"wireframeLinewidth"],["num",1]]]],["stat",["assign",true,["dot",["name","this"],"fog"],["conditional",["binary","!==",["dot",["name","parameters"],"fog"],["name","undefined"]],["dot",["name","parameters"],"fog"],["name","false"]]]],["stat",["assign",true,["dot",["name","this"],"lights"],["conditional",["binary","!==",["dot",["name","parameters"],"lights"],["name","undefined"]],["dot",["name","parameters"],"lights"],["name","false"]]]],["stat",["assign",true,["dot",["name","this"],"vertexColors"],["conditional",["binary","!==",["dot",["name","parameters"],"vertexColors"],["name","undefined"]],["dot",["name","parameters"],"vertexColors"],["dot",["name","THREE"],"NoColors"]]]],["stat",["assign",true,["dot",["name","this"],"skinning"],["conditional",["binary","!==",["dot",["name","parameters"],"skinning"],["name","undefined"]],["dot",["name","parameters"],"skinning"],["name","false"]]]],["stat",["assign",true,["dot",["name","this"],"morphTargets"],["conditional",["binary","!==",["dot",["name","parameters"],"morphTargets"],["name","undefined"]],["dot",["name","parameters"],"morphTargets"],["name","false"]]]],["stat",["assign",true,["dot",["name","this"],"morphNormals"],["conditional",["binary","!==",["dot",["name","parameters"],"morphNormals"],["name","undefined"]],["dot",["name","parameters"],"morphNormals"],["name","false"]]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"ShaderMaterial"],"prototype"],["new",["dot",["name","THREE"],"Material"],[]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"ShaderMaterial"],"prototype"],"constructor"],["dot",["name","THREE"],"ShaderMaterial"]]],["stat",["assign",true,["dot",["name","THREE"],"Texture"],["function",null,["image","mapping","wrapS","wrapT","magFilter","minFilter","format","type"],[["stat",["assign",true,["dot",["name","this"],"id"],["unary-postfix","++",["dot",["name","THREE"],"TextureCount"]]]],["stat",["assign",true,["dot",["name","this"],"image"],["name","image"]]],["stat",["assign",true,["dot",["name","this"],"mapping"],["conditional",["binary","!==",["name","mapping"],["name","undefined"]],["name","mapping"],["new",["dot",["name","THREE"],"UVMapping"],[]]]]],["stat",["assign",true,["dot",["name","this"],"wrapS"],["conditional",["binary","!==",["name","wrapS"],["name","undefined"]],["name","wrapS"],["dot",["name","THREE"],"ClampToEdgeWrapping"]]]],["stat",["assign",true,["dot",["name","this"],"wrapT"],["conditional",["binary","!==",["name","wrapT"],["name","undefined"]],["name","wrapT"],["dot",["name","THREE"],"ClampToEdgeWrapping"]]]],["stat",["assign",true,["dot",["name","this"],"magFilter"],["conditional",["binary","!==",["name","magFilter"],["name","undefined"]],["name","magFilter"],["dot",["name","THREE"],"LinearFilter"]]]],["stat",["assign",true,["dot",["name","this"],"minFilter"],["conditional",["binary","!==",["name","minFilter"],["name","undefined"]],["name","minFilter"],["dot",["name","THREE"],"LinearMipMapLinearFilter"]]]],["stat",["assign",true,["dot",["name","this"],"format"],["conditional",["binary","!==",["name","format"],["name","undefined"]],["name","format"],["dot",["name","THREE"],"RGBAFormat"]]]],["stat",["assign",true,["dot",["name","this"],"type"],["conditional",["binary","!==",["name","type"],["name","undefined"]],["name","type"],["dot",["name","THREE"],"UnsignedByteType"]]]],["stat",["assign",true,["dot",["name","this"],"offset"],["new",["dot",["name","THREE"],"Vector2"],[["num",0],["num",0]]]]],["stat",["assign",true,["dot",["name","this"],"repeat"],["new",["dot",["name","THREE"],"Vector2"],[["num",1],["num",1]]]]],["stat",["assign",true,["dot",["name","this"],"generateMipmaps"],["name","true"]]],["stat",["assign",true,["dot",["name","this"],"premultiplyAlpha"],["name","false"]]],["stat",["assign",true,["dot",["name","this"],"needsUpdate"],["name","false"]]],["stat",["assign",true,["dot",["name","this"],"onUpdate"],["name","null"]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"Texture"],"prototype"],["object",[["constructor",["dot",["name","THREE"],"Texture"]],["clone",["function",null,[],[["var",[["clonedTexture",["new",["dot",["name","THREE"],"Texture"],[["dot",["name","this"],"image"],["dot",["name","this"],"mapping"],["dot",["name","this"],"wrapS"],["dot",["name","this"],"wrapT"],["dot",["name","this"],"magFilter"],["dot",["name","this"],"minFilter"],["dot",["name","this"],"format"],["dot",["name","this"],"type"]]]]]],["stat",["call",["dot",["dot",["name","clonedTexture"],"offset"],"copy"],[["dot",["name","this"],"offset"]]]],["stat",["call",["dot",["dot",["name","clonedTexture"],"repeat"],"copy"],[["dot",["name","this"],"repeat"]]]],["return",["name","clonedTexture"]]]]]]]]],["stat",["assign",true,["dot",["name","THREE"],"TextureCount"],["num",0]]],["stat",["assign",true,["dot",["name","THREE"],"MultiplyOperation"],["num",0]]],["stat",["assign",true,["dot",["name","THREE"],"MixOperation"],["num",1]]],["stat",["assign",true,["dot",["name","THREE"],"UVMapping"],["function",null,[],[]]]],["stat",["assign",true,["dot",["name","THREE"],"CubeReflectionMapping"],["function",null,[],[]]]],["stat",["assign",true,["dot",["name","THREE"],"CubeRefractionMapping"],["function",null,[],[]]]],["stat",["assign",true,["dot",["name","THREE"],"SphericalReflectionMapping"],["function",null,[],[]]]],["stat",["assign",true,["dot",["name","THREE"],"SphericalRefractionMapping"],["function",null,[],[]]]],["stat",["assign",true,["dot",["name","THREE"],"RepeatWrapping"],["num",0]]],["stat",["assign",true,["dot",["name","THREE"],"ClampToEdgeWrapping"],["num",1]]],["stat",["assign",true,["dot",["name","THREE"],"MirroredRepeatWrapping"],["num",2]]],["stat",["assign",true,["dot",["name","THREE"],"NearestFilter"],["num",3]]],["stat",["assign",true,["dot",["name","THREE"],"NearestMipMapNearestFilter"],["num",4]]],["stat",["assign",true,["dot",["name","THREE"],"NearestMipMapLinearFilter"],["num",5]]],["stat",["assign",true,["dot",["name","THREE"],"LinearFilter"],["num",6]]],["stat",["assign",true,["dot",["name","THREE"],"LinearMipMapNearestFilter"],["num",7]]],["stat",["assign",true,["dot",["name","THREE"],"LinearMipMapLinearFilter"],["num",8]]],["stat",["assign",true,["dot",["name","THREE"],"ByteType"],["num",9]]],["stat",["assign",true,["dot",["name","THREE"],"UnsignedByteType"],["num",10]]],["stat",["assign",true,["dot",["name","THREE"],"ShortType"],["num",11]]],["stat",["assign",true,["dot",["name","THREE"],"UnsignedShortType"],["num",12]]],["stat",["assign",true,["dot",["name","THREE"],"IntType"],["num",13]]],["stat",["assign",true,["dot",["name","THREE"],"UnsignedIntType"],["num",14]]],["stat",["assign",true,["dot",["name","THREE"],"FloatType"],["num",15]]],["stat",["assign",true,["dot",["name","THREE"],"AlphaFormat"],["num",16]]],["stat",["assign",true,["dot",["name","THREE"],"RGBFormat"],["num",17]]],["stat",["assign",true,["dot",["name","THREE"],"RGBAFormat"],["num",18]]],["stat",["assign",true,["dot",["name","THREE"],"LuminanceFormat"],["num",19]]],["stat",["assign",true,["dot",["name","THREE"],"LuminanceAlphaFormat"],["num",20]]],["stat",["assign",true,["dot",["name","THREE"],"DataTexture"],["function",null,["data","width","height","format","type","mapping","wrapS","wrapT","magFilter","minFilter"],[["stat",["call",["dot",["dot",["name","THREE"],"Texture"],"call"],[["name","this"],["name","null"],["name","mapping"],["name","wrapS"],["name","wrapT"],["name","magFilter"],["name","minFilter"],["name","format"],["name","type"]]]],["stat",["assign",true,["dot",["name","this"],"image"],["object",[["data",["name","data"]],["width",["name","width"]],["height",["name","height"]]]]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"DataTexture"],"prototype"],["new",["dot",["name","THREE"],"Texture"],[]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"DataTexture"],"prototype"],"constructor"],["dot",["name","THREE"],"DataTexture"]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"DataTexture"],"prototype"],"clone"],["function",null,[],[["var",[["clonedTexture",["new",["dot",["name","THREE"],"DataTexture"],[["dot",["dot",["name","this"],"image"],"data"],["dot",["dot",["name","this"],"image"],"width"],["dot",["dot",["name","this"],"image"],"height"],["dot",["name","this"],"format"],["dot",["name","this"],"type"],["dot",["name","this"],"mapping"],["dot",["name","this"],"wrapS"],["dot",["name","this"],"wrapT"],["dot",["name","this"],"magFilter"],["dot",["name","this"],"minFilter"]]]]]],["stat",["call",["dot",["dot",["name","clonedTexture"],"offset"],"copy"],[["dot",["name","this"],"offset"]]]],["stat",["call",["dot",["dot",["name","clonedTexture"],"repeat"],"copy"],[["dot",["name","this"],"repeat"]]]],["return",["name","clonedTexture"]]]]]],["stat",["assign",true,["dot",["name","THREE"],"Particle"],["function",null,["material"],[["stat",["call",["dot",["dot",["name","THREE"],"Object3D"],"call"],[["name","this"]]]],["stat",["assign",true,["dot",["name","this"],"material"],["name","material"]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"Particle"],"prototype"],["new",["dot",["name","THREE"],"Object3D"],[]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"Particle"],"prototype"],"constructor"],["dot",["name","THREE"],"Particle"]]],["stat",["assign",true,["dot",["name","THREE"],"ParticleSystem"],["function",null,["geometry","material"],[["stat",["call",["dot",["dot",["name","THREE"],"Object3D"],"call"],[["name","this"]]]],["stat",["assign",true,["dot",["name","this"],"geometry"],["name","geometry"]]],["stat",["assign",true,["dot",["name","this"],"material"],["conditional",["binary","!==",["name","material"],["name","undefined"]],["name","material"],["new",["dot",["name","THREE"],"ParticleBasicMaterial"],[["object",[["color",["binary","*",["call",["dot",["name","Math"],"random"],[]],["num",16777215]]]]]]]]]],["stat",["assign",true,["dot",["name","this"],"sortParticles"],["name","false"]]],["if",["dot",["name","this"],"geometry"],["block",[["if",["unary-prefix","!",["dot",["dot",["name","this"],"geometry"],"boundingSphere"]],["block",[["stat",["call",["dot",["dot",["name","this"],"geometry"],"computeBoundingSphere"],[]]]]],null],["stat",["assign",true,["dot",["name","this"],"boundRadius"],["dot",["dot",["name","geometry"],"boundingSphere"],"radius"]]]]],null],["stat",["assign",true,["dot",["name","this"],"frustumCulled"],["name","false"]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"ParticleSystem"],"prototype"],["new",["dot",["name","THREE"],"Object3D"],[]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"ParticleSystem"],"prototype"],"constructor"],["dot",["name","THREE"],"ParticleSystem"]]],["stat",["assign",true,["dot",["name","THREE"],"Line"],["function",null,["geometry","material","type"],[["stat",["call",["dot",["dot",["name","THREE"],"Object3D"],"call"],[["name","this"]]]],["stat",["assign",true,["dot",["name","this"],"geometry"],["name","geometry"]]],["stat",["assign",true,["dot",["name","this"],"material"],["conditional",["binary","!==",["name","material"],["name","undefined"]],["name","material"],["new",["dot",["name","THREE"],"LineBasicMaterial"],[["object",[["color",["binary","*",["call",["dot",["name","Math"],"random"],[]],["num",16777215]]]]]]]]]],["stat",["assign",true,["dot",["name","this"],"type"],["conditional",["binary","!==",["name","type"],["name","undefined"]],["name","type"],["dot",["name","THREE"],"LineStrip"]]]],["if",["dot",["name","this"],"geometry"],["block",[["if",["unary-prefix","!",["dot",["dot",["name","this"],"geometry"],"boundingSphere"]],["block",[["stat",["call",["dot",["dot",["name","this"],"geometry"],"computeBoundingSphere"],[]]]]],null]]],null]]]]],["stat",["assign",true,["dot",["name","THREE"],"LineStrip"],["num",0]]],["stat",["assign",true,["dot",["name","THREE"],"LinePieces"],["num",1]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"Line"],"prototype"],["new",["dot",["name","THREE"],"Object3D"],[]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"Line"],"prototype"],"constructor"],["dot",["name","THREE"],"Line"]]],["stat",["assign",true,["dot",["name","THREE"],"Mesh"],["function",null,["geometry","material"],[["stat",["call",["dot",["dot",["name","THREE"],"Object3D"],"call"],[["name","this"]]]],["stat",["assign",true,["dot",["name","this"],"geometry"],["name","geometry"]]],["stat",["assign",true,["dot",["name","this"],"material"],["conditional",["binary","!==",["name","material"],["name","undefined"]],["name","material"],["new",["dot",["name","THREE"],"MeshBasicMaterial"],[["object",[["color",["binary","*",["call",["dot",["name","Math"],"random"],[]],["num",16777215]]],["wireframe",["name","true"]]]]]]]]],["if",["dot",["name","this"],"geometry"],["block",[["if",["unary-prefix","!",["dot",["dot",["name","this"],"geometry"],"boundingSphere"]],["block",[["stat",["call",["dot",["dot",["name","this"],"geometry"],"computeBoundingSphere"],[]]]]],null],["stat",["assign",true,["dot",["name","this"],"boundRadius"],["dot",["dot",["name","geometry"],"boundingSphere"],"radius"]]],["if",["dot",["dot",["dot",["name","this"],"geometry"],"morphTargets"],"length"],["block",[["stat",["assign",true,["dot",["name","this"],"morphTargetBase"],["unary-prefix","-",["num",1]]]],["stat",["assign",true,["dot",["name","this"],"morphTargetForcedOrder"],["array",[]]]],["stat",["assign",true,["dot",["name","this"],"morphTargetInfluences"],["array",[]]]],["stat",["assign",true,["dot",["name","this"],"morphTargetDictionary"],["object",[]]]],["for",["var",[["m",["num",0]]]],["binary","<",["name","m"],["dot",["dot",["dot",["name","this"],"geometry"],"morphTargets"],"length"]],["unary-postfix","++",["name","m"]],["block",[["stat",["call",["dot",["dot",["name","this"],"morphTargetInfluences"],"push"],[["num",0]]]],["stat",["assign",true,["sub",["dot",["name","this"],"morphTargetDictionary"],["dot",["sub",["dot",["dot",["name","this"],"geometry"],"morphTargets"],["name","m"]],"name"]],["name","m"]]]]]]]],null]]],null]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"Mesh"],"prototype"],["new",["dot",["name","THREE"],"Object3D"],[]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"Mesh"],"prototype"],"constructor"],["dot",["name","THREE"],"Mesh"]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"Mesh"],"prototype"],"supr"],["dot",["dot",["name","THREE"],"Object3D"],"prototype"]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"Mesh"],"prototype"],"getMorphTargetIndexByName"],["function",null,["name"],[["if",["binary","!==",["sub",["dot",["name","this"],"morphTargetDictionary"],["name","name"]],["name","undefined"]],["block",[["return",["sub",["dot",["name","this"],"morphTargetDictionary"],["name","name"]]]]],null],["stat",["call",["dot",["name","console"],"log"],[["binary","+",["binary","+",["string","THREE.Mesh.getMorphTargetIndexByName: morph target "],["name","name"]],["string"," does not exist. Returning 0."]]]]],["return",["num",0]]]]]],["stat",["assign",true,["dot",["name","THREE"],"Bone"],["function",null,["belongsToSkin"],[["stat",["call",["dot",["dot",["name","THREE"],"Object3D"],"call"],[["name","this"]]]],["stat",["assign",true,["dot",["name","this"],"skin"],["name","belongsToSkin"]]],["stat",["assign",true,["dot",["name","this"],"skinMatrix"],["new",["dot",["name","THREE"],"Matrix4"],[]]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"Bone"],"prototype"],["new",["dot",["name","THREE"],"Object3D"],[]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"Bone"],"prototype"],"constructor"],["dot",["name","THREE"],"Bone"]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"Bone"],"prototype"],"supr"],["dot",["dot",["name","THREE"],"Object3D"],"prototype"]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"Bone"],"prototype"],"update"],["function",null,["parentSkinMatrix","forceUpdate"],[["if",["dot",["name","this"],"matrixAutoUpdate"],["block",[["stat",["assign","|",["name","forceUpdate"],["call",["dot",["name","this"],"updateMatrix"],[]]]]]],null],["if",["binary","||",["name","forceUpdate"],["dot",["name","this"],"matrixWorldNeedsUpdate"]],["block",[["if",["name","parentSkinMatrix"],["block",[["stat",["call",["dot",["dot",["name","this"],"skinMatrix"],"multiply"],[["name","parentSkinMatrix"],["dot",["name","this"],"matrix"]]]]]],["block",[["stat",["call",["dot",["dot",["name","this"],"skinMatrix"],"copy"],[["dot",["name","this"],"matrix"]]]]]]],["stat",["assign",true,["dot",["name","this"],"matrixWorldNeedsUpdate"],["name","false"]]],["stat",["assign",true,["name","forceUpdate"],["name","true"]]]]],null],["var",[["child"],["i"],["l",["dot",["dot",["name","this"],"children"],"length"]]]],["for",["assign",true,["name","i"],["num",0]],["binary","<",["name","i"],["name","l"]],["unary-postfix","++",["name","i"]],["block",[["stat",["call",["dot",["sub",["dot",["name","this"],"children"],["name","i"]],"update"],[["dot",["name","this"],"skinMatrix"],["name","forceUpdate"]]]]]]]]]]],["stat",["assign",true,["dot",["name","THREE"],"SkinnedMesh"],["function",null,["geometry","material"],[["stat",["call",["dot",["dot",["name","THREE"],"Mesh"],"call"],[["name","this"],["name","geometry"],["name","material"]]]],["stat",["assign",true,["dot",["name","this"],"identityMatrix"],["new",["dot",["name","THREE"],"Matrix4"],[]]]],["stat",["assign",true,["dot",["name","this"],"bones"],["array",[]]]],["stat",["assign",true,["dot",["name","this"],"boneMatrices"],["array",[]]]],["var",[["b"],["bone"],["gbone"],["p"],["q"],["s"]]],["if",["binary","!==",["dot",["dot",["name","this"],"geometry"],"bones"],["name","undefined"]],["block",[["for",["assign",true,["name","b"],["num",0]],["binary","<",["name","b"],["dot",["dot",["dot",["name","this"],"geometry"],"bones"],"length"]],["unary-postfix","++",["name","b"]],["block",[["stat",["assign",true,["name","gbone"],["sub",["dot",["dot",["name","this"],"geometry"],"bones"],["name","b"]]]],["stat",["assign",true,["name","p"],["dot",["name","gbone"],"pos"]]],["stat",["assign",true,["name","q"],["dot",["name","gbone"],"rotq"]]],["stat",["assign",true,["name","s"],["dot",["name","gbone"],"scl"]]],["stat",["assign",true,["name","bone"],["call",["dot",["name","this"],"addBone"],[]]]],["stat",["assign",true,["dot",["name","bone"],"name"],["dot",["name","gbone"],"name"]]],["stat",["call",["dot",["dot",["name","bone"],"position"],"set"],[["sub",["name","p"],["num",0]],["sub",["name","p"],["num",1]],["sub",["name","p"],["num",2]]]]],["stat",["call",["dot",["dot",["name","bone"],"quaternion"],"set"],[["sub",["name","q"],["num",0]],["sub",["name","q"],["num",1]],["sub",["name","q"],["num",2]],["sub",["name","q"],["num",3]]]]],["stat",["assign",true,["dot",["name","bone"],"useQuaternion"],["name","true"]]],["if",["binary","!==",["name","s"],["name","undefined"]],["block",[["stat",["call",["dot",["dot",["name","bone"],"scale"],"set"],[["sub",["name","s"],["num",0]],["sub",["name","s"],["num",1]],["sub",["name","s"],["num",2]]]]]]],["block",[["stat",["call",["dot",["dot",["name","bone"],"scale"],"set"],[["num",1],["num",1],["num",1]]]]]]]]]],["for",["assign",true,["name","b"],["num",0]],["binary","<",["name","b"],["dot",["dot",["name","this"],"bones"],"length"]],["unary-postfix","++",["name","b"]],["block",[["stat",["assign",true,["name","gbone"],["sub",["dot",["dot",["name","this"],"geometry"],"bones"],["name","b"]]]],["stat",["assign",true,["name","bone"],["sub",["dot",["name","this"],"bones"],["name","b"]]]],["if",["binary","===",["dot",["name","gbone"],"parent"],["unary-prefix","-",["num",1]]],["block",[["stat",["call",["dot",["name","this"],"add"],[["name","bone"]]]]]],["block",[["stat",["call",["dot",["sub",["dot",["name","this"],"bones"],["dot",["name","gbone"],"parent"]],"add"],[["name","bone"]]]]]]]]]],["stat",["assign",true,["dot",["name","this"],"boneMatrices"],["new",["name","Float32Array"],[["binary","*",["num",16],["dot",["dot",["name","this"],"bones"],"length"]]]]]],["stat",["call",["dot",["name","this"],"pose"],[]]]]],null]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"SkinnedMesh"],"prototype"],["new",["dot",["name","THREE"],"Mesh"],[]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"SkinnedMesh"],"prototype"],"constructor"],["dot",["name","THREE"],"SkinnedMesh"]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"SkinnedMesh"],"prototype"],"addBone"],["function",null,["bone"],[["if",["binary","===",["name","bone"],["name","undefined"]],["block",[["stat",["assign",true,["name","bone"],["new",["dot",["name","THREE"],"Bone"],[["name","this"]]]]]]],null],["stat",["call",["dot",["dot",["name","this"],"bones"],"push"],[["name","bone"]]]],["return",["name","bone"]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"SkinnedMesh"],"prototype"],"updateMatrixWorld"],["function",null,["force"],[["stat",["binary","&&",["dot",["name","this"],"matrixAutoUpdate"],["call",["dot",["name","this"],"updateMatrix"],[]]]],["if",["binary","||",["dot",["name","this"],"matrixWorldNeedsUpdate"],["name","force"]],["block",[["if",["dot",["name","this"],"parent"],["block",[["stat",["call",["dot",["dot",["name","this"],"matrixWorld"],"multiply"],[["dot",["dot",["name","this"],"parent"],"matrixWorld"],["dot",["name","this"],"matrix"]]]]]],["block",[["stat",["call",["dot",["dot",["name","this"],"matrixWorld"],"copy"],[["dot",["name","this"],"matrix"]]]]]]],["stat",["assign",true,["dot",["name","this"],"matrixWorldNeedsUpdate"],["name","false"]]],["stat",["assign",true,["name","force"],["name","true"]]]]],null],["for",["var",[["i",["num",0]],["l",["dot",["dot",["name","this"],"children"],"length"]]]],["binary","<",["name","i"],["name","l"]],["unary-postfix","++",["name","i"]],["block",[["var",[["child",["sub",["dot",["name","this"],"children"],["name","i"]]]]],["if",["binary","instanceof",["name","child"],["dot",["name","THREE"],"Bone"]],["block",[["stat",["call",["dot",["name","child"],"update"],[["dot",["name","this"],"identityMatrix"],["name","false"]]]]]],["block",[["stat",["call",["dot",["name","child"],"updateMatrixWorld"],[["name","true"]]]]]]]]]],["var",[["b"],["bl",["dot",["dot",["name","this"],"bones"],"length"]],["ba",["dot",["name","this"],"bones"]],["bm",["dot",["name","this"],"boneMatrices"]]]],["for",["assign",true,["name","b"],["num",0]],["binary","<",["name","b"],["name","bl"]],["unary-postfix","++",["name","b"]],["block",[["stat",["call",["dot",["dot",["sub",["name","ba"],["name","b"]],"skinMatrix"],"flattenToArrayOffset"],[["name","bm"],["binary","*",["name","b"],["num",16]]]]]]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"SkinnedMesh"],"prototype"],"pose"],["function",null,[],[["stat",["call",["dot",["name","this"],"updateMatrixWorld"],[["name","true"]]]],["var",[["bim"],["bone"],["boneInverses",["array",[]]]]],["for",["var",[["b",["num",0]]]],["binary","<",["name","b"],["dot",["dot",["name","this"],"bones"],"length"]],["unary-postfix","++",["name","b"]],["block",[["stat",["assign",true,["name","bone"],["sub",["dot",["name","this"],"bones"],["name","b"]]]],["var",[["inverseMatrix",["new",["dot",["name","THREE"],"Matrix4"],[]]]]],["stat",["call",["dot",["name","inverseMatrix"],"getInverse"],[["dot",["name","bone"],"skinMatrix"]]]],["stat",["call",["dot",["name","boneInverses"],"push"],[["name","inverseMatrix"]]]],["stat",["call",["dot",["dot",["name","bone"],"skinMatrix"],"flattenToArrayOffset"],[["dot",["name","this"],"boneMatrices"],["binary","*",["name","b"],["num",16]]]]]]]],["if",["binary","===",["dot",["dot",["name","this"],"geometry"],"skinVerticesA"],["name","undefined"]],["block",[["stat",["assign",true,["dot",["dot",["name","this"],"geometry"],"skinVerticesA"],["array",[]]]],["stat",["assign",true,["dot",["dot",["name","this"],"geometry"],"skinVerticesB"],["array",[]]]],["var",[["orgVertex"],["vertex"]]],["for",["var",[["i",["num",0]]]],["binary","<",["name","i"],["dot",["dot",["dot",["name","this"],"geometry"],"skinIndices"],"length"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","orgVertex"],["sub",["dot",["dot",["name","this"],"geometry"],"vertices"],["name","i"]]]],["var",[["indexA",["dot",["sub",["dot",["dot",["name","this"],"geometry"],"skinIndices"],["name","i"]],"x"]]]],["var",[["indexB",["dot",["sub",["dot",["dot",["name","this"],"geometry"],"skinIndices"],["name","i"]],"y"]]]],["stat",["assign",true,["name","vertex"],["new",["dot",["name","THREE"],"Vector3"],[["dot",["name","orgVertex"],"x"],["dot",["name","orgVertex"],"y"],["dot",["name","orgVertex"],"z"]]]]],["stat",["call",["dot",["dot",["dot",["name","this"],"geometry"],"skinVerticesA"],"push"],[["call",["dot",["sub",["name","boneInverses"],["name","indexA"]],"multiplyVector3"],[["name","vertex"]]]]]],["stat",["assign",true,["name","vertex"],["new",["dot",["name","THREE"],"Vector3"],[["dot",["name","orgVertex"],"x"],["dot",["name","orgVertex"],"y"],["dot",["name","orgVertex"],"z"]]]]],["stat",["call",["dot",["dot",["dot",["name","this"],"geometry"],"skinVerticesB"],"push"],[["call",["dot",["sub",["name","boneInverses"],["name","indexB"]],"multiplyVector3"],[["name","vertex"]]]]]],["if",["binary","!==",["binary","+",["dot",["sub",["dot",["dot",["name","this"],"geometry"],"skinWeights"],["name","i"]],"x"],["dot",["sub",["dot",["dot",["name","this"],"geometry"],"skinWeights"],["name","i"]],"y"]],["num",1]],["block",[["var",[["len",["binary","*",["binary","-",["num",1],["binary","+",["dot",["sub",["dot",["dot",["name","this"],"geometry"],"skinWeights"],["name","i"]],"x"],["dot",["sub",["dot",["dot",["name","this"],"geometry"],"skinWeights"],["name","i"]],"y"]]],["num",0.5]]]]],["stat",["assign","+",["dot",["sub",["dot",["dot",["name","this"],"geometry"],"skinWeights"],["name","i"]],"x"],["name","len"]]],["stat",["assign","+",["dot",["sub",["dot",["dot",["name","this"],"geometry"],"skinWeights"],["name","i"]],"y"],["name","len"]]]]],null]]]]]],null]]]]],["stat",["assign",true,["dot",["name","THREE"],"MorphAnimMesh"],["function",null,["geometry","material"],[["stat",["call",["dot",["dot",["name","THREE"],"Mesh"],"call"],[["name","this"],["name","geometry"],["name","material"]]]],["stat",["assign",true,["dot",["name","this"],"duration"],["num",1000]]],["stat",["assign",true,["dot",["name","this"],"mirroredLoop"],["name","false"]]],["stat",["assign",true,["dot",["name","this"],"time"],["num",0]]],["stat",["assign",true,["dot",["name","this"],"lastKeyframe"],["num",0]]],["stat",["assign",true,["dot",["name","this"],"currentKeyframe"],["num",0]]],["stat",["assign",true,["dot",["name","this"],"direction"],["num",1]]],["stat",["assign",true,["dot",["name","this"],"directionBackwards"],["name","false"]]],["stat",["call",["dot",["name","this"],"setFrameRange"],[["num",0],["binary","-",["dot",["dot",["dot",["name","this"],"geometry"],"morphTargets"],"length"],["num",1]]]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"MorphAnimMesh"],"prototype"],["new",["dot",["name","THREE"],"Mesh"],[]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"MorphAnimMesh"],"prototype"],"constructor"],["dot",["name","THREE"],"MorphAnimMesh"]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"MorphAnimMesh"],"prototype"],"setFrameRange"],["function",null,["start","end"],[["stat",["assign",true,["dot",["name","this"],"startKeyframe"],["name","start"]]],["stat",["assign",true,["dot",["name","this"],"endKeyframe"],["name","end"]]],["stat",["assign",true,["dot",["name","this"],"length"],["binary","+",["binary","-",["dot",["name","this"],"endKeyframe"],["dot",["name","this"],"startKeyframe"]],["num",1]]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"MorphAnimMesh"],"prototype"],"setDirectionForward"],["function",null,[],[["stat",["assign",true,["dot",["name","this"],"direction"],["num",1]]],["stat",["assign",true,["dot",["name","this"],"directionBackwards"],["name","false"]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"MorphAnimMesh"],"prototype"],"setDirectionBackward"],["function",null,[],[["stat",["assign",true,["dot",["name","this"],"direction"],["unary-prefix","-",["num",1]]]],["stat",["assign",true,["dot",["name","this"],"directionBackwards"],["name","true"]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"MorphAnimMesh"],"prototype"],"parseAnimations"],["function",null,[],[["var",[["geometry",["dot",["name","this"],"geometry"]]]],["if",["unary-prefix","!",["dot",["name","geometry"],"animations"]],["stat",["assign",true,["dot",["name","geometry"],"animations"],["object",[]]]],null],["var",[["firstAnimation"],["animations",["dot",["name","geometry"],"animations"]]]],["var",[["pattern",["regexp","([a-z]+)(\\d+)",""]]]],["for",["var",[["i",["num",0]],["il",["dot",["dot",["name","geometry"],"morphTargets"],"length"]]]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["block",[["var",[["morph",["sub",["dot",["name","geometry"],"morphTargets"],["name","i"]]]]],["var",[["parts",["call",["dot",["dot",["name","morph"],"name"],"match"],[["name","pattern"]]]]]],["if",["binary","&&",["name","parts"],["binary",">",["dot",["name","parts"],"length"],["num",1]]],["block",[["var",[["label",["sub",["name","parts"],["num",1]]]]],["var",[["num",["sub",["name","parts"],["num",2]]]]],["if",["unary-prefix","!",["sub",["name","animations"],["name","label"]]],["stat",["assign",true,["sub",["name","animations"],["name","label"]],["object",[["start",["name","Infinity"]],["end",["unary-prefix","-",["name","Infinity"]]]]]]],null],["var",[["animation",["sub",["name","animations"],["name","label"]]]]],["if",["binary","<",["name","i"],["dot",["name","animation"],"start"]],["stat",["assign",true,["dot",["name","animation"],"start"],["name","i"]]],null],["if",["binary",">",["name","i"],["dot",["name","animation"],"end"]],["stat",["assign",true,["dot",["name","animation"],"end"],["name","i"]]],null],["if",["unary-prefix","!",["name","firstAnimation"]],["stat",["assign",true,["name","firstAnimation"],["name","label"]]],null]]],null]]]],["stat",["assign",true,["dot",["name","geometry"],"firstAnimation"],["name","firstAnimation"]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"MorphAnimMesh"],"prototype"],"setAnimationLabel"],["function",null,["label","start","end"],[["if",["unary-prefix","!",["dot",["dot",["name","this"],"geometry"],"animations"]],["stat",["assign",true,["dot",["dot",["name","this"],"geometry"],"animations"],["object",[]]]],null],["stat",["assign",true,["sub",["dot",["dot",["name","this"],"geometry"],"animations"],["name","label"]],["object",[["start",["name","start"]],["end",["name","end"]]]]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"MorphAnimMesh"],"prototype"],"playAnimation"],["function",null,["label","fps"],[["var",[["animation",["sub",["dot",["dot",["name","this"],"geometry"],"animations"],["name","label"]]]]],["if",["name","animation"],["block",[["stat",["call",["dot",["name","this"],"setFrameRange"],[["dot",["name","animation"],"start"],["dot",["name","animation"],"end"]]]],["stat",["assign",true,["dot",["name","this"],"duration"],["binary","*",["num",1000],["binary","/",["binary","-",["dot",["name","animation"],"end"],["dot",["name","animation"],"start"]],["name","fps"]]]]],["stat",["assign",true,["dot",["name","this"],"time"],["num",0]]]]],["block",[["stat",["call",["dot",["name","console"],"warn"],[["binary","+",["binary","+",["string","animation["],["name","label"]],["string","] undefined"]]]]]]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"MorphAnimMesh"],"prototype"],"updateAnimation"],["function",null,["delta"],[["var",[["frameTime",["binary","/",["dot",["name","this"],"duration"],["dot",["name","this"],"length"]]]]],["stat",["assign","+",["dot",["name","this"],"time"],["binary","*",["dot",["name","this"],"direction"],["name","delta"]]]],["if",["dot",["name","this"],"mirroredLoop"],["block",[["if",["binary","||",["binary",">",["dot",["name","this"],"time"],["dot",["name","this"],"duration"]],["binary","<",["dot",["name","this"],"time"],["num",0]]],["block",[["stat",["assign","*",["dot",["name","this"],"direction"],["unary-prefix","-",["num",1]]]],["if",["binary",">",["dot",["name","this"],"time"],["dot",["name","this"],"duration"]],["block",[["stat",["assign",true,["dot",["name","this"],"time"],["dot",["name","this"],"duration"]]],["stat",["assign",true,["dot",["name","this"],"directionBackwards"],["name","true"]]]]],null],["if",["binary","<",["dot",["name","this"],"time"],["num",0]],["block",[["stat",["assign",true,["dot",["name","this"],"time"],["num",0]]],["stat",["assign",true,["dot",["name","this"],"directionBackwards"],["name","false"]]]]],null]]],null]]],["block",[["stat",["assign",true,["dot",["name","this"],"time"],["binary","%",["dot",["name","this"],"time"],["dot",["name","this"],"duration"]]]],["if",["binary","<",["dot",["name","this"],"time"],["num",0]],["stat",["assign","+",["dot",["name","this"],"time"],["dot",["name","this"],"duration"]]],null]]]],["var",[["keyframe",["binary","+",["dot",["name","this"],"startKeyframe"],["call",["dot",["dot",["name","THREE"],"Math"],"clamp"],[["call",["dot",["name","Math"],"floor"],[["binary","/",["dot",["name","this"],"time"],["name","frameTime"]]]],["num",0],["binary","-",["dot",["name","this"],"length"],["num",1]]]]]]]],["if",["binary","!==",["name","keyframe"],["dot",["name","this"],"currentKeyframe"]],["block",[["stat",["assign",true,["sub",["dot",["name","this"],"morphTargetInfluences"],["dot",["name","this"],"lastKeyframe"]],["num",0]]],["stat",["assign",true,["sub",["dot",["name","this"],"morphTargetInfluences"],["dot",["name","this"],"currentKeyframe"]],["num",1]]],["stat",["assign",true,["sub",["dot",["name","this"],"morphTargetInfluences"],["name","keyframe"]],["num",0]]],["stat",["assign",true,["dot",["name","this"],"lastKeyframe"],["dot",["name","this"],"currentKeyframe"]]],["stat",["assign",true,["dot",["name","this"],"currentKeyframe"],["name","keyframe"]]]]],null],["var",[["mix",["binary","/",["binary","%",["dot",["name","this"],"time"],["name","frameTime"]],["name","frameTime"]]]]],["if",["dot",["name","this"],"directionBackwards"],["block",[["stat",["assign",true,["name","mix"],["binary","-",["num",1],["name","mix"]]]]]],null],["stat",["assign",true,["sub",["dot",["name","this"],"morphTargetInfluences"],["dot",["name","this"],"currentKeyframe"]],["name","mix"]]],["stat",["assign",true,["sub",["dot",["name","this"],"morphTargetInfluences"],["dot",["name","this"],"lastKeyframe"]],["binary","-",["num",1],["name","mix"]]]]]]]],["stat",["assign",true,["dot",["name","THREE"],"Ribbon"],["function",null,["geometry","material"],[["stat",["call",["dot",["dot",["name","THREE"],"Object3D"],"call"],[["name","this"]]]],["stat",["assign",true,["dot",["name","this"],"geometry"],["name","geometry"]]],["stat",["assign",true,["dot",["name","this"],"material"],["name","material"]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"Ribbon"],"prototype"],["new",["dot",["name","THREE"],"Object3D"],[]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"Ribbon"],"prototype"],"constructor"],["dot",["name","THREE"],"Ribbon"]]],["stat",["assign",true,["dot",["name","THREE"],"LOD"],["function",null,[],[["stat",["call",["dot",["dot",["name","THREE"],"Object3D"],"call"],[["name","this"]]]],["stat",["assign",true,["dot",["name","this"],"LODs"],["array",[]]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"LOD"],"prototype"],["new",["dot",["name","THREE"],"Object3D"],[]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"LOD"],"prototype"],"constructor"],["dot",["name","THREE"],"LOD"]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"LOD"],"prototype"],"supr"],["dot",["dot",["name","THREE"],"Object3D"],"prototype"]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"LOD"],"prototype"],"addLevel"],["function",null,["object3D","visibleAtDistance"],[["if",["binary","===",["name","visibleAtDistance"],["name","undefined"]],["block",[["stat",["assign",true,["name","visibleAtDistance"],["num",0]]]]],null],["stat",["assign",true,["name","visibleAtDistance"],["call",["dot",["name","Math"],"abs"],[["name","visibleAtDistance"]]]]],["for",["var",[["l",["num",0]]]],["binary","<",["name","l"],["dot",["dot",["name","this"],"LODs"],"length"]],["unary-postfix","++",["name","l"]],["block",[["if",["binary","<",["name","visibleAtDistance"],["dot",["sub",["dot",["name","this"],"LODs"],["name","l"]],"visibleAtDistance"]],["block",[["break",null]]],null]]]],["stat",["call",["dot",["dot",["name","this"],"LODs"],"splice"],[["name","l"],["num",0],["object",[["visibleAtDistance",["name","visibleAtDistance"]],["object3D",["name","object3D"]]]]]]],["stat",["call",["dot",["name","this"],"add"],[["name","object3D"]]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"LOD"],"prototype"],"update"],["function",null,["camera"],[["if",["binary",">",["dot",["dot",["name","this"],"LODs"],"length"],["num",1]],["block",[["stat",["call",["dot",["dot",["name","camera"],"matrixWorldInverse"],"getInverse"],[["dot",["name","camera"],"matrixWorld"]]]],["var",[["inverse",["dot",["name","camera"],"matrixWorldInverse"]]]],["var",[["distance",["unary-prefix","-",["binary","+",["binary","+",["binary","+",["binary","*",["sub",["dot",["name","inverse"],"elements"],["num",2]],["sub",["dot",["dot",["name","this"],"matrixWorld"],"elements"],["num",12]]],["binary","*",["sub",["dot",["name","inverse"],"elements"],["num",6]],["sub",["dot",["dot",["name","this"],"matrixWorld"],"elements"],["num",13]]]],["binary","*",["sub",["dot",["name","inverse"],"elements"],["num",10]],["sub",["dot",["dot",["name","this"],"matrixWorld"],"elements"],["num",14]]]],["sub",["dot",["name","inverse"],"elements"],["num",14]]]]]]],["stat",["assign",true,["dot",["dot",["sub",["dot",["name","this"],"LODs"],["num",0]],"object3D"],"visible"],["name","true"]]],["for",["var",[["l",["num",1]]]],["binary","<",["name","l"],["dot",["dot",["name","this"],"LODs"],"length"]],["unary-postfix","++",["name","l"]],["block",[["if",["binary",">=",["name","distance"],["dot",["sub",["dot",["name","this"],"LODs"],["name","l"]],"visibleAtDistance"]],["block",[["stat",["assign",true,["dot",["dot",["sub",["dot",["name","this"],"LODs"],["binary","-",["name","l"],["num",1]]],"object3D"],"visible"],["name","false"]]],["stat",["assign",true,["dot",["dot",["sub",["dot",["name","this"],"LODs"],["name","l"]],"object3D"],"visible"],["name","true"]]]]],["block",[["break",null]]]]]]],["for",null,["binary","<",["name","l"],["dot",["dot",["name","this"],"LODs"],"length"]],["unary-postfix","++",["name","l"]],["block",[["stat",["assign",true,["dot",["dot",["sub",["dot",["name","this"],"LODs"],["name","l"]],"object3D"],"visible"],["name","false"]]]]]]]],null]]]]],["stat",["assign",true,["dot",["name","THREE"],"Sprite"],["function",null,["parameters"],[["stat",["call",["dot",["dot",["name","THREE"],"Object3D"],"call"],[["name","this"]]]],["stat",["assign",true,["dot",["name","this"],"color"],["conditional",["binary","!==",["dot",["name","parameters"],"color"],["name","undefined"]],["new",["dot",["name","THREE"],"Color"],[["dot",["name","parameters"],"color"]]],["new",["dot",["name","THREE"],"Color"],[["num",16777215]]]]]],["stat",["assign",true,["dot",["name","this"],"map"],["conditional",["binary","!==",["dot",["name","parameters"],"map"],["name","undefined"]],["dot",["name","parameters"],"map"],["new",["dot",["name","THREE"],"Texture"],[]]]]],["stat",["assign",true,["dot",["name","this"],"blending"],["conditional",["binary","!==",["dot",["name","parameters"],"blending"],["name","undefined"]],["dot",["name","parameters"],"blending"],["dot",["name","THREE"],"NormalBlending"]]]],["stat",["assign",true,["dot",["name","this"],"blendSrc"],["conditional",["binary","!==",["dot",["name","parameters"],"blendSrc"],["name","undefined"]],["dot",["name","parameters"],"blendSrc"],["dot",["name","THREE"],"SrcAlphaFactor"]]]],["stat",["assign",true,["dot",["name","this"],"blendDst"],["conditional",["binary","!==",["dot",["name","parameters"],"blendDst"],["name","undefined"]],["dot",["name","parameters"],"blendDst"],["dot",["name","THREE"],"OneMinusSrcAlphaFactor"]]]],["stat",["assign",true,["dot",["name","this"],"blendEquation"],["conditional",["binary","!==",["dot",["name","parameters"],"blendEquation"],["name","undefined"]],["dot",["name","parameters"],"blendEquation"],["dot",["name","THREE"],"AddEquation"]]]],["stat",["assign",true,["dot",["name","this"],"useScreenCoordinates"],["conditional",["binary","!==",["dot",["name","parameters"],"useScreenCoordinates"],["name","undefined"]],["dot",["name","parameters"],"useScreenCoordinates"],["name","true"]]]],["stat",["assign",true,["dot",["name","this"],"mergeWith3D"],["conditional",["binary","!==",["dot",["name","parameters"],"mergeWith3D"],["name","undefined"]],["dot",["name","parameters"],"mergeWith3D"],["unary-prefix","!",["dot",["name","this"],"useScreenCoordinates"]]]]],["stat",["assign",true,["dot",["name","this"],"affectedByDistance"],["conditional",["binary","!==",["dot",["name","parameters"],"affectedByDistance"],["name","undefined"]],["dot",["name","parameters"],"affectedByDistance"],["unary-prefix","!",["dot",["name","this"],"useScreenCoordinates"]]]]],["stat",["assign",true,["dot",["name","this"],"scaleByViewport"],["conditional",["binary","!==",["dot",["name","parameters"],"scaleByViewport"],["name","undefined"]],["dot",["name","parameters"],"scaleByViewport"],["unary-prefix","!",["dot",["name","this"],"affectedByDistance"]]]]],["stat",["assign",true,["dot",["name","this"],"alignment"],["conditional",["binary","instanceof",["dot",["name","parameters"],"alignment"],["dot",["name","THREE"],"Vector2"]],["dot",["name","parameters"],"alignment"],["dot",["dot",["name","THREE"],"SpriteAlignment"],"center"]]]],["stat",["assign",true,["dot",["name","this"],"rotation3d"],["dot",["name","this"],"rotation"]]],["stat",["assign",true,["dot",["name","this"],"rotation"],["num",0]]],["stat",["assign",true,["dot",["name","this"],"opacity"],["num",1]]],["stat",["assign",true,["dot",["name","this"],"uvOffset"],["new",["dot",["name","THREE"],"Vector2"],[["num",0],["num",0]]]]],["stat",["assign",true,["dot",["name","this"],"uvScale"],["new",["dot",["name","THREE"],"Vector2"],[["num",1],["num",1]]]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"Sprite"],"prototype"],["new",["dot",["name","THREE"],"Object3D"],[]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"Sprite"],"prototype"],"constructor"],["dot",["name","THREE"],"Sprite"]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"Sprite"],"prototype"],"updateMatrix"],["function",null,[],[["stat",["call",["dot",["dot",["name","this"],"matrix"],"setPosition"],[["dot",["name","this"],"position"]]]],["stat",["call",["dot",["dot",["name","this"],"rotation3d"],"set"],[["num",0],["num",0],["dot",["name","this"],"rotation"]]]],["stat",["call",["dot",["dot",["name","this"],"matrix"],"setRotationFromEuler"],[["dot",["name","this"],"rotation3d"]]]],["if",["binary","||",["binary","!==",["dot",["dot",["name","this"],"scale"],"x"],["num",1]],["binary","!==",["dot",["dot",["name","this"],"scale"],"y"],["num",1]]],["block",[["stat",["call",["dot",["dot",["name","this"],"matrix"],"scale"],[["dot",["name","this"],"scale"]]]],["stat",["assign",true,["dot",["name","this"],"boundRadiusScale"],["call",["dot",["name","Math"],"max"],[["dot",["dot",["name","this"],"scale"],"x"],["dot",["dot",["name","this"],"scale"],"y"]]]]]]],null],["stat",["assign",true,["dot",["name","this"],"matrixWorldNeedsUpdate"],["name","true"]]]]]]],["stat",["assign",true,["dot",["name","THREE"],"SpriteAlignment"],["object",[]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"SpriteAlignment"],"topLeft"],["new",["dot",["name","THREE"],"Vector2"],[["num",1],["unary-prefix","-",["num",1]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"SpriteAlignment"],"topCenter"],["new",["dot",["name","THREE"],"Vector2"],[["num",0],["unary-prefix","-",["num",1]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"SpriteAlignment"],"topRight"],["new",["dot",["name","THREE"],"Vector2"],[["unary-prefix","-",["num",1]],["unary-prefix","-",["num",1]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"SpriteAlignment"],"centerLeft"],["new",["dot",["name","THREE"],"Vector2"],[["num",1],["num",0]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"SpriteAlignment"],"center"],["new",["dot",["name","THREE"],"Vector2"],[["num",0],["num",0]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"SpriteAlignment"],"centerRight"],["new",["dot",["name","THREE"],"Vector2"],[["unary-prefix","-",["num",1]],["num",0]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"SpriteAlignment"],"bottomLeft"],["new",["dot",["name","THREE"],"Vector2"],[["num",1],["num",1]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"SpriteAlignment"],"bottomCenter"],["new",["dot",["name","THREE"],"Vector2"],[["num",0],["num",1]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"SpriteAlignment"],"bottomRight"],["new",["dot",["name","THREE"],"Vector2"],[["unary-prefix","-",["num",1]],["num",1]]]]],["stat",["assign",true,["dot",["name","THREE"],"Scene"],["function",null,[],[["stat",["call",["dot",["dot",["name","THREE"],"Object3D"],"call"],[["name","this"]]]],["stat",["assign",true,["dot",["name","this"],"fog"],["name","null"]]],["stat",["assign",true,["dot",["name","this"],"overrideMaterial"],["name","null"]]],["stat",["assign",true,["dot",["name","this"],"matrixAutoUpdate"],["name","false"]]],["stat",["assign",true,["dot",["name","this"],"__objects"],["array",[]]]],["stat",["assign",true,["dot",["name","this"],"__lights"],["array",[]]]],["stat",["assign",true,["dot",["name","this"],"__objectsAdded"],["array",[]]]],["stat",["assign",true,["dot",["name","this"],"__objectsRemoved"],["array",[]]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"Scene"],"prototype"],["new",["dot",["name","THREE"],"Object3D"],[]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"Scene"],"prototype"],"constructor"],["dot",["name","THREE"],"Scene"]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"Scene"],"prototype"],"__addObject"],["function",null,["object"],[["if",["binary","instanceof",["name","object"],["dot",["name","THREE"],"Light"]],["block",[["if",["binary","===",["call",["dot",["dot",["name","this"],"__lights"],"indexOf"],[["name","object"]]],["unary-prefix","-",["num",1]]],["block",[["stat",["call",["dot",["dot",["name","this"],"__lights"],"push"],[["name","object"]]]]]],null]]],["if",["unary-prefix","!",["binary","||",["binary","instanceof",["name","object"],["dot",["name","THREE"],"Camera"]],["binary","instanceof",["name","object"],["dot",["name","THREE"],"Bone"]]]],["block",[["if",["binary","===",["call",["dot",["dot",["name","this"],"__objects"],"indexOf"],[["name","object"]]],["unary-prefix","-",["num",1]]],["block",[["stat",["call",["dot",["dot",["name","this"],"__objects"],"push"],[["name","object"]]]],["stat",["call",["dot",["dot",["name","this"],"__objectsAdded"],"push"],[["name","object"]]]],["var",[["i",["call",["dot",["dot",["name","this"],"__objectsRemoved"],"indexOf"],[["name","object"]]]]]],["if",["binary","!==",["name","i"],["unary-prefix","-",["num",1]]],["block",[["stat",["call",["dot",["dot",["name","this"],"__objectsRemoved"],"splice"],[["name","i"],["num",1]]]]]],null]]],null]]],null]],["for",["var",[["c",["num",0]]]],["binary","<",["name","c"],["dot",["dot",["name","object"],"children"],"length"]],["unary-postfix","++",["name","c"]],["block",[["stat",["call",["dot",["name","this"],"__addObject"],[["sub",["dot",["name","object"],"children"],["name","c"]]]]]]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"Scene"],"prototype"],"__removeObject"],["function",null,["object"],[["if",["binary","instanceof",["name","object"],["dot",["name","THREE"],"Light"]],["block",[["var",[["i",["call",["dot",["dot",["name","this"],"__lights"],"indexOf"],[["name","object"]]]]]],["if",["binary","!==",["name","i"],["unary-prefix","-",["num",1]]],["block",[["stat",["call",["dot",["dot",["name","this"],"__lights"],"splice"],[["name","i"],["num",1]]]]]],null]]],["if",["unary-prefix","!",["binary","instanceof",["name","object"],["dot",["name","THREE"],"Camera"]]],["block",[["var",[["i",["call",["dot",["dot",["name","this"],"__objects"],"indexOf"],[["name","object"]]]]]],["if",["binary","!==",["name","i"],["unary-prefix","-",["num",1]]],["block",[["stat",["call",["dot",["dot",["name","this"],"__objects"],"splice"],[["name","i"],["num",1]]]],["stat",["call",["dot",["dot",["name","this"],"__objectsRemoved"],"push"],[["name","object"]]]],["var",[["ai",["call",["dot",["dot",["name","this"],"__objectsAdded"],"indexOf"],[["name","object"]]]]]],["if",["binary","!==",["name","ai"],["unary-prefix","-",["num",1]]],["block",[["stat",["call",["dot",["dot",["name","this"],"__objectsAdded"],"splice"],[["name","ai"],["num",1]]]]]],null]]],null]]],null]],["for",["var",[["c",["num",0]]]],["binary","<",["name","c"],["dot",["dot",["name","object"],"children"],"length"]],["unary-postfix","++",["name","c"]],["block",[["stat",["call",["dot",["name","this"],"__removeObject"],[["sub",["dot",["name","object"],"children"],["name","c"]]]]]]]]]]]],["stat",["assign",true,["dot",["name","THREE"],"Fog"],["function",null,["hex","near","far"],[["stat",["assign",true,["dot",["name","this"],"color"],["new",["dot",["name","THREE"],"Color"],[["name","hex"]]]]],["stat",["assign",true,["dot",["name","this"],"near"],["conditional",["binary","!==",["name","near"],["name","undefined"]],["name","near"],["num",1]]]],["stat",["assign",true,["dot",["name","this"],"far"],["conditional",["binary","!==",["name","far"],["name","undefined"]],["name","far"],["num",1000]]]]]]]],["stat",["assign",true,["dot",["name","THREE"],"FogExp2"],["function",null,["hex","density"],[["stat",["assign",true,["dot",["name","this"],"color"],["new",["dot",["name","THREE"],"Color"],[["name","hex"]]]]],["stat",["assign",true,["dot",["name","this"],"density"],["conditional",["binary","!==",["name","density"],["name","undefined"]],["name","density"],["num",0.00025]]]]]]]],["stat",["assign",true,["dot",["name","THREE"],"DOMRenderer"],["function",null,[],[["stat",["call",["dot",["name","console"],"log"],[["string","THREE.DOMRenderer"],["dot",["name","THREE"],"REVISION"]]]],["var",[["_renderData"],["_elements"],["_width"],["_height"],["_widthHalf"],["_heightHalf"],["_transformProp"],["_projector",["new",["dot",["name","THREE"],"Projector"],[]]]]],["var",[["getSupportedProp",["function",null,["proparray"],[["var",[["root",["dot",["name","document"],"documentElement"]]]],["for",["var",[["i",["num",0]]]],["binary","<",["name","i"],["dot",["name","proparray"],"length"]],["unary-postfix","++",["name","i"]],["block",[["if",["binary","===",["unary-prefix","typeof",["sub",["dot",["name","root"],"style"],["sub",["name","proparray"],["name","i"]]]],["string","string"]],["block",[["return",["sub",["name","proparray"],["name","i"]]]]],null]]]],["return",["name","null"]]]]]]],["stat",["assign",true,["name","_transformProp"],["call",["name","getSupportedProp"],[["array",[["string","transform"],["string","MozTransform"],["string","WebkitTransform"],["string","msTransform"],["string","OTransform"]]]]]]],["stat",["assign",true,["dot",["name","this"],"domElement"],["call",["dot",["name","document"],"createElement"],[["string","div"]]]]],["stat",["assign",true,["dot",["name","this"],"setSize"],["function",null,["width","height"],[["stat",["assign",true,["name","_width"],["name","width"]]],["stat",["assign",true,["name","_height"],["name","height"]]],["stat",["assign",true,["name","_widthHalf"],["binary","/",["name","_width"],["num",2]]]],["stat",["assign",true,["name","_heightHalf"],["binary","/",["name","_height"],["num",2]]]]]]]],["stat",["assign",true,["dot",["name","this"],"render"],["function",null,["scene","camera"],[["var",[["e"],["el"],["m"],["ml"],["element"],["material"],["dom"],["v1x"],["v1y"]]],["stat",["assign",true,["name","_renderData"],["call",["dot",["name","_projector"],"projectScene"],[["name","scene"],["name","camera"]]]]],["stat",["assign",true,["name","_elements"],["dot",["name","_renderData"],"elements"]]],["for",["seq",["assign",true,["name","e"],["num",0]],["assign",true,["name","el"],["dot",["name","_elements"],"length"]]],["binary","<",["name","e"],["name","el"]],["unary-postfix","++",["name","e"]],["block",[["stat",["assign",true,["name","element"],["sub",["name","_elements"],["name","e"]]]],["if",["binary","&&",["binary","instanceof",["name","element"],["dot",["name","THREE"],"RenderableParticle"]],["binary","instanceof",["dot",["name","element"],"material"],["dot",["name","THREE"],"ParticleDOMMaterial"]]],["block",[["stat",["assign",true,["name","dom"],["dot",["dot",["name","element"],"material"],"domElement"]]],["stat",["assign",true,["name","v1x"],["binary","-",["binary","+",["binary","*",["dot",["name","element"],"x"],["name","_widthHalf"]],["name","_widthHalf"]],["binary",">>",["dot",["name","dom"],"offsetWidth"],["num",1]]]]],["stat",["assign",true,["name","v1y"],["binary","-",["binary","+",["binary","*",["dot",["name","element"],"y"],["name","_heightHalf"]],["name","_heightHalf"]],["binary",">>",["dot",["name","dom"],"offsetHeight"],["num",1]]]]],["stat",["assign",true,["dot",["dot",["name","dom"],"style"],"left"],["binary","+",["name","v1x"],["string","px"]]]],["stat",["assign",true,["dot",["dot",["name","dom"],"style"],"top"],["binary","+",["name","v1y"],["string","px"]]]],["stat",["assign",true,["dot",["dot",["name","dom"],"style"],"zIndex"],["call",["dot",["name","Math"],"abs"],[["call",["dot",["name","Math"],"floor"],[["binary","/",["binary","*",["binary","-",["num",1],["dot",["name","element"],"z"]],["dot",["name","camera"],"far"]],["dot",["name","camera"],"near"]]]]]]]],["if",["name","_transformProp"],["block",[["var",[["scaleX",["binary","*",["dot",["dot",["name","element"],"scale"],"x"],["name","_widthHalf"]]]]],["var",[["scaleY",["binary","*",["dot",["dot",["name","element"],"scale"],"y"],["name","_heightHalf"]]]]],["var",[["scaleVal",["binary","+",["binary","+",["binary","+",["binary","+",["string","scale("],["name","scaleX"]],["string",","]],["name","scaleY"]],["string",")"]]]]],["stat",["assign",true,["sub",["dot",["name","dom"],"style"],["name","_transformProp"]],["name","scaleVal"]]]]],null]]],null]]]]]]]]]]]],["stat",["assign",true,["dot",["name","THREE"],"CanvasRenderer"],["function",null,["parameters"],[["stat",["call",["dot",["name","console"],"log"],[["string","THREE.CanvasRenderer"],["dot",["name","THREE"],"REVISION"]]]],["stat",["assign",true,["name","parameters"],["binary","||",["name","parameters"],["object",[]]]]],["var",[["_this",["name","this"]],["_renderData"],["_elements"],["_lights"],["_projector",["new",["dot",["name","THREE"],"Projector"],[]]],["_canvas",["conditional",["binary","!==",["dot",["name","parameters"],"canvas"],["name","undefined"]],["dot",["name","parameters"],"canvas"],["call",["dot",["name","document"],"createElement"],[["string","canvas"]]]]],["_canvasWidth"],["_canvasHeight"],["_canvasWidthHalf"],["_canvasHeightHalf"],["_context",["call",["dot",["name","_canvas"],"getContext"],[["string","2d"]]]],["_clearColor",["new",["dot",["name","THREE"],"Color"],[["num",0]]]],["_clearOpacity",["num",0]],["_contextGlobalAlpha",["num",1]],["_contextGlobalCompositeOperation",["num",0]],["_contextStrokeStyle",["name","null"]],["_contextFillStyle",["name","null"]],["_contextLineWidth",["name","null"]],["_contextLineCap",["name","null"]],["_contextLineJoin",["name","null"]],["_v1"],["_v2"],["_v3"],["_v4"],["_v5",["new",["dot",["name","THREE"],"RenderableVertex"],[]]],["_v6",["new",["dot",["name","THREE"],"RenderableVertex"],[]]],["_v1x"],["_v1y"],["_v2x"],["_v2y"],["_v3x"],["_v3y"],["_v4x"],["_v4y"],["_v5x"],["_v5y"],["_v6x"],["_v6y"],["_color",["new",["dot",["name","THREE"],"Color"],[]]],["_color1",["new",["dot",["name","THREE"],"Color"],[]]],["_color2",["new",["dot",["name","THREE"],"Color"],[]]],["_color3",["new",["dot",["name","THREE"],"Color"],[]]],["_color4",["new",["dot",["name","THREE"],"Color"],[]]],["_patterns",["array",[]]],["_imagedatas",["array",[]]],["_near"],["_far"],["_image"],["_uvs"],["_uv1x"],["_uv1y"],["_uv2x"],["_uv2y"],["_uv3x"],["_uv3y"],["_clipRect",["new",["dot",["name","THREE"],"Rectangle"],[]]],["_clearRect",["new",["dot",["name","THREE"],"Rectangle"],[]]],["_bboxRect",["new",["dot",["name","THREE"],"Rectangle"],[]]],["_enableLighting",["name","false"]],["_ambientLight",["new",["dot",["name","THREE"],"Color"],[]]],["_directionalLights",["new",["dot",["name","THREE"],"Color"],[]]],["_pointLights",["new",["dot",["name","THREE"],"Color"],[]]],["_pi2",["binary","*",["dot",["name","Math"],"PI"],["num",2]]],["_vector3",["new",["dot",["name","THREE"],"Vector3"],[]]],["_pixelMap"],["_pixelMapContext"],["_pixelMapImage"],["_pixelMapData"],["_gradientMap"],["_gradientMapContext"],["_gradientMapQuality",["num",16]]]],["stat",["assign",true,["name","_pixelMap"],["call",["dot",["name","document"],"createElement"],[["string","canvas"]]]]],["stat",["assign",true,["dot",["name","_pixelMap"],"width"],["assign",true,["dot",["name","_pixelMap"],"height"],["num",2]]]],["stat",["assign",true,["name","_pixelMapContext"],["call",["dot",["name","_pixelMap"],"getContext"],[["string","2d"]]]]],["stat",["assign",true,["dot",["name","_pixelMapContext"],"fillStyle"],["string","rgba(0,0,0,1)"]]],["stat",["call",["dot",["name","_pixelMapContext"],"fillRect"],[["num",0],["num",0],["num",2],["num",2]]]],["stat",["assign",true,["name","_pixelMapImage"],["call",["dot",["name","_pixelMapContext"],"getImageData"],[["num",0],["num",0],["num",2],["num",2]]]]],["stat",["assign",true,["name","_pixelMapData"],["dot",["name","_pixelMapImage"],"data"]]],["stat",["assign",true,["name","_gradientMap"],["call",["dot",["name","document"],"createElement"],[["string","canvas"]]]]],["stat",["assign",true,["dot",["name","_gradientMap"],"width"],["assign",true,["dot",["name","_gradientMap"],"height"],["name","_gradientMapQuality"]]]],["stat",["assign",true,["name","_gradientMapContext"],["call",["dot",["name","_gradientMap"],"getContext"],[["string","2d"]]]]],["stat",["call",["dot",["name","_gradientMapContext"],"translate"],[["binary","/",["unary-prefix","-",["name","_gradientMapQuality"]],["num",2]],["binary","/",["unary-prefix","-",["name","_gradientMapQuality"]],["num",2]]]]],["stat",["call",["dot",["name","_gradientMapContext"],"scale"],[["name","_gradientMapQuality"],["name","_gradientMapQuality"]]]],["stat",["unary-postfix","--",["name","_gradientMapQuality"]]],["stat",["assign",true,["dot",["name","this"],"domElement"],["name","_canvas"]]],["stat",["assign",true,["dot",["name","this"],"autoClear"],["name","true"]]],["stat",["assign",true,["dot",["name","this"],"sortObjects"],["name","true"]]],["stat",["assign",true,["dot",["name","this"],"sortElements"],["name","true"]]],["stat",["assign",true,["dot",["name","this"],"info"],["object",[["render",["object",[["vertices",["num",0]],["faces",["num",0]]]]]]]]],["stat",["assign",true,["dot",["name","this"],"setSize"],["function",null,["width","height"],[["stat",["assign",true,["name","_canvasWidth"],["name","width"]]],["stat",["assign",true,["name","_canvasHeight"],["name","height"]]],["stat",["assign",true,["name","_canvasWidthHalf"],["call",["dot",["name","Math"],"floor"],[["binary","/",["name","_canvasWidth"],["num",2]]]]]],["stat",["assign",true,["name","_canvasHeightHalf"],["call",["dot",["name","Math"],"floor"],[["binary","/",["name","_canvasHeight"],["num",2]]]]]],["stat",["assign",true,["dot",["name","_canvas"],"width"],["name","_canvasWidth"]]],["stat",["assign",true,["dot",["name","_canvas"],"height"],["name","_canvasHeight"]]],["stat",["call",["dot",["name","_clipRect"],"set"],[["unary-prefix","-",["name","_canvasWidthHalf"]],["unary-prefix","-",["name","_canvasHeightHalf"]],["name","_canvasWidthHalf"],["name","_canvasHeightHalf"]]]],["stat",["call",["dot",["name","_clearRect"],"set"],[["unary-prefix","-",["name","_canvasWidthHalf"]],["unary-prefix","-",["name","_canvasHeightHalf"]],["name","_canvasWidthHalf"],["name","_canvasHeightHalf"]]]],["stat",["assign",true,["name","_contextGlobalAlpha"],["num",1]]],["stat",["assign",true,["name","_contextGlobalCompositeOperation"],["num",0]]],["stat",["assign",true,["name","_contextStrokeStyle"],["name","null"]]],["stat",["assign",true,["name","_contextFillStyle"],["name","null"]]],["stat",["assign",true,["name","_contextLineWidth"],["name","null"]]],["stat",["assign",true,["name","_contextLineCap"],["name","null"]]],["stat",["assign",true,["name","_contextLineJoin"],["name","null"]]]]]]],["stat",["assign",true,["dot",["name","this"],"setClearColor"],["function",null,["color","opacity"],[["stat",["call",["dot",["name","_clearColor"],"copy"],[["name","color"]]]],["stat",["assign",true,["name","_clearOpacity"],["conditional",["binary","!==",["name","opacity"],["name","undefined"]],["name","opacity"],["num",1]]]],["stat",["call",["dot",["name","_clearRect"],"set"],[["unary-prefix","-",["name","_canvasWidthHalf"]],["unary-prefix","-",["name","_canvasHeightHalf"]],["name","_canvasWidthHalf"],["name","_canvasHeightHalf"]]]]]]]],["stat",["assign",true,["dot",["name","this"],"setClearColorHex"],["function",null,["hex","opacity"],[["stat",["call",["dot",["name","_clearColor"],"setHex"],[["name","hex"]]]],["stat",["assign",true,["name","_clearOpacity"],["conditional",["binary","!==",["name","opacity"],["name","undefined"]],["name","opacity"],["num",1]]]],["stat",["call",["dot",["name","_clearRect"],"set"],[["unary-prefix","-",["name","_canvasWidthHalf"]],["unary-prefix","-",["name","_canvasHeightHalf"]],["name","_canvasWidthHalf"],["name","_canvasHeightHalf"]]]]]]]],["stat",["assign",true,["dot",["name","this"],"clear"],["function",null,[],[["stat",["call",["dot",["name","_context"],"setTransform"],[["num",1],["num",0],["num",0],["unary-prefix","-",["num",1]],["name","_canvasWidthHalf"],["name","_canvasHeightHalf"]]]],["if",["unary-prefix","!",["call",["dot",["name","_clearRect"],"isEmpty"],[]]],["block",[["stat",["call",["dot",["name","_clearRect"],"minSelf"],[["name","_clipRect"]]]],["stat",["call",["dot",["name","_clearRect"],"inflate"],[["num",2]]]],["if",["binary","<",["name","_clearOpacity"],["num",1]],["block",[["stat",["call",["dot",["name","_context"],"clearRect"],[["call",["dot",["name","Math"],"floor"],[["call",["dot",["name","_clearRect"],"getX"],[]]]],["call",["dot",["name","Math"],"floor"],[["call",["dot",["name","_clearRect"],"getY"],[]]]],["call",["dot",["name","Math"],"floor"],[["call",["dot",["name","_clearRect"],"getWidth"],[]]]],["call",["dot",["name","Math"],"floor"],[["call",["dot",["name","_clearRect"],"getHeight"],[]]]]]]]]],null],["if",["binary",">",["name","_clearOpacity"],["num",0]],["block",[["stat",["call",["name","setBlending"],[["dot",["name","THREE"],"NormalBlending"]]]],["stat",["call",["name","setOpacity"],[["num",1]]]],["stat",["call",["name","setFillStyle"],[["binary","+",["binary","+",["binary","+",["binary","+",["binary","+",["binary","+",["binary","+",["binary","+",["string","rgba("],["call",["dot",["name","Math"],"floor"],[["binary","*",["dot",["name","_clearColor"],"r"],["num",255]]]]],["string",","]],["call",["dot",["name","Math"],"floor"],[["binary","*",["dot",["name","_clearColor"],"g"],["num",255]]]]],["string",","]],["call",["dot",["name","Math"],"floor"],[["binary","*",["dot",["name","_clearColor"],"b"],["num",255]]]]],["string",","]],["name","_clearOpacity"]],["string",")"]]]]],["stat",["call",["dot",["name","_context"],"fillRect"],[["call",["dot",["name","Math"],"floor"],[["call",["dot",["name","_clearRect"],"getX"],[]]]],["call",["dot",["name","Math"],"floor"],[["call",["dot",["name","_clearRect"],"getY"],[]]]],["call",["dot",["name","Math"],"floor"],[["call",["dot",["name","_clearRect"],"getWidth"],[]]]],["call",["dot",["name","Math"],"floor"],[["call",["dot",["name","_clearRect"],"getHeight"],[]]]]]]]]],null],["stat",["call",["dot",["name","_clearRect"],"empty"],[]]]]],null]]]]],["stat",["assign",true,["dot",["name","this"],"render"],["function",null,["scene","camera"],[["var",[["e"],["el"],["element"],["material"]]],["stat",["conditional",["dot",["name","this"],"autoClear"],["call",["dot",["name","this"],"clear"],[]],["call",["dot",["name","_context"],"setTransform"],[["num",1],["num",0],["num",0],["unary-prefix","-",["num",1]],["name","_canvasWidthHalf"],["name","_canvasHeightHalf"]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","_this"],"info"],"render"],"vertices"],["num",0]]],["stat",["assign",true,["dot",["dot",["dot",["name","_this"],"info"],"render"],"faces"],["num",0]]],["stat",["assign",true,["name","_renderData"],["call",["dot",["name","_projector"],"projectScene"],[["name","scene"],["name","camera"],["dot",["name","this"],"sortElements"]]]]],["stat",["assign",true,["name","_elements"],["dot",["name","_renderData"],"elements"]]],["stat",["assign",true,["name","_lights"],["dot",["name","_renderData"],"lights"]]],["stat",["assign",true,["name","_enableLighting"],["binary",">",["dot",["name","_lights"],"length"],["num",0]]]],["if",["name","_enableLighting"],["block",[["stat",["call",["name","calculateLights"],[["name","_lights"]]]]]],null],["for",["seq",["assign",true,["name","e"],["num",0]],["assign",true,["name","el"],["dot",["name","_elements"],"length"]]],["binary","<",["name","e"],["name","el"]],["unary-postfix","++",["name","e"]],["block",[["stat",["assign",true,["name","element"],["sub",["name","_elements"],["name","e"]]]],["stat",["assign",true,["name","material"],["dot",["name","element"],"material"]]],["stat",["assign",true,["name","material"],["conditional",["binary","instanceof",["name","material"],["dot",["name","THREE"],"MeshFaceMaterial"]],["dot",["name","element"],"faceMaterial"],["name","material"]]]],["if",["binary","||",["binary","===",["name","material"],["name","undefined"]],["binary","===",["dot",["name","material"],"visible"],["name","false"]]],["continue",null],null],["stat",["call",["dot",["name","_bboxRect"],"empty"],[]]],["if",["binary","instanceof",["name","element"],["dot",["name","THREE"],"RenderableParticle"]],["block",[["stat",["assign",true,["name","_v1"],["name","element"]]],["stat",["assign","*",["dot",["name","_v1"],"x"],["name","_canvasWidthHalf"]]],["stat",["assign","*",["dot",["name","_v1"],"y"],["name","_canvasHeightHalf"]]],["stat",["call",["name","renderParticle"],[["name","_v1"],["name","element"],["name","material"],["name","scene"]]]]]],["if",["binary","instanceof",["name","element"],["dot",["name","THREE"],"RenderableLine"]],["block",[["stat",["assign",true,["name","_v1"],["dot",["name","element"],"v1"]]],["stat",["assign",true,["name","_v2"],["dot",["name","element"],"v2"]]],["stat",["assign","*",["dot",["dot",["name","_v1"],"positionScreen"],"x"],["name","_canvasWidthHalf"]]],["stat",["assign","*",["dot",["dot",["name","_v1"],"positionScreen"],"y"],["name","_canvasHeightHalf"]]],["stat",["assign","*",["dot",["dot",["name","_v2"],"positionScreen"],"x"],["name","_canvasWidthHalf"]]],["stat",["assign","*",["dot",["dot",["name","_v2"],"positionScreen"],"y"],["name","_canvasHeightHalf"]]],["stat",["call",["dot",["name","_bboxRect"],"addPoint"],[["dot",["dot",["name","_v1"],"positionScreen"],"x"],["dot",["dot",["name","_v1"],"positionScreen"],"y"]]]],["stat",["call",["dot",["name","_bboxRect"],"addPoint"],[["dot",["dot",["name","_v2"],"positionScreen"],"x"],["dot",["dot",["name","_v2"],"positionScreen"],"y"]]]],["if",["call",["dot",["name","_clipRect"],"intersects"],[["name","_bboxRect"]]],["block",[["stat",["call",["name","renderLine"],[["name","_v1"],["name","_v2"],["name","element"],["name","material"],["name","scene"]]]]]],null]]],["if",["binary","instanceof",["name","element"],["dot",["name","THREE"],"RenderableFace3"]],["block",[["stat",["assign",true,["name","_v1"],["dot",["name","element"],"v1"]]],["stat",["assign",true,["name","_v2"],["dot",["name","element"],"v2"]]],["stat",["assign",true,["name","_v3"],["dot",["name","element"],"v3"]]],["stat",["assign","*",["dot",["dot",["name","_v1"],"positionScreen"],"x"],["name","_canvasWidthHalf"]]],["stat",["assign","*",["dot",["dot",["name","_v1"],"positionScreen"],"y"],["name","_canvasHeightHalf"]]],["stat",["assign","*",["dot",["dot",["name","_v2"],"positionScreen"],"x"],["name","_canvasWidthHalf"]]],["stat",["assign","*",["dot",["dot",["name","_v2"],"positionScreen"],"y"],["name","_canvasHeightHalf"]]],["stat",["assign","*",["dot",["dot",["name","_v3"],"positionScreen"],"x"],["name","_canvasWidthHalf"]]],["stat",["assign","*",["dot",["dot",["name","_v3"],"positionScreen"],"y"],["name","_canvasHeightHalf"]]],["if",["dot",["name","material"],"overdraw"],["block",[["stat",["call",["name","expand"],[["dot",["name","_v1"],"positionScreen"],["dot",["name","_v2"],"positionScreen"]]]],["stat",["call",["name","expand"],[["dot",["name","_v2"],"positionScreen"],["dot",["name","_v3"],"positionScreen"]]]],["stat",["call",["name","expand"],[["dot",["name","_v3"],"positionScreen"],["dot",["name","_v1"],"positionScreen"]]]]]],null],["stat",["call",["dot",["name","_bboxRect"],"add3Points"],[["dot",["dot",["name","_v1"],"positionScreen"],"x"],["dot",["dot",["name","_v1"],"positionScreen"],"y"],["dot",["dot",["name","_v2"],"positionScreen"],"x"],["dot",["dot",["name","_v2"],"positionScreen"],"y"],["dot",["dot",["name","_v3"],"positionScreen"],"x"],["dot",["dot",["name","_v3"],"positionScreen"],"y"]]]],["if",["call",["dot",["name","_clipRect"],"intersects"],[["name","_bboxRect"]]],["block",[["stat",["call",["name","renderFace3"],[["name","_v1"],["name","_v2"],["name","_v3"],["num",0],["num",1],["num",2],["name","element"],["name","material"],["name","scene"]]]]]],null]]],["if",["binary","instanceof",["name","element"],["dot",["name","THREE"],"RenderableFace4"]],["block",[["stat",["assign",true,["name","_v1"],["dot",["name","element"],"v1"]]],["stat",["assign",true,["name","_v2"],["dot",["name","element"],"v2"]]],["stat",["assign",true,["name","_v3"],["dot",["name","element"],"v3"]]],["stat",["assign",true,["name","_v4"],["dot",["name","element"],"v4"]]],["stat",["assign","*",["dot",["dot",["name","_v1"],"positionScreen"],"x"],["name","_canvasWidthHalf"]]],["stat",["assign","*",["dot",["dot",["name","_v1"],"positionScreen"],"y"],["name","_canvasHeightHalf"]]],["stat",["assign","*",["dot",["dot",["name","_v2"],"positionScreen"],"x"],["name","_canvasWidthHalf"]]],["stat",["assign","*",["dot",["dot",["name","_v2"],"positionScreen"],"y"],["name","_canvasHeightHalf"]]],["stat",["assign","*",["dot",["dot",["name","_v3"],"positionScreen"],"x"],["name","_canvasWidthHalf"]]],["stat",["assign","*",["dot",["dot",["name","_v3"],"positionScreen"],"y"],["name","_canvasHeightHalf"]]],["stat",["assign","*",["dot",["dot",["name","_v4"],"positionScreen"],"x"],["name","_canvasWidthHalf"]]],["stat",["assign","*",["dot",["dot",["name","_v4"],"positionScreen"],"y"],["name","_canvasHeightHalf"]]],["stat",["call",["dot",["dot",["name","_v5"],"positionScreen"],"copy"],[["dot",["name","_v2"],"positionScreen"]]]],["stat",["call",["dot",["dot",["name","_v6"],"positionScreen"],"copy"],[["dot",["name","_v4"],"positionScreen"]]]],["if",["dot",["name","material"],"overdraw"],["block",[["stat",["call",["name","expand"],[["dot",["name","_v1"],"positionScreen"],["dot",["name","_v2"],"positionScreen"]]]],["stat",["call",["name","expand"],[["dot",["name","_v2"],"positionScreen"],["dot",["name","_v4"],"positionScreen"]]]],["stat",["call",["name","expand"],[["dot",["name","_v4"],"positionScreen"],["dot",["name","_v1"],"positionScreen"]]]],["stat",["call",["name","expand"],[["dot",["name","_v3"],"positionScreen"],["dot",["name","_v5"],"positionScreen"]]]],["stat",["call",["name","expand"],[["dot",["name","_v3"],"positionScreen"],["dot",["name","_v6"],"positionScreen"]]]]]],null],["stat",["call",["dot",["name","_bboxRect"],"addPoint"],[["dot",["dot",["name","_v1"],"positionScreen"],"x"],["dot",["dot",["name","_v1"],"positionScreen"],"y"]]]],["stat",["call",["dot",["name","_bboxRect"],"addPoint"],[["dot",["dot",["name","_v2"],"positionScreen"],"x"],["dot",["dot",["name","_v2"],"positionScreen"],"y"]]]],["stat",["call",["dot",["name","_bboxRect"],"addPoint"],[["dot",["dot",["name","_v3"],"positionScreen"],"x"],["dot",["dot",["name","_v3"],"positionScreen"],"y"]]]],["stat",["call",["dot",["name","_bboxRect"],"addPoint"],[["dot",["dot",["name","_v4"],"positionScreen"],"x"],["dot",["dot",["name","_v4"],"positionScreen"],"y"]]]],["if",["call",["dot",["name","_clipRect"],"intersects"],[["name","_bboxRect"]]],["block",[["stat",["call",["name","renderFace4"],[["name","_v1"],["name","_v2"],["name","_v3"],["name","_v4"],["name","_v5"],["name","_v6"],["name","element"],["name","material"],["name","scene"]]]]]],null]]],null]]]],["stat",["call",["dot",["name","_clearRect"],"addRectangle"],[["name","_bboxRect"]]]]]]],["stat",["call",["dot",["name","_context"],"setTransform"],[["num",1],["num",0],["num",0],["num",1],["num",0],["num",0]]]],["defun","calculateLights",["lights"],[["var",[["l"],["ll"],["light"],["lightColor"]]],["stat",["call",["dot",["name","_ambientLight"],"setRGB"],[["num",0],["num",0],["num",0]]]],["stat",["call",["dot",["name","_directionalLights"],"setRGB"],[["num",0],["num",0],["num",0]]]],["stat",["call",["dot",["name","_pointLights"],"setRGB"],[["num",0],["num",0],["num",0]]]],["for",["seq",["assign",true,["name","l"],["num",0]],["assign",true,["name","ll"],["dot",["name","lights"],"length"]]],["binary","<",["name","l"],["name","ll"]],["unary-postfix","++",["name","l"]],["block",[["stat",["assign",true,["name","light"],["sub",["name","lights"],["name","l"]]]],["stat",["assign",true,["name","lightColor"],["dot",["name","light"],"color"]]],["if",["binary","instanceof",["name","light"],["dot",["name","THREE"],"AmbientLight"]],["block",[["stat",["assign","+",["dot",["name","_ambientLight"],"r"],["dot",["name","lightColor"],"r"]]],["stat",["assign","+",["dot",["name","_ambientLight"],"g"],["dot",["name","lightColor"],"g"]]],["stat",["assign","+",["dot",["name","_ambientLight"],"b"],["dot",["name","lightColor"],"b"]]]]],["if",["binary","instanceof",["name","light"],["dot",["name","THREE"],"DirectionalLight"]],["block",[["stat",["assign","+",["dot",["name","_directionalLights"],"r"],["dot",["name","lightColor"],"r"]]],["stat",["assign","+",["dot",["name","_directionalLights"],"g"],["dot",["name","lightColor"],"g"]]],["stat",["assign","+",["dot",["name","_directionalLights"],"b"],["dot",["name","lightColor"],"b"]]]]],["if",["binary","instanceof",["name","light"],["dot",["name","THREE"],"PointLight"]],["block",[["stat",["assign","+",["dot",["name","_pointLights"],"r"],["dot",["name","lightColor"],"r"]]],["stat",["assign","+",["dot",["name","_pointLights"],"g"],["dot",["name","lightColor"],"g"]]],["stat",["assign","+",["dot",["name","_pointLights"],"b"],["dot",["name","lightColor"],"b"]]]]],null]]]]]]]],["defun","calculateLight",["lights","position","normal","color"],[["var",[["l"],["ll"],["light"],["lightColor"],["lightPosition"],["amount"]]],["for",["seq",["assign",true,["name","l"],["num",0]],["assign",true,["name","ll"],["dot",["name","lights"],"length"]]],["binary","<",["name","l"],["name","ll"]],["unary-postfix","++",["name","l"]],["block",[["stat",["assign",true,["name","light"],["sub",["name","lights"],["name","l"]]]],["stat",["assign",true,["name","lightColor"],["dot",["name","light"],"color"]]],["if",["binary","instanceof",["name","light"],["dot",["name","THREE"],"DirectionalLight"]],["block",[["stat",["assign",true,["name","lightPosition"],["call",["dot",["dot",["name","light"],"matrixWorld"],"getPosition"],[]]]],["stat",["assign",true,["name","amount"],["call",["dot",["name","normal"],"dot"],[["name","lightPosition"]]]]],["if",["binary","<=",["name","amount"],["num",0]],["continue",null],null],["stat",["assign","*",["name","amount"],["dot",["name","light"],"intensity"]]],["stat",["assign","+",["dot",["name","color"],"r"],["binary","*",["dot",["name","lightColor"],"r"],["name","amount"]]]],["stat",["assign","+",["dot",["name","color"],"g"],["binary","*",["dot",["name","lightColor"],"g"],["name","amount"]]]],["stat",["assign","+",["dot",["name","color"],"b"],["binary","*",["dot",["name","lightColor"],"b"],["name","amount"]]]]]],["if",["binary","instanceof",["name","light"],["dot",["name","THREE"],"PointLight"]],["block",[["stat",["assign",true,["name","lightPosition"],["call",["dot",["dot",["name","light"],"matrixWorld"],"getPosition"],[]]]],["stat",["assign",true,["name","amount"],["call",["dot",["name","normal"],"dot"],[["call",["dot",["call",["dot",["name","_vector3"],"sub"],[["name","lightPosition"],["name","position"]]],"normalize"],[]]]]]],["if",["binary","<=",["name","amount"],["num",0]],["continue",null],null],["stat",["assign","*",["name","amount"],["conditional",["binary","==",["dot",["name","light"],"distance"],["num",0]],["num",1],["binary","-",["num",1],["call",["dot",["name","Math"],"min"],[["binary","/",["call",["dot",["name","position"],"distanceTo"],[["name","lightPosition"]]],["dot",["name","light"],"distance"]],["num",1]]]]]]],["if",["binary","==",["name","amount"],["num",0]],["continue",null],null],["stat",["assign","*",["name","amount"],["dot",["name","light"],"intensity"]]],["stat",["assign","+",["dot",["name","color"],"r"],["binary","*",["dot",["name","lightColor"],"r"],["name","amount"]]]],["stat",["assign","+",["dot",["name","color"],"g"],["binary","*",["dot",["name","lightColor"],"g"],["name","amount"]]]],["stat",["assign","+",["dot",["name","color"],"b"],["binary","*",["dot",["name","lightColor"],"b"],["name","amount"]]]]]],null]]]]]]],["defun","renderParticle",["v1","element","material","scene"],[["stat",["call",["name","setOpacity"],[["dot",["name","material"],"opacity"]]]],["stat",["call",["name","setBlending"],[["dot",["name","material"],"blending"]]]],["var",[["width"],["height"],["scaleX"],["scaleY"],["bitmap"],["bitmapWidth"],["bitmapHeight"]]],["if",["binary","instanceof",["name","material"],["dot",["name","THREE"],"ParticleBasicMaterial"]],["block",[["if",["dot",["name","material"],"map"],["block",[["stat",["assign",true,["name","bitmap"],["dot",["dot",["name","material"],"map"],"image"]]],["stat",["assign",true,["name","bitmapWidth"],["binary",">>",["dot",["name","bitmap"],"width"],["num",1]]]],["stat",["assign",true,["name","bitmapHeight"],["binary",">>",["dot",["name","bitmap"],"height"],["num",1]]]],["stat",["assign",true,["name","scaleX"],["binary","*",["dot",["dot",["name","element"],"scale"],"x"],["name","_canvasWidthHalf"]]]],["stat",["assign",true,["name","scaleY"],["binary","*",["dot",["dot",["name","element"],"scale"],"y"],["name","_canvasHeightHalf"]]]],["stat",["assign",true,["name","width"],["binary","*",["name","scaleX"],["name","bitmapWidth"]]]],["stat",["assign",true,["name","height"],["binary","*",["name","scaleY"],["name","bitmapHeight"]]]],["stat",["call",["dot",["name","_bboxRect"],"set"],[["binary","-",["dot",["name","v1"],"x"],["name","width"]],["binary","-",["dot",["name","v1"],"y"],["name","height"]],["binary","+",["dot",["name","v1"],"x"],["name","width"]],["binary","+",["dot",["name","v1"],"y"],["name","height"]]]]],["if",["unary-prefix","!",["call",["dot",["name","_clipRect"],"intersects"],[["name","_bboxRect"]]]],["block",[["return",null]]],null],["stat",["call",["dot",["name","_context"],"save"],[]]],["stat",["call",["dot",["name","_context"],"translate"],[["dot",["name","v1"],"x"],["dot",["name","v1"],"y"]]]],["stat",["call",["dot",["name","_context"],"rotate"],[["unary-prefix","-",["dot",["name","element"],"rotation"]]]]],["stat",["call",["dot",["name","_context"],"scale"],[["name","scaleX"],["unary-prefix","-",["name","scaleY"]]]]],["stat",["call",["dot",["name","_context"],"translate"],[["unary-prefix","-",["name","bitmapWidth"]],["unary-prefix","-",["name","bitmapHeight"]]]]],["stat",["call",["dot",["name","_context"],"drawImage"],[["name","bitmap"],["num",0],["num",0]]]],["stat",["call",["dot",["name","_context"],"restore"],[]]]]],null]]],["if",["binary","instanceof",["name","material"],["dot",["name","THREE"],"ParticleCanvasMaterial"]],["block",[["stat",["assign",true,["name","width"],["binary","*",["dot",["dot",["name","element"],"scale"],"x"],["name","_canvasWidthHalf"]]]],["stat",["assign",true,["name","height"],["binary","*",["dot",["dot",["name","element"],"scale"],"y"],["name","_canvasHeightHalf"]]]],["stat",["call",["dot",["name","_bboxRect"],"set"],[["binary","-",["dot",["name","v1"],"x"],["name","width"]],["binary","-",["dot",["name","v1"],"y"],["name","height"]],["binary","+",["dot",["name","v1"],"x"],["name","width"]],["binary","+",["dot",["name","v1"],"y"],["name","height"]]]]],["if",["unary-prefix","!",["call",["dot",["name","_clipRect"],"intersects"],[["name","_bboxRect"]]]],["block",[["return",null]]],null],["stat",["call",["name","setStrokeStyle"],[["call",["dot",["dot",["name","material"],"color"],"getContextStyle"],[]]]]],["stat",["call",["name","setFillStyle"],[["call",["dot",["dot",["name","material"],"color"],"getContextStyle"],[]]]]],["stat",["call",["dot",["name","_context"],"save"],[]]],["stat",["call",["dot",["name","_context"],"translate"],[["dot",["name","v1"],"x"],["dot",["name","v1"],"y"]]]],["stat",["call",["dot",["name","_context"],"rotate"],[["unary-prefix","-",["dot",["name","element"],"rotation"]]]]],["stat",["call",["dot",["name","_context"],"scale"],[["name","width"],["name","height"]]]],["stat",["call",["dot",["name","material"],"program"],[["name","_context"]]]],["stat",["call",["dot",["name","_context"],"restore"],[]]]]],null]]]],["defun","renderLine",["v1","v2","element","material","scene"],[["stat",["call",["name","setOpacity"],[["dot",["name","material"],"opacity"]]]],["stat",["call",["name","setBlending"],[["dot",["name","material"],"blending"]]]],["stat",["call",["dot",["name","_context"],"beginPath"],[]]],["stat",["call",["dot",["name","_context"],"moveTo"],[["dot",["dot",["name","v1"],"positionScreen"],"x"],["dot",["dot",["name","v1"],"positionScreen"],"y"]]]],["stat",["call",["dot",["name","_context"],"lineTo"],[["dot",["dot",["name","v2"],"positionScreen"],"x"],["dot",["dot",["name","v2"],"positionScreen"],"y"]]]],["stat",["call",["dot",["name","_context"],"closePath"],[]]],["if",["binary","instanceof",["name","material"],["dot",["name","THREE"],"LineBasicMaterial"]],["block",[["stat",["call",["name","setLineWidth"],[["dot",["name","material"],"linewidth"]]]],["stat",["call",["name","setLineCap"],[["dot",["name","material"],"linecap"]]]],["stat",["call",["name","setLineJoin"],[["dot",["name","material"],"linejoin"]]]],["stat",["call",["name","setStrokeStyle"],[["call",["dot",["dot",["name","material"],"color"],"getContextStyle"],[]]]]],["stat",["call",["dot",["name","_context"],"stroke"],[]]],["stat",["call",["dot",["name","_bboxRect"],"inflate"],[["binary","*",["dot",["name","material"],"linewidth"],["num",2]]]]]]],null]]],["defun","renderFace3",["v1","v2","v3","uv1","uv2","uv3","element","material","scene"],[["stat",["assign","+",["dot",["dot",["dot",["name","_this"],"info"],"render"],"vertices"],["num",3]]],["stat",["unary-postfix","++",["dot",["dot",["dot",["name","_this"],"info"],"render"],"faces"]]],["stat",["call",["name","setOpacity"],[["dot",["name","material"],"opacity"]]]],["stat",["call",["name","setBlending"],[["dot",["name","material"],"blending"]]]],["stat",["assign",true,["name","_v1x"],["dot",["dot",["name","v1"],"positionScreen"],"x"]]],["stat",["assign",true,["name","_v1y"],["dot",["dot",["name","v1"],"positionScreen"],"y"]]],["stat",["assign",true,["name","_v2x"],["dot",["dot",["name","v2"],"positionScreen"],"x"]]],["stat",["assign",true,["name","_v2y"],["dot",["dot",["name","v2"],"positionScreen"],"y"]]],["stat",["assign",true,["name","_v3x"],["dot",["dot",["name","v3"],"positionScreen"],"x"]]],["stat",["assign",true,["name","_v3y"],["dot",["dot",["name","v3"],"positionScreen"],"y"]]],["stat",["call",["name","drawTriangle"],[["name","_v1x"],["name","_v1y"],["name","_v2x"],["name","_v2y"],["name","_v3x"],["name","_v3y"]]]],["if",["binary","instanceof",["name","material"],["dot",["name","THREE"],"MeshBasicMaterial"]],["block",[["if",["dot",["name","material"],"map"],["block",[["if",["binary","instanceof",["dot",["dot",["name","material"],"map"],"mapping"],["dot",["name","THREE"],"UVMapping"]],["block",[["stat",["assign",true,["name","_uvs"],["sub",["dot",["name","element"],"uvs"],["num",0]]]],["stat",["call",["name","patternPath"],[["name","_v1x"],["name","_v1y"],["name","_v2x"],["name","_v2y"],["name","_v3x"],["name","_v3y"],["dot",["sub",["name","_uvs"],["name","uv1"]],"u"],["dot",["sub",["name","_uvs"],["name","uv1"]],"v"],["dot",["sub",["name","_uvs"],["name","uv2"]],"u"],["dot",["sub",["name","_uvs"],["name","uv2"]],"v"],["dot",["sub",["name","_uvs"],["name","uv3"]],"u"],["dot",["sub",["name","_uvs"],["name","uv3"]],"v"],["dot",["name","material"],"map"]]]]]],null]]],["if",["dot",["name","material"],"envMap"],["block",[["if",["binary","instanceof",["dot",["dot",["name","material"],"envMap"],"mapping"],["dot",["name","THREE"],"SphericalReflectionMapping"]],["block",[["var",[["cameraMatrix",["dot",["name","camera"],"matrixWorldInverse"]]]],["stat",["call",["dot",["name","_vector3"],"copy"],[["sub",["dot",["name","element"],"vertexNormalsWorld"],["name","uv1"]]]]],["stat",["assign",true,["name","_uv1x"],["binary","+",["binary","*",["binary","+",["binary","+",["binary","*",["dot",["name","_vector3"],"x"],["sub",["dot",["name","cameraMatrix"],"elements"],["num",0]]],["binary","*",["dot",["name","_vector3"],"y"],["sub",["dot",["name","cameraMatrix"],"elements"],["num",4]]]],["binary","*",["dot",["name","_vector3"],"z"],["sub",["dot",["name","cameraMatrix"],"elements"],["num",8]]]],["num",0.5]],["num",0.5]]]],["stat",["assign",true,["name","_uv1y"],["binary","+",["binary","*",["unary-prefix","-",["binary","+",["binary","+",["binary","*",["dot",["name","_vector3"],"x"],["sub",["dot",["name","cameraMatrix"],"elements"],["num",1]]],["binary","*",["dot",["name","_vector3"],"y"],["sub",["dot",["name","cameraMatrix"],"elements"],["num",5]]]],["binary","*",["dot",["name","_vector3"],"z"],["sub",["dot",["name","cameraMatrix"],"elements"],["num",9]]]]],["num",0.5]],["num",0.5]]]],["stat",["call",["dot",["name","_vector3"],"copy"],[["sub",["dot",["name","element"],"vertexNormalsWorld"],["name","uv2"]]]]],["stat",["assign",true,["name","_uv2x"],["binary","+",["binary","*",["binary","+",["binary","+",["binary","*",["dot",["name","_vector3"],"x"],["sub",["dot",["name","cameraMatrix"],"elements"],["num",0]]],["binary","*",["dot",["name","_vector3"],"y"],["sub",["dot",["name","cameraMatrix"],"elements"],["num",4]]]],["binary","*",["dot",["name","_vector3"],"z"],["sub",["dot",["name","cameraMatrix"],"elements"],["num",8]]]],["num",0.5]],["num",0.5]]]],["stat",["assign",true,["name","_uv2y"],["binary","+",["binary","*",["unary-prefix","-",["binary","+",["binary","+",["binary","*",["dot",["name","_vector3"],"x"],["sub",["dot",["name","cameraMatrix"],"elements"],["num",1]]],["binary","*",["dot",["name","_vector3"],"y"],["sub",["dot",["name","cameraMatrix"],"elements"],["num",5]]]],["binary","*",["dot",["name","_vector3"],"z"],["sub",["dot",["name","cameraMatrix"],"elements"],["num",9]]]]],["num",0.5]],["num",0.5]]]],["stat",["call",["dot",["name","_vector3"],"copy"],[["sub",["dot",["name","element"],"vertexNormalsWorld"],["name","uv3"]]]]],["stat",["assign",true,["name","_uv3x"],["binary","+",["binary","*",["binary","+",["binary","+",["binary","*",["dot",["name","_vector3"],"x"],["sub",["dot",["name","cameraMatrix"],"elements"],["num",0]]],["binary","*",["dot",["name","_vector3"],"y"],["sub",["dot",["name","cameraMatrix"],"elements"],["num",4]]]],["binary","*",["dot",["name","_vector3"],"z"],["sub",["dot",["name","cameraMatrix"],"elements"],["num",8]]]],["num",0.5]],["num",0.5]]]],["stat",["assign",true,["name","_uv3y"],["binary","+",["binary","*",["unary-prefix","-",["binary","+",["binary","+",["binary","*",["dot",["name","_vector3"],"x"],["sub",["dot",["name","cameraMatrix"],"elements"],["num",1]]],["binary","*",["dot",["name","_vector3"],"y"],["sub",["dot",["name","cameraMatrix"],"elements"],["num",5]]]],["binary","*",["dot",["name","_vector3"],"z"],["sub",["dot",["name","cameraMatrix"],"elements"],["num",9]]]]],["num",0.5]],["num",0.5]]]],["stat",["call",["name","patternPath"],[["name","_v1x"],["name","_v1y"],["name","_v2x"],["name","_v2y"],["name","_v3x"],["name","_v3y"],["name","_uv1x"],["name","_uv1y"],["name","_uv2x"],["name","_uv2y"],["name","_uv3x"],["name","_uv3y"],["dot",["name","material"],"envMap"]]]]]],null]]],["block",[["stat",["conditional",["dot",["name","material"],"wireframe"],["call",["name","strokePath"],[["dot",["name","material"],"color"],["dot",["name","material"],"wireframeLinewidth"],["dot",["name","material"],"wireframeLinecap"],["dot",["name","material"],"wireframeLinejoin"]]],["call",["name","fillPath"],[["dot",["name","material"],"color"]]]]]]]]]]],["if",["binary","instanceof",["name","material"],["dot",["name","THREE"],"MeshLambertMaterial"]],["block",[["if",["name","_enableLighting"],["block",[["if",["binary","&&",["binary","&&",["unary-prefix","!",["dot",["name","material"],"wireframe"]],["binary","==",["dot",["name","material"],"shading"],["dot",["name","THREE"],"SmoothShading"]]],["binary","==",["dot",["dot",["name","element"],"vertexNormalsWorld"],"length"],["num",3]]],["block",[["stat",["assign",true,["dot",["name","_color1"],"r"],["assign",true,["dot",["name","_color2"],"r"],["assign",true,["dot",["name","_color3"],"r"],["dot",["name","_ambientLight"],"r"]]]]],["stat",["assign",true,["dot",["name","_color1"],"g"],["assign",true,["dot",["name","_color2"],"g"],["assign",true,["dot",["name","_color3"],"g"],["dot",["name","_ambientLight"],"g"]]]]],["stat",["assign",true,["dot",["name","_color1"],"b"],["assign",true,["dot",["name","_color2"],"b"],["assign",true,["dot",["name","_color3"],"b"],["dot",["name","_ambientLight"],"b"]]]]],["stat",["call",["name","calculateLight"],[["name","_lights"],["dot",["dot",["name","element"],"v1"],"positionWorld"],["sub",["dot",["name","element"],"vertexNormalsWorld"],["num",0]],["name","_color1"]]]],["stat",["call",["name","calculateLight"],[["name","_lights"],["dot",["dot",["name","element"],"v2"],"positionWorld"],["sub",["dot",["name","element"],"vertexNormalsWorld"],["num",1]],["name","_color2"]]]],["stat",["call",["name","calculateLight"],[["name","_lights"],["dot",["dot",["name","element"],"v3"],"positionWorld"],["sub",["dot",["name","element"],"vertexNormalsWorld"],["num",2]],["name","_color3"]]]],["stat",["assign",true,["dot",["name","_color1"],"r"],["call",["dot",["name","Math"],"max"],[["num",0],["call",["dot",["name","Math"],"min"],[["binary","*",["dot",["dot",["name","material"],"color"],"r"],["dot",["name","_color1"],"r"]],["num",1]]]]]]],["stat",["assign",true,["dot",["name","_color1"],"g"],["call",["dot",["name","Math"],"max"],[["num",0],["call",["dot",["name","Math"],"min"],[["binary","*",["dot",["dot",["name","material"],"color"],"g"],["dot",["name","_color1"],"g"]],["num",1]]]]]]],["stat",["assign",true,["dot",["name","_color1"],"b"],["call",["dot",["name","Math"],"max"],[["num",0],["call",["dot",["name","Math"],"min"],[["binary","*",["dot",["dot",["name","material"],"color"],"b"],["dot",["name","_color1"],"b"]],["num",1]]]]]]],["stat",["assign",true,["dot",["name","_color2"],"r"],["call",["dot",["name","Math"],"max"],[["num",0],["call",["dot",["name","Math"],"min"],[["binary","*",["dot",["dot",["name","material"],"color"],"r"],["dot",["name","_color2"],"r"]],["num",1]]]]]]],["stat",["assign",true,["dot",["name","_color2"],"g"],["call",["dot",["name","Math"],"max"],[["num",0],["call",["dot",["name","Math"],"min"],[["binary","*",["dot",["dot",["name","material"],"color"],"g"],["dot",["name","_color2"],"g"]],["num",1]]]]]]],["stat",["assign",true,["dot",["name","_color2"],"b"],["call",["dot",["name","Math"],"max"],[["num",0],["call",["dot",["name","Math"],"min"],[["binary","*",["dot",["dot",["name","material"],"color"],"b"],["dot",["name","_color2"],"b"]],["num",1]]]]]]],["stat",["assign",true,["dot",["name","_color3"],"r"],["call",["dot",["name","Math"],"max"],[["num",0],["call",["dot",["name","Math"],"min"],[["binary","*",["dot",["dot",["name","material"],"color"],"r"],["dot",["name","_color3"],"r"]],["num",1]]]]]]],["stat",["assign",true,["dot",["name","_color3"],"g"],["call",["dot",["name","Math"],"max"],[["num",0],["call",["dot",["name","Math"],"min"],[["binary","*",["dot",["dot",["name","material"],"color"],"g"],["dot",["name","_color3"],"g"]],["num",1]]]]]]],["stat",["assign",true,["dot",["name","_color3"],"b"],["call",["dot",["name","Math"],"max"],[["num",0],["call",["dot",["name","Math"],"min"],[["binary","*",["dot",["dot",["name","material"],"color"],"b"],["dot",["name","_color3"],"b"]],["num",1]]]]]]],["stat",["assign",true,["dot",["name","_color4"],"r"],["binary","*",["binary","+",["dot",["name","_color2"],"r"],["dot",["name","_color3"],"r"]],["num",0.5]]]],["stat",["assign",true,["dot",["name","_color4"],"g"],["binary","*",["binary","+",["dot",["name","_color2"],"g"],["dot",["name","_color3"],"g"]],["num",0.5]]]],["stat",["assign",true,["dot",["name","_color4"],"b"],["binary","*",["binary","+",["dot",["name","_color2"],"b"],["dot",["name","_color3"],"b"]],["num",0.5]]]],["stat",["assign",true,["name","_image"],["call",["name","getGradientTexture"],[["name","_color1"],["name","_color2"],["name","_color3"],["name","_color4"]]]]],["stat",["call",["name","clipImage"],[["name","_v1x"],["name","_v1y"],["name","_v2x"],["name","_v2y"],["name","_v3x"],["name","_v3y"],["num",0],["num",0],["num",1],["num",0],["num",0],["num",1],["name","_image"]]]]]],["block",[["stat",["assign",true,["dot",["name","_color"],"r"],["dot",["name","_ambientLight"],"r"]]],["stat",["assign",true,["dot",["name","_color"],"g"],["dot",["name","_ambientLight"],"g"]]],["stat",["assign",true,["dot",["name","_color"],"b"],["dot",["name","_ambientLight"],"b"]]],["stat",["call",["name","calculateLight"],[["name","_lights"],["dot",["name","element"],"centroidWorld"],["dot",["name","element"],"normalWorld"],["name","_color"]]]],["stat",["assign",true,["dot",["name","_color"],"r"],["call",["dot",["name","Math"],"max"],[["num",0],["call",["dot",["name","Math"],"min"],[["binary","*",["dot",["dot",["name","material"],"color"],"r"],["dot",["name","_color"],"r"]],["num",1]]]]]]],["stat",["assign",true,["dot",["name","_color"],"g"],["call",["dot",["name","Math"],"max"],[["num",0],["call",["dot",["name","Math"],"min"],[["binary","*",["dot",["dot",["name","material"],"color"],"g"],["dot",["name","_color"],"g"]],["num",1]]]]]]],["stat",["assign",true,["dot",["name","_color"],"b"],["call",["dot",["name","Math"],"max"],[["num",0],["call",["dot",["name","Math"],"min"],[["binary","*",["dot",["dot",["name","material"],"color"],"b"],["dot",["name","_color"],"b"]],["num",1]]]]]]],["stat",["conditional",["dot",["name","material"],"wireframe"],["call",["name","strokePath"],[["name","_color"],["dot",["name","material"],"wireframeLinewidth"],["dot",["name","material"],"wireframeLinecap"],["dot",["name","material"],"wireframeLinejoin"]]],["call",["name","fillPath"],[["name","_color"]]]]]]]]]],["block",[["stat",["conditional",["dot",["name","material"],"wireframe"],["call",["name","strokePath"],[["dot",["name","material"],"color"],["dot",["name","material"],"wireframeLinewidth"],["dot",["name","material"],"wireframeLinecap"],["dot",["name","material"],"wireframeLinejoin"]]],["call",["name","fillPath"],[["dot",["name","material"],"color"]]]]]]]]]],["if",["binary","instanceof",["name","material"],["dot",["name","THREE"],"MeshDepthMaterial"]],["block",[["stat",["assign",true,["name","_near"],["dot",["name","camera"],"near"]]],["stat",["assign",true,["name","_far"],["dot",["name","camera"],"far"]]],["stat",["assign",true,["dot",["name","_color1"],"r"],["assign",true,["dot",["name","_color1"],"g"],["assign",true,["dot",["name","_color1"],"b"],["binary","-",["num",1],["call",["name","smoothstep"],[["dot",["dot",["name","v1"],"positionScreen"],"z"],["name","_near"],["name","_far"]]]]]]]],["stat",["assign",true,["dot",["name","_color2"],"r"],["assign",true,["dot",["name","_color2"],"g"],["assign",true,["dot",["name","_color2"],"b"],["binary","-",["num",1],["call",["name","smoothstep"],[["dot",["dot",["name","v2"],"positionScreen"],"z"],["name","_near"],["name","_far"]]]]]]]],["stat",["assign",true,["dot",["name","_color3"],"r"],["assign",true,["dot",["name","_color3"],"g"],["assign",true,["dot",["name","_color3"],"b"],["binary","-",["num",1],["call",["name","smoothstep"],[["dot",["dot",["name","v3"],"positionScreen"],"z"],["name","_near"],["name","_far"]]]]]]]],["stat",["assign",true,["dot",["name","_color4"],"r"],["binary","*",["binary","+",["dot",["name","_color2"],"r"],["dot",["name","_color3"],"r"]],["num",0.5]]]],["stat",["assign",true,["dot",["name","_color4"],"g"],["binary","*",["binary","+",["dot",["name","_color2"],"g"],["dot",["name","_color3"],"g"]],["num",0.5]]]],["stat",["assign",true,["dot",["name","_color4"],"b"],["binary","*",["binary","+",["dot",["name","_color2"],"b"],["dot",["name","_color3"],"b"]],["num",0.5]]]],["stat",["assign",true,["name","_image"],["call",["name","getGradientTexture"],[["name","_color1"],["name","_color2"],["name","_color3"],["name","_color4"]]]]],["stat",["call",["name","clipImage"],[["name","_v1x"],["name","_v1y"],["name","_v2x"],["name","_v2y"],["name","_v3x"],["name","_v3y"],["num",0],["num",0],["num",1],["num",0],["num",0],["num",1],["name","_image"]]]]]],["if",["binary","instanceof",["name","material"],["dot",["name","THREE"],"MeshNormalMaterial"]],["block",[["stat",["assign",true,["dot",["name","_color"],"r"],["call",["name","normalToComponent"],[["dot",["dot",["name","element"],"normalWorld"],"x"]]]]],["stat",["assign",true,["dot",["name","_color"],"g"],["call",["name","normalToComponent"],[["dot",["dot",["name","element"],"normalWorld"],"y"]]]]],["stat",["assign",true,["dot",["name","_color"],"b"],["call",["name","normalToComponent"],[["dot",["dot",["name","element"],"normalWorld"],"z"]]]]],["stat",["conditional",["dot",["name","material"],"wireframe"],["call",["name","strokePath"],[["name","_color"],["dot",["name","material"],"wireframeLinewidth"],["dot",["name","material"],"wireframeLinecap"],["dot",["name","material"],"wireframeLinejoin"]]],["call",["name","fillPath"],[["name","_color"]]]]]]],null]]]]]],["defun","renderFace4",["v1","v2","v3","v4","v5","v6","element","material","scene"],[["stat",["assign","+",["dot",["dot",["dot",["name","_this"],"info"],"render"],"vertices"],["num",4]]],["stat",["unary-postfix","++",["dot",["dot",["dot",["name","_this"],"info"],"render"],"faces"]]],["stat",["call",["name","setOpacity"],[["dot",["name","material"],"opacity"]]]],["stat",["call",["name","setBlending"],[["dot",["name","material"],"blending"]]]],["if",["binary","||",["dot",["name","material"],"map"],["dot",["name","material"],"envMap"]],["block",[["stat",["call",["name","renderFace3"],[["name","v1"],["name","v2"],["name","v4"],["num",0],["num",1],["num",3],["name","element"],["name","material"],["name","scene"]]]],["stat",["call",["name","renderFace3"],[["name","v5"],["name","v3"],["name","v6"],["num",1],["num",2],["num",3],["name","element"],["name","material"],["name","scene"]]]],["return",null]]],null],["stat",["assign",true,["name","_v1x"],["dot",["dot",["name","v1"],"positionScreen"],"x"]]],["stat",["assign",true,["name","_v1y"],["dot",["dot",["name","v1"],"positionScreen"],"y"]]],["stat",["assign",true,["name","_v2x"],["dot",["dot",["name","v2"],"positionScreen"],"x"]]],["stat",["assign",true,["name","_v2y"],["dot",["dot",["name","v2"],"positionScreen"],"y"]]],["stat",["assign",true,["name","_v3x"],["dot",["dot",["name","v3"],"positionScreen"],"x"]]],["stat",["assign",true,["name","_v3y"],["dot",["dot",["name","v3"],"positionScreen"],"y"]]],["stat",["assign",true,["name","_v4x"],["dot",["dot",["name","v4"],"positionScreen"],"x"]]],["stat",["assign",true,["name","_v4y"],["dot",["dot",["name","v4"],"positionScreen"],"y"]]],["stat",["assign",true,["name","_v5x"],["dot",["dot",["name","v5"],"positionScreen"],"x"]]],["stat",["assign",true,["name","_v5y"],["dot",["dot",["name","v5"],"positionScreen"],"y"]]],["stat",["assign",true,["name","_v6x"],["dot",["dot",["name","v6"],"positionScreen"],"x"]]],["stat",["assign",true,["name","_v6y"],["dot",["dot",["name","v6"],"positionScreen"],"y"]]],["if",["binary","instanceof",["name","material"],["dot",["name","THREE"],"MeshBasicMaterial"]],["block",[["stat",["call",["name","drawQuad"],[["name","_v1x"],["name","_v1y"],["name","_v2x"],["name","_v2y"],["name","_v3x"],["name","_v3y"],["name","_v4x"],["name","_v4y"]]]],["stat",["conditional",["dot",["name","material"],"wireframe"],["call",["name","strokePath"],[["dot",["name","material"],"color"],["dot",["name","material"],"wireframeLinewidth"],["dot",["name","material"],"wireframeLinecap"],["dot",["name","material"],"wireframeLinejoin"]]],["call",["name","fillPath"],[["dot",["name","material"],"color"]]]]]]],["if",["binary","instanceof",["name","material"],["dot",["name","THREE"],"MeshLambertMaterial"]],["block",[["if",["name","_enableLighting"],["block",[["if",["binary","&&",["binary","&&",["unary-prefix","!",["dot",["name","material"],"wireframe"]],["binary","==",["dot",["name","material"],"shading"],["dot",["name","THREE"],"SmoothShading"]]],["binary","==",["dot",["dot",["name","element"],"vertexNormalsWorld"],"length"],["num",4]]],["block",[["stat",["assign",true,["dot",["name","_color1"],"r"],["assign",true,["dot",["name","_color2"],"r"],["assign",true,["dot",["name","_color3"],"r"],["assign",true,["dot",["name","_color4"],"r"],["dot",["name","_ambientLight"],"r"]]]]]],["stat",["assign",true,["dot",["name","_color1"],"g"],["assign",true,["dot",["name","_color2"],"g"],["assign",true,["dot",["name","_color3"],"g"],["assign",true,["dot",["name","_color4"],"g"],["dot",["name","_ambientLight"],"g"]]]]]],["stat",["assign",true,["dot",["name","_color1"],"b"],["assign",true,["dot",["name","_color2"],"b"],["assign",true,["dot",["name","_color3"],"b"],["assign",true,["dot",["name","_color4"],"b"],["dot",["name","_ambientLight"],"b"]]]]]],["stat",["call",["name","calculateLight"],[["name","_lights"],["dot",["dot",["name","element"],"v1"],"positionWorld"],["sub",["dot",["name","element"],"vertexNormalsWorld"],["num",0]],["name","_color1"]]]],["stat",["call",["name","calculateLight"],[["name","_lights"],["dot",["dot",["name","element"],"v2"],"positionWorld"],["sub",["dot",["name","element"],"vertexNormalsWorld"],["num",1]],["name","_color2"]]]],["stat",["call",["name","calculateLight"],[["name","_lights"],["dot",["dot",["name","element"],"v4"],"positionWorld"],["sub",["dot",["name","element"],"vertexNormalsWorld"],["num",3]],["name","_color3"]]]],["stat",["call",["name","calculateLight"],[["name","_lights"],["dot",["dot",["name","element"],"v3"],"positionWorld"],["sub",["dot",["name","element"],"vertexNormalsWorld"],["num",2]],["name","_color4"]]]],["stat",["assign",true,["dot",["name","_color1"],"r"],["call",["dot",["name","Math"],"max"],[["num",0],["call",["dot",["name","Math"],"min"],[["binary","*",["dot",["dot",["name","material"],"color"],"r"],["dot",["name","_color1"],"r"]],["num",1]]]]]]],["stat",["assign",true,["dot",["name","_color1"],"g"],["call",["dot",["name","Math"],"max"],[["num",0],["call",["dot",["name","Math"],"min"],[["binary","*",["dot",["dot",["name","material"],"color"],"g"],["dot",["name","_color1"],"g"]],["num",1]]]]]]],["stat",["assign",true,["dot",["name","_color1"],"b"],["call",["dot",["name","Math"],"max"],[["num",0],["call",["dot",["name","Math"],"min"],[["binary","*",["dot",["dot",["name","material"],"color"],"b"],["dot",["name","_color1"],"b"]],["num",1]]]]]]],["stat",["assign",true,["dot",["name","_color2"],"r"],["call",["dot",["name","Math"],"max"],[["num",0],["call",["dot",["name","Math"],"min"],[["binary","*",["dot",["dot",["name","material"],"color"],"r"],["dot",["name","_color2"],"r"]],["num",1]]]]]]],["stat",["assign",true,["dot",["name","_color2"],"g"],["call",["dot",["name","Math"],"max"],[["num",0],["call",["dot",["name","Math"],"min"],[["binary","*",["dot",["dot",["name","material"],"color"],"g"],["dot",["name","_color2"],"g"]],["num",1]]]]]]],["stat",["assign",true,["dot",["name","_color2"],"b"],["call",["dot",["name","Math"],"max"],[["num",0],["call",["dot",["name","Math"],"min"],[["binary","*",["dot",["dot",["name","material"],"color"],"b"],["dot",["name","_color2"],"b"]],["num",1]]]]]]],["stat",["assign",true,["dot",["name","_color3"],"r"],["call",["dot",["name","Math"],"max"],[["num",0],["call",["dot",["name","Math"],"min"],[["binary","*",["dot",["dot",["name","material"],"color"],"r"],["dot",["name","_color3"],"r"]],["num",1]]]]]]],["stat",["assign",true,["dot",["name","_color3"],"g"],["call",["dot",["name","Math"],"max"],[["num",0],["call",["dot",["name","Math"],"min"],[["binary","*",["dot",["dot",["name","material"],"color"],"g"],["dot",["name","_color3"],"g"]],["num",1]]]]]]],["stat",["assign",true,["dot",["name","_color3"],"b"],["call",["dot",["name","Math"],"max"],[["num",0],["call",["dot",["name","Math"],"min"],[["binary","*",["dot",["dot",["name","material"],"color"],"b"],["dot",["name","_color3"],"b"]],["num",1]]]]]]],["stat",["assign",true,["dot",["name","_color4"],"r"],["call",["dot",["name","Math"],"max"],[["num",0],["call",["dot",["name","Math"],"min"],[["binary","*",["dot",["dot",["name","material"],"color"],"r"],["dot",["name","_color4"],"r"]],["num",1]]]]]]],["stat",["assign",true,["dot",["name","_color4"],"g"],["call",["dot",["name","Math"],"max"],[["num",0],["call",["dot",["name","Math"],"min"],[["binary","*",["dot",["dot",["name","material"],"color"],"g"],["dot",["name","_color4"],"g"]],["num",1]]]]]]],["stat",["assign",true,["dot",["name","_color4"],"b"],["call",["dot",["name","Math"],"max"],[["num",0],["call",["dot",["name","Math"],"min"],[["binary","*",["dot",["dot",["name","material"],"color"],"b"],["dot",["name","_color4"],"b"]],["num",1]]]]]]],["stat",["assign",true,["name","_image"],["call",["name","getGradientTexture"],[["name","_color1"],["name","_color2"],["name","_color3"],["name","_color4"]]]]],["stat",["call",["name","drawTriangle"],[["name","_v1x"],["name","_v1y"],["name","_v2x"],["name","_v2y"],["name","_v4x"],["name","_v4y"]]]],["stat",["call",["name","clipImage"],[["name","_v1x"],["name","_v1y"],["name","_v2x"],["name","_v2y"],["name","_v4x"],["name","_v4y"],["num",0],["num",0],["num",1],["num",0],["num",0],["num",1],["name","_image"]]]],["stat",["call",["name","drawTriangle"],[["name","_v5x"],["name","_v5y"],["name","_v3x"],["name","_v3y"],["name","_v6x"],["name","_v6y"]]]],["stat",["call",["name","clipImage"],[["name","_v5x"],["name","_v5y"],["name","_v3x"],["name","_v3y"],["name","_v6x"],["name","_v6y"],["num",1],["num",0],["num",1],["num",1],["num",0],["num",1],["name","_image"]]]]]],["block",[["stat",["assign",true,["dot",["name","_color"],"r"],["dot",["name","_ambientLight"],"r"]]],["stat",["assign",true,["dot",["name","_color"],"g"],["dot",["name","_ambientLight"],"g"]]],["stat",["assign",true,["dot",["name","_color"],"b"],["dot",["name","_ambientLight"],"b"]]],["stat",["call",["name","calculateLight"],[["name","_lights"],["dot",["name","element"],"centroidWorld"],["dot",["name","element"],"normalWorld"],["name","_color"]]]],["stat",["assign",true,["dot",["name","_color"],"r"],["call",["dot",["name","Math"],"max"],[["num",0],["call",["dot",["name","Math"],"min"],[["binary","*",["dot",["dot",["name","material"],"color"],"r"],["dot",["name","_color"],"r"]],["num",1]]]]]]],["stat",["assign",true,["dot",["name","_color"],"g"],["call",["dot",["name","Math"],"max"],[["num",0],["call",["dot",["name","Math"],"min"],[["binary","*",["dot",["dot",["name","material"],"color"],"g"],["dot",["name","_color"],"g"]],["num",1]]]]]]],["stat",["assign",true,["dot",["name","_color"],"b"],["call",["dot",["name","Math"],"max"],[["num",0],["call",["dot",["name","Math"],"min"],[["binary","*",["dot",["dot",["name","material"],"color"],"b"],["dot",["name","_color"],"b"]],["num",1]]]]]]],["stat",["call",["name","drawQuad"],[["name","_v1x"],["name","_v1y"],["name","_v2x"],["name","_v2y"],["name","_v3x"],["name","_v3y"],["name","_v4x"],["name","_v4y"]]]],["stat",["conditional",["dot",["name","material"],"wireframe"],["call",["name","strokePath"],[["name","_color"],["dot",["name","material"],"wireframeLinewidth"],["dot",["name","material"],"wireframeLinecap"],["dot",["name","material"],"wireframeLinejoin"]]],["call",["name","fillPath"],[["name","_color"]]]]]]]]]],["block",[["stat",["call",["name","drawQuad"],[["name","_v1x"],["name","_v1y"],["name","_v2x"],["name","_v2y"],["name","_v3x"],["name","_v3y"],["name","_v4x"],["name","_v4y"]]]],["stat",["conditional",["dot",["name","material"],"wireframe"],["call",["name","strokePath"],[["dot",["name","material"],"color"],["dot",["name","material"],"wireframeLinewidth"],["dot",["name","material"],"wireframeLinecap"],["dot",["name","material"],"wireframeLinejoin"]]],["call",["name","fillPath"],[["dot",["name","material"],"color"]]]]]]]]]],["if",["binary","instanceof",["name","material"],["dot",["name","THREE"],"MeshNormalMaterial"]],["block",[["stat",["assign",true,["dot",["name","_color"],"r"],["call",["name","normalToComponent"],[["dot",["dot",["name","element"],"normalWorld"],"x"]]]]],["stat",["assign",true,["dot",["name","_color"],"g"],["call",["name","normalToComponent"],[["dot",["dot",["name","element"],"normalWorld"],"y"]]]]],["stat",["assign",true,["dot",["name","_color"],"b"],["call",["name","normalToComponent"],[["dot",["dot",["name","element"],"normalWorld"],"z"]]]]],["stat",["call",["name","drawQuad"],[["name","_v1x"],["name","_v1y"],["name","_v2x"],["name","_v2y"],["name","_v3x"],["name","_v3y"],["name","_v4x"],["name","_v4y"]]]],["stat",["conditional",["dot",["name","material"],"wireframe"],["call",["name","strokePath"],[["name","_color"],["dot",["name","material"],"wireframeLinewidth"],["dot",["name","material"],"wireframeLinecap"],["dot",["name","material"],"wireframeLinejoin"]]],["call",["name","fillPath"],[["name","_color"]]]]]]],["if",["binary","instanceof",["name","material"],["dot",["name","THREE"],"MeshDepthMaterial"]],["block",[["stat",["assign",true,["name","_near"],["dot",["name","camera"],"near"]]],["stat",["assign",true,["name","_far"],["dot",["name","camera"],"far"]]],["stat",["assign",true,["dot",["name","_color1"],"r"],["assign",true,["dot",["name","_color1"],"g"],["assign",true,["dot",["name","_color1"],"b"],["binary","-",["num",1],["call",["name","smoothstep"],[["dot",["dot",["name","v1"],"positionScreen"],"z"],["name","_near"],["name","_far"]]]]]]]],["stat",["assign",true,["dot",["name","_color2"],"r"],["assign",true,["dot",["name","_color2"],"g"],["assign",true,["dot",["name","_color2"],"b"],["binary","-",["num",1],["call",["name","smoothstep"],[["dot",["dot",["name","v2"],"positionScreen"],"z"],["name","_near"],["name","_far"]]]]]]]],["stat",["assign",true,["dot",["name","_color3"],"r"],["assign",true,["dot",["name","_color3"],"g"],["assign",true,["dot",["name","_color3"],"b"],["binary","-",["num",1],["call",["name","smoothstep"],[["dot",["dot",["name","v4"],"positionScreen"],"z"],["name","_near"],["name","_far"]]]]]]]],["stat",["assign",true,["dot",["name","_color4"],"r"],["assign",true,["dot",["name","_color4"],"g"],["assign",true,["dot",["name","_color4"],"b"],["binary","-",["num",1],["call",["name","smoothstep"],[["dot",["dot",["name","v3"],"positionScreen"],"z"],["name","_near"],["name","_far"]]]]]]]],["stat",["assign",true,["name","_image"],["call",["name","getGradientTexture"],[["name","_color1"],["name","_color2"],["name","_color3"],["name","_color4"]]]]],["stat",["call",["name","drawTriangle"],[["name","_v1x"],["name","_v1y"],["name","_v2x"],["name","_v2y"],["name","_v4x"],["name","_v4y"]]]],["stat",["call",["name","clipImage"],[["name","_v1x"],["name","_v1y"],["name","_v2x"],["name","_v2y"],["name","_v4x"],["name","_v4y"],["num",0],["num",0],["num",1],["num",0],["num",0],["num",1],["name","_image"]]]],["stat",["call",["name","drawTriangle"],[["name","_v5x"],["name","_v5y"],["name","_v3x"],["name","_v3y"],["name","_v6x"],["name","_v6y"]]]],["stat",["call",["name","clipImage"],[["name","_v5x"],["name","_v5y"],["name","_v3x"],["name","_v3y"],["name","_v6x"],["name","_v6y"],["num",1],["num",0],["num",1],["num",1],["num",0],["num",1],["name","_image"]]]]]],null]]]]]],["defun","drawTriangle",["x0","y0","x1","y1","x2","y2"],[["stat",["call",["dot",["name","_context"],"beginPath"],[]]],["stat",["call",["dot",["name","_context"],"moveTo"],[["name","x0"],["name","y0"]]]],["stat",["call",["dot",["name","_context"],"lineTo"],[["name","x1"],["name","y1"]]]],["stat",["call",["dot",["name","_context"],"lineTo"],[["name","x2"],["name","y2"]]]],["stat",["call",["dot",["name","_context"],"lineTo"],[["name","x0"],["name","y0"]]]],["stat",["call",["dot",["name","_context"],"closePath"],[]]]]],["defun","drawQuad",["x0","y0","x1","y1","x2","y2","x3","y3"],[["stat",["call",["dot",["name","_context"],"beginPath"],[]]],["stat",["call",["dot",["name","_context"],"moveTo"],[["name","x0"],["name","y0"]]]],["stat",["call",["dot",["name","_context"],"lineTo"],[["name","x1"],["name","y1"]]]],["stat",["call",["dot",["name","_context"],"lineTo"],[["name","x2"],["name","y2"]]]],["stat",["call",["dot",["name","_context"],"lineTo"],[["name","x3"],["name","y3"]]]],["stat",["call",["dot",["name","_context"],"lineTo"],[["name","x0"],["name","y0"]]]],["stat",["call",["dot",["name","_context"],"closePath"],[]]]]],["defun","strokePath",["color","linewidth","linecap","linejoin"],[["stat",["call",["name","setLineWidth"],[["name","linewidth"]]]],["stat",["call",["name","setLineCap"],[["name","linecap"]]]],["stat",["call",["name","setLineJoin"],[["name","linejoin"]]]],["stat",["call",["name","setStrokeStyle"],[["call",["dot",["name","color"],"getContextStyle"],[]]]]],["stat",["call",["dot",["name","_context"],"stroke"],[]]],["stat",["call",["dot",["name","_bboxRect"],"inflate"],[["binary","*",["name","linewidth"],["num",2]]]]]]],["defun","fillPath",["color"],[["stat",["call",["name","setFillStyle"],[["call",["dot",["name","color"],"getContextStyle"],[]]]]],["stat",["call",["dot",["name","_context"],"fill"],[]]]]],["defun","patternPath",["x0","y0","x1","y1","x2","y2","u0","v0","u1","v1","u2","v2","texture"],[["if",["binary","==",["dot",["dot",["name","texture"],"image"],"width"],["num",0]],["return",null],null],["if",["binary","||",["binary","==",["dot",["name","texture"],"needsUpdate"],["name","true"]],["binary","==",["sub",["name","_patterns"],["dot",["name","texture"],"id"]],["name","undefined"]]],["block",[["var",[["repeatX",["binary","==",["dot",["name","texture"],"wrapS"],["dot",["name","THREE"],"RepeatWrapping"]]]]],["var",[["repeatY",["binary","==",["dot",["name","texture"],"wrapT"],["dot",["name","THREE"],"RepeatWrapping"]]]]],["stat",["assign",true,["sub",["name","_patterns"],["dot",["name","texture"],"id"]],["call",["dot",["name","_context"],"createPattern"],[["dot",["name","texture"],"image"],["conditional",["binary","&&",["name","repeatX"],["name","repeatY"]],["string","repeat"],["conditional",["binary","&&",["name","repeatX"],["unary-prefix","!",["name","repeatY"]]],["string","repeat-x"],["conditional",["binary","&&",["unary-prefix","!",["name","repeatX"]],["name","repeatY"]],["string","repeat-y"],["string","no-repeat"]]]]]]]],["stat",["assign",true,["dot",["name","texture"],"needsUpdate"],["name","false"]]]]],null],["stat",["call",["name","setFillStyle"],[["sub",["name","_patterns"],["dot",["name","texture"],"id"]]]]],["var",[["a"],["b"],["c"],["d"],["e"],["f"],["det"],["idet"],["offsetX",["binary","/",["dot",["dot",["name","texture"],"offset"],"x"],["dot",["dot",["name","texture"],"repeat"],"x"]]],["offsetY",["binary","/",["dot",["dot",["name","texture"],"offset"],"y"],["dot",["dot",["name","texture"],"repeat"],"y"]]],["width",["binary","*",["dot",["dot",["name","texture"],"image"],"width"],["dot",["dot",["name","texture"],"repeat"],"x"]]],["height",["binary","*",["dot",["dot",["name","texture"],"image"],"height"],["dot",["dot",["name","texture"],"repeat"],"y"]]]]],["stat",["assign",true,["name","u0"],["binary","*",["binary","+",["name","u0"],["name","offsetX"]],["name","width"]]]],["stat",["assign",true,["name","v0"],["binary","*",["binary","+",["name","v0"],["name","offsetY"]],["name","height"]]]],["stat",["assign",true,["name","u1"],["binary","*",["binary","+",["name","u1"],["name","offsetX"]],["name","width"]]]],["stat",["assign",true,["name","v1"],["binary","*",["binary","+",["name","v1"],["name","offsetY"]],["name","height"]]]],["stat",["assign",true,["name","u2"],["binary","*",["binary","+",["name","u2"],["name","offsetX"]],["name","width"]]]],["stat",["assign",true,["name","v2"],["binary","*",["binary","+",["name","v2"],["name","offsetY"]],["name","height"]]]],["stat",["assign","-",["name","x1"],["name","x0"]]],["stat",["assign","-",["name","y1"],["name","y0"]]],["stat",["assign","-",["name","x2"],["name","x0"]]],["stat",["assign","-",["name","y2"],["name","y0"]]],["stat",["assign","-",["name","u1"],["name","u0"]]],["stat",["assign","-",["name","v1"],["name","v0"]]],["stat",["assign","-",["name","u2"],["name","u0"]]],["stat",["assign","-",["name","v2"],["name","v0"]]],["stat",["assign",true,["name","det"],["binary","-",["binary","*",["name","u1"],["name","v2"]],["binary","*",["name","u2"],["name","v1"]]]]],["if",["binary","==",["name","det"],["num",0]],["block",[["if",["binary","===",["sub",["name","_imagedatas"],["dot",["name","texture"],"id"]],["name","undefined"]],["block",[["var",[["canvas",["call",["dot",["name","document"],"createElement"],[["string","canvas"]]]]]],["stat",["assign",true,["dot",["name","canvas"],"width"],["dot",["dot",["name","texture"],"image"],"width"]]],["stat",["assign",true,["dot",["name","canvas"],"height"],["dot",["dot",["name","texture"],"image"],"height"]]],["var",[["context",["call",["dot",["name","canvas"],"getContext"],[["string","2d"]]]]]],["stat",["call",["dot",["name","context"],"drawImage"],[["dot",["name","texture"],"image"],["num",0],["num",0]]]],["stat",["assign",true,["sub",["name","_imagedatas"],["dot",["name","texture"],"id"]],["dot",["call",["dot",["name","context"],"getImageData"],[["num",0],["num",0],["dot",["dot",["name","texture"],"image"],"width"],["dot",["dot",["name","texture"],"image"],"height"]]],"data"]]]]],null],["var",[["data",["sub",["name","_imagedatas"],["dot",["name","texture"],"id"]]]]],["var",[["index",["binary","*",["binary","+",["call",["dot",["name","Math"],"floor"],[["name","u0"]]],["binary","*",["call",["dot",["name","Math"],"floor"],[["name","v0"]]],["dot",["dot",["name","texture"],"image"],"width"]]],["num",4]]]]],["stat",["call",["dot",["name","_color"],"setRGB"],[["binary","/",["sub",["name","data"],["name","index"]],["num",255]],["binary","/",["sub",["name","data"],["binary","+",["name","index"],["num",1]]],["num",255]],["binary","/",["sub",["name","data"],["binary","+",["name","index"],["num",2]]],["num",255]]]]],["stat",["call",["name","fillPath"],[["name","_color"]]]],["return",null]]],null],["stat",["assign",true,["name","idet"],["binary","/",["num",1],["name","det"]]]],["stat",["assign",true,["name","a"],["binary","*",["binary","-",["binary","*",["name","v2"],["name","x1"]],["binary","*",["name","v1"],["name","x2"]]],["name","idet"]]]],["stat",["assign",true,["name","b"],["binary","*",["binary","-",["binary","*",["name","v2"],["name","y1"]],["binary","*",["name","v1"],["name","y2"]]],["name","idet"]]]],["stat",["assign",true,["name","c"],["binary","*",["binary","-",["binary","*",["name","u1"],["name","x2"]],["binary","*",["name","u2"],["name","x1"]]],["name","idet"]]]],["stat",["assign",true,["name","d"],["binary","*",["binary","-",["binary","*",["name","u1"],["name","y2"]],["binary","*",["name","u2"],["name","y1"]]],["name","idet"]]]],["stat",["assign",true,["name","e"],["binary","-",["binary","-",["name","x0"],["binary","*",["name","a"],["name","u0"]]],["binary","*",["name","c"],["name","v0"]]]]],["stat",["assign",true,["name","f"],["binary","-",["binary","-",["name","y0"],["binary","*",["name","b"],["name","u0"]]],["binary","*",["name","d"],["name","v0"]]]]],["stat",["call",["dot",["name","_context"],"save"],[]]],["stat",["call",["dot",["name","_context"],"transform"],[["name","a"],["name","b"],["name","c"],["name","d"],["name","e"],["name","f"]]]],["stat",["call",["dot",["name","_context"],"fill"],[]]],["stat",["call",["dot",["name","_context"],"restore"],[]]]]],["defun","clipImage",["x0","y0","x1","y1","x2","y2","u0","v0","u1","v1","u2","v2","image"],[["var",[["a"],["b"],["c"],["d"],["e"],["f"],["det"],["idet"],["width",["binary","-",["dot",["name","image"],"width"],["num",1]]],["height",["binary","-",["dot",["name","image"],"height"],["num",1]]]]],["stat",["assign","*",["name","u0"],["name","width"]]],["stat",["assign","*",["name","v0"],["name","height"]]],["stat",["assign","*",["name","u1"],["name","width"]]],["stat",["assign","*",["name","v1"],["name","height"]]],["stat",["assign","*",["name","u2"],["name","width"]]],["stat",["assign","*",["name","v2"],["name","height"]]],["stat",["assign","-",["name","x1"],["name","x0"]]],["stat",["assign","-",["name","y1"],["name","y0"]]],["stat",["assign","-",["name","x2"],["name","x0"]]],["stat",["assign","-",["name","y2"],["name","y0"]]],["stat",["assign","-",["name","u1"],["name","u0"]]],["stat",["assign","-",["name","v1"],["name","v0"]]],["stat",["assign","-",["name","u2"],["name","u0"]]],["stat",["assign","-",["name","v2"],["name","v0"]]],["stat",["assign",true,["name","det"],["binary","-",["binary","*",["name","u1"],["name","v2"]],["binary","*",["name","u2"],["name","v1"]]]]],["stat",["assign",true,["name","idet"],["binary","/",["num",1],["name","det"]]]],["stat",["assign",true,["name","a"],["binary","*",["binary","-",["binary","*",["name","v2"],["name","x1"]],["binary","*",["name","v1"],["name","x2"]]],["name","idet"]]]],["stat",["assign",true,["name","b"],["binary","*",["binary","-",["binary","*",["name","v2"],["name","y1"]],["binary","*",["name","v1"],["name","y2"]]],["name","idet"]]]],["stat",["assign",true,["name","c"],["binary","*",["binary","-",["binary","*",["name","u1"],["name","x2"]],["binary","*",["name","u2"],["name","x1"]]],["name","idet"]]]],["stat",["assign",true,["name","d"],["binary","*",["binary","-",["binary","*",["name","u1"],["name","y2"]],["binary","*",["name","u2"],["name","y1"]]],["name","idet"]]]],["stat",["assign",true,["name","e"],["binary","-",["binary","-",["name","x0"],["binary","*",["name","a"],["name","u0"]]],["binary","*",["name","c"],["name","v0"]]]]],["stat",["assign",true,["name","f"],["binary","-",["binary","-",["name","y0"],["binary","*",["name","b"],["name","u0"]]],["binary","*",["name","d"],["name","v0"]]]]],["stat",["call",["dot",["name","_context"],"save"],[]]],["stat",["call",["dot",["name","_context"],"transform"],[["name","a"],["name","b"],["name","c"],["name","d"],["name","e"],["name","f"]]]],["stat",["call",["dot",["name","_context"],"clip"],[]]],["stat",["call",["dot",["name","_context"],"drawImage"],[["name","image"],["num",0],["num",0]]]],["stat",["call",["dot",["name","_context"],"restore"],[]]]]],["defun","getGradientTexture",["color1","color2","color3","color4"],[["var",[["c1r",["unary-prefix","~",["unary-prefix","~",["binary","*",["dot",["name","color1"],"r"],["num",255]]]]],["c1g",["unary-prefix","~",["unary-prefix","~",["binary","*",["dot",["name","color1"],"g"],["num",255]]]]],["c1b",["unary-prefix","~",["unary-prefix","~",["binary","*",["dot",["name","color1"],"b"],["num",255]]]]],["c2r",["unary-prefix","~",["unary-prefix","~",["binary","*",["dot",["name","color2"],"r"],["num",255]]]]],["c2g",["unary-prefix","~",["unary-prefix","~",["binary","*",["dot",["name","color2"],"g"],["num",255]]]]],["c2b",["unary-prefix","~",["unary-prefix","~",["binary","*",["dot",["name","color2"],"b"],["num",255]]]]],["c3r",["unary-prefix","~",["unary-prefix","~",["binary","*",["dot",["name","color3"],"r"],["num",255]]]]],["c3g",["unary-prefix","~",["unary-prefix","~",["binary","*",["dot",["name","color3"],"g"],["num",255]]]]],["c3b",["unary-prefix","~",["unary-prefix","~",["binary","*",["dot",["name","color3"],"b"],["num",255]]]]],["c4r",["unary-prefix","~",["unary-prefix","~",["binary","*",["dot",["name","color4"],"r"],["num",255]]]]],["c4g",["unary-prefix","~",["unary-prefix","~",["binary","*",["dot",["name","color4"],"g"],["num",255]]]]],["c4b",["unary-prefix","~",["unary-prefix","~",["binary","*",["dot",["name","color4"],"b"],["num",255]]]]]]],["stat",["assign",true,["sub",["name","_pixelMapData"],["num",0]],["conditional",["binary","<",["name","c1r"],["num",0]],["num",0],["conditional",["binary",">",["name","c1r"],["num",255]],["num",255],["name","c1r"]]]]],["stat",["assign",true,["sub",["name","_pixelMapData"],["num",1]],["conditional",["binary","<",["name","c1g"],["num",0]],["num",0],["conditional",["binary",">",["name","c1g"],["num",255]],["num",255],["name","c1g"]]]]],["stat",["assign",true,["sub",["name","_pixelMapData"],["num",2]],["conditional",["binary","<",["name","c1b"],["num",0]],["num",0],["conditional",["binary",">",["name","c1b"],["num",255]],["num",255],["name","c1b"]]]]],["stat",["assign",true,["sub",["name","_pixelMapData"],["num",4]],["conditional",["binary","<",["name","c2r"],["num",0]],["num",0],["conditional",["binary",">",["name","c2r"],["num",255]],["num",255],["name","c2r"]]]]],["stat",["assign",true,["sub",["name","_pixelMapData"],["num",5]],["conditional",["binary","<",["name","c2g"],["num",0]],["num",0],["conditional",["binary",">",["name","c2g"],["num",255]],["num",255],["name","c2g"]]]]],["stat",["assign",true,["sub",["name","_pixelMapData"],["num",6]],["conditional",["binary","<",["name","c2b"],["num",0]],["num",0],["conditional",["binary",">",["name","c2b"],["num",255]],["num",255],["name","c2b"]]]]],["stat",["assign",true,["sub",["name","_pixelMapData"],["num",8]],["conditional",["binary","<",["name","c3r"],["num",0]],["num",0],["conditional",["binary",">",["name","c3r"],["num",255]],["num",255],["name","c3r"]]]]],["stat",["assign",true,["sub",["name","_pixelMapData"],["num",9]],["conditional",["binary","<",["name","c3g"],["num",0]],["num",0],["conditional",["binary",">",["name","c3g"],["num",255]],["num",255],["name","c3g"]]]]],["stat",["assign",true,["sub",["name","_pixelMapData"],["num",10]],["conditional",["binary","<",["name","c3b"],["num",0]],["num",0],["conditional",["binary",">",["name","c3b"],["num",255]],["num",255],["name","c3b"]]]]],["stat",["assign",true,["sub",["name","_pixelMapData"],["num",12]],["conditional",["binary","<",["name","c4r"],["num",0]],["num",0],["conditional",["binary",">",["name","c4r"],["num",255]],["num",255],["name","c4r"]]]]],["stat",["assign",true,["sub",["name","_pixelMapData"],["num",13]],["conditional",["binary","<",["name","c4g"],["num",0]],["num",0],["conditional",["binary",">",["name","c4g"],["num",255]],["num",255],["name","c4g"]]]]],["stat",["assign",true,["sub",["name","_pixelMapData"],["num",14]],["conditional",["binary","<",["name","c4b"],["num",0]],["num",0],["conditional",["binary",">",["name","c4b"],["num",255]],["num",255],["name","c4b"]]]]],["stat",["call",["dot",["name","_pixelMapContext"],"putImageData"],[["name","_pixelMapImage"],["num",0],["num",0]]]],["stat",["call",["dot",["name","_gradientMapContext"],"drawImage"],[["name","_pixelMap"],["num",0],["num",0]]]],["return",["name","_gradientMap"]]]],["defun","smoothstep",["value","min","max"],[["var",[["x",["binary","/",["binary","-",["name","value"],["name","min"]],["binary","-",["name","max"],["name","min"]]]]]],["return",["binary","*",["binary","*",["name","x"],["name","x"]],["binary","-",["num",3],["binary","*",["num",2],["name","x"]]]]]]],["defun","normalToComponent",["normal"],[["var",[["component",["binary","*",["binary","+",["name","normal"],["num",1]],["num",0.5]]]]],["return",["conditional",["binary","<",["name","component"],["num",0]],["num",0],["conditional",["binary",">",["name","component"],["num",1]],["num",1],["name","component"]]]]]],["defun","expand",["v1","v2"],[["var",[["x",["binary","-",["dot",["name","v2"],"x"],["dot",["name","v1"],"x"]]],["y",["binary","-",["dot",["name","v2"],"y"],["dot",["name","v1"],"y"]]],["det",["binary","+",["binary","*",["name","x"],["name","x"]],["binary","*",["name","y"],["name","y"]]]],["idet"]]],["if",["binary","==",["name","det"],["num",0]],["return",null],null],["stat",["assign",true,["name","idet"],["binary","/",["num",1],["call",["dot",["name","Math"],"sqrt"],[["name","det"]]]]]],["stat",["assign","*",["name","x"],["name","idet"]]],["stat",["assign","*",["name","y"],["name","idet"]]],["stat",["assign","+",["dot",["name","v2"],"x"],["name","x"]]],["stat",["assign","+",["dot",["name","v2"],"y"],["name","y"]]],["stat",["assign","-",["dot",["name","v1"],"x"],["name","x"]]],["stat",["assign","-",["dot",["name","v1"],"y"],["name","y"]]]]]]]]],["defun","setOpacity",["value"],[["if",["binary","!=",["name","_contextGlobalAlpha"],["name","value"]],["block",[["stat",["assign",true,["dot",["name","_context"],"globalAlpha"],["assign",true,["name","_contextGlobalAlpha"],["name","value"]]]]]],null]]],["defun","setBlending",["value"],[["if",["binary","!=",["name","_contextGlobalCompositeOperation"],["name","value"]],["block",[["switch",["name","value"],[[["dot",["name","THREE"],"NormalBlending"],[["stat",["assign",true,["dot",["name","_context"],"globalCompositeOperation"],["string","source-over"]]],["break",null]]],[["dot",["name","THREE"],"AdditiveBlending"],[["stat",["assign",true,["dot",["name","_context"],"globalCompositeOperation"],["string","lighter"]]],["break",null]]]]],["stat",["assign",true,["name","_contextGlobalCompositeOperation"],["name","value"]]]]],null]]],["defun","setLineWidth",["value"],[["if",["binary","!=",["name","_contextLineWidth"],["name","value"]],["block",[["stat",["assign",true,["dot",["name","_context"],"lineWidth"],["assign",true,["name","_contextLineWidth"],["name","value"]]]]]],null]]],["defun","setLineCap",["value"],[["if",["binary","!=",["name","_contextLineCap"],["name","value"]],["block",[["stat",["assign",true,["dot",["name","_context"],"lineCap"],["assign",true,["name","_contextLineCap"],["name","value"]]]]]],null]]],["defun","setLineJoin",["value"],[["if",["binary","!=",["name","_contextLineJoin"],["name","value"]],["block",[["stat",["assign",true,["dot",["name","_context"],"lineJoin"],["assign",true,["name","_contextLineJoin"],["name","value"]]]]]],null]]],["defun","setStrokeStyle",["style"],[["if",["binary","!=",["name","_contextStrokeStyle"],["name","style"]],["block",[["stat",["assign",true,["dot",["name","_context"],"strokeStyle"],["assign",true,["name","_contextStrokeStyle"],["name","style"]]]]]],null]]],["defun","setFillStyle",["style"],[["if",["binary","!=",["name","_contextFillStyle"],["name","style"]],["block",[["stat",["assign",true,["dot",["name","_context"],"fillStyle"],["assign",true,["name","_contextFillStyle"],["name","style"]]]]]],null]]]]]]],["stat",["assign",true,["dot",["name","THREE"],"SVGRenderer"],["function",null,[],[["stat",["call",["dot",["name","console"],"log"],[["string","THREE.SVGRenderer"],["dot",["name","THREE"],"REVISION"]]]],["var",[["_this",["name","this"]],["_renderData"],["_elements"],["_lights"],["_projector",["new",["dot",["name","THREE"],"Projector"],[]]],["_svg",["call",["dot",["name","document"],"createElementNS"],[["string","http://www.w3.org/2000/svg"],["string","svg"]]]],["_svgWidth"],["_svgHeight"],["_svgWidthHalf"],["_svgHeightHalf"],["_v1"],["_v2"],["_v3"],["_v4"],["_clipRect",["new",["dot",["name","THREE"],"Rectangle"],[]]],["_bboxRect",["new",["dot",["name","THREE"],"Rectangle"],[]]],["_enableLighting",["name","false"]],["_color",["new",["dot",["name","THREE"],"Color"],[]]],["_ambientLight",["new",["dot",["name","THREE"],"Color"],[]]],["_directionalLights",["new",["dot",["name","THREE"],"Color"],[]]],["_pointLights",["new",["dot",["name","THREE"],"Color"],[]]],["_w"],["_vector3",["new",["dot",["name","THREE"],"Vector3"],[]]],["_svgPathPool",["array",[]]],["_svgCirclePool",["array",[]]],["_svgLinePool",["array",[]]],["_svgNode"],["_pathCount"],["_circleCount"],["_lineCount"],["_quality",["num",1]]]],["stat",["assign",true,["dot",["name","this"],"domElement"],["name","_svg"]]],["stat",["assign",true,["dot",["name","this"],"autoClear"],["name","true"]]],["stat",["assign",true,["dot",["name","this"],"sortObjects"],["name","true"]]],["stat",["assign",true,["dot",["name","this"],"sortElements"],["name","true"]]],["stat",["assign",true,["dot",["name","this"],"info"],["object",[["render",["object",[["vertices",["num",0]],["faces",["num",0]]]]]]]]],["stat",["assign",true,["dot",["name","this"],"setQuality"],["function",null,["quality"],[["switch",["name","quality"],[[["string","high"],[["stat",["assign",true,["name","_quality"],["num",1]]],["break",null]]],[["string","low"],[["stat",["assign",true,["name","_quality"],["num",0]]],["break",null]]]]]]]]],["stat",["assign",true,["dot",["name","this"],"setSize"],["function",null,["width","height"],[["stat",["assign",true,["name","_svgWidth"],["name","width"]]],["stat",["assign",true,["name","_svgHeight"],["name","height"]]],["stat",["assign",true,["name","_svgWidthHalf"],["binary","/",["name","_svgWidth"],["num",2]]]],["stat",["assign",true,["name","_svgHeightHalf"],["binary","/",["name","_svgHeight"],["num",2]]]],["stat",["call",["dot",["name","_svg"],"setAttribute"],[["string","viewBox"],["binary","+",["binary","+",["binary","+",["binary","+",["binary","+",["binary","+",["unary-prefix","-",["name","_svgWidthHalf"]],["string"," "]],["unary-prefix","-",["name","_svgHeightHalf"]]],["string"," "]],["name","_svgWidth"]],["string"," "]],["name","_svgHeight"]]]]],["stat",["call",["dot",["name","_svg"],"setAttribute"],[["string","width"],["name","_svgWidth"]]]],["stat",["call",["dot",["name","_svg"],"setAttribute"],[["string","height"],["name","_svgHeight"]]]],["stat",["call",["dot",["name","_clipRect"],"set"],[["unary-prefix","-",["name","_svgWidthHalf"]],["unary-prefix","-",["name","_svgHeightHalf"]],["name","_svgWidthHalf"],["name","_svgHeightHalf"]]]]]]]],["stat",["assign",true,["dot",["name","this"],"clear"],["function",null,[],[["while",["binary",">",["dot",["dot",["name","_svg"],"childNodes"],"length"],["num",0]],["block",[["stat",["call",["dot",["name","_svg"],"removeChild"],[["sub",["dot",["name","_svg"],"childNodes"],["num",0]]]]]]]]]]]],["stat",["assign",true,["dot",["name","this"],"render"],["function",null,["scene","camera"],[["var",[["e"],["el"],["element"],["material"]]],["stat",["binary","&&",["dot",["name","this"],"autoClear"],["call",["dot",["name","this"],"clear"],[]]]],["stat",["assign",true,["dot",["dot",["dot",["name","_this"],"info"],"render"],"vertices"],["num",0]]],["stat",["assign",true,["dot",["dot",["dot",["name","_this"],"info"],"render"],"faces"],["num",0]]],["stat",["assign",true,["name","_renderData"],["call",["dot",["name","_projector"],"projectScene"],[["name","scene"],["name","camera"],["dot",["name","this"],"sortElements"]]]]],["stat",["assign",true,["name","_elements"],["dot",["name","_renderData"],"elements"]]],["stat",["assign",true,["name","_lights"],["dot",["name","_renderData"],"lights"]]],["stat",["assign",true,["name","_pathCount"],["num",0]]],["stat",["assign",true,["name","_circleCount"],["num",0]]],["stat",["assign",true,["name","_lineCount"],["num",0]]],["stat",["assign",true,["name","_enableLighting"],["binary",">",["dot",["name","_lights"],"length"],["num",0]]]],["if",["name","_enableLighting"],["block",[["stat",["call",["name","calculateLights"],[["name","_lights"]]]]]],null],["for",["seq",["assign",true,["name","e"],["num",0]],["assign",true,["name","el"],["dot",["name","_elements"],"length"]]],["binary","<",["name","e"],["name","el"]],["unary-postfix","++",["name","e"]],["block",[["stat",["assign",true,["name","element"],["sub",["name","_elements"],["name","e"]]]],["stat",["assign",true,["name","material"],["dot",["name","element"],"material"]]],["stat",["assign",true,["name","material"],["conditional",["binary","instanceof",["name","material"],["dot",["name","THREE"],"MeshFaceMaterial"]],["dot",["name","element"],"faceMaterial"],["name","material"]]]],["if",["binary","||",["binary","===",["name","material"],["name","undefined"]],["binary","===",["dot",["name","material"],"visible"],["name","false"]]],["continue",null],null],["stat",["call",["dot",["name","_bboxRect"],"empty"],[]]],["if",["binary","instanceof",["name","element"],["dot",["name","THREE"],"RenderableParticle"]],["block",[["stat",["assign",true,["name","_v1"],["name","element"]]],["stat",["assign","*",["dot",["name","_v1"],"x"],["name","_svgWidthHalf"]]],["stat",["assign","*",["dot",["name","_v1"],"y"],["unary-prefix","-",["name","_svgHeightHalf"]]]],["stat",["call",["name","renderParticle"],[["name","_v1"],["name","element"],["name","material"],["name","scene"]]]]]],["if",["binary","instanceof",["name","element"],["dot",["name","THREE"],"RenderableLine"]],["block",[["stat",["assign",true,["name","_v1"],["dot",["name","element"],"v1"]]],["stat",["assign",true,["name","_v2"],["dot",["name","element"],"v2"]]],["stat",["assign","*",["dot",["dot",["name","_v1"],"positionScreen"],"x"],["name","_svgWidthHalf"]]],["stat",["assign","*",["dot",["dot",["name","_v1"],"positionScreen"],"y"],["unary-prefix","-",["name","_svgHeightHalf"]]]],["stat",["assign","*",["dot",["dot",["name","_v2"],"positionScreen"],"x"],["name","_svgWidthHalf"]]],["stat",["assign","*",["dot",["dot",["name","_v2"],"positionScreen"],"y"],["unary-prefix","-",["name","_svgHeightHalf"]]]],["stat",["call",["dot",["name","_bboxRect"],"addPoint"],[["dot",["dot",["name","_v1"],"positionScreen"],"x"],["dot",["dot",["name","_v1"],"positionScreen"],"y"]]]],["stat",["call",["dot",["name","_bboxRect"],"addPoint"],[["dot",["dot",["name","_v2"],"positionScreen"],"x"],["dot",["dot",["name","_v2"],"positionScreen"],"y"]]]],["if",["unary-prefix","!",["call",["dot",["name","_clipRect"],"intersects"],[["name","_bboxRect"]]]],["block",[["continue",null]]],null],["stat",["call",["name","renderLine"],[["name","_v1"],["name","_v2"],["name","element"],["name","material"],["name","scene"]]]]]],["if",["binary","instanceof",["name","element"],["dot",["name","THREE"],"RenderableFace3"]],["block",[["stat",["assign",true,["name","_v1"],["dot",["name","element"],"v1"]]],["stat",["assign",true,["name","_v2"],["dot",["name","element"],"v2"]]],["stat",["assign",true,["name","_v3"],["dot",["name","element"],"v3"]]],["stat",["assign","*",["dot",["dot",["name","_v1"],"positionScreen"],"x"],["name","_svgWidthHalf"]]],["stat",["assign","*",["dot",["dot",["name","_v1"],"positionScreen"],"y"],["unary-prefix","-",["name","_svgHeightHalf"]]]],["stat",["assign","*",["dot",["dot",["name","_v2"],"positionScreen"],"x"],["name","_svgWidthHalf"]]],["stat",["assign","*",["dot",["dot",["name","_v2"],"positionScreen"],"y"],["unary-prefix","-",["name","_svgHeightHalf"]]]],["stat",["assign","*",["dot",["dot",["name","_v3"],"positionScreen"],"x"],["name","_svgWidthHalf"]]],["stat",["assign","*",["dot",["dot",["name","_v3"],"positionScreen"],"y"],["unary-prefix","-",["name","_svgHeightHalf"]]]],["stat",["call",["dot",["name","_bboxRect"],"addPoint"],[["dot",["dot",["name","_v1"],"positionScreen"],"x"],["dot",["dot",["name","_v1"],"positionScreen"],"y"]]]],["stat",["call",["dot",["name","_bboxRect"],"addPoint"],[["dot",["dot",["name","_v2"],"positionScreen"],"x"],["dot",["dot",["name","_v2"],"positionScreen"],"y"]]]],["stat",["call",["dot",["name","_bboxRect"],"addPoint"],[["dot",["dot",["name","_v3"],"positionScreen"],"x"],["dot",["dot",["name","_v3"],"positionScreen"],"y"]]]],["if",["unary-prefix","!",["call",["dot",["name","_clipRect"],"intersects"],[["name","_bboxRect"]]]],["block",[["continue",null]]],null],["stat",["call",["name","renderFace3"],[["name","_v1"],["name","_v2"],["name","_v3"],["name","element"],["name","material"],["name","scene"]]]]]],["if",["binary","instanceof",["name","element"],["dot",["name","THREE"],"RenderableFace4"]],["block",[["stat",["assign",true,["name","_v1"],["dot",["name","element"],"v1"]]],["stat",["assign",true,["name","_v2"],["dot",["name","element"],"v2"]]],["stat",["assign",true,["name","_v3"],["dot",["name","element"],"v3"]]],["stat",["assign",true,["name","_v4"],["dot",["name","element"],"v4"]]],["stat",["assign","*",["dot",["dot",["name","_v1"],"positionScreen"],"x"],["name","_svgWidthHalf"]]],["stat",["assign","*",["dot",["dot",["name","_v1"],"positionScreen"],"y"],["unary-prefix","-",["name","_svgHeightHalf"]]]],["stat",["assign","*",["dot",["dot",["name","_v2"],"positionScreen"],"x"],["name","_svgWidthHalf"]]],["stat",["assign","*",["dot",["dot",["name","_v2"],"positionScreen"],"y"],["unary-prefix","-",["name","_svgHeightHalf"]]]],["stat",["assign","*",["dot",["dot",["name","_v3"],"positionScreen"],"x"],["name","_svgWidthHalf"]]],["stat",["assign","*",["dot",["dot",["name","_v3"],"positionScreen"],"y"],["unary-prefix","-",["name","_svgHeightHalf"]]]],["stat",["assign","*",["dot",["dot",["name","_v4"],"positionScreen"],"x"],["name","_svgWidthHalf"]]],["stat",["assign","*",["dot",["dot",["name","_v4"],"positionScreen"],"y"],["unary-prefix","-",["name","_svgHeightHalf"]]]],["stat",["call",["dot",["name","_bboxRect"],"addPoint"],[["dot",["dot",["name","_v1"],"positionScreen"],"x"],["dot",["dot",["name","_v1"],"positionScreen"],"y"]]]],["stat",["call",["dot",["name","_bboxRect"],"addPoint"],[["dot",["dot",["name","_v2"],"positionScreen"],"x"],["dot",["dot",["name","_v2"],"positionScreen"],"y"]]]],["stat",["call",["dot",["name","_bboxRect"],"addPoint"],[["dot",["dot",["name","_v3"],"positionScreen"],"x"],["dot",["dot",["name","_v3"],"positionScreen"],"y"]]]],["stat",["call",["dot",["name","_bboxRect"],"addPoint"],[["dot",["dot",["name","_v4"],"positionScreen"],"x"],["dot",["dot",["name","_v4"],"positionScreen"],"y"]]]],["if",["unary-prefix","!",["call",["dot",["name","_clipRect"],"intersects"],[["name","_bboxRect"]]]],["block",[["continue",null]]],null],["stat",["call",["name","renderFace4"],[["name","_v1"],["name","_v2"],["name","_v3"],["name","_v4"],["name","element"],["name","material"],["name","scene"]]]]]],null]]]]]]]]]]],["defun","calculateLights",["lights"],[["var",[["l"],["ll"],["light"],["lightColor"]]],["stat",["call",["dot",["name","_ambientLight"],"setRGB"],[["num",0],["num",0],["num",0]]]],["stat",["call",["dot",["name","_directionalLights"],"setRGB"],[["num",0],["num",0],["num",0]]]],["stat",["call",["dot",["name","_pointLights"],"setRGB"],[["num",0],["num",0],["num",0]]]],["for",["seq",["assign",true,["name","l"],["num",0]],["assign",true,["name","ll"],["dot",["name","lights"],"length"]]],["binary","<",["name","l"],["name","ll"]],["unary-postfix","++",["name","l"]],["block",[["stat",["assign",true,["name","light"],["sub",["name","lights"],["name","l"]]]],["stat",["assign",true,["name","lightColor"],["dot",["name","light"],"color"]]],["if",["binary","instanceof",["name","light"],["dot",["name","THREE"],"AmbientLight"]],["block",[["stat",["assign","+",["dot",["name","_ambientLight"],"r"],["dot",["name","lightColor"],"r"]]],["stat",["assign","+",["dot",["name","_ambientLight"],"g"],["dot",["name","lightColor"],"g"]]],["stat",["assign","+",["dot",["name","_ambientLight"],"b"],["dot",["name","lightColor"],"b"]]]]],["if",["binary","instanceof",["name","light"],["dot",["name","THREE"],"DirectionalLight"]],["block",[["stat",["assign","+",["dot",["name","_directionalLights"],"r"],["dot",["name","lightColor"],"r"]]],["stat",["assign","+",["dot",["name","_directionalLights"],"g"],["dot",["name","lightColor"],"g"]]],["stat",["assign","+",["dot",["name","_directionalLights"],"b"],["dot",["name","lightColor"],"b"]]]]],["if",["binary","instanceof",["name","light"],["dot",["name","THREE"],"PointLight"]],["block",[["stat",["assign","+",["dot",["name","_pointLights"],"r"],["dot",["name","lightColor"],"r"]]],["stat",["assign","+",["dot",["name","_pointLights"],"g"],["dot",["name","lightColor"],"g"]]],["stat",["assign","+",["dot",["name","_pointLights"],"b"],["dot",["name","lightColor"],"b"]]]]],null]]]]]]]],["defun","calculateLight",["lights","position","normal","color"],[["var",[["l"],["ll"],["light"],["lightColor"],["lightPosition"],["amount"]]],["for",["seq",["assign",true,["name","l"],["num",0]],["assign",true,["name","ll"],["dot",["name","lights"],"length"]]],["binary","<",["name","l"],["name","ll"]],["unary-postfix","++",["name","l"]],["block",[["stat",["assign",true,["name","light"],["sub",["name","lights"],["name","l"]]]],["stat",["assign",true,["name","lightColor"],["dot",["name","light"],"color"]]],["if",["binary","instanceof",["name","light"],["dot",["name","THREE"],"DirectionalLight"]],["block",[["stat",["assign",true,["name","lightPosition"],["call",["dot",["dot",["name","light"],"matrixWorld"],"getPosition"],[]]]],["stat",["assign",true,["name","amount"],["call",["dot",["name","normal"],"dot"],[["name","lightPosition"]]]]],["if",["binary","<=",["name","amount"],["num",0]],["continue",null],null],["stat",["assign","*",["name","amount"],["dot",["name","light"],"intensity"]]],["stat",["assign","+",["dot",["name","color"],"r"],["binary","*",["dot",["name","lightColor"],"r"],["name","amount"]]]],["stat",["assign","+",["dot",["name","color"],"g"],["binary","*",["dot",["name","lightColor"],"g"],["name","amount"]]]],["stat",["assign","+",["dot",["name","color"],"b"],["binary","*",["dot",["name","lightColor"],"b"],["name","amount"]]]]]],["if",["binary","instanceof",["name","light"],["dot",["name","THREE"],"PointLight"]],["block",[["stat",["assign",true,["name","lightPosition"],["call",["dot",["dot",["name","light"],"matrixWorld"],"getPosition"],[]]]],["stat",["assign",true,["name","amount"],["call",["dot",["name","normal"],"dot"],[["call",["dot",["call",["dot",["name","_vector3"],"sub"],[["name","lightPosition"],["name","position"]]],"normalize"],[]]]]]],["if",["binary","<=",["name","amount"],["num",0]],["continue",null],null],["stat",["assign","*",["name","amount"],["conditional",["binary","==",["dot",["name","light"],"distance"],["num",0]],["num",1],["binary","-",["num",1],["call",["dot",["name","Math"],"min"],[["binary","/",["call",["dot",["name","position"],"distanceTo"],[["name","lightPosition"]]],["dot",["name","light"],"distance"]],["num",1]]]]]]],["if",["binary","==",["name","amount"],["num",0]],["continue",null],null],["stat",["assign","*",["name","amount"],["dot",["name","light"],"intensity"]]],["stat",["assign","+",["dot",["name","color"],"r"],["binary","*",["dot",["name","lightColor"],"r"],["name","amount"]]]],["stat",["assign","+",["dot",["name","color"],"g"],["binary","*",["dot",["name","lightColor"],"g"],["name","amount"]]]],["stat",["assign","+",["dot",["name","color"],"b"],["binary","*",["dot",["name","lightColor"],"b"],["name","amount"]]]]]],null]]]]]]],["defun","renderParticle",["v1","element","material","scene"],[]],["defun","renderLine",["v1","v2","element","material","scene"],[["stat",["assign",true,["name","_svgNode"],["call",["name","getLineNode"],[["unary-postfix","++",["name","_lineCount"]]]]]],["stat",["call",["dot",["name","_svgNode"],"setAttribute"],[["string","x1"],["dot",["dot",["name","v1"],"positionScreen"],"x"]]]],["stat",["call",["dot",["name","_svgNode"],"setAttribute"],[["string","y1"],["dot",["dot",["name","v1"],"positionScreen"],"y"]]]],["stat",["call",["dot",["name","_svgNode"],"setAttribute"],[["string","x2"],["dot",["dot",["name","v2"],"positionScreen"],"x"]]]],["stat",["call",["dot",["name","_svgNode"],"setAttribute"],[["string","y2"],["dot",["dot",["name","v2"],"positionScreen"],"y"]]]],["if",["binary","instanceof",["name","material"],["dot",["name","THREE"],"LineBasicMaterial"]],["block",[["stat",["call",["dot",["name","_svgNode"],"setAttribute"],[["string","style"],["binary","+",["binary","+",["binary","+",["binary","+",["binary","+",["binary","+",["binary","+",["binary","+",["binary","+",["string","fill: none; stroke: "],["call",["dot",["dot",["name","material"],"color"],"getContextStyle"],[]]],["string","; stroke-width: "]],["dot",["name","material"],"linewidth"]],["string","; stroke-opacity: "]],["dot",["name","material"],"opacity"]],["string","; stroke-linecap: "]],["dot",["name","material"],"linecap"]],["string","; stroke-linejoin: "]],["dot",["name","material"],"linejoin"]]]]],["stat",["call",["dot",["name","_svg"],"appendChild"],[["name","_svgNode"]]]]]],null]]],["defun","renderFace3",["v1","v2","v3","element","material","scene"],[["stat",["assign","+",["dot",["dot",["dot",["name","_this"],"info"],"render"],"vertices"],["num",3]]],["stat",["unary-postfix","++",["dot",["dot",["dot",["name","_this"],"info"],"render"],"faces"]]],["stat",["assign",true,["name","_svgNode"],["call",["name","getPathNode"],[["unary-postfix","++",["name","_pathCount"]]]]]],["stat",["call",["dot",["name","_svgNode"],"setAttribute"],[["string","d"],["binary","+",["binary","+",["binary","+",["binary","+",["binary","+",["binary","+",["binary","+",["binary","+",["binary","+",["binary","+",["binary","+",["binary","+",["string","M "],["dot",["dot",["name","v1"],"positionScreen"],"x"]],["string"," "]],["dot",["dot",["name","v1"],"positionScreen"],"y"]],["string"," L "]],["dot",["dot",["name","v2"],"positionScreen"],"x"]],["string"," "]],["dot",["dot",["name","v2"],"positionScreen"],"y"]],["string"," L "]],["dot",["dot",["name","v3"],"positionScreen"],"x"]],["string",","]],["dot",["dot",["name","v3"],"positionScreen"],"y"]],["string","z"]]]]],["if",["binary","instanceof",["name","material"],["dot",["name","THREE"],"MeshBasicMaterial"]],["block",[["stat",["call",["dot",["name","_color"],"copy"],[["dot",["name","material"],"color"]]]]]],["if",["binary","instanceof",["name","material"],["dot",["name","THREE"],"MeshLambertMaterial"]],["block",[["if",["name","_enableLighting"],["block",[["stat",["assign",true,["dot",["name","_color"],"r"],["dot",["name","_ambientLight"],"r"]]],["stat",["assign",true,["dot",["name","_color"],"g"],["dot",["name","_ambientLight"],"g"]]],["stat",["assign",true,["dot",["name","_color"],"b"],["dot",["name","_ambientLight"],"b"]]],["stat",["call",["name","calculateLight"],[["name","_lights"],["dot",["name","element"],"centroidWorld"],["dot",["name","element"],"normalWorld"],["name","_color"]]]],["stat",["assign",true,["dot",["name","_color"],"r"],["call",["dot",["name","Math"],"max"],[["num",0],["call",["dot",["name","Math"],"min"],[["binary","*",["dot",["dot",["name","material"],"color"],"r"],["dot",["name","_color"],"r"]],["num",1]]]]]]],["stat",["assign",true,["dot",["name","_color"],"g"],["call",["dot",["name","Math"],"max"],[["num",0],["call",["dot",["name","Math"],"min"],[["binary","*",["dot",["dot",["name","material"],"color"],"g"],["dot",["name","_color"],"g"]],["num",1]]]]]]],["stat",["assign",true,["dot",["name","_color"],"b"],["call",["dot",["name","Math"],"max"],[["num",0],["call",["dot",["name","Math"],"min"],[["binary","*",["dot",["dot",["name","material"],"color"],"b"],["dot",["name","_color"],"b"]],["num",1]]]]]]]]],["block",[["stat",["call",["dot",["name","_color"],"copy"],[["dot",["name","material"],"color"]]]]]]]]],["if",["binary","instanceof",["name","material"],["dot",["name","THREE"],"MeshDepthMaterial"]],["block",[["stat",["assign",true,["name","_w"],["binary","-",["num",1],["binary","/",["dot",["name","material"],"__2near"],["binary","-",["dot",["name","material"],"__farPlusNear"],["binary","*",["dot",["name","element"],"z"],["dot",["name","material"],"__farMinusNear"]]]]]]],["stat",["call",["dot",["name","_color"],"setRGB"],[["name","_w"],["name","_w"],["name","_w"]]]]]],["if",["binary","instanceof",["name","material"],["dot",["name","THREE"],"MeshNormalMaterial"]],["block",[["stat",["call",["dot",["name","_color"],"setRGB"],[["call",["name","normalToComponent"],[["dot",["dot",["name","element"],"normalWorld"],"x"]]],["call",["name","normalToComponent"],[["dot",["dot",["name","element"],"normalWorld"],"y"]]],["call",["name","normalToComponent"],[["dot",["dot",["name","element"],"normalWorld"],"z"]]]]]]]],null]]]],["if",["dot",["name","material"],"wireframe"],["block",[["stat",["call",["dot",["name","_svgNode"],"setAttribute"],[["string","style"],["binary","+",["binary","+",["binary","+",["binary","+",["binary","+",["binary","+",["binary","+",["binary","+",["binary","+",["string","fill: none; stroke: "],["call",["dot",["name","_color"],"getContextStyle"],[]]],["string","; stroke-width: "]],["dot",["name","material"],"wireframeLinewidth"]],["string","; stroke-opacity: "]],["dot",["name","material"],"opacity"]],["string","; stroke-linecap: "]],["dot",["name","material"],"wireframeLinecap"]],["string","; stroke-linejoin: "]],["dot",["name","material"],"wireframeLinejoin"]]]]]]],["block",[["stat",["call",["dot",["name","_svgNode"],"setAttribute"],[["string","style"],["binary","+",["binary","+",["binary","+",["string","fill: "],["call",["dot",["name","_color"],"getContextStyle"],[]]],["string","; fill-opacity: "]],["dot",["name","material"],"opacity"]]]]]]]],["stat",["call",["dot",["name","_svg"],"appendChild"],[["name","_svgNode"]]]]]],["defun","renderFace4",["v1","v2","v3","v4","element","material","scene"],[["stat",["assign","+",["dot",["dot",["dot",["name","_this"],"info"],"render"],"vertices"],["num",4]]],["stat",["unary-postfix","++",["dot",["dot",["dot",["name","_this"],"info"],"render"],"faces"]]],["stat",["assign",true,["name","_svgNode"],["call",["name","getPathNode"],[["unary-postfix","++",["name","_pathCount"]]]]]],["stat",["call",["dot",["name","_svgNode"],"setAttribute"],[["string","d"],["binary","+",["binary","+",["binary","+",["binary","+",["binary","+",["binary","+",["binary","+",["binary","+",["binary","+",["binary","+",["binary","+",["binary","+",["binary","+",["binary","+",["binary","+",["binary","+",["string","M "],["dot",["dot",["name","v1"],"positionScreen"],"x"]],["string"," "]],["dot",["dot",["name","v1"],"positionScreen"],"y"]],["string"," L "]],["dot",["dot",["name","v2"],"positionScreen"],"x"]],["string"," "]],["dot",["dot",["name","v2"],"positionScreen"],"y"]],["string"," L "]],["dot",["dot",["name","v3"],"positionScreen"],"x"]],["string",","]],["dot",["dot",["name","v3"],"positionScreen"],"y"]],["string"," L "]],["dot",["dot",["name","v4"],"positionScreen"],"x"]],["string",","]],["dot",["dot",["name","v4"],"positionScreen"],"y"]],["string","z"]]]]],["if",["binary","instanceof",["name","material"],["dot",["name","THREE"],"MeshBasicMaterial"]],["block",[["stat",["call",["dot",["name","_color"],"copy"],[["dot",["name","material"],"color"]]]]]],["if",["binary","instanceof",["name","material"],["dot",["name","THREE"],"MeshLambertMaterial"]],["block",[["if",["name","_enableLighting"],["block",[["stat",["assign",true,["dot",["name","_color"],"r"],["dot",["name","_ambientLight"],"r"]]],["stat",["assign",true,["dot",["name","_color"],"g"],["dot",["name","_ambientLight"],"g"]]],["stat",["assign",true,["dot",["name","_color"],"b"],["dot",["name","_ambientLight"],"b"]]],["stat",["call",["name","calculateLight"],[["name","_lights"],["dot",["name","element"],"centroidWorld"],["dot",["name","element"],"normalWorld"],["name","_color"]]]],["stat",["assign",true,["dot",["name","_color"],"r"],["call",["dot",["name","Math"],"max"],[["num",0],["call",["dot",["name","Math"],"min"],[["binary","*",["dot",["dot",["name","material"],"color"],"r"],["dot",["name","_color"],"r"]],["num",1]]]]]]],["stat",["assign",true,["dot",["name","_color"],"g"],["call",["dot",["name","Math"],"max"],[["num",0],["call",["dot",["name","Math"],"min"],[["binary","*",["dot",["dot",["name","material"],"color"],"g"],["dot",["name","_color"],"g"]],["num",1]]]]]]],["stat",["assign",true,["dot",["name","_color"],"b"],["call",["dot",["name","Math"],"max"],[["num",0],["call",["dot",["name","Math"],"min"],[["binary","*",["dot",["dot",["name","material"],"color"],"b"],["dot",["name","_color"],"b"]],["num",1]]]]]]]]],["block",[["stat",["call",["dot",["name","_color"],"copy"],[["dot",["name","material"],"color"]]]]]]]]],["if",["binary","instanceof",["name","material"],["dot",["name","THREE"],"MeshDepthMaterial"]],["block",[["stat",["assign",true,["name","_w"],["binary","-",["num",1],["binary","/",["dot",["name","material"],"__2near"],["binary","-",["dot",["name","material"],"__farPlusNear"],["binary","*",["dot",["name","element"],"z"],["dot",["name","material"],"__farMinusNear"]]]]]]],["stat",["call",["dot",["name","_color"],"setRGB"],[["name","_w"],["name","_w"],["name","_w"]]]]]],["if",["binary","instanceof",["name","material"],["dot",["name","THREE"],"MeshNormalMaterial"]],["block",[["stat",["call",["dot",["name","_color"],"setRGB"],[["call",["name","normalToComponent"],[["dot",["dot",["name","element"],"normalWorld"],"x"]]],["call",["name","normalToComponent"],[["dot",["dot",["name","element"],"normalWorld"],"y"]]],["call",["name","normalToComponent"],[["dot",["dot",["name","element"],"normalWorld"],"z"]]]]]]]],null]]]],["if",["dot",["name","material"],"wireframe"],["block",[["stat",["call",["dot",["name","_svgNode"],"setAttribute"],[["string","style"],["binary","+",["binary","+",["binary","+",["binary","+",["binary","+",["binary","+",["binary","+",["binary","+",["binary","+",["string","fill: none; stroke: "],["call",["dot",["name","_color"],"getContextStyle"],[]]],["string","; stroke-width: "]],["dot",["name","material"],"wireframeLinewidth"]],["string","; stroke-opacity: "]],["dot",["name","material"],"opacity"]],["string","; stroke-linecap: "]],["dot",["name","material"],"wireframeLinecap"]],["string","; stroke-linejoin: "]],["dot",["name","material"],"wireframeLinejoin"]]]]]]],["block",[["stat",["call",["dot",["name","_svgNode"],"setAttribute"],[["string","style"],["binary","+",["binary","+",["binary","+",["string","fill: "],["call",["dot",["name","_color"],"getContextStyle"],[]]],["string","; fill-opacity: "]],["dot",["name","material"],"opacity"]]]]]]]],["stat",["call",["dot",["name","_svg"],"appendChild"],[["name","_svgNode"]]]]]],["defun","getLineNode",["id"],[["if",["binary","==",["sub",["name","_svgLinePool"],["name","id"]],["name","null"]],["block",[["stat",["assign",true,["sub",["name","_svgLinePool"],["name","id"]],["call",["dot",["name","document"],"createElementNS"],[["string","http://www.w3.org/2000/svg"],["string","line"]]]]],["if",["binary","==",["name","_quality"],["num",0]],["block",[["stat",["call",["dot",["sub",["name","_svgLinePool"],["name","id"]],"setAttribute"],[["string","shape-rendering"],["string","crispEdges"]]]]]],null],["return",["sub",["name","_svgLinePool"],["name","id"]]]]],null],["return",["sub",["name","_svgLinePool"],["name","id"]]]]],["defun","getPathNode",["id"],[["if",["binary","==",["sub",["name","_svgPathPool"],["name","id"]],["name","null"]],["block",[["stat",["assign",true,["sub",["name","_svgPathPool"],["name","id"]],["call",["dot",["name","document"],"createElementNS"],[["string","http://www.w3.org/2000/svg"],["string","path"]]]]],["if",["binary","==",["name","_quality"],["num",0]],["block",[["stat",["call",["dot",["sub",["name","_svgPathPool"],["name","id"]],"setAttribute"],[["string","shape-rendering"],["string","crispEdges"]]]]]],null],["return",["sub",["name","_svgPathPool"],["name","id"]]]]],null],["return",["sub",["name","_svgPathPool"],["name","id"]]]]],["defun","getCircleNode",["id"],[["if",["binary","==",["sub",["name","_svgCirclePool"],["name","id"]],["name","null"]],["block",[["stat",["assign",true,["sub",["name","_svgCirclePool"],["name","id"]],["call",["dot",["name","document"],"createElementNS"],[["string","http://www.w3.org/2000/svg"],["string","circle"]]]]],["if",["binary","==",["name","_quality"],["num",0]],["block",[["stat",["call",["dot",["sub",["name","_svgCirclePool"],["name","id"]],"setAttribute"],[["string","shape-rendering"],["string","crispEdges"]]]]]],null],["return",["sub",["name","_svgCirclePool"],["name","id"]]]]],null],["return",["sub",["name","_svgCirclePool"],["name","id"]]]]],["defun","normalToComponent",["normal"],[["var",[["component",["binary","*",["binary","+",["name","normal"],["num",1]],["num",0.5]]]]],["return",["conditional",["binary","<",["name","component"],["num",0]],["num",0],["conditional",["binary",">",["name","component"],["num",1]],["num",1],["name","component"]]]]]],["defun","pad",["str"],[["while",["binary","<",["dot",["name","str"],"length"],["num",6]],["stat",["assign",true,["name","str"],["binary","+",["string","0"],["name","str"]]]]],["return",["name","str"]]]]]]]],["stat",["assign",true,["dot",["name","THREE"],"ShaderChunk"],["object",[["fog_pars_fragment",["call",["dot",["array",[["string","#ifdef USE_FOG"],["string","uniform vec3 fogColor;"],["string","#ifdef FOG_EXP2"],["string","uniform float fogDensity;"],["string","#else"],["string","uniform float fogNear;"],["string","uniform float fogFar;"],["string","#endif"],["string","#endif"]]],"join"],[["string","\n"]]]],["fog_fragment",["call",["dot",["array",[["string","#ifdef USE_FOG"],["string","float depth = gl_FragCoord.z / gl_FragCoord.w;"],["string","#ifdef FOG_EXP2"],["string","const float LOG2 = 1.442695;"],["string","float fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );"],["string","fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );"],["string","#else"],["string","float fogFactor = smoothstep( fogNear, fogFar, depth );"],["string","#endif"],["string","gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );"],["string","#endif"]]],"join"],[["string","\n"]]]],["envmap_pars_fragment",["call",["dot",["array",[["string","#ifdef USE_ENVMAP"],["string","varying vec3 vReflect;"],["string","uniform float reflectivity;"],["string","uniform samplerCube envMap;"],["string","uniform float flipEnvMap;"],["string","uniform int combine;"],["string","#endif"]]],"join"],[["string","\n"]]]],["envmap_fragment",["call",["dot",["array",[["string","#ifdef USE_ENVMAP"],["string","#ifdef DOUBLE_SIDED"],["string","float flipNormal = ( -1.0 + 2.0 * float( gl_FrontFacing ) );"],["string","vec4 cubeColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * vReflect.x, vReflect.yz ) );"],["string","#else"],["string","vec4 cubeColor = textureCube( envMap, vec3( flipEnvMap * vReflect.x, vReflect.yz ) );"],["string","#endif"],["string","#ifdef GAMMA_INPUT"],["string","cubeColor.xyz *= cubeColor.xyz;"],["string","#endif"],["string","if ( combine == 1 ) {"],["string","gl_FragColor.xyz = mix( gl_FragColor.xyz, cubeColor.xyz, reflectivity );"],["string","} else {"],["string","gl_FragColor.xyz = gl_FragColor.xyz * cubeColor.xyz;"],["string","}"],["string","#endif"]]],"join"],[["string","\n"]]]],["envmap_pars_vertex",["call",["dot",["array",[["string","#ifdef USE_ENVMAP"],["string","varying vec3 vReflect;"],["string","uniform float refractionRatio;"],["string","uniform bool useRefract;"],["string","#endif"]]],"join"],[["string","\n"]]]],["envmap_vertex",["call",["dot",["array",[["string","#ifdef USE_ENVMAP"],["string","vec4 mPosition = objectMatrix * vec4( position, 1.0 );"],["string","vec3 nWorld = mat3( objectMatrix[ 0 ].xyz, objectMatrix[ 1 ].xyz, objectMatrix[ 2 ].xyz ) * normal;"],["string","if ( useRefract ) {"],["string","vReflect = refract( normalize( mPosition.xyz - cameraPosition ), normalize( nWorld.xyz ), refractionRatio );"],["string","} else {"],["string","vReflect = reflect( normalize( mPosition.xyz - cameraPosition ), normalize( nWorld.xyz ) );"],["string","}"],["string","#endif"]]],"join"],[["string","\n"]]]],["map_particle_pars_fragment",["call",["dot",["array",[["string","#ifdef USE_MAP"],["string","uniform sampler2D map;"],["string","#endif"]]],"join"],[["string","\n"]]]],["map_particle_fragment",["call",["dot",["array",[["string","#ifdef USE_MAP"],["string","gl_FragColor = gl_FragColor * texture2D( map, gl_PointCoord );"],["string","#endif"]]],"join"],[["string","\n"]]]],["map_pars_vertex",["call",["dot",["array",[["string","#ifdef USE_MAP"],["string","varying vec2 vUv;"],["string","uniform vec4 offsetRepeat;"],["string","#endif"]]],"join"],[["string","\n"]]]],["map_pars_fragment",["call",["dot",["array",[["string","#ifdef USE_MAP"],["string","varying vec2 vUv;"],["string","uniform sampler2D map;"],["string","#endif"]]],"join"],[["string","\n"]]]],["map_vertex",["call",["dot",["array",[["string","#ifdef USE_MAP"],["string","vUv = uv * offsetRepeat.zw + offsetRepeat.xy;"],["string","#endif"]]],"join"],[["string","\n"]]]],["map_fragment",["call",["dot",["array",[["string","#ifdef USE_MAP"],["string","#ifdef GAMMA_INPUT"],["string","vec4 texelColor = texture2D( map, vUv );"],["string","texelColor.xyz *= texelColor.xyz;"],["string","gl_FragColor = gl_FragColor * texelColor;"],["string","#else"],["string","gl_FragColor = gl_FragColor * texture2D( map, vUv );"],["string","#endif"],["string","#endif"]]],"join"],[["string","\n"]]]],["lightmap_pars_fragment",["call",["dot",["array",[["string","#ifdef USE_LIGHTMAP"],["string","varying vec2 vUv2;"],["string","uniform sampler2D lightMap;"],["string","#endif"]]],"join"],[["string","\n"]]]],["lightmap_pars_vertex",["call",["dot",["array",[["string","#ifdef USE_LIGHTMAP"],["string","varying vec2 vUv2;"],["string","#endif"]]],"join"],[["string","\n"]]]],["lightmap_fragment",["call",["dot",["array",[["string","#ifdef USE_LIGHTMAP"],["string","gl_FragColor = gl_FragColor * texture2D( lightMap, vUv2 );"],["string","#endif"]]],"join"],[["string","\n"]]]],["lightmap_vertex",["call",["dot",["array",[["string","#ifdef USE_LIGHTMAP"],["string","vUv2 = uv2;"],["string","#endif"]]],"join"],[["string","\n"]]]],["lights_lambert_pars_vertex",["call",["dot",["array",[["string","uniform vec3 ambient;"],["string","uniform vec3 diffuse;"],["string","uniform vec3 emissive;"],["string","uniform vec3 ambientLightColor;"],["string","#if MAX_DIR_LIGHTS > 0"],["string","uniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];"],["string","uniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];"],["string","#endif"],["string","#if MAX_POINT_LIGHTS > 0"],["string","uniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];"],["string","uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];"],["string","uniform float pointLightDistance[ MAX_POINT_LIGHTS ];"],["string","#endif"],["string","#if MAX_SPOT_LIGHTS > 0"],["string","uniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];"],["string","uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];"],["string","uniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];"],["string","uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];"],["string","uniform float spotLightAngle[ MAX_SPOT_LIGHTS ];"],["string","uniform float spotLightExponent[ MAX_SPOT_LIGHTS ];"],["string","#endif"],["string","#ifdef WRAP_AROUND"],["string","uniform vec3 wrapRGB;"],["string","#endif"]]],"join"],[["string","\n"]]]],["lights_lambert_vertex",["call",["dot",["array",[["string","vLightFront = vec3( 0.0 );"],["string","#ifdef DOUBLE_SIDED"],["string","vLightBack = vec3( 0.0 );"],["string","#endif"],["string","transformedNormal = normalize( transformedNormal );"],["string","#if MAX_DIR_LIGHTS > 0"],["string","for( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {"],["string","vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );"],["string","vec3 dirVector = normalize( lDirection.xyz );"],["string","float dotProduct = dot( transformedNormal, dirVector );"],["string","vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );"],["string","#ifdef DOUBLE_SIDED"],["string","vec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );"],["string","#ifdef WRAP_AROUND"],["string","vec3 directionalLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );"],["string","#endif"],["string","#endif"],["string","#ifdef WRAP_AROUND"],["string","vec3 directionalLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );"],["string","directionalLightWeighting = mix( directionalLightWeighting, directionalLightWeightingHalf, wrapRGB );"],["string","#ifdef DOUBLE_SIDED"],["string","directionalLightWeightingBack = mix( directionalLightWeightingBack, directionalLightWeightingHalfBack, wrapRGB );"],["string","#endif"],["string","#endif"],["string","vLightFront += directionalLightColor[ i ] * directionalLightWeighting;"],["string","#ifdef DOUBLE_SIDED"],["string","vLightBack += directionalLightColor[ i ] * directionalLightWeightingBack;"],["string","#endif"],["string","}"],["string","#endif"],["string","#if MAX_POINT_LIGHTS > 0"],["string","for( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {"],["string","vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );"],["string","vec3 lVector = lPosition.xyz - mvPosition.xyz;"],["string","float lDistance = 1.0;"],["string","if ( pointLightDistance[ i ] > 0.0 )"],["string","lDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );"],["string","lVector = normalize( lVector );"],["string","float dotProduct = dot( transformedNormal, lVector );"],["string","vec3 pointLightWeighting = vec3( max( dotProduct, 0.0 ) );"],["string","#ifdef DOUBLE_SIDED"],["string","vec3 pointLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );"],["string","#ifdef WRAP_AROUND"],["string","vec3 pointLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );"],["string","#endif"],["string","#endif"],["string","#ifdef WRAP_AROUND"],["string","vec3 pointLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );"],["string","pointLightWeighting = mix( pointLightWeighting, pointLightWeightingHalf, wrapRGB );"],["string","#ifdef DOUBLE_SIDED"],["string","pointLightWeightingBack = mix( pointLightWeightingBack, pointLightWeightingHalfBack, wrapRGB );"],["string","#endif"],["string","#endif"],["string","vLightFront += pointLightColor[ i ] * pointLightWeighting * lDistance;"],["string","#ifdef DOUBLE_SIDED"],["string","vLightBack += pointLightColor[ i ] * pointLightWeightingBack * lDistance;"],["string","#endif"],["string","}"],["string","#endif"],["string","#if MAX_SPOT_LIGHTS > 0"],["string","for( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {"],["string","vec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );"],["string","vec3 lVector = lPosition.xyz - mvPosition.xyz;"],["string","lVector = normalize( lVector );"],["string","float spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - mPosition.xyz ) );"],["string","if ( spotEffect > spotLightAngle[ i ] ) {"],["string","spotEffect = pow( spotEffect, spotLightExponent[ i ] );"],["string","float lDistance = 1.0;"],["string","if ( spotLightDistance[ i ] > 0.0 )"],["string","lDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );"],["string","float dotProduct = dot( transformedNormal, lVector );"],["string","vec3 spotLightWeighting = vec3( max( dotProduct, 0.0 ) );"],["string","#ifdef DOUBLE_SIDED"],["string","vec3 spotLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );"],["string","#ifdef WRAP_AROUND"],["string","vec3 spotLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );"],["string","#endif"],["string","#endif"],["string","#ifdef WRAP_AROUND"],["string","vec3 spotLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );"],["string","spotLightWeighting = mix( spotLightWeighting, spotLightWeightingHalf, wrapRGB );"],["string","#ifdef DOUBLE_SIDED"],["string","spotLightWeightingBack = mix( spotLightWeightingBack, spotLightWeightingHalfBack, wrapRGB );"],["string","#endif"],["string","#endif"],["string","vLightFront += spotLightColor[ i ] * spotLightWeighting * lDistance * spotEffect;"],["string","#ifdef DOUBLE_SIDED"],["string","vLightBack += spotLightColor[ i ] * spotLightWeightingBack * lDistance * spotEffect;"],["string","#endif"],["string","}"],["string","}"],["string","#endif"],["string","vLightFront = vLightFront * diffuse + ambient * ambientLightColor + emissive;"],["string","#ifdef DOUBLE_SIDED"],["string","vLightBack = vLightBack * diffuse + ambient * ambientLightColor + emissive;"],["string","#endif"]]],"join"],[["string","\n"]]]],["lights_phong_pars_vertex",["call",["dot",["array",[["string","#ifndef PHONG_PER_PIXEL"],["string","#if MAX_POINT_LIGHTS > 0"],["string","uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];"],["string","uniform float pointLightDistance[ MAX_POINT_LIGHTS ];"],["string","varying vec4 vPointLight[ MAX_POINT_LIGHTS ];"],["string","#endif"],["string","#if MAX_SPOT_LIGHTS > 0"],["string","uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];"],["string","uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];"],["string","varying vec4 vSpotLight[ MAX_SPOT_LIGHTS ];"],["string","#endif"],["string","#endif"],["string","#if MAX_SPOT_LIGHTS > 0"],["string","varying vec3 vWorldPosition;"],["string","#endif"]]],"join"],[["string","\n"]]]],["lights_phong_vertex",["call",["dot",["array",[["string","#ifndef PHONG_PER_PIXEL"],["string","#if MAX_POINT_LIGHTS > 0"],["string","for( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {"],["string","vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );"],["string","vec3 lVector = lPosition.xyz - mvPosition.xyz;"],["string","float lDistance = 1.0;"],["string","if ( pointLightDistance[ i ] > 0.0 )"],["string","lDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );"],["string","vPointLight[ i ] = vec4( lVector, lDistance );"],["string","}"],["string","#endif"],["string","#if MAX_SPOT_LIGHTS > 0"],["string","for( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {"],["string","vec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );"],["string","vec3 lVector = lPosition.xyz - mvPosition.xyz;"],["string","float lDistance = 1.0;"],["string","if ( spotLightDistance[ i ] > 0.0 )"],["string","lDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );"],["string","vSpotLight[ i ] = vec4( lVector, lDistance );"],["string","}"],["string","#endif"],["string","#endif"],["string","#if MAX_SPOT_LIGHTS > 0"],["string","vWorldPosition = mPosition.xyz;"],["string","#endif"]]],"join"],[["string","\n"]]]],["lights_phong_pars_fragment",["call",["dot",["array",[["string","uniform vec3 ambientLightColor;"],["string","#if MAX_DIR_LIGHTS > 0"],["string","uniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];"],["string","uniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];"],["string","#endif"],["string","#if MAX_POINT_LIGHTS > 0"],["string","uniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];"],["string","#ifdef PHONG_PER_PIXEL"],["string","uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];"],["string","uniform float pointLightDistance[ MAX_POINT_LIGHTS ];"],["string","#else"],["string","varying vec4 vPointLight[ MAX_POINT_LIGHTS ];"],["string","#endif"],["string","#endif"],["string","#if MAX_SPOT_LIGHTS > 0"],["string","uniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];"],["string","uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];"],["string","uniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];"],["string","uniform float spotLightAngle[ MAX_SPOT_LIGHTS ];"],["string","uniform float spotLightExponent[ MAX_SPOT_LIGHTS ];"],["string","#ifdef PHONG_PER_PIXEL"],["string","uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];"],["string","#else"],["string","varying vec4 vSpotLight[ MAX_SPOT_LIGHTS ];"],["string","#endif"],["string","varying vec3 vWorldPosition;"],["string","#endif"],["string","#ifdef WRAP_AROUND"],["string","uniform vec3 wrapRGB;"],["string","#endif"],["string","varying vec3 vViewPosition;"],["string","varying vec3 vNormal;"]]],"join"],[["string","\n"]]]],["lights_phong_fragment",["call",["dot",["array",[["string","vec3 normal = normalize( vNormal );"],["string","vec3 viewPosition = normalize( vViewPosition );"],["string","#ifdef DOUBLE_SIDED"],["string","normal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );"],["string","#endif"],["string","#if MAX_POINT_LIGHTS > 0"],["string","vec3 pointDiffuse  = vec3( 0.0 );"],["string","vec3 pointSpecular = vec3( 0.0 );"],["string","for ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {"],["string","#ifdef PHONG_PER_PIXEL"],["string","vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );"],["string","vec3 lVector = lPosition.xyz + vViewPosition.xyz;"],["string","float lDistance = 1.0;"],["string","if ( pointLightDistance[ i ] > 0.0 )"],["string","lDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );"],["string","lVector = normalize( lVector );"],["string","#else"],["string","vec3 lVector = normalize( vPointLight[ i ].xyz );"],["string","float lDistance = vPointLight[ i ].w;"],["string","#endif"],["string","float dotProduct = dot( normal, lVector );"],["string","#ifdef WRAP_AROUND"],["string","float pointDiffuseWeightFull = max( dotProduct, 0.0 );"],["string","float pointDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );"],["string","vec3 pointDiffuseWeight = mix( vec3 ( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );"],["string","#else"],["string","float pointDiffuseWeight = max( dotProduct, 0.0 );"],["string","#endif"],["string","pointDiffuse  += diffuse * pointLightColor[ i ] * pointDiffuseWeight * lDistance;"],["string","vec3 pointHalfVector = normalize( lVector + viewPosition );"],["string","float pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );"],["string","float pointSpecularWeight = max( pow( pointDotNormalHalf, shininess ), 0.0 );"],["string","#ifdef PHYSICALLY_BASED_SHADING"],["string","float specularNormalization = ( shininess + 2.0001 ) / 8.0;"],["string","vec3 schlick = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVector, pointHalfVector ), 5.0 );"],["string","pointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * lDistance * specularNormalization;"],["string","#else"],["string","pointSpecular += specular * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * lDistance;"],["string","#endif"],["string","}"],["string","#endif"],["string","#if MAX_SPOT_LIGHTS > 0"],["string","vec3 spotDiffuse  = vec3( 0.0 );"],["string","vec3 spotSpecular = vec3( 0.0 );"],["string","for ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {"],["string","#ifdef PHONG_PER_PIXEL"],["string","vec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );"],["string","vec3 lVector = lPosition.xyz + vViewPosition.xyz;"],["string","float lDistance = 1.0;"],["string","if ( spotLightDistance[ i ] > 0.0 )"],["string","lDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );"],["string","lVector = normalize( lVector );"],["string","#else"],["string","vec3 lVector = normalize( vSpotLight[ i ].xyz );"],["string","float lDistance = vSpotLight[ i ].w;"],["string","#endif"],["string","float spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );"],["string","if ( spotEffect > spotLightAngle[ i ] ) {"],["string","spotEffect = pow( spotEffect, spotLightExponent[ i ] );"],["string","float dotProduct = dot( normal, lVector );"],["string","#ifdef WRAP_AROUND"],["string","float spotDiffuseWeightFull = max( dotProduct, 0.0 );"],["string","float spotDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );"],["string","vec3 spotDiffuseWeight = mix( vec3 ( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );"],["string","#else"],["string","float spotDiffuseWeight = max( dotProduct, 0.0 );"],["string","#endif"],["string","spotDiffuse += diffuse * spotLightColor[ i ] * spotDiffuseWeight * lDistance * spotEffect;"],["string","vec3 spotHalfVector = normalize( lVector + viewPosition );"],["string","float spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );"],["string","float spotSpecularWeight = max( pow( spotDotNormalHalf, shininess ), 0.0 );"],["string","#ifdef PHYSICALLY_BASED_SHADING"],["string","float specularNormalization = ( shininess + 2.0001 ) / 8.0;"],["string","vec3 schlick = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVector, spotHalfVector ), 5.0 );"],["string","spotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * lDistance * specularNormalization * spotEffect;"],["string","#else"],["string","spotSpecular += specular * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * lDistance * spotEffect;"],["string","#endif"],["string","}"],["string","}"],["string","#endif"],["string","#if MAX_DIR_LIGHTS > 0"],["string","vec3 dirDiffuse  = vec3( 0.0 );"],["string","vec3 dirSpecular = vec3( 0.0 );"],["string","for( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {"],["string","vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );"],["string","vec3 dirVector = normalize( lDirection.xyz );"],["string","float dotProduct = dot( normal, dirVector );"],["string","#ifdef WRAP_AROUND"],["string","float dirDiffuseWeightFull = max( dotProduct, 0.0 );"],["string","float dirDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );"],["string","vec3 dirDiffuseWeight = mix( vec3( dirDiffuseWeightFull ), vec3( dirDiffuseWeightHalf ), wrapRGB );"],["string","#else"],["string","float dirDiffuseWeight = max( dotProduct, 0.0 );"],["string","#endif"],["string","dirDiffuse  += diffuse * directionalLightColor[ i ] * dirDiffuseWeight;"],["string","vec3 dirHalfVector = normalize( dirVector + viewPosition );"],["string","float dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );"],["string","float dirSpecularWeight = max( pow( dirDotNormalHalf, shininess ), 0.0 );"],["string","#ifdef PHYSICALLY_BASED_SHADING"],["string","float specularNormalization = ( shininess + 2.0001 ) / 8.0;"],["string","vec3 schlick = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( dirVector, dirHalfVector ), 5.0 );"],["string","dirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;"],["string","#else"],["string","dirSpecular += specular * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight;"],["string","#endif"],["string","}"],["string","#endif"],["string","vec3 totalDiffuse = vec3( 0.0 );"],["string","vec3 totalSpecular = vec3( 0.0 );"],["string","#if MAX_DIR_LIGHTS > 0"],["string","totalDiffuse += dirDiffuse;"],["string","totalSpecular += dirSpecular;"],["string","#endif"],["string","#if MAX_POINT_LIGHTS > 0"],["string","totalDiffuse += pointDiffuse;"],["string","totalSpecular += pointSpecular;"],["string","#endif"],["string","#if MAX_SPOT_LIGHTS > 0"],["string","totalDiffuse += spotDiffuse;"],["string","totalSpecular += spotSpecular;"],["string","#endif"],["string","#ifdef METAL"],["string","gl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient + totalSpecular );"],["string","#else"],["string","gl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient ) + totalSpecular;"],["string","#endif"]]],"join"],[["string","\n"]]]],["color_pars_fragment",["call",["dot",["array",[["string","#ifdef USE_COLOR"],["string","varying vec3 vColor;"],["string","#endif"]]],"join"],[["string","\n"]]]],["color_fragment",["call",["dot",["array",[["string","#ifdef USE_COLOR"],["string","gl_FragColor = gl_FragColor * vec4( vColor, opacity );"],["string","#endif"]]],"join"],[["string","\n"]]]],["color_pars_vertex",["call",["dot",["array",[["string","#ifdef USE_COLOR"],["string","varying vec3 vColor;"],["string","#endif"]]],"join"],[["string","\n"]]]],["color_vertex",["call",["dot",["array",[["string","#ifdef USE_COLOR"],["string","#ifdef GAMMA_INPUT"],["string","vColor = color * color;"],["string","#else"],["string","vColor = color;"],["string","#endif"],["string","#endif"]]],"join"],[["string","\n"]]]],["skinning_pars_vertex",["call",["dot",["array",[["string","#ifdef USE_SKINNING"],["string","uniform mat4 boneGlobalMatrices[ MAX_BONES ];"],["string","#endif"]]],"join"],[["string","\n"]]]],["skinning_vertex",["call",["dot",["array",[["string","#ifdef USE_SKINNING"],["string","gl_Position  = ( boneGlobalMatrices[ int( skinIndex.x ) ] * skinVertexA ) * skinWeight.x;"],["string","gl_Position += ( boneGlobalMatrices[ int( skinIndex.y ) ] * skinVertexB ) * skinWeight.y;"],["string","gl_Position  = projectionMatrix * modelViewMatrix * gl_Position;"],["string","#endif"]]],"join"],[["string","\n"]]]],["morphtarget_pars_vertex",["call",["dot",["array",[["string","#ifdef USE_MORPHTARGETS"],["string","#ifndef USE_MORPHNORMALS"],["string","uniform float morphTargetInfluences[ 8 ];"],["string","#else"],["string","uniform float morphTargetInfluences[ 4 ];"],["string","#endif"],["string","#endif"]]],"join"],[["string","\n"]]]],["morphtarget_vertex",["call",["dot",["array",[["string","#ifdef USE_MORPHTARGETS"],["string","vec3 morphed = vec3( 0.0 );"],["string","morphed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];"],["string","morphed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];"],["string","morphed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];"],["string","morphed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];"],["string","#ifndef USE_MORPHNORMALS"],["string","morphed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];"],["string","morphed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];"],["string","morphed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];"],["string","morphed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];"],["string","#endif"],["string","morphed += position;"],["string","gl_Position = projectionMatrix * modelViewMatrix * vec4( morphed, 1.0 );"],["string","#endif"]]],"join"],[["string","\n"]]]],["default_vertex",["call",["dot",["array",[["string","#ifndef USE_MORPHTARGETS"],["string","#ifndef USE_SKINNING"],["string","gl_Position = projectionMatrix * mvPosition;"],["string","#endif"],["string","#endif"]]],"join"],[["string","\n"]]]],["morphnormal_vertex",["call",["dot",["array",[["string","#ifdef USE_MORPHNORMALS"],["string","vec3 morphedNormal = vec3( 0.0 );"],["string","morphedNormal +=  ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];"],["string","morphedNormal +=  ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];"],["string","morphedNormal +=  ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];"],["string","morphedNormal +=  ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];"],["string","morphedNormal += normal;"],["string","vec3 transformedNormal = normalMatrix * morphedNormal;"],["string","#else"],["string","vec3 transformedNormal = normalMatrix * normal;"],["string","#endif"]]],"join"],[["string","\n"]]]],["shadowmap_pars_fragment",["call",["dot",["array",[["string","#ifdef USE_SHADOWMAP"],["string","uniform sampler2D shadowMap[ MAX_SHADOWS ];"],["string","uniform vec2 shadowMapSize[ MAX_SHADOWS ];"],["string","uniform float shadowDarkness[ MAX_SHADOWS ];"],["string","uniform float shadowBias[ MAX_SHADOWS ];"],["string","varying vec4 vShadowCoord[ MAX_SHADOWS ];"],["string","float unpackDepth( const in vec4 rgba_depth ) {"],["string","const vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );"],["string","float depth = dot( rgba_depth, bit_shift );"],["string","return depth;"],["string","}"],["string","#endif"]]],"join"],[["string","\n"]]]],["shadowmap_fragment",["call",["dot",["array",[["string","#ifdef USE_SHADOWMAP"],["string","#ifdef SHADOWMAP_DEBUG"],["string","vec3 frustumColors[3];"],["string","frustumColors[0] = vec3( 1.0, 0.5, 0.0 );"],["string","frustumColors[1] = vec3( 0.0, 1.0, 0.8 );"],["string","frustumColors[2] = vec3( 0.0, 0.5, 1.0 );"],["string","#endif"],["string","#ifdef SHADOWMAP_CASCADE"],["string","int inFrustumCount = 0;"],["string","#endif"],["string","float fDepth;"],["string","vec3 shadowColor = vec3( 1.0 );"],["string","for( int i = 0; i < MAX_SHADOWS; i ++ ) {"],["string","vec3 shadowCoord = vShadowCoord[ i ].xyz / vShadowCoord[ i ].w;"],["string","bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );"],["string","bool inFrustum = all( inFrustumVec );"],["string","#ifdef SHADOWMAP_CASCADE"],["string","inFrustumCount += int( inFrustum );"],["string","bvec3 frustumTestVec = bvec3( inFrustum, inFrustumCount == 1, shadowCoord.z <= 1.0 );"],["string","#else"],["string","bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );"],["string","#endif"],["string","bool frustumTest = all( frustumTestVec );"],["string","if ( frustumTest ) {"],["string","shadowCoord.z += shadowBias[ i ];"],["string","#ifdef SHADOWMAP_SOFT"],["string","float shadow = 0.0;"],["string","const float shadowDelta = 1.0 / 9.0;"],["string","float xPixelOffset = 1.0 / shadowMapSize[ i ].x;"],["string","float yPixelOffset = 1.0 / shadowMapSize[ i ].y;"],["string","float dx0 = -1.25 * xPixelOffset;"],["string","float dy0 = -1.25 * yPixelOffset;"],["string","float dx1 = 1.25 * xPixelOffset;"],["string","float dy1 = 1.25 * yPixelOffset;"],["string","fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );"],["string","if ( fDepth < shadowCoord.z ) shadow += shadowDelta;"],["string","fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );"],["string","if ( fDepth < shadowCoord.z ) shadow += shadowDelta;"],["string","fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );"],["string","if ( fDepth < shadowCoord.z ) shadow += shadowDelta;"],["string","fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );"],["string","if ( fDepth < shadowCoord.z ) shadow += shadowDelta;"],["string","fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );"],["string","if ( fDepth < shadowCoord.z ) shadow += shadowDelta;"],["string","fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );"],["string","if ( fDepth < shadowCoord.z ) shadow += shadowDelta;"],["string","fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );"],["string","if ( fDepth < shadowCoord.z ) shadow += shadowDelta;"],["string","fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );"],["string","if ( fDepth < shadowCoord.z ) shadow += shadowDelta;"],["string","fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );"],["string","if ( fDepth < shadowCoord.z ) shadow += shadowDelta;"],["string","shadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );"],["string","#else"],["string","vec4 rgbaDepth = texture2D( shadowMap[ i ], shadowCoord.xy );"],["string","float fDepth = unpackDepth( rgbaDepth );"],["string","if ( fDepth < shadowCoord.z )"],["string","shadowColor = shadowColor * vec3( 1.0 - shadowDarkness[ i ] );"],["string","#endif"],["string","}"],["string","#ifdef SHADOWMAP_DEBUG"],["string","#ifdef SHADOWMAP_CASCADE"],["string","if ( inFrustum && inFrustumCount == 1 ) gl_FragColor.xyz *= frustumColors[ i ];"],["string","#else"],["string","if ( inFrustum ) gl_FragColor.xyz *= frustumColors[ i ];"],["string","#endif"],["string","#endif"],["string","}"],["string","#ifdef GAMMA_OUTPUT"],["string","shadowColor *= shadowColor;"],["string","#endif"],["string","gl_FragColor.xyz = gl_FragColor.xyz * shadowColor;"],["string","#endif"]]],"join"],[["string","\n"]]]],["shadowmap_pars_vertex",["call",["dot",["array",[["string","#ifdef USE_SHADOWMAP"],["string","varying vec4 vShadowCoord[ MAX_SHADOWS ];"],["string","uniform mat4 shadowMatrix[ MAX_SHADOWS ];"],["string","#endif"]]],"join"],[["string","\n"]]]],["shadowmap_vertex",["call",["dot",["array",[["string","#ifdef USE_SHADOWMAP"],["string","for( int i = 0; i < MAX_SHADOWS; i ++ ) {"],["string","#ifdef USE_MORPHTARGETS"],["string","vShadowCoord[ i ] = shadowMatrix[ i ] * objectMatrix * vec4( morphed, 1.0 );"],["string","#else"],["string","vShadowCoord[ i ] = shadowMatrix[ i ] * objectMatrix * vec4( position, 1.0 );"],["string","#endif"],["string","}"],["string","#endif"]]],"join"],[["string","\n"]]]],["alphatest_fragment",["call",["dot",["array",[["string","#ifdef ALPHATEST"],["string","if ( gl_FragColor.a < ALPHATEST ) discard;"],["string","#endif"]]],"join"],[["string","\n"]]]],["linear_to_gamma_fragment",["call",["dot",["array",[["string","#ifdef GAMMA_OUTPUT"],["string","gl_FragColor.xyz = sqrt( gl_FragColor.xyz );"],["string","#endif"]]],"join"],[["string","\n"]]]]]]]],["stat",["assign",true,["dot",["name","THREE"],"UniformsUtils"],["object",[["merge",["function",null,["uniforms"],[["var",[["u"],["p"],["tmp"],["merged",["object",[]]]]],["for",["assign",true,["name","u"],["num",0]],["binary","<",["name","u"],["dot",["name","uniforms"],"length"]],["unary-postfix","++",["name","u"]],["block",[["stat",["assign",true,["name","tmp"],["call",["dot",["name","this"],"clone"],[["sub",["name","uniforms"],["name","u"]]]]]],["for-in",["name","p"],["name","p"],["name","tmp"],["block",[["stat",["assign",true,["sub",["name","merged"],["name","p"]],["sub",["name","tmp"],["name","p"]]]]]]]]]],["return",["name","merged"]]]]],["clone",["function",null,["uniforms_src"],[["var",[["u"],["p"],["parameter"],["parameter_src"],["uniforms_dst",["object",[]]]]],["for-in",["name","u"],["name","u"],["name","uniforms_src"],["block",[["stat",["assign",true,["sub",["name","uniforms_dst"],["name","u"]],["object",[]]]],["for-in",["name","p"],["name","p"],["sub",["name","uniforms_src"],["name","u"]],["block",[["stat",["assign",true,["name","parameter_src"],["sub",["sub",["name","uniforms_src"],["name","u"]],["name","p"]]]],["if",["binary","||",["binary","||",["binary","||",["binary","||",["binary","||",["binary","instanceof",["name","parameter_src"],["dot",["name","THREE"],"Color"]],["binary","instanceof",["name","parameter_src"],["dot",["name","THREE"],"Vector2"]]],["binary","instanceof",["name","parameter_src"],["dot",["name","THREE"],"Vector3"]]],["binary","instanceof",["name","parameter_src"],["dot",["name","THREE"],"Vector4"]]],["binary","instanceof",["name","parameter_src"],["dot",["name","THREE"],"Matrix4"]]],["binary","instanceof",["name","parameter_src"],["dot",["name","THREE"],"Texture"]]],["block",[["stat",["assign",true,["sub",["sub",["name","uniforms_dst"],["name","u"]],["name","p"]],["call",["dot",["name","parameter_src"],"clone"],[]]]]]],["if",["binary","instanceof",["name","parameter_src"],["name","Array"]],["block",[["stat",["assign",true,["sub",["sub",["name","uniforms_dst"],["name","u"]],["name","p"]],["call",["dot",["name","parameter_src"],"slice"],[]]]]]],["block",[["stat",["assign",true,["sub",["sub",["name","uniforms_dst"],["name","u"]],["name","p"]],["name","parameter_src"]]]]]]]]]]]]],["return",["name","uniforms_dst"]]]]]]]]],["stat",["assign",true,["dot",["name","THREE"],"UniformsLib"],["object",[["common",["object",[["diffuse",["object",[["type",["string","c"]],["value",["new",["dot",["name","THREE"],"Color"],[["num",15658734]]]]]]],["opacity",["object",[["type",["string","f"]],["value",["num",1]]]]],["map",["object",[["type",["string","t"]],["value",["num",0]],["texture",["name","null"]]]]],["offsetRepeat",["object",[["type",["string","v4"]],["value",["new",["dot",["name","THREE"],"Vector4"],[["num",0],["num",0],["num",1],["num",1]]]]]]],["lightMap",["object",[["type",["string","t"]],["value",["num",2]],["texture",["name","null"]]]]],["envMap",["object",[["type",["string","t"]],["value",["num",1]],["texture",["name","null"]]]]],["flipEnvMap",["object",[["type",["string","f"]],["value",["unary-prefix","-",["num",1]]]]]],["useRefract",["object",[["type",["string","i"]],["value",["num",0]]]]],["reflectivity",["object",[["type",["string","f"]],["value",["num",1]]]]],["refractionRatio",["object",[["type",["string","f"]],["value",["num",0.98]]]]],["combine",["object",[["type",["string","i"]],["value",["num",0]]]]],["morphTargetInfluences",["object",[["type",["string","f"]],["value",["num",0]]]]]]]],["fog",["object",[["fogDensity",["object",[["type",["string","f"]],["value",["num",0.00025]]]]],["fogNear",["object",[["type",["string","f"]],["value",["num",1]]]]],["fogFar",["object",[["type",["string","f"]],["value",["num",2000]]]]],["fogColor",["object",[["type",["string","c"]],["value",["new",["dot",["name","THREE"],"Color"],[["num",16777215]]]]]]]]]],["lights",["object",[["ambientLightColor",["object",[["type",["string","fv"]],["value",["array",[]]]]]],["directionalLightDirection",["object",[["type",["string","fv"]],["value",["array",[]]]]]],["directionalLightColor",["object",[["type",["string","fv"]],["value",["array",[]]]]]],["pointLightColor",["object",[["type",["string","fv"]],["value",["array",[]]]]]],["pointLightPosition",["object",[["type",["string","fv"]],["value",["array",[]]]]]],["pointLightDistance",["object",[["type",["string","fv1"]],["value",["array",[]]]]]],["spotLightColor",["object",[["type",["string","fv"]],["value",["array",[]]]]]],["spotLightPosition",["object",[["type",["string","fv"]],["value",["array",[]]]]]],["spotLightDirection",["object",[["type",["string","fv"]],["value",["array",[]]]]]],["spotLightDistance",["object",[["type",["string","fv1"]],["value",["array",[]]]]]],["spotLightAngle",["object",[["type",["string","fv1"]],["value",["array",[]]]]]],["spotLightExponent",["object",[["type",["string","fv1"]],["value",["array",[]]]]]]]]],["particle",["object",[["psColor",["object",[["type",["string","c"]],["value",["new",["dot",["name","THREE"],"Color"],[["num",15658734]]]]]]],["opacity",["object",[["type",["string","f"]],["value",["num",1]]]]],["size",["object",[["type",["string","f"]],["value",["num",1]]]]],["scale",["object",[["type",["string","f"]],["value",["num",1]]]]],["map",["object",[["type",["string","t"]],["value",["num",0]],["texture",["name","null"]]]]],["fogDensity",["object",[["type",["string","f"]],["value",["num",0.00025]]]]],["fogNear",["object",[["type",["string","f"]],["value",["num",1]]]]],["fogFar",["object",[["type",["string","f"]],["value",["num",2000]]]]],["fogColor",["object",[["type",["string","c"]],["value",["new",["dot",["name","THREE"],"Color"],[["num",16777215]]]]]]]]]],["shadowmap",["object",[["shadowMap",["object",[["type",["string","tv"]],["value",["num",6]],["texture",["array",[]]]]]],["shadowMapSize",["object",[["type",["string","v2v"]],["value",["array",[]]]]]],["shadowBias",["object",[["type",["string","fv1"]],["value",["array",[]]]]]],["shadowDarkness",["object",[["type",["string","fv1"]],["value",["array",[]]]]]],["shadowMatrix",["object",[["type",["string","m4v"]],["value",["array",[]]]]]]]]]]]]],["stat",["assign",true,["dot",["name","THREE"],"ShaderLib"],["object",[["depth",["object",[["uniforms",["object",[["mNear",["object",[["type",["string","f"]],["value",["num",1]]]]],["mFar",["object",[["type",["string","f"]],["value",["num",2000]]]]],["opacity",["object",[["type",["string","f"]],["value",["num",1]]]]]]]],["vertexShader",["call",["dot",["array",[["string","void main() {"],["string","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );"],["string","}"]]],"join"],[["string","\n"]]]],["fragmentShader",["call",["dot",["array",[["string","uniform float mNear;"],["string","uniform float mFar;"],["string","uniform float opacity;"],["string","void main() {"],["string","float depth = gl_FragCoord.z / gl_FragCoord.w;"],["string","float color = 1.0 - smoothstep( mNear, mFar, depth );"],["string","gl_FragColor = vec4( vec3( color ), opacity );"],["string","}"]]],"join"],[["string","\n"]]]]]]],["normal",["object",[["uniforms",["object",[["opacity",["object",[["type",["string","f"]],["value",["num",1]]]]]]]],["vertexShader",["call",["dot",["array",[["string","varying vec3 vNormal;"],["string","void main() {"],["string","vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );"],["string","vNormal = normalMatrix * normal;"],["string","gl_Position = projectionMatrix * mvPosition;"],["string","}"]]],"join"],[["string","\n"]]]],["fragmentShader",["call",["dot",["array",[["string","uniform float opacity;"],["string","varying vec3 vNormal;"],["string","void main() {"],["string","gl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, opacity );"],["string","}"]]],"join"],[["string","\n"]]]]]]],["basic",["object",[["uniforms",["call",["dot",["dot",["name","THREE"],"UniformsUtils"],"merge"],[["array",[["sub",["dot",["name","THREE"],"UniformsLib"],["string","common"]],["sub",["dot",["name","THREE"],"UniformsLib"],["string","fog"]],["sub",["dot",["name","THREE"],"UniformsLib"],["string","shadowmap"]]]]]]],["vertexShader",["call",["dot",["array",[["sub",["dot",["name","THREE"],"ShaderChunk"],["string","map_pars_vertex"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","lightmap_pars_vertex"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","envmap_pars_vertex"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","color_pars_vertex"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","skinning_pars_vertex"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","morphtarget_pars_vertex"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","shadowmap_pars_vertex"]],["string","void main() {"],["string","vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );"],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","map_vertex"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","lightmap_vertex"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","envmap_vertex"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","color_vertex"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","skinning_vertex"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","morphtarget_vertex"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","default_vertex"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","shadowmap_vertex"]],["string","}"]]],"join"],[["string","\n"]]]],["fragmentShader",["call",["dot",["array",[["string","uniform vec3 diffuse;"],["string","uniform float opacity;"],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","color_pars_fragment"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","map_pars_fragment"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","lightmap_pars_fragment"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","envmap_pars_fragment"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","fog_pars_fragment"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","shadowmap_pars_fragment"]],["string","void main() {"],["string","gl_FragColor = vec4( diffuse, opacity );"],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","map_fragment"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","alphatest_fragment"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","lightmap_fragment"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","color_fragment"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","envmap_fragment"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","shadowmap_fragment"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","linear_to_gamma_fragment"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","fog_fragment"]],["string","}"]]],"join"],[["string","\n"]]]]]]],["lambert",["object",[["uniforms",["call",["dot",["dot",["name","THREE"],"UniformsUtils"],"merge"],[["array",[["sub",["dot",["name","THREE"],"UniformsLib"],["string","common"]],["sub",["dot",["name","THREE"],"UniformsLib"],["string","fog"]],["sub",["dot",["name","THREE"],"UniformsLib"],["string","lights"]],["sub",["dot",["name","THREE"],"UniformsLib"],["string","shadowmap"]],["object",[["ambient",["object",[["type",["string","c"]],["value",["new",["dot",["name","THREE"],"Color"],[["num",16777215]]]]]]],["emissive",["object",[["type",["string","c"]],["value",["new",["dot",["name","THREE"],"Color"],[["num",0]]]]]]],["wrapRGB",["object",[["type",["string","v3"]],["value",["new",["dot",["name","THREE"],"Vector3"],[["num",1],["num",1],["num",1]]]]]]]]]]]]]],["vertexShader",["call",["dot",["array",[["string","varying vec3 vLightFront;"],["string","#ifdef DOUBLE_SIDED"],["string","varying vec3 vLightBack;"],["string","#endif"],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","map_pars_vertex"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","lightmap_pars_vertex"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","envmap_pars_vertex"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","lights_lambert_pars_vertex"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","color_pars_vertex"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","skinning_pars_vertex"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","morphtarget_pars_vertex"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","shadowmap_pars_vertex"]],["string","void main() {"],["string","vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );"],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","map_vertex"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","lightmap_vertex"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","envmap_vertex"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","color_vertex"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","morphnormal_vertex"]],["string","#ifndef USE_ENVMAP"],["string","vec4 mPosition = objectMatrix * vec4( position, 1.0 );"],["string","#endif"],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","lights_lambert_vertex"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","skinning_vertex"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","morphtarget_vertex"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","default_vertex"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","shadowmap_vertex"]],["string","}"]]],"join"],[["string","\n"]]]],["fragmentShader",["call",["dot",["array",[["string","uniform float opacity;"],["string","varying vec3 vLightFront;"],["string","#ifdef DOUBLE_SIDED"],["string","varying vec3 vLightBack;"],["string","#endif"],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","color_pars_fragment"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","map_pars_fragment"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","lightmap_pars_fragment"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","envmap_pars_fragment"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","fog_pars_fragment"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","shadowmap_pars_fragment"]],["string","void main() {"],["string","gl_FragColor = vec4( vec3 ( 1.0 ), opacity );"],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","map_fragment"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","alphatest_fragment"]],["string","#ifdef DOUBLE_SIDED"],["string","if ( gl_FrontFacing )"],["string","gl_FragColor.xyz *= vLightFront;"],["string","else"],["string","gl_FragColor.xyz *= vLightBack;"],["string","#else"],["string","gl_FragColor.xyz *= vLightFront;"],["string","#endif"],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","lightmap_fragment"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","color_fragment"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","envmap_fragment"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","shadowmap_fragment"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","linear_to_gamma_fragment"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","fog_fragment"]],["string","}"]]],"join"],[["string","\n"]]]]]]],["phong",["object",[["uniforms",["call",["dot",["dot",["name","THREE"],"UniformsUtils"],"merge"],[["array",[["sub",["dot",["name","THREE"],"UniformsLib"],["string","common"]],["sub",["dot",["name","THREE"],"UniformsLib"],["string","fog"]],["sub",["dot",["name","THREE"],"UniformsLib"],["string","lights"]],["sub",["dot",["name","THREE"],"UniformsLib"],["string","shadowmap"]],["object",[["ambient",["object",[["type",["string","c"]],["value",["new",["dot",["name","THREE"],"Color"],[["num",16777215]]]]]]],["emissive",["object",[["type",["string","c"]],["value",["new",["dot",["name","THREE"],"Color"],[["num",0]]]]]]],["specular",["object",[["type",["string","c"]],["value",["new",["dot",["name","THREE"],"Color"],[["num",1118481]]]]]]],["shininess",["object",[["type",["string","f"]],["value",["num",30]]]]],["wrapRGB",["object",[["type",["string","v3"]],["value",["new",["dot",["name","THREE"],"Vector3"],[["num",1],["num",1],["num",1]]]]]]]]]]]]]],["vertexShader",["call",["dot",["array",[["string","varying vec3 vViewPosition;"],["string","varying vec3 vNormal;"],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","map_pars_vertex"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","lightmap_pars_vertex"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","envmap_pars_vertex"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","lights_phong_pars_vertex"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","color_pars_vertex"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","skinning_pars_vertex"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","morphtarget_pars_vertex"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","shadowmap_pars_vertex"]],["string","void main() {"],["string","vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );"],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","map_vertex"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","lightmap_vertex"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","envmap_vertex"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","color_vertex"]],["string","#ifndef USE_ENVMAP"],["string","vec4 mPosition = objectMatrix * vec4( position, 1.0 );"],["string","#endif"],["string","vViewPosition = -mvPosition.xyz;"],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","morphnormal_vertex"]],["string","vNormal = transformedNormal;"],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","lights_phong_vertex"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","skinning_vertex"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","morphtarget_vertex"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","default_vertex"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","shadowmap_vertex"]],["string","}"]]],"join"],[["string","\n"]]]],["fragmentShader",["call",["dot",["array",[["string","uniform vec3 diffuse;"],["string","uniform float opacity;"],["string","uniform vec3 ambient;"],["string","uniform vec3 emissive;"],["string","uniform vec3 specular;"],["string","uniform float shininess;"],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","color_pars_fragment"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","map_pars_fragment"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","lightmap_pars_fragment"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","envmap_pars_fragment"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","fog_pars_fragment"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","lights_phong_pars_fragment"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","shadowmap_pars_fragment"]],["string","void main() {"],["string","gl_FragColor = vec4( vec3 ( 1.0 ), opacity );"],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","map_fragment"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","alphatest_fragment"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","lights_phong_fragment"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","lightmap_fragment"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","color_fragment"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","envmap_fragment"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","shadowmap_fragment"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","linear_to_gamma_fragment"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","fog_fragment"]],["string","}"]]],"join"],[["string","\n"]]]]]]],["particle_basic",["object",[["uniforms",["call",["dot",["dot",["name","THREE"],"UniformsUtils"],"merge"],[["array",[["sub",["dot",["name","THREE"],"UniformsLib"],["string","particle"]],["sub",["dot",["name","THREE"],"UniformsLib"],["string","shadowmap"]]]]]]],["vertexShader",["call",["dot",["array",[["string","uniform float size;"],["string","uniform float scale;"],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","color_pars_vertex"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","shadowmap_pars_vertex"]],["string","void main() {"],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","color_vertex"]],["string","vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );"],["string","#ifdef USE_SIZEATTENUATION"],["string","gl_PointSize = size * ( scale / length( mvPosition.xyz ) );"],["string","#else"],["string","gl_PointSize = size;"],["string","#endif"],["string","gl_Position = projectionMatrix * mvPosition;"],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","shadowmap_vertex"]],["string","}"]]],"join"],[["string","\n"]]]],["fragmentShader",["call",["dot",["array",[["string","uniform vec3 psColor;"],["string","uniform float opacity;"],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","color_pars_fragment"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","map_particle_pars_fragment"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","fog_pars_fragment"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","shadowmap_pars_fragment"]],["string","void main() {"],["string","gl_FragColor = vec4( psColor, opacity );"],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","map_particle_fragment"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","alphatest_fragment"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","color_fragment"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","shadowmap_fragment"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","fog_fragment"]],["string","}"]]],"join"],[["string","\n"]]]]]]],["depthRGBA",["object",[["uniforms",["object",[]]],["vertexShader",["call",["dot",["array",[["sub",["dot",["name","THREE"],"ShaderChunk"],["string","morphtarget_pars_vertex"]],["string","void main() {"],["string","vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );"],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","morphtarget_vertex"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","default_vertex"]],["string","}"]]],"join"],[["string","\n"]]]],["fragmentShader",["call",["dot",["array",[["string","vec4 pack_depth( const in float depth ) {"],["string","const vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );"],["string","const vec4 bit_mask  = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );"],["string","vec4 res = fract( depth * bit_shift );"],["string","res -= res.xxyz * bit_mask;"],["string","return res;"],["string","}"],["string","void main() {"],["string","gl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );"],["string","}"]]],"join"],[["string","\n"]]]]]]]]]]],["stat",["assign",true,["dot",["name","THREE"],"WebGLRenderer"],["function",null,["parameters"],[["stat",["call",["dot",["name","console"],"log"],[["string","THREE.WebGLRenderer"],["dot",["name","THREE"],"REVISION"]]]],["stat",["assign",true,["name","parameters"],["binary","||",["name","parameters"],["object",[]]]]],["var",[["_canvas",["conditional",["binary","!==",["dot",["name","parameters"],"canvas"],["name","undefined"]],["dot",["name","parameters"],"canvas"],["call",["dot",["name","document"],"createElement"],[["string","canvas"]]]]],["_precision",["conditional",["binary","!==",["dot",["name","parameters"],"precision"],["name","undefined"]],["dot",["name","parameters"],"precision"],["string","highp"]]],["_alpha",["conditional",["binary","!==",["dot",["name","parameters"],"alpha"],["name","undefined"]],["dot",["name","parameters"],"alpha"],["name","true"]]],["_premultipliedAlpha",["conditional",["binary","!==",["dot",["name","parameters"],"premultipliedAlpha"],["name","undefined"]],["dot",["name","parameters"],"premultipliedAlpha"],["name","true"]]],["_antialias",["conditional",["binary","!==",["dot",["name","parameters"],"antialias"],["name","undefined"]],["dot",["name","parameters"],"antialias"],["name","false"]]],["_stencil",["conditional",["binary","!==",["dot",["name","parameters"],"stencil"],["name","undefined"]],["dot",["name","parameters"],"stencil"],["name","true"]]],["_preserveDrawingBuffer",["conditional",["binary","!==",["dot",["name","parameters"],"preserveDrawingBuffer"],["name","undefined"]],["dot",["name","parameters"],"preserveDrawingBuffer"],["name","false"]]],["_clearColor",["conditional",["binary","!==",["dot",["name","parameters"],"clearColor"],["name","undefined"]],["new",["dot",["name","THREE"],"Color"],[["dot",["name","parameters"],"clearColor"]]],["new",["dot",["name","THREE"],"Color"],[["num",0]]]]],["_clearAlpha",["conditional",["binary","!==",["dot",["name","parameters"],"clearAlpha"],["name","undefined"]],["dot",["name","parameters"],"clearAlpha"],["num",0]]],["_maxLights",["conditional",["binary","!==",["dot",["name","parameters"],"maxLights"],["name","undefined"]],["dot",["name","parameters"],"maxLights"],["num",4]]]]],["stat",["assign",true,["dot",["name","this"],"domElement"],["name","_canvas"]]],["stat",["assign",true,["dot",["name","this"],"context"],["name","null"]]],["stat",["assign",true,["dot",["name","this"],"autoClear"],["name","true"]]],["stat",["assign",true,["dot",["name","this"],"autoClearColor"],["name","true"]]],["stat",["assign",true,["dot",["name","this"],"autoClearDepth"],["name","true"]]],["stat",["assign",true,["dot",["name","this"],"autoClearStencil"],["name","true"]]],["stat",["assign",true,["dot",["name","this"],"sortObjects"],["name","true"]]],["stat",["assign",true,["dot",["name","this"],"autoUpdateObjects"],["name","true"]]],["stat",["assign",true,["dot",["name","this"],"autoUpdateScene"],["name","true"]]],["stat",["assign",true,["dot",["name","this"],"gammaInput"],["name","false"]]],["stat",["assign",true,["dot",["name","this"],"gammaOutput"],["name","false"]]],["stat",["assign",true,["dot",["name","this"],"physicallyBasedShading"],["name","false"]]],["stat",["assign",true,["dot",["name","this"],"shadowMapEnabled"],["name","false"]]],["stat",["assign",true,["dot",["name","this"],"shadowMapAutoUpdate"],["name","true"]]],["stat",["assign",true,["dot",["name","this"],"shadowMapSoft"],["name","true"]]],["stat",["assign",true,["dot",["name","this"],"shadowMapCullFrontFaces"],["name","true"]]],["stat",["assign",true,["dot",["name","this"],"shadowMapDebug"],["name","false"]]],["stat",["assign",true,["dot",["name","this"],"shadowMapCascade"],["name","false"]]],["stat",["assign",true,["dot",["name","this"],"maxMorphTargets"],["num",8]]],["stat",["assign",true,["dot",["name","this"],"maxMorphNormals"],["num",4]]],["stat",["assign",true,["dot",["name","this"],"autoScaleCubemaps"],["name","true"]]],["stat",["assign",true,["dot",["name","this"],"renderPluginsPre"],["array",[]]]],["stat",["assign",true,["dot",["name","this"],"renderPluginsPost"],["array",[]]]],["stat",["assign",true,["dot",["name","this"],"info"],["object",[["memory",["object",[["programs",["num",0]],["geometries",["num",0]],["textures",["num",0]]]]],["render",["object",[["calls",["num",0]],["vertices",["num",0]],["faces",["num",0]],["points",["num",0]]]]]]]]],["var",[["_this",["name","this"]],["_gl"],["_programs",["array",[]]],["_currentProgram",["name","null"]],["_currentFramebuffer",["name","null"]],["_currentMaterialId",["unary-prefix","-",["num",1]]],["_currentGeometryGroupHash",["name","null"]],["_currentCamera",["name","null"]],["_geometryGroupCounter",["num",0]],["_oldDoubleSided",["unary-prefix","-",["num",1]]],["_oldFlipSided",["unary-prefix","-",["num",1]]],["_oldBlending",["unary-prefix","-",["num",1]]],["_oldBlendEquation",["unary-prefix","-",["num",1]]],["_oldBlendSrc",["unary-prefix","-",["num",1]]],["_oldBlendDst",["unary-prefix","-",["num",1]]],["_oldDepthTest",["unary-prefix","-",["num",1]]],["_oldDepthWrite",["unary-prefix","-",["num",1]]],["_oldPolygonOffset",["name","null"]],["_oldPolygonOffsetFactor",["name","null"]],["_oldPolygonOffsetUnits",["name","null"]],["_oldLineWidth",["name","null"]],["_viewportX",["num",0]],["_viewportY",["num",0]],["_viewportWidth",["num",0]],["_viewportHeight",["num",0]],["_currentWidth",["num",0]],["_currentHeight",["num",0]],["_frustum",["new",["dot",["name","THREE"],"Frustum"],[]]],["_projScreenMatrix",["new",["dot",["name","THREE"],"Matrix4"],[]]],["_projScreenMatrixPS",["new",["dot",["name","THREE"],"Matrix4"],[]]],["_vector3",["new",["dot",["name","THREE"],"Vector4"],[]]],["_direction",["new",["dot",["name","THREE"],"Vector3"],[]]],["_lightsNeedUpdate",["name","true"]],["_lights",["object",[["ambient",["array",[["num",0],["num",0],["num",0]]]],["directional",["object",[["length",["num",0]],["colors",["new",["name","Array"],[]]],["positions",["new",["name","Array"],[]]]]]],["point",["object",[["length",["num",0]],["colors",["new",["name","Array"],[]]],["positions",["new",["name","Array"],[]]],["distances",["new",["name","Array"],[]]]]]],["spot",["object",[["length",["num",0]],["colors",["new",["name","Array"],[]]],["positions",["new",["name","Array"],[]]],["distances",["new",["name","Array"],[]]],["directions",["new",["name","Array"],[]]],["angles",["new",["name","Array"],[]]],["exponents",["new",["name","Array"],[]]]]]]]]]]],["stat",["assign",true,["name","_gl"],["call",["name","initGL"],[]]]],["stat",["call",["name","setDefaultGLState"],[]]],["stat",["assign",true,["dot",["name","this"],"context"],["name","_gl"]]],["var",[["_maxVertexTextures",["call",["dot",["name","_gl"],"getParameter"],[["dot",["name","_gl"],"MAX_VERTEX_TEXTURE_IMAGE_UNITS"]]]],["_maxTextureSize",["call",["dot",["name","_gl"],"getParameter"],[["dot",["name","_gl"],"MAX_TEXTURE_SIZE"]]]],["_maxCubemapSize",["call",["dot",["name","_gl"],"getParameter"],[["dot",["name","_gl"],"MAX_CUBE_MAP_TEXTURE_SIZE"]]]]]],["stat",["assign",true,["dot",["name","this"],"getContext"],["function",null,[],[["return",["name","_gl"]]]]]],["stat",["assign",true,["dot",["name","this"],"supportsVertexTextures"],["function",null,[],[["return",["binary",">",["name","_maxVertexTextures"],["num",0]]]]]]],["stat",["assign",true,["dot",["name","this"],"setSize"],["function",null,["width","height"],[["stat",["assign",true,["dot",["name","_canvas"],"width"],["name","width"]]],["stat",["assign",true,["dot",["name","_canvas"],"height"],["name","height"]]],["stat",["call",["dot",["name","this"],"setViewport"],[["num",0],["num",0],["dot",["name","_canvas"],"width"],["dot",["name","_canvas"],"height"]]]]]]]],["stat",["assign",true,["dot",["name","this"],"setViewport"],["function",null,["x","y","width","height"],[["stat",["assign",true,["name","_viewportX"],["name","x"]]],["stat",["assign",true,["name","_viewportY"],["name","y"]]],["stat",["assign",true,["name","_viewportWidth"],["name","width"]]],["stat",["assign",true,["name","_viewportHeight"],["name","height"]]],["stat",["call",["dot",["name","_gl"],"viewport"],[["name","_viewportX"],["name","_viewportY"],["name","_viewportWidth"],["name","_viewportHeight"]]]]]]]],["stat",["assign",true,["dot",["name","this"],"setScissor"],["function",null,["x","y","width","height"],[["stat",["call",["dot",["name","_gl"],"scissor"],[["name","x"],["name","y"],["name","width"],["name","height"]]]]]]]],["stat",["assign",true,["dot",["name","this"],"enableScissorTest"],["function",null,["enable"],[["stat",["conditional",["name","enable"],["call",["dot",["name","_gl"],"enable"],[["dot",["name","_gl"],"SCISSOR_TEST"]]],["call",["dot",["name","_gl"],"disable"],[["dot",["name","_gl"],"SCISSOR_TEST"]]]]]]]]],["stat",["assign",true,["dot",["name","this"],"setClearColorHex"],["function",null,["hex","alpha"],[["stat",["call",["dot",["name","_clearColor"],"setHex"],[["name","hex"]]]],["stat",["assign",true,["name","_clearAlpha"],["name","alpha"]]],["stat",["call",["dot",["name","_gl"],"clearColor"],[["dot",["name","_clearColor"],"r"],["dot",["name","_clearColor"],"g"],["dot",["name","_clearColor"],"b"],["name","_clearAlpha"]]]]]]]],["stat",["assign",true,["dot",["name","this"],"setClearColor"],["function",null,["color","alpha"],[["stat",["call",["dot",["name","_clearColor"],"copy"],[["name","color"]]]],["stat",["assign",true,["name","_clearAlpha"],["name","alpha"]]],["stat",["call",["dot",["name","_gl"],"clearColor"],[["dot",["name","_clearColor"],"r"],["dot",["name","_clearColor"],"g"],["dot",["name","_clearColor"],"b"],["name","_clearAlpha"]]]]]]]],["stat",["assign",true,["dot",["name","this"],"getClearColor"],["function",null,[],[["return",["name","_clearColor"]]]]]],["stat",["assign",true,["dot",["name","this"],"getClearAlpha"],["function",null,[],[["return",["name","_clearAlpha"]]]]]],["stat",["assign",true,["dot",["name","this"],"clear"],["function",null,["color","depth","stencil"],[["var",[["bits",["num",0]]]],["if",["binary","||",["binary","===",["name","color"],["name","undefined"]],["name","color"]],["stat",["assign","|",["name","bits"],["dot",["name","_gl"],"COLOR_BUFFER_BIT"]]],null],["if",["binary","||",["binary","===",["name","depth"],["name","undefined"]],["name","depth"]],["stat",["assign","|",["name","bits"],["dot",["name","_gl"],"DEPTH_BUFFER_BIT"]]],null],["if",["binary","||",["binary","===",["name","stencil"],["name","undefined"]],["name","stencil"]],["stat",["assign","|",["name","bits"],["dot",["name","_gl"],"STENCIL_BUFFER_BIT"]]],null],["stat",["call",["dot",["name","_gl"],"clear"],[["name","bits"]]]]]]]],["stat",["assign",true,["dot",["name","this"],"clearTarget"],["function",null,["renderTarget","color","depth","stencil"],[["stat",["call",["dot",["name","this"],"setRenderTarget"],[["name","renderTarget"]]]],["stat",["call",["dot",["name","this"],"clear"],[["name","color"],["name","depth"],["name","stencil"]]]]]]]],["stat",["assign",true,["dot",["name","this"],"addPostPlugin"],["function",null,["plugin"],[["stat",["call",["dot",["name","plugin"],"init"],[["name","this"]]]],["stat",["call",["dot",["dot",["name","this"],"renderPluginsPost"],"push"],[["name","plugin"]]]]]]]],["stat",["assign",true,["dot",["name","this"],"addPrePlugin"],["function",null,["plugin"],[["stat",["call",["dot",["name","plugin"],"init"],[["name","this"]]]],["stat",["call",["dot",["dot",["name","this"],"renderPluginsPre"],"push"],[["name","plugin"]]]]]]]],["stat",["assign",true,["dot",["name","this"],"deallocateObject"],["function",null,["object"],[["if",["unary-prefix","!",["dot",["name","object"],"__webglInit"]],["return",null],null],["stat",["assign",true,["dot",["name","object"],"__webglInit"],["name","false"]]],["stat",["unary-prefix","delete",["dot",["name","object"],"_modelViewMatrix"]]],["stat",["unary-prefix","delete",["dot",["name","object"],"_normalMatrix"]]],["stat",["unary-prefix","delete",["dot",["name","object"],"_normalMatrixArray"]]],["stat",["unary-prefix","delete",["dot",["name","object"],"_modelViewMatrixArray"]]],["stat",["unary-prefix","delete",["dot",["name","object"],"_objectMatrixArray"]]],["if",["binary","instanceof",["name","object"],["dot",["name","THREE"],"Mesh"]],["block",[["for-in",["var",[["g"]]],["name",["g"]],["dot",["dot",["name","object"],"geometry"],"geometryGroups"],["block",[["stat",["call",["name","deleteMeshBuffers"],[["sub",["dot",["dot",["name","object"],"geometry"],"geometryGroups"],["name","g"]]]]]]]]]],["if",["binary","instanceof",["name","object"],["dot",["name","THREE"],"Ribbon"]],["block",[["stat",["call",["name","deleteRibbonBuffers"],[["dot",["name","object"],"geometry"]]]]]],["if",["binary","instanceof",["name","object"],["dot",["name","THREE"],"Line"]],["block",[["stat",["call",["name","deleteLineBuffers"],[["dot",["name","object"],"geometry"]]]]]],["if",["binary","instanceof",["name","object"],["dot",["name","THREE"],"ParticleSystem"]],["block",[["stat",["call",["name","deleteParticleBuffers"],[["dot",["name","object"],"geometry"]]]]]],null]]]]]]]],["stat",["assign",true,["dot",["name","this"],"deallocateTexture"],["function",null,["texture"],[["if",["unary-prefix","!",["dot",["name","texture"],"__webglInit"]],["return",null],null],["stat",["assign",true,["dot",["name","texture"],"__webglInit"],["name","false"]]],["stat",["call",["dot",["name","_gl"],"deleteTexture"],[["dot",["name","texture"],"__webglTexture"]]]],["stat",["unary-postfix","--",["dot",["dot",["dot",["name","_this"],"info"],"memory"],"textures"]]]]]]],["stat",["assign",true,["dot",["name","this"],"deallocateRenderTarget"],["function",null,["renderTarget"],[["if",["binary","||",["unary-prefix","!",["name","renderTarget"]],["unary-prefix","!",["dot",["name","renderTarget"],"__webglTexture"]]],["return",null],null],["stat",["call",["dot",["name","_gl"],"deleteTexture"],[["dot",["name","renderTarget"],"__webglTexture"]]]],["if",["binary","instanceof",["name","renderTarget"],["dot",["name","THREE"],"WebGLRenderTargetCube"]],["block",[["for",["var",[["i",["num",0]]]],["binary","<",["name","i"],["num",6]],["unary-postfix","++",["name","i"]],["block",[["stat",["call",["dot",["name","_gl"],"deleteFramebuffer"],[["sub",["dot",["name","renderTarget"],"__webglFramebuffer"],["name","i"]]]]],["stat",["call",["dot",["name","_gl"],"deleteRenderbuffer"],[["sub",["dot",["name","renderTarget"],"__webglRenderbuffer"],["name","i"]]]]]]]]]],["block",[["stat",["call",["dot",["name","_gl"],"deleteFramebuffer"],[["dot",["name","renderTarget"],"__webglFramebuffer"]]]],["stat",["call",["dot",["name","_gl"],"deleteRenderbuffer"],[["dot",["name","renderTarget"],"__webglRenderbuffer"]]]]]]]]]]],["stat",["assign",true,["dot",["name","this"],"updateShadowMap"],["function",null,["scene","camera"],[["stat",["assign",true,["name","_currentProgram"],["name","null"]]],["stat",["assign",true,["name","_oldBlending"],["unary-prefix","-",["num",1]]]],["stat",["assign",true,["name","_oldDepthTest"],["unary-prefix","-",["num",1]]]],["stat",["assign",true,["name","_oldDepthWrite"],["unary-prefix","-",["num",1]]]],["stat",["assign",true,["name","_currentGeometryGroupHash"],["unary-prefix","-",["num",1]]]],["stat",["assign",true,["name","_currentMaterialId"],["unary-prefix","-",["num",1]]]],["stat",["assign",true,["name","_lightsNeedUpdate"],["name","true"]]],["stat",["assign",true,["name","_oldDoubleSided"],["unary-prefix","-",["num",1]]]],["stat",["assign",true,["name","_oldFlipSided"],["unary-prefix","-",["num",1]]]],["stat",["call",["dot",["dot",["name","this"],"shadowMapPlugin"],"update"],[["name","scene"],["name","camera"]]]]]]]],["defun","createParticleBuffers",["geometry"],[["stat",["assign",true,["dot",["name","geometry"],"__webglVertexBuffer"],["call",["dot",["name","_gl"],"createBuffer"],[]]]],["stat",["assign",true,["dot",["name","geometry"],"__webglColorBuffer"],["call",["dot",["name","_gl"],"createBuffer"],[]]]],["stat",["unary-postfix","++",["dot",["dot",["name","_this"],"info"],"geometries"]]]]],["block"],["defun","createLineBuffers",["geometry"],[["stat",["assign",true,["dot",["name","geometry"],"__webglVertexBuffer"],["call",["dot",["name","_gl"],"createBuffer"],[]]]],["stat",["assign",true,["dot",["name","geometry"],"__webglColorBuffer"],["call",["dot",["name","_gl"],"createBuffer"],[]]]],["stat",["unary-postfix","++",["dot",["dot",["dot",["name","_this"],"info"],"memory"],"geometries"]]]]],["block"],["defun","createRibbonBuffers",["geometry"],[["stat",["assign",true,["dot",["name","geometry"],"__webglVertexBuffer"],["call",["dot",["name","_gl"],"createBuffer"],[]]]],["stat",["assign",true,["dot",["name","geometry"],"__webglColorBuffer"],["call",["dot",["name","_gl"],"createBuffer"],[]]]],["stat",["unary-postfix","++",["dot",["dot",["dot",["name","_this"],"info"],"memory"],"geometries"]]]]],["block"],["defun","createMeshBuffers",["geometryGroup"],[["stat",["assign",true,["dot",["name","geometryGroup"],"__webglVertexBuffer"],["call",["dot",["name","_gl"],"createBuffer"],[]]]],["stat",["assign",true,["dot",["name","geometryGroup"],"__webglNormalBuffer"],["call",["dot",["name","_gl"],"createBuffer"],[]]]],["stat",["assign",true,["dot",["name","geometryGroup"],"__webglTangentBuffer"],["call",["dot",["name","_gl"],"createBuffer"],[]]]],["stat",["assign",true,["dot",["name","geometryGroup"],"__webglColorBuffer"],["call",["dot",["name","_gl"],"createBuffer"],[]]]],["stat",["assign",true,["dot",["name","geometryGroup"],"__webglUVBuffer"],["call",["dot",["name","_gl"],"createBuffer"],[]]]],["stat",["assign",true,["dot",["name","geometryGroup"],"__webglUV2Buffer"],["call",["dot",["name","_gl"],"createBuffer"],[]]]],["stat",["assign",true,["dot",["name","geometryGroup"],"__webglSkinVertexABuffer"],["call",["dot",["name","_gl"],"createBuffer"],[]]]],["stat",["assign",true,["dot",["name","geometryGroup"],"__webglSkinVertexBBuffer"],["call",["dot",["name","_gl"],"createBuffer"],[]]]],["stat",["assign",true,["dot",["name","geometryGroup"],"__webglSkinIndicesBuffer"],["call",["dot",["name","_gl"],"createBuffer"],[]]]],["stat",["assign",true,["dot",["name","geometryGroup"],"__webglSkinWeightsBuffer"],["call",["dot",["name","_gl"],"createBuffer"],[]]]],["stat",["assign",true,["dot",["name","geometryGroup"],"__webglFaceBuffer"],["call",["dot",["name","_gl"],"createBuffer"],[]]]],["stat",["assign",true,["dot",["name","geometryGroup"],"__webglLineBuffer"],["call",["dot",["name","_gl"],"createBuffer"],[]]]],["var",[["m"],["ml"]]],["if",["dot",["name","geometryGroup"],"numMorphTargets"],["block",[["stat",["assign",true,["dot",["name","geometryGroup"],"__webglMorphTargetsBuffers"],["array",[]]]],["for",["seq",["assign",true,["name","m"],["num",0]],["assign",true,["name","ml"],["dot",["name","geometryGroup"],"numMorphTargets"]]],["binary","<",["name","m"],["name","ml"]],["unary-postfix","++",["name","m"]],["block",[["stat",["call",["dot",["dot",["name","geometryGroup"],"__webglMorphTargetsBuffers"],"push"],[["call",["dot",["name","_gl"],"createBuffer"],[]]]]]]]]]],null],["if",["dot",["name","geometryGroup"],"numMorphNormals"],["block",[["stat",["assign",true,["dot",["name","geometryGroup"],"__webglMorphNormalsBuffers"],["array",[]]]],["for",["seq",["assign",true,["name","m"],["num",0]],["assign",true,["name","ml"],["dot",["name","geometryGroup"],"numMorphNormals"]]],["binary","<",["name","m"],["name","ml"]],["unary-postfix","++",["name","m"]],["block",[["stat",["call",["dot",["dot",["name","geometryGroup"],"__webglMorphNormalsBuffers"],"push"],[["call",["dot",["name","_gl"],"createBuffer"],[]]]]]]]]]],null],["stat",["unary-postfix","++",["dot",["dot",["dot",["name","_this"],"info"],"memory"],"geometries"]]]]],["block"],["defun","deleteParticleBuffers",["geometry"],[["stat",["call",["dot",["name","_gl"],"deleteBuffer"],[["dot",["name","geometry"],"__webglVertexBuffer"]]]],["stat",["call",["dot",["name","_gl"],"deleteBuffer"],[["dot",["name","geometry"],"__webglColorBuffer"]]]],["stat",["unary-postfix","--",["dot",["dot",["dot",["name","_this"],"info"],"memory"],"geometries"]]]]],["block"],["defun","deleteLineBuffers",["geometry"],[["stat",["call",["dot",["name","_gl"],"deleteBuffer"],[["dot",["name","geometry"],"__webglVertexBuffer"]]]],["stat",["call",["dot",["name","_gl"],"deleteBuffer"],[["dot",["name","geometry"],"__webglColorBuffer"]]]],["stat",["unary-postfix","--",["dot",["dot",["dot",["name","_this"],"info"],"memory"],"geometries"]]]]],["block"],["defun","deleteRibbonBuffers",["geometry"],[["stat",["call",["dot",["name","_gl"],"deleteBuffer"],[["dot",["name","geometry"],"__webglVertexBuffer"]]]],["stat",["call",["dot",["name","_gl"],"deleteBuffer"],[["dot",["name","geometry"],"__webglColorBuffer"]]]],["stat",["unary-postfix","--",["dot",["dot",["dot",["name","_this"],"info"],"memory"],"geometries"]]]]],["block"],["defun","deleteMeshBuffers",["geometryGroup"],[["stat",["call",["dot",["name","_gl"],"deleteBuffer"],[["dot",["name","geometryGroup"],"__webglVertexBuffer"]]]],["stat",["call",["dot",["name","_gl"],"deleteBuffer"],[["dot",["name","geometryGroup"],"__webglNormalBuffer"]]]],["stat",["call",["dot",["name","_gl"],"deleteBuffer"],[["dot",["name","geometryGroup"],"__webglTangentBuffer"]]]],["stat",["call",["dot",["name","_gl"],"deleteBuffer"],[["dot",["name","geometryGroup"],"__webglColorBuffer"]]]],["stat",["call",["dot",["name","_gl"],"deleteBuffer"],[["dot",["name","geometryGroup"],"__webglUVBuffer"]]]],["stat",["call",["dot",["name","_gl"],"deleteBuffer"],[["dot",["name","geometryGroup"],"__webglUV2Buffer"]]]],["stat",["call",["dot",["name","_gl"],"deleteBuffer"],[["dot",["name","geometryGroup"],"__webglSkinVertexABuffer"]]]],["stat",["call",["dot",["name","_gl"],"deleteBuffer"],[["dot",["name","geometryGroup"],"__webglSkinVertexBBuffer"]]]],["stat",["call",["dot",["name","_gl"],"deleteBuffer"],[["dot",["name","geometryGroup"],"__webglSkinIndicesBuffer"]]]],["stat",["call",["dot",["name","_gl"],"deleteBuffer"],[["dot",["name","geometryGroup"],"__webglSkinWeightsBuffer"]]]],["stat",["call",["dot",["name","_gl"],"deleteBuffer"],[["dot",["name","geometryGroup"],"__webglFaceBuffer"]]]],["stat",["call",["dot",["name","_gl"],"deleteBuffer"],[["dot",["name","geometryGroup"],"__webglLineBuffer"]]]],["var",[["m"],["ml"]]],["if",["dot",["name","geometryGroup"],"numMorphTargets"],["block",[["for",["seq",["assign",true,["name","m"],["num",0]],["assign",true,["name","ml"],["dot",["name","geometryGroup"],"numMorphTargets"]]],["binary","<",["name","m"],["name","ml"]],["unary-postfix","++",["name","m"]],["block",[["stat",["call",["dot",["name","_gl"],"deleteBuffer"],[["sub",["dot",["name","geometryGroup"],"__webglMorphTargetsBuffers"],["name","m"]]]]]]]]]],null],["if",["dot",["name","geometryGroup"],"numMorphNormals"],["block",[["for",["seq",["assign",true,["name","m"],["num",0]],["assign",true,["name","ml"],["dot",["name","geometryGroup"],"numMorphNormals"]]],["binary","<",["name","m"],["name","ml"]],["unary-postfix","++",["name","m"]],["block",[["stat",["call",["dot",["name","_gl"],"deleteBuffer"],[["sub",["dot",["name","geometryGroup"],"__webglMorphNormalsBuffers"],["name","m"]]]]]]]]]],null],["if",["dot",["name","geometryGroup"],"__webglCustomAttributesList"],["block",[["for-in",["var",[["id"]]],["name",["id"]],["dot",["name","geometryGroup"],"__webglCustomAttributesList"],["block",[["stat",["call",["dot",["name","_gl"],"deleteBuffer"],[["dot",["sub",["dot",["name","geometryGroup"],"__webglCustomAttributesList"],["name","id"]],"buffer"]]]]]]]]],null],["stat",["unary-postfix","--",["dot",["dot",["dot",["name","_this"],"info"],"memory"],"geometries"]]]]],["block"],["defun","initCustomAttributes",["geometry","object"],[["var",[["nvertices",["dot",["dot",["name","geometry"],"vertices"],"length"]]]],["var",[["material",["dot",["name","object"],"material"]]]],["if",["dot",["name","material"],"attributes"],["block",[["if",["binary","===",["dot",["name","geometry"],"__webglCustomAttributesList"],["name","undefined"]],["block",[["stat",["assign",true,["dot",["name","geometry"],"__webglCustomAttributesList"],["array",[]]]]]],null],["for-in",["var",[["a"]]],["name",["a"]],["dot",["name","material"],"attributes"],["block",[["var",[["attribute",["sub",["dot",["name","material"],"attributes"],["name","a"]]]]],["if",["binary","||",["unary-prefix","!",["dot",["name","attribute"],"__webglInitialized"]],["dot",["name","attribute"],"createUniqueBuffers"]],["block",[["stat",["assign",true,["dot",["name","attribute"],"__webglInitialized"],["name","true"]]],["var",[["size",["num",1]]]],["if",["binary","===",["dot",["name","attribute"],"type"],["string","v2"]],["stat",["assign",true,["name","size"],["num",2]]],["if",["binary","===",["dot",["name","attribute"],"type"],["string","v3"]],["stat",["assign",true,["name","size"],["num",3]]],["if",["binary","===",["dot",["name","attribute"],"type"],["string","v4"]],["stat",["assign",true,["name","size"],["num",4]]],["if",["binary","===",["dot",["name","attribute"],"type"],["string","c"]],["stat",["assign",true,["name","size"],["num",3]]],null]]]],["stat",["assign",true,["dot",["name","attribute"],"size"],["name","size"]]],["stat",["assign",true,["dot",["name","attribute"],"array"],["new",["name","Float32Array"],[["binary","*",["name","nvertices"],["name","size"]]]]]],["stat",["assign",true,["dot",["name","attribute"],"buffer"],["call",["dot",["name","_gl"],"createBuffer"],[]]]],["stat",["assign",true,["dot",["dot",["name","attribute"],"buffer"],"belongsToAttribute"],["name","a"]]],["stat",["assign",true,["dot",["name","attribute"],"needsUpdate"],["name","true"]]]]],null],["stat",["call",["dot",["dot",["name","geometry"],"__webglCustomAttributesList"],"push"],[["name","attribute"]]]]]]]]],null]]],["block"],["defun","initParticleBuffers",["geometry","object"],[["var",[["nvertices",["dot",["dot",["name","geometry"],"vertices"],"length"]]]],["stat",["assign",true,["dot",["name","geometry"],"__vertexArray"],["new",["name","Float32Array"],[["binary","*",["name","nvertices"],["num",3]]]]]],["stat",["assign",true,["dot",["name","geometry"],"__colorArray"],["new",["name","Float32Array"],[["binary","*",["name","nvertices"],["num",3]]]]]],["stat",["assign",true,["dot",["name","geometry"],"__sortArray"],["array",[]]]],["stat",["assign",true,["dot",["name","geometry"],"__webglParticleCount"],["name","nvertices"]]],["stat",["call",["name","initCustomAttributes"],[["name","geometry"],["name","object"]]]]]],["block"],["defun","initLineBuffers",["geometry","object"],[["var",[["nvertices",["dot",["dot",["name","geometry"],"vertices"],"length"]]]],["stat",["assign",true,["dot",["name","geometry"],"__vertexArray"],["new",["name","Float32Array"],[["binary","*",["name","nvertices"],["num",3]]]]]],["stat",["assign",true,["dot",["name","geometry"],"__colorArray"],["new",["name","Float32Array"],[["binary","*",["name","nvertices"],["num",3]]]]]],["stat",["assign",true,["dot",["name","geometry"],"__webglLineCount"],["name","nvertices"]]],["stat",["call",["name","initCustomAttributes"],[["name","geometry"],["name","object"]]]]]],["block"],["defun","initRibbonBuffers",["geometry"],[["var",[["nvertices",["dot",["dot",["name","geometry"],"vertices"],"length"]]]],["stat",["assign",true,["dot",["name","geometry"],"__vertexArray"],["new",["name","Float32Array"],[["binary","*",["name","nvertices"],["num",3]]]]]],["stat",["assign",true,["dot",["name","geometry"],"__colorArray"],["new",["name","Float32Array"],[["binary","*",["name","nvertices"],["num",3]]]]]],["stat",["assign",true,["dot",["name","geometry"],"__webglVertexCount"],["name","nvertices"]]]]],["block"],["defun","initMeshBuffers",["geometryGroup","object"],[["var",[["geometry",["dot",["name","object"],"geometry"]],["faces3",["dot",["name","geometryGroup"],"faces3"]],["faces4",["dot",["name","geometryGroup"],"faces4"]],["nvertices",["binary","+",["binary","*",["dot",["name","faces3"],"length"],["num",3]],["binary","*",["dot",["name","faces4"],"length"],["num",4]]]],["ntris",["binary","+",["binary","*",["dot",["name","faces3"],"length"],["num",1]],["binary","*",["dot",["name","faces4"],"length"],["num",2]]]],["nlines",["binary","+",["binary","*",["dot",["name","faces3"],"length"],["num",3]],["binary","*",["dot",["name","faces4"],"length"],["num",4]]]],["material",["call",["name","getBufferMaterial"],[["name","object"],["name","geometryGroup"]]]],["uvType",["call",["name","bufferGuessUVType"],[["name","material"]]]],["normalType",["call",["name","bufferGuessNormalType"],[["name","material"]]]],["vertexColorType",["call",["name","bufferGuessVertexColorType"],[["name","material"]]]]]],["stat",["assign",true,["dot",["name","geometryGroup"],"__vertexArray"],["new",["name","Float32Array"],[["binary","*",["name","nvertices"],["num",3]]]]]],["if",["name","normalType"],["block",[["stat",["assign",true,["dot",["name","geometryGroup"],"__normalArray"],["new",["name","Float32Array"],[["binary","*",["name","nvertices"],["num",3]]]]]]]],null],["if",["dot",["name","geometry"],"hasTangents"],["block",[["stat",["assign",true,["dot",["name","geometryGroup"],"__tangentArray"],["new",["name","Float32Array"],[["binary","*",["name","nvertices"],["num",4]]]]]]]],null],["if",["name","vertexColorType"],["block",[["stat",["assign",true,["dot",["name","geometryGroup"],"__colorArray"],["new",["name","Float32Array"],[["binary","*",["name","nvertices"],["num",3]]]]]]]],null],["if",["name","uvType"],["block",[["if",["binary","||",["binary",">",["dot",["dot",["name","geometry"],"faceUvs"],"length"],["num",0]],["binary",">",["dot",["dot",["name","geometry"],"faceVertexUvs"],"length"],["num",0]]],["block",[["stat",["assign",true,["dot",["name","geometryGroup"],"__uvArray"],["new",["name","Float32Array"],[["binary","*",["name","nvertices"],["num",2]]]]]]]],null],["if",["binary","||",["binary",">",["dot",["dot",["name","geometry"],"faceUvs"],"length"],["num",1]],["binary",">",["dot",["dot",["name","geometry"],"faceVertexUvs"],"length"],["num",1]]],["block",[["stat",["assign",true,["dot",["name","geometryGroup"],"__uv2Array"],["new",["name","Float32Array"],[["binary","*",["name","nvertices"],["num",2]]]]]]]],null]]],null],["if",["binary","&&",["dot",["dot",["dot",["name","object"],"geometry"],"skinWeights"],"length"],["dot",["dot",["dot",["name","object"],"geometry"],"skinIndices"],"length"]],["block",[["stat",["assign",true,["dot",["name","geometryGroup"],"__skinVertexAArray"],["new",["name","Float32Array"],[["binary","*",["name","nvertices"],["num",4]]]]]],["stat",["assign",true,["dot",["name","geometryGroup"],"__skinVertexBArray"],["new",["name","Float32Array"],[["binary","*",["name","nvertices"],["num",4]]]]]],["stat",["assign",true,["dot",["name","geometryGroup"],"__skinIndexArray"],["new",["name","Float32Array"],[["binary","*",["name","nvertices"],["num",4]]]]]],["stat",["assign",true,["dot",["name","geometryGroup"],"__skinWeightArray"],["new",["name","Float32Array"],[["binary","*",["name","nvertices"],["num",4]]]]]]]],null],["stat",["assign",true,["dot",["name","geometryGroup"],"__faceArray"],["new",["name","Uint16Array"],[["binary","*",["name","ntris"],["num",3]]]]]],["stat",["assign",true,["dot",["name","geometryGroup"],"__lineArray"],["new",["name","Uint16Array"],[["binary","*",["name","nlines"],["num",2]]]]]],["var",[["m"],["ml"]]],["if",["dot",["name","geometryGroup"],"numMorphTargets"],["block",[["stat",["assign",true,["dot",["name","geometryGroup"],"__morphTargetsArrays"],["array",[]]]],["for",["seq",["assign",true,["name","m"],["num",0]],["assign",true,["name","ml"],["dot",["name","geometryGroup"],"numMorphTargets"]]],["binary","<",["name","m"],["name","ml"]],["unary-postfix","++",["name","m"]],["block",[["stat",["call",["dot",["dot",["name","geometryGroup"],"__morphTargetsArrays"],"push"],[["new",["name","Float32Array"],[["binary","*",["name","nvertices"],["num",3]]]]]]]]]]]],null],["if",["dot",["name","geometryGroup"],"numMorphNormals"],["block",[["stat",["assign",true,["dot",["name","geometryGroup"],"__morphNormalsArrays"],["array",[]]]],["for",["seq",["assign",true,["name","m"],["num",0]],["assign",true,["name","ml"],["dot",["name","geometryGroup"],"numMorphNormals"]]],["binary","<",["name","m"],["name","ml"]],["unary-postfix","++",["name","m"]],["block",[["stat",["call",["dot",["dot",["name","geometryGroup"],"__morphNormalsArrays"],"push"],[["new",["name","Float32Array"],[["binary","*",["name","nvertices"],["num",3]]]]]]]]]]]],null],["stat",["assign",true,["dot",["name","geometryGroup"],"__webglFaceCount"],["binary","*",["name","ntris"],["num",3]]]],["stat",["assign",true,["dot",["name","geometryGroup"],"__webglLineCount"],["binary","*",["name","nlines"],["num",2]]]],["if",["dot",["name","material"],"attributes"],["block",[["if",["binary","===",["dot",["name","geometryGroup"],"__webglCustomAttributesList"],["name","undefined"]],["block",[["stat",["assign",true,["dot",["name","geometryGroup"],"__webglCustomAttributesList"],["array",[]]]]]],null],["for-in",["var",[["a"]]],["name",["a"]],["dot",["name","material"],"attributes"],["block",[["var",[["originalAttribute",["sub",["dot",["name","material"],"attributes"],["name","a"]]]]],["var",[["attribute",["object",[]]]]],["for-in",["var",[["property"]]],["name",["property"]],["name","originalAttribute"],["block",[["stat",["assign",true,["sub",["name","attribute"],["name","property"]],["sub",["name","originalAttribute"],["name","property"]]]]]]],["if",["binary","||",["unary-prefix","!",["dot",["name","attribute"],"__webglInitialized"]],["dot",["name","attribute"],"createUniqueBuffers"]],["block",[["stat",["assign",true,["dot",["name","attribute"],"__webglInitialized"],["name","true"]]],["var",[["size",["num",1]]]],["if",["binary","===",["dot",["name","attribute"],"type"],["string","v2"]],["stat",["assign",true,["name","size"],["num",2]]],["if",["binary","===",["dot",["name","attribute"],"type"],["string","v3"]],["stat",["assign",true,["name","size"],["num",3]]],["if",["binary","===",["dot",["name","attribute"],"type"],["string","v4"]],["stat",["assign",true,["name","size"],["num",4]]],["if",["binary","===",["dot",["name","attribute"],"type"],["string","c"]],["stat",["assign",true,["name","size"],["num",3]]],null]]]],["stat",["assign",true,["dot",["name","attribute"],"size"],["name","size"]]],["stat",["assign",true,["dot",["name","attribute"],"array"],["new",["name","Float32Array"],[["binary","*",["name","nvertices"],["name","size"]]]]]],["stat",["assign",true,["dot",["name","attribute"],"buffer"],["call",["dot",["name","_gl"],"createBuffer"],[]]]],["stat",["assign",true,["dot",["dot",["name","attribute"],"buffer"],"belongsToAttribute"],["name","a"]]],["stat",["assign",true,["dot",["name","originalAttribute"],"needsUpdate"],["name","true"]]],["stat",["assign",true,["dot",["name","attribute"],"__original"],["name","originalAttribute"]]]]],null],["stat",["call",["dot",["dot",["name","geometryGroup"],"__webglCustomAttributesList"],"push"],[["name","attribute"]]]]]]]]],null],["stat",["assign",true,["dot",["name","geometryGroup"],"__inittedArrays"],["name","true"]]]]],["block"],["defun","getBufferMaterial",["object","geometryGroup"],[["if",["binary","&&",["dot",["name","object"],"material"],["unary-prefix","!",["binary","instanceof",["dot",["name","object"],"material"],["dot",["name","THREE"],"MeshFaceMaterial"]]]],["block",[["return",["dot",["name","object"],"material"]]]],["if",["binary",">=",["dot",["name","geometryGroup"],"materialIndex"],["num",0]],["block",[["return",["sub",["dot",["dot",["name","object"],"geometry"],"materials"],["dot",["name","geometryGroup"],"materialIndex"]]]]],null]]]],["block"],["defun","materialNeedsSmoothNormals",["material"],[["return",["binary","&&",["binary","&&",["name","material"],["binary","!==",["dot",["name","material"],"shading"],["name","undefined"]]],["binary","===",["dot",["name","material"],"shading"],["dot",["name","THREE"],"SmoothShading"]]]]]],["block"],["defun","bufferGuessNormalType",["material"],[["if",["binary","||",["binary","&&",["binary","instanceof",["name","material"],["dot",["name","THREE"],"MeshBasicMaterial"]],["unary-prefix","!",["dot",["name","material"],"envMap"]]],["binary","instanceof",["name","material"],["dot",["name","THREE"],"MeshDepthMaterial"]]],["block",[["return",["name","false"]]]],null],["if",["call",["name","materialNeedsSmoothNormals"],[["name","material"]]],["block",[["return",["dot",["name","THREE"],"SmoothShading"]]]],["block",[["return",["dot",["name","THREE"],"FlatShading"]]]]]]],["block"],["defun","bufferGuessVertexColorType",["material"],[["if",["dot",["name","material"],"vertexColors"],["block",[["return",["dot",["name","material"],"vertexColors"]]]],null],["return",["name","false"]]]],["block"],["defun","bufferGuessUVType",["material"],[["if",["binary","||",["binary","||",["dot",["name","material"],"map"],["dot",["name","material"],"lightMap"]],["binary","instanceof",["name","material"],["dot",["name","THREE"],"ShaderMaterial"]]],["block",[["return",["name","true"]]]],null],["return",["name","false"]]]],["block"],["defun","setParticleBuffers",["geometry","hint","object"],[["var",[["v"],["c"],["vertex"],["offset"],["index"],["color"],["vertices",["dot",["name","geometry"],"vertices"]],["vl",["dot",["name","vertices"],"length"]],["colors",["dot",["name","geometry"],"colors"]],["cl",["dot",["name","colors"],"length"]],["vertexArray",["dot",["name","geometry"],"__vertexArray"]],["colorArray",["dot",["name","geometry"],"__colorArray"]],["sortArray",["dot",["name","geometry"],"__sortArray"]],["dirtyVertices",["dot",["name","geometry"],"verticesNeedUpdate"]],["dirtyElements",["dot",["name","geometry"],"elementsNeedUpdate"]],["dirtyColors",["dot",["name","geometry"],"colorsNeedUpdate"]],["customAttributes",["dot",["name","geometry"],"__webglCustomAttributesList"]],["i"],["il"],["a"],["ca"],["cal"],["value"],["customAttribute"]]],["if",["dot",["name","object"],"sortParticles"],["block",[["stat",["call",["dot",["name","_projScreenMatrixPS"],"copy"],[["name","_projScreenMatrix"]]]],["stat",["call",["dot",["name","_projScreenMatrixPS"],"multiplySelf"],[["dot",["name","object"],"matrixWorld"]]]],["for",["assign",true,["name","v"],["num",0]],["binary","<",["name","v"],["name","vl"]],["unary-postfix","++",["name","v"]],["block",[["stat",["assign",true,["name","vertex"],["sub",["name","vertices"],["name","v"]]]],["stat",["call",["dot",["name","_vector3"],"copy"],[["name","vertex"]]]],["stat",["call",["dot",["name","_projScreenMatrixPS"],"multiplyVector3"],[["name","_vector3"]]]],["stat",["assign",true,["sub",["name","sortArray"],["name","v"]],["array",[["dot",["name","_vector3"],"z"],["name","v"]]]]]]]],["stat",["call",["dot",["name","sortArray"],"sort"],[["function",null,["a","b"],[["return",["binary","-",["sub",["name","b"],["num",0]],["sub",["name","a"],["num",0]]]]]]]]],["for",["assign",true,["name","v"],["num",0]],["binary","<",["name","v"],["name","vl"]],["unary-postfix","++",["name","v"]],["block",[["stat",["assign",true,["name","vertex"],["sub",["name","vertices"],["sub",["sub",["name","sortArray"],["name","v"]],["num",1]]]]],["stat",["assign",true,["name","offset"],["binary","*",["name","v"],["num",3]]]],["stat",["assign",true,["sub",["name","vertexArray"],["name","offset"]],["dot",["name","vertex"],"x"]]],["stat",["assign",true,["sub",["name","vertexArray"],["binary","+",["name","offset"],["num",1]]],["dot",["name","vertex"],"y"]]],["stat",["assign",true,["sub",["name","vertexArray"],["binary","+",["name","offset"],["num",2]]],["dot",["name","vertex"],"z"]]]]]],["for",["assign",true,["name","c"],["num",0]],["binary","<",["name","c"],["name","cl"]],["unary-postfix","++",["name","c"]],["block",[["stat",["assign",true,["name","offset"],["binary","*",["name","c"],["num",3]]]],["stat",["assign",true,["name","color"],["sub",["name","colors"],["sub",["sub",["name","sortArray"],["name","c"]],["num",1]]]]],["stat",["assign",true,["sub",["name","colorArray"],["name","offset"]],["dot",["name","color"],"r"]]],["stat",["assign",true,["sub",["name","colorArray"],["binary","+",["name","offset"],["num",1]]],["dot",["name","color"],"g"]]],["stat",["assign",true,["sub",["name","colorArray"],["binary","+",["name","offset"],["num",2]]],["dot",["name","color"],"b"]]]]]],["if",["name","customAttributes"],["block",[["for",["seq",["assign",true,["name","i"],["num",0]],["assign",true,["name","il"],["dot",["name","customAttributes"],"length"]]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","customAttribute"],["sub",["name","customAttributes"],["name","i"]]]],["if",["unary-prefix","!",["binary","||",["binary","===",["dot",["name","customAttribute"],"boundTo"],["name","undefined"]],["binary","===",["dot",["name","customAttribute"],"boundTo"],["string","vertices"]]]],["continue",null],null],["stat",["assign",true,["name","offset"],["num",0]]],["stat",["assign",true,["name","cal"],["dot",["dot",["name","customAttribute"],"value"],"length"]]],["if",["binary","===",["dot",["name","customAttribute"],"size"],["num",1]],["block",[["for",["assign",true,["name","ca"],["num",0]],["binary","<",["name","ca"],["name","cal"]],["unary-postfix","++",["name","ca"]],["block",[["stat",["assign",true,["name","index"],["sub",["sub",["name","sortArray"],["name","ca"]],["num",1]]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["name","ca"]],["sub",["dot",["name","customAttribute"],"value"],["name","index"]]]]]]]]],["if",["binary","===",["dot",["name","customAttribute"],"size"],["num",2]],["block",[["for",["assign",true,["name","ca"],["num",0]],["binary","<",["name","ca"],["name","cal"]],["unary-postfix","++",["name","ca"]],["block",[["stat",["assign",true,["name","index"],["sub",["sub",["name","sortArray"],["name","ca"]],["num",1]]]],["stat",["assign",true,["name","value"],["sub",["dot",["name","customAttribute"],"value"],["name","index"]]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["name","offset"]],["dot",["name","value"],"x"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset"],["num",1]]],["dot",["name","value"],"y"]]],["stat",["assign","+",["name","offset"],["num",2]]]]]]]],["if",["binary","===",["dot",["name","customAttribute"],"size"],["num",3]],["block",[["if",["binary","===",["dot",["name","customAttribute"],"type"],["string","c"]],["block",[["for",["assign",true,["name","ca"],["num",0]],["binary","<",["name","ca"],["name","cal"]],["unary-postfix","++",["name","ca"]],["block",[["stat",["assign",true,["name","index"],["sub",["sub",["name","sortArray"],["name","ca"]],["num",1]]]],["stat",["assign",true,["name","value"],["sub",["dot",["name","customAttribute"],"value"],["name","index"]]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["name","offset"]],["dot",["name","value"],"r"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset"],["num",1]]],["dot",["name","value"],"g"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset"],["num",2]]],["dot",["name","value"],"b"]]],["stat",["assign","+",["name","offset"],["num",3]]]]]]]],["block",[["for",["assign",true,["name","ca"],["num",0]],["binary","<",["name","ca"],["name","cal"]],["unary-postfix","++",["name","ca"]],["block",[["stat",["assign",true,["name","index"],["sub",["sub",["name","sortArray"],["name","ca"]],["num",1]]]],["stat",["assign",true,["name","value"],["sub",["dot",["name","customAttribute"],"value"],["name","index"]]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["name","offset"]],["dot",["name","value"],"x"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset"],["num",1]]],["dot",["name","value"],"y"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset"],["num",2]]],["dot",["name","value"],"z"]]],["stat",["assign","+",["name","offset"],["num",3]]]]]]]]]]],["if",["binary","===",["dot",["name","customAttribute"],"size"],["num",4]],["block",[["for",["assign",true,["name","ca"],["num",0]],["binary","<",["name","ca"],["name","cal"]],["unary-postfix","++",["name","ca"]],["block",[["stat",["assign",true,["name","index"],["sub",["sub",["name","sortArray"],["name","ca"]],["num",1]]]],["stat",["assign",true,["name","value"],["sub",["dot",["name","customAttribute"],"value"],["name","index"]]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["name","offset"]],["dot",["name","value"],"x"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset"],["num",1]]],["dot",["name","value"],"y"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset"],["num",2]]],["dot",["name","value"],"z"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset"],["num",3]]],["dot",["name","value"],"w"]]],["stat",["assign","+",["name","offset"],["num",4]]]]]]]],null]]]]]]]]],null]]],["block",[["if",["name","dirtyVertices"],["block",[["for",["assign",true,["name","v"],["num",0]],["binary","<",["name","v"],["name","vl"]],["unary-postfix","++",["name","v"]],["block",[["stat",["assign",true,["name","vertex"],["sub",["name","vertices"],["name","v"]]]],["stat",["assign",true,["name","offset"],["binary","*",["name","v"],["num",3]]]],["stat",["assign",true,["sub",["name","vertexArray"],["name","offset"]],["dot",["name","vertex"],"x"]]],["stat",["assign",true,["sub",["name","vertexArray"],["binary","+",["name","offset"],["num",1]]],["dot",["name","vertex"],"y"]]],["stat",["assign",true,["sub",["name","vertexArray"],["binary","+",["name","offset"],["num",2]]],["dot",["name","vertex"],"z"]]]]]]]],null],["if",["name","dirtyColors"],["block",[["for",["assign",true,["name","c"],["num",0]],["binary","<",["name","c"],["name","cl"]],["unary-postfix","++",["name","c"]],["block",[["stat",["assign",true,["name","color"],["sub",["name","colors"],["name","c"]]]],["stat",["assign",true,["name","offset"],["binary","*",["name","c"],["num",3]]]],["stat",["assign",true,["sub",["name","colorArray"],["name","offset"]],["dot",["name","color"],"r"]]],["stat",["assign",true,["sub",["name","colorArray"],["binary","+",["name","offset"],["num",1]]],["dot",["name","color"],"g"]]],["stat",["assign",true,["sub",["name","colorArray"],["binary","+",["name","offset"],["num",2]]],["dot",["name","color"],"b"]]]]]]]],null],["if",["name","customAttributes"],["block",[["for",["seq",["assign",true,["name","i"],["num",0]],["assign",true,["name","il"],["dot",["name","customAttributes"],"length"]]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","customAttribute"],["sub",["name","customAttributes"],["name","i"]]]],["if",["binary","&&",["dot",["name","customAttribute"],"needsUpdate"],["binary","||",["binary","===",["dot",["name","customAttribute"],"boundTo"],["name","undefined"]],["binary","===",["dot",["name","customAttribute"],"boundTo"],["string","vertices"]]]],["block",[["stat",["assign",true,["name","cal"],["dot",["dot",["name","customAttribute"],"value"],"length"]]],["stat",["assign",true,["name","offset"],["num",0]]],["if",["binary","===",["dot",["name","customAttribute"],"size"],["num",1]],["block",[["for",["assign",true,["name","ca"],["num",0]],["binary","<",["name","ca"],["name","cal"]],["unary-postfix","++",["name","ca"]],["block",[["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["name","ca"]],["sub",["dot",["name","customAttribute"],"value"],["name","ca"]]]]]]]]],["if",["binary","===",["dot",["name","customAttribute"],"size"],["num",2]],["block",[["for",["assign",true,["name","ca"],["num",0]],["binary","<",["name","ca"],["name","cal"]],["unary-postfix","++",["name","ca"]],["block",[["stat",["assign",true,["name","value"],["sub",["dot",["name","customAttribute"],"value"],["name","ca"]]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["name","offset"]],["dot",["name","value"],"x"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset"],["num",1]]],["dot",["name","value"],"y"]]],["stat",["assign","+",["name","offset"],["num",2]]]]]]]],["if",["binary","===",["dot",["name","customAttribute"],"size"],["num",3]],["block",[["if",["binary","===",["dot",["name","customAttribute"],"type"],["string","c"]],["block",[["for",["assign",true,["name","ca"],["num",0]],["binary","<",["name","ca"],["name","cal"]],["unary-postfix","++",["name","ca"]],["block",[["stat",["assign",true,["name","value"],["sub",["dot",["name","customAttribute"],"value"],["name","ca"]]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["name","offset"]],["dot",["name","value"],"r"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset"],["num",1]]],["dot",["name","value"],"g"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset"],["num",2]]],["dot",["name","value"],"b"]]],["stat",["assign","+",["name","offset"],["num",3]]]]]]]],["block",[["for",["assign",true,["name","ca"],["num",0]],["binary","<",["name","ca"],["name","cal"]],["unary-postfix","++",["name","ca"]],["block",[["stat",["assign",true,["name","value"],["sub",["dot",["name","customAttribute"],"value"],["name","ca"]]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["name","offset"]],["dot",["name","value"],"x"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset"],["num",1]]],["dot",["name","value"],"y"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset"],["num",2]]],["dot",["name","value"],"z"]]],["stat",["assign","+",["name","offset"],["num",3]]]]]]]]]]],["if",["binary","===",["dot",["name","customAttribute"],"size"],["num",4]],["block",[["for",["assign",true,["name","ca"],["num",0]],["binary","<",["name","ca"],["name","cal"]],["unary-postfix","++",["name","ca"]],["block",[["stat",["assign",true,["name","value"],["sub",["dot",["name","customAttribute"],"value"],["name","ca"]]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["name","offset"]],["dot",["name","value"],"x"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset"],["num",1]]],["dot",["name","value"],"y"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset"],["num",2]]],["dot",["name","value"],"z"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset"],["num",3]]],["dot",["name","value"],"w"]]],["stat",["assign","+",["name","offset"],["num",4]]]]]]]],null]]]]]],null]]]]]],null]]]],["if",["binary","||",["name","dirtyVertices"],["dot",["name","object"],"sortParticles"]],["block",[["stat",["call",["dot",["name","_gl"],"bindBuffer"],[["dot",["name","_gl"],"ARRAY_BUFFER"],["dot",["name","geometry"],"__webglVertexBuffer"]]]],["stat",["call",["dot",["name","_gl"],"bufferData"],[["dot",["name","_gl"],"ARRAY_BUFFER"],["name","vertexArray"],["name","hint"]]]]]],null],["if",["binary","||",["name","dirtyColors"],["dot",["name","object"],"sortParticles"]],["block",[["stat",["call",["dot",["name","_gl"],"bindBuffer"],[["dot",["name","_gl"],"ARRAY_BUFFER"],["dot",["name","geometry"],"__webglColorBuffer"]]]],["stat",["call",["dot",["name","_gl"],"bufferData"],[["dot",["name","_gl"],"ARRAY_BUFFER"],["name","colorArray"],["name","hint"]]]]]],null],["if",["name","customAttributes"],["block",[["for",["seq",["assign",true,["name","i"],["num",0]],["assign",true,["name","il"],["dot",["name","customAttributes"],"length"]]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","customAttribute"],["sub",["name","customAttributes"],["name","i"]]]],["if",["binary","||",["dot",["name","customAttribute"],"needsUpdate"],["dot",["name","object"],"sortParticles"]],["block",[["stat",["call",["dot",["name","_gl"],"bindBuffer"],[["dot",["name","_gl"],"ARRAY_BUFFER"],["dot",["name","customAttribute"],"buffer"]]]],["stat",["call",["dot",["name","_gl"],"bufferData"],[["dot",["name","_gl"],"ARRAY_BUFFER"],["dot",["name","customAttribute"],"array"],["name","hint"]]]]]],null]]]]]],null]]],["block"],["defun","setLineBuffers",["geometry","hint"],[["var",[["v"],["c"],["vertex"],["offset"],["color"],["vertices",["dot",["name","geometry"],"vertices"]],["colors",["dot",["name","geometry"],"colors"]],["vl",["dot",["name","vertices"],"length"]],["cl",["dot",["name","colors"],"length"]],["vertexArray",["dot",["name","geometry"],"__vertexArray"]],["colorArray",["dot",["name","geometry"],"__colorArray"]],["dirtyVertices",["dot",["name","geometry"],"verticesNeedUpdate"]],["dirtyColors",["dot",["name","geometry"],"colorsNeedUpdate"]],["customAttributes",["dot",["name","geometry"],"__webglCustomAttributesList"]],["i"],["il"],["a"],["ca"],["cal"],["value"],["customAttribute"]]],["if",["name","dirtyVertices"],["block",[["for",["assign",true,["name","v"],["num",0]],["binary","<",["name","v"],["name","vl"]],["unary-postfix","++",["name","v"]],["block",[["stat",["assign",true,["name","vertex"],["sub",["name","vertices"],["name","v"]]]],["stat",["assign",true,["name","offset"],["binary","*",["name","v"],["num",3]]]],["stat",["assign",true,["sub",["name","vertexArray"],["name","offset"]],["dot",["name","vertex"],"x"]]],["stat",["assign",true,["sub",["name","vertexArray"],["binary","+",["name","offset"],["num",1]]],["dot",["name","vertex"],"y"]]],["stat",["assign",true,["sub",["name","vertexArray"],["binary","+",["name","offset"],["num",2]]],["dot",["name","vertex"],"z"]]]]]],["stat",["call",["dot",["name","_gl"],"bindBuffer"],[["dot",["name","_gl"],"ARRAY_BUFFER"],["dot",["name","geometry"],"__webglVertexBuffer"]]]],["stat",["call",["dot",["name","_gl"],"bufferData"],[["dot",["name","_gl"],"ARRAY_BUFFER"],["name","vertexArray"],["name","hint"]]]]]],null],["if",["name","dirtyColors"],["block",[["for",["assign",true,["name","c"],["num",0]],["binary","<",["name","c"],["name","cl"]],["unary-postfix","++",["name","c"]],["block",[["stat",["assign",true,["name","color"],["sub",["name","colors"],["name","c"]]]],["stat",["assign",true,["name","offset"],["binary","*",["name","c"],["num",3]]]],["stat",["assign",true,["sub",["name","colorArray"],["name","offset"]],["dot",["name","color"],"r"]]],["stat",["assign",true,["sub",["name","colorArray"],["binary","+",["name","offset"],["num",1]]],["dot",["name","color"],"g"]]],["stat",["assign",true,["sub",["name","colorArray"],["binary","+",["name","offset"],["num",2]]],["dot",["name","color"],"b"]]]]]],["stat",["call",["dot",["name","_gl"],"bindBuffer"],[["dot",["name","_gl"],"ARRAY_BUFFER"],["dot",["name","geometry"],"__webglColorBuffer"]]]],["stat",["call",["dot",["name","_gl"],"bufferData"],[["dot",["name","_gl"],"ARRAY_BUFFER"],["name","colorArray"],["name","hint"]]]]]],null],["if",["name","customAttributes"],["block",[["for",["seq",["assign",true,["name","i"],["num",0]],["assign",true,["name","il"],["dot",["name","customAttributes"],"length"]]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","customAttribute"],["sub",["name","customAttributes"],["name","i"]]]],["if",["binary","&&",["dot",["name","customAttribute"],"needsUpdate"],["binary","||",["binary","===",["dot",["name","customAttribute"],"boundTo"],["name","undefined"]],["binary","===",["dot",["name","customAttribute"],"boundTo"],["string","vertices"]]]],["block",[["stat",["assign",true,["name","offset"],["num",0]]],["stat",["assign",true,["name","cal"],["dot",["dot",["name","customAttribute"],"value"],"length"]]],["if",["binary","===",["dot",["name","customAttribute"],"size"],["num",1]],["block",[["for",["assign",true,["name","ca"],["num",0]],["binary","<",["name","ca"],["name","cal"]],["unary-postfix","++",["name","ca"]],["block",[["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["name","ca"]],["sub",["dot",["name","customAttribute"],"value"],["name","ca"]]]]]]]]],["if",["binary","===",["dot",["name","customAttribute"],"size"],["num",2]],["block",[["for",["assign",true,["name","ca"],["num",0]],["binary","<",["name","ca"],["name","cal"]],["unary-postfix","++",["name","ca"]],["block",[["stat",["assign",true,["name","value"],["sub",["dot",["name","customAttribute"],"value"],["name","ca"]]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["name","offset"]],["dot",["name","value"],"x"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset"],["num",1]]],["dot",["name","value"],"y"]]],["stat",["assign","+",["name","offset"],["num",2]]]]]]]],["if",["binary","===",["dot",["name","customAttribute"],"size"],["num",3]],["block",[["if",["binary","===",["dot",["name","customAttribute"],"type"],["string","c"]],["block",[["for",["assign",true,["name","ca"],["num",0]],["binary","<",["name","ca"],["name","cal"]],["unary-postfix","++",["name","ca"]],["block",[["stat",["assign",true,["name","value"],["sub",["dot",["name","customAttribute"],"value"],["name","ca"]]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["name","offset"]],["dot",["name","value"],"r"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset"],["num",1]]],["dot",["name","value"],"g"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset"],["num",2]]],["dot",["name","value"],"b"]]],["stat",["assign","+",["name","offset"],["num",3]]]]]]]],["block",[["for",["assign",true,["name","ca"],["num",0]],["binary","<",["name","ca"],["name","cal"]],["unary-postfix","++",["name","ca"]],["block",[["stat",["assign",true,["name","value"],["sub",["dot",["name","customAttribute"],"value"],["name","ca"]]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["name","offset"]],["dot",["name","value"],"x"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset"],["num",1]]],["dot",["name","value"],"y"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset"],["num",2]]],["dot",["name","value"],"z"]]],["stat",["assign","+",["name","offset"],["num",3]]]]]]]]]]],["if",["binary","===",["dot",["name","customAttribute"],"size"],["num",4]],["block",[["for",["assign",true,["name","ca"],["num",0]],["binary","<",["name","ca"],["name","cal"]],["unary-postfix","++",["name","ca"]],["block",[["stat",["assign",true,["name","value"],["sub",["dot",["name","customAttribute"],"value"],["name","ca"]]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["name","offset"]],["dot",["name","value"],"x"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset"],["num",1]]],["dot",["name","value"],"y"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset"],["num",2]]],["dot",["name","value"],"z"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset"],["num",3]]],["dot",["name","value"],"w"]]],["stat",["assign","+",["name","offset"],["num",4]]]]]]]],null]]]],["stat",["call",["dot",["name","_gl"],"bindBuffer"],[["dot",["name","_gl"],"ARRAY_BUFFER"],["dot",["name","customAttribute"],"buffer"]]]],["stat",["call",["dot",["name","_gl"],"bufferData"],[["dot",["name","_gl"],"ARRAY_BUFFER"],["dot",["name","customAttribute"],"array"],["name","hint"]]]]]],null]]]]]],null]]],["block"],["defun","setRibbonBuffers",["geometry","hint"],[["var",[["v"],["c"],["vertex"],["offset"],["color"],["vertices",["dot",["name","geometry"],"vertices"]],["colors",["dot",["name","geometry"],"colors"]],["vl",["dot",["name","vertices"],"length"]],["cl",["dot",["name","colors"],"length"]],["vertexArray",["dot",["name","geometry"],"__vertexArray"]],["colorArray",["dot",["name","geometry"],"__colorArray"]],["dirtyVertices",["dot",["name","geometry"],"verticesNeedUpdate"]],["dirtyColors",["dot",["name","geometry"],"colorsNeedUpdate"]]]],["if",["name","dirtyVertices"],["block",[["for",["assign",true,["name","v"],["num",0]],["binary","<",["name","v"],["name","vl"]],["unary-postfix","++",["name","v"]],["block",[["stat",["assign",true,["name","vertex"],["sub",["name","vertices"],["name","v"]]]],["stat",["assign",true,["name","offset"],["binary","*",["name","v"],["num",3]]]],["stat",["assign",true,["sub",["name","vertexArray"],["name","offset"]],["dot",["name","vertex"],"x"]]],["stat",["assign",true,["sub",["name","vertexArray"],["binary","+",["name","offset"],["num",1]]],["dot",["name","vertex"],"y"]]],["stat",["assign",true,["sub",["name","vertexArray"],["binary","+",["name","offset"],["num",2]]],["dot",["name","vertex"],"z"]]]]]],["stat",["call",["dot",["name","_gl"],"bindBuffer"],[["dot",["name","_gl"],"ARRAY_BUFFER"],["dot",["name","geometry"],"__webglVertexBuffer"]]]],["stat",["call",["dot",["name","_gl"],"bufferData"],[["dot",["name","_gl"],"ARRAY_BUFFER"],["name","vertexArray"],["name","hint"]]]]]],null],["if",["name","dirtyColors"],["block",[["for",["assign",true,["name","c"],["num",0]],["binary","<",["name","c"],["name","cl"]],["unary-postfix","++",["name","c"]],["block",[["stat",["assign",true,["name","color"],["sub",["name","colors"],["name","c"]]]],["stat",["assign",true,["name","offset"],["binary","*",["name","c"],["num",3]]]],["stat",["assign",true,["sub",["name","colorArray"],["name","offset"]],["dot",["name","color"],"r"]]],["stat",["assign",true,["sub",["name","colorArray"],["binary","+",["name","offset"],["num",1]]],["dot",["name","color"],"g"]]],["stat",["assign",true,["sub",["name","colorArray"],["binary","+",["name","offset"],["num",2]]],["dot",["name","color"],"b"]]]]]],["stat",["call",["dot",["name","_gl"],"bindBuffer"],[["dot",["name","_gl"],"ARRAY_BUFFER"],["dot",["name","geometry"],"__webglColorBuffer"]]]],["stat",["call",["dot",["name","_gl"],"bufferData"],[["dot",["name","_gl"],"ARRAY_BUFFER"],["name","colorArray"],["name","hint"]]]]]],null]]],["block"],["defun","setMeshBuffers",["geometryGroup","object","hint","dispose","material"],[["if",["unary-prefix","!",["dot",["name","geometryGroup"],"__inittedArrays"]],["block",[["return",null]]],null],["var",[["normalType",["call",["name","bufferGuessNormalType"],[["name","material"]]]],["vertexColorType",["call",["name","bufferGuessVertexColorType"],[["name","material"]]]],["uvType",["call",["name","bufferGuessUVType"],[["name","material"]]]],["needsSmoothNormals",["binary","===",["name","normalType"],["dot",["name","THREE"],"SmoothShading"]]]]],["var",[["f"],["fl"],["fi"],["face"],["vertexNormals"],["faceNormal"],["normal"],["vertexColors"],["faceColor"],["vertexTangents"],["uv"],["uv2"],["v1"],["v2"],["v3"],["v4"],["t1"],["t2"],["t3"],["t4"],["n1"],["n2"],["n3"],["n4"],["c1"],["c2"],["c3"],["c4"],["sw1"],["sw2"],["sw3"],["sw4"],["si1"],["si2"],["si3"],["si4"],["sa1"],["sa2"],["sa3"],["sa4"],["sb1"],["sb2"],["sb3"],["sb4"],["m"],["ml"],["i"],["il"],["vn"],["uvi"],["uv2i"],["vk"],["vkl"],["vka"],["nka"],["chf"],["faceVertexNormals"],["a"],["vertexIndex",["num",0]],["offset",["num",0]],["offset_uv",["num",0]],["offset_uv2",["num",0]],["offset_face",["num",0]],["offset_normal",["num",0]],["offset_tangent",["num",0]],["offset_line",["num",0]],["offset_color",["num",0]],["offset_skin",["num",0]],["offset_morphTarget",["num",0]],["offset_custom",["num",0]],["offset_customSrc",["num",0]],["value"],["vertexArray",["dot",["name","geometryGroup"],"__vertexArray"]],["uvArray",["dot",["name","geometryGroup"],"__uvArray"]],["uv2Array",["dot",["name","geometryGroup"],"__uv2Array"]],["normalArray",["dot",["name","geometryGroup"],"__normalArray"]],["tangentArray",["dot",["name","geometryGroup"],"__tangentArray"]],["colorArray",["dot",["name","geometryGroup"],"__colorArray"]],["skinVertexAArray",["dot",["name","geometryGroup"],"__skinVertexAArray"]],["skinVertexBArray",["dot",["name","geometryGroup"],"__skinVertexBArray"]],["skinIndexArray",["dot",["name","geometryGroup"],"__skinIndexArray"]],["skinWeightArray",["dot",["name","geometryGroup"],"__skinWeightArray"]],["morphTargetsArrays",["dot",["name","geometryGroup"],"__morphTargetsArrays"]],["morphNormalsArrays",["dot",["name","geometryGroup"],"__morphNormalsArrays"]],["customAttributes",["dot",["name","geometryGroup"],"__webglCustomAttributesList"]],["customAttribute"],["faceArray",["dot",["name","geometryGroup"],"__faceArray"]],["lineArray",["dot",["name","geometryGroup"],"__lineArray"]],["geometry",["dot",["name","object"],"geometry"]],["dirtyVertices",["dot",["name","geometry"],"verticesNeedUpdate"]],["dirtyElements",["dot",["name","geometry"],"elementsNeedUpdate"]],["dirtyUvs",["dot",["name","geometry"],"uvsNeedUpdate"]],["dirtyNormals",["dot",["name","geometry"],"normalsNeedUpdate"]],["dirtyTangents",["dot",["name","geometry"],"tangetsNeedUpdate"]],["dirtyColors",["dot",["name","geometry"],"colorsNeedUpdate"]],["dirtyMorphTargets",["dot",["name","geometry"],"morphTargetsNeedUpdate"]],["vertices",["dot",["name","geometry"],"vertices"]],["chunk_faces3",["dot",["name","geometryGroup"],"faces3"]],["chunk_faces4",["dot",["name","geometryGroup"],"faces4"]],["obj_faces",["dot",["name","geometry"],"faces"]],["obj_uvs",["sub",["dot",["name","geometry"],"faceVertexUvs"],["num",0]]],["obj_uvs2",["sub",["dot",["name","geometry"],"faceVertexUvs"],["num",1]]],["obj_colors",["dot",["name","geometry"],"colors"]],["obj_skinVerticesA",["dot",["name","geometry"],"skinVerticesA"]],["obj_skinVerticesB",["dot",["name","geometry"],"skinVerticesB"]],["obj_skinIndices",["dot",["name","geometry"],"skinIndices"]],["obj_skinWeights",["dot",["name","geometry"],"skinWeights"]],["morphTargets",["dot",["name","geometry"],"morphTargets"]],["morphNormals",["dot",["name","geometry"],"morphNormals"]]]],["if",["name","dirtyVertices"],["block",[["for",["seq",["assign",true,["name","f"],["num",0]],["assign",true,["name","fl"],["dot",["name","chunk_faces3"],"length"]]],["binary","<",["name","f"],["name","fl"]],["unary-postfix","++",["name","f"]],["block",[["stat",["assign",true,["name","face"],["sub",["name","obj_faces"],["sub",["name","chunk_faces3"],["name","f"]]]]],["stat",["assign",true,["name","v1"],["sub",["name","vertices"],["dot",["name","face"],"a"]]]],["stat",["assign",true,["name","v2"],["sub",["name","vertices"],["dot",["name","face"],"b"]]]],["stat",["assign",true,["name","v3"],["sub",["name","vertices"],["dot",["name","face"],"c"]]]],["stat",["assign",true,["sub",["name","vertexArray"],["name","offset"]],["dot",["name","v1"],"x"]]],["stat",["assign",true,["sub",["name","vertexArray"],["binary","+",["name","offset"],["num",1]]],["dot",["name","v1"],"y"]]],["stat",["assign",true,["sub",["name","vertexArray"],["binary","+",["name","offset"],["num",2]]],["dot",["name","v1"],"z"]]],["stat",["assign",true,["sub",["name","vertexArray"],["binary","+",["name","offset"],["num",3]]],["dot",["name","v2"],"x"]]],["stat",["assign",true,["sub",["name","vertexArray"],["binary","+",["name","offset"],["num",4]]],["dot",["name","v2"],"y"]]],["stat",["assign",true,["sub",["name","vertexArray"],["binary","+",["name","offset"],["num",5]]],["dot",["name","v2"],"z"]]],["stat",["assign",true,["sub",["name","vertexArray"],["binary","+",["name","offset"],["num",6]]],["dot",["name","v3"],"x"]]],["stat",["assign",true,["sub",["name","vertexArray"],["binary","+",["name","offset"],["num",7]]],["dot",["name","v3"],"y"]]],["stat",["assign",true,["sub",["name","vertexArray"],["binary","+",["name","offset"],["num",8]]],["dot",["name","v3"],"z"]]],["stat",["assign","+",["name","offset"],["num",9]]]]]],["for",["seq",["assign",true,["name","f"],["num",0]],["assign",true,["name","fl"],["dot",["name","chunk_faces4"],"length"]]],["binary","<",["name","f"],["name","fl"]],["unary-postfix","++",["name","f"]],["block",[["stat",["assign",true,["name","face"],["sub",["name","obj_faces"],["sub",["name","chunk_faces4"],["name","f"]]]]],["stat",["assign",true,["name","v1"],["sub",["name","vertices"],["dot",["name","face"],"a"]]]],["stat",["assign",true,["name","v2"],["sub",["name","vertices"],["dot",["name","face"],"b"]]]],["stat",["assign",true,["name","v3"],["sub",["name","vertices"],["dot",["name","face"],"c"]]]],["stat",["assign",true,["name","v4"],["sub",["name","vertices"],["dot",["name","face"],"d"]]]],["stat",["assign",true,["sub",["name","vertexArray"],["name","offset"]],["dot",["name","v1"],"x"]]],["stat",["assign",true,["sub",["name","vertexArray"],["binary","+",["name","offset"],["num",1]]],["dot",["name","v1"],"y"]]],["stat",["assign",true,["sub",["name","vertexArray"],["binary","+",["name","offset"],["num",2]]],["dot",["name","v1"],"z"]]],["stat",["assign",true,["sub",["name","vertexArray"],["binary","+",["name","offset"],["num",3]]],["dot",["name","v2"],"x"]]],["stat",["assign",true,["sub",["name","vertexArray"],["binary","+",["name","offset"],["num",4]]],["dot",["name","v2"],"y"]]],["stat",["assign",true,["sub",["name","vertexArray"],["binary","+",["name","offset"],["num",5]]],["dot",["name","v2"],"z"]]],["stat",["assign",true,["sub",["name","vertexArray"],["binary","+",["name","offset"],["num",6]]],["dot",["name","v3"],"x"]]],["stat",["assign",true,["sub",["name","vertexArray"],["binary","+",["name","offset"],["num",7]]],["dot",["name","v3"],"y"]]],["stat",["assign",true,["sub",["name","vertexArray"],["binary","+",["name","offset"],["num",8]]],["dot",["name","v3"],"z"]]],["stat",["assign",true,["sub",["name","vertexArray"],["binary","+",["name","offset"],["num",9]]],["dot",["name","v4"],"x"]]],["stat",["assign",true,["sub",["name","vertexArray"],["binary","+",["name","offset"],["num",10]]],["dot",["name","v4"],"y"]]],["stat",["assign",true,["sub",["name","vertexArray"],["binary","+",["name","offset"],["num",11]]],["dot",["name","v4"],"z"]]],["stat",["assign","+",["name","offset"],["num",12]]]]]],["stat",["call",["dot",["name","_gl"],"bindBuffer"],[["dot",["name","_gl"],"ARRAY_BUFFER"],["dot",["name","geometryGroup"],"__webglVertexBuffer"]]]],["stat",["call",["dot",["name","_gl"],"bufferData"],[["dot",["name","_gl"],"ARRAY_BUFFER"],["name","vertexArray"],["name","hint"]]]]]],null],["if",["name","dirtyMorphTargets"],["block",[["for",["seq",["assign",true,["name","vk"],["num",0]],["assign",true,["name","vkl"],["dot",["name","morphTargets"],"length"]]],["binary","<",["name","vk"],["name","vkl"]],["unary-postfix","++",["name","vk"]],["block",[["stat",["assign",true,["name","offset_morphTarget"],["num",0]]],["for",["seq",["assign",true,["name","f"],["num",0]],["assign",true,["name","fl"],["dot",["name","chunk_faces3"],"length"]]],["binary","<",["name","f"],["name","fl"]],["unary-postfix","++",["name","f"]],["block",[["stat",["assign",true,["name","chf"],["sub",["name","chunk_faces3"],["name","f"]]]],["stat",["assign",true,["name","face"],["sub",["name","obj_faces"],["name","chf"]]]],["stat",["assign",true,["name","v1"],["sub",["dot",["sub",["name","morphTargets"],["name","vk"]],"vertices"],["dot",["name","face"],"a"]]]],["stat",["assign",true,["name","v2"],["sub",["dot",["sub",["name","morphTargets"],["name","vk"]],"vertices"],["dot",["name","face"],"b"]]]],["stat",["assign",true,["name","v3"],["sub",["dot",["sub",["name","morphTargets"],["name","vk"]],"vertices"],["dot",["name","face"],"c"]]]],["stat",["assign",true,["name","vka"],["sub",["name","morphTargetsArrays"],["name","vk"]]]],["stat",["assign",true,["sub",["name","vka"],["name","offset_morphTarget"]],["dot",["name","v1"],"x"]]],["stat",["assign",true,["sub",["name","vka"],["binary","+",["name","offset_morphTarget"],["num",1]]],["dot",["name","v1"],"y"]]],["stat",["assign",true,["sub",["name","vka"],["binary","+",["name","offset_morphTarget"],["num",2]]],["dot",["name","v1"],"z"]]],["stat",["assign",true,["sub",["name","vka"],["binary","+",["name","offset_morphTarget"],["num",3]]],["dot",["name","v2"],"x"]]],["stat",["assign",true,["sub",["name","vka"],["binary","+",["name","offset_morphTarget"],["num",4]]],["dot",["name","v2"],"y"]]],["stat",["assign",true,["sub",["name","vka"],["binary","+",["name","offset_morphTarget"],["num",5]]],["dot",["name","v2"],"z"]]],["stat",["assign",true,["sub",["name","vka"],["binary","+",["name","offset_morphTarget"],["num",6]]],["dot",["name","v3"],"x"]]],["stat",["assign",true,["sub",["name","vka"],["binary","+",["name","offset_morphTarget"],["num",7]]],["dot",["name","v3"],"y"]]],["stat",["assign",true,["sub",["name","vka"],["binary","+",["name","offset_morphTarget"],["num",8]]],["dot",["name","v3"],"z"]]],["if",["dot",["name","material"],"morphNormals"],["block",[["if",["name","needsSmoothNormals"],["block",[["stat",["assign",true,["name","faceVertexNormals"],["sub",["dot",["sub",["name","morphNormals"],["name","vk"]],"vertexNormals"],["name","chf"]]]],["stat",["assign",true,["name","n1"],["dot",["name","faceVertexNormals"],"a"]]],["stat",["assign",true,["name","n2"],["dot",["name","faceVertexNormals"],"b"]]],["stat",["assign",true,["name","n3"],["dot",["name","faceVertexNormals"],"c"]]]]],["block",[["stat",["assign",true,["name","n1"],["sub",["dot",["sub",["name","morphNormals"],["name","vk"]],"faceNormals"],["name","chf"]]]],["stat",["assign",true,["name","n2"],["name","n1"]]],["stat",["assign",true,["name","n3"],["name","n1"]]]]]],["stat",["assign",true,["name","nka"],["sub",["name","morphNormalsArrays"],["name","vk"]]]],["stat",["assign",true,["sub",["name","nka"],["name","offset_morphTarget"]],["dot",["name","n1"],"x"]]],["stat",["assign",true,["sub",["name","nka"],["binary","+",["name","offset_morphTarget"],["num",1]]],["dot",["name","n1"],"y"]]],["stat",["assign",true,["sub",["name","nka"],["binary","+",["name","offset_morphTarget"],["num",2]]],["dot",["name","n1"],"z"]]],["stat",["assign",true,["sub",["name","nka"],["binary","+",["name","offset_morphTarget"],["num",3]]],["dot",["name","n2"],"x"]]],["stat",["assign",true,["sub",["name","nka"],["binary","+",["name","offset_morphTarget"],["num",4]]],["dot",["name","n2"],"y"]]],["stat",["assign",true,["sub",["name","nka"],["binary","+",["name","offset_morphTarget"],["num",5]]],["dot",["name","n2"],"z"]]],["stat",["assign",true,["sub",["name","nka"],["binary","+",["name","offset_morphTarget"],["num",6]]],["dot",["name","n3"],"x"]]],["stat",["assign",true,["sub",["name","nka"],["binary","+",["name","offset_morphTarget"],["num",7]]],["dot",["name","n3"],"y"]]],["stat",["assign",true,["sub",["name","nka"],["binary","+",["name","offset_morphTarget"],["num",8]]],["dot",["name","n3"],"z"]]]]],null],["stat",["assign","+",["name","offset_morphTarget"],["num",9]]]]]],["for",["seq",["assign",true,["name","f"],["num",0]],["assign",true,["name","fl"],["dot",["name","chunk_faces4"],"length"]]],["binary","<",["name","f"],["name","fl"]],["unary-postfix","++",["name","f"]],["block",[["stat",["assign",true,["name","chf"],["sub",["name","chunk_faces4"],["name","f"]]]],["stat",["assign",true,["name","face"],["sub",["name","obj_faces"],["name","chf"]]]],["stat",["assign",true,["name","v1"],["sub",["dot",["sub",["name","morphTargets"],["name","vk"]],"vertices"],["dot",["name","face"],"a"]]]],["stat",["assign",true,["name","v2"],["sub",["dot",["sub",["name","morphTargets"],["name","vk"]],"vertices"],["dot",["name","face"],"b"]]]],["stat",["assign",true,["name","v3"],["sub",["dot",["sub",["name","morphTargets"],["name","vk"]],"vertices"],["dot",["name","face"],"c"]]]],["stat",["assign",true,["name","v4"],["sub",["dot",["sub",["name","morphTargets"],["name","vk"]],"vertices"],["dot",["name","face"],"d"]]]],["stat",["assign",true,["name","vka"],["sub",["name","morphTargetsArrays"],["name","vk"]]]],["stat",["assign",true,["sub",["name","vka"],["name","offset_morphTarget"]],["dot",["name","v1"],"x"]]],["stat",["assign",true,["sub",["name","vka"],["binary","+",["name","offset_morphTarget"],["num",1]]],["dot",["name","v1"],"y"]]],["stat",["assign",true,["sub",["name","vka"],["binary","+",["name","offset_morphTarget"],["num",2]]],["dot",["name","v1"],"z"]]],["stat",["assign",true,["sub",["name","vka"],["binary","+",["name","offset_morphTarget"],["num",3]]],["dot",["name","v2"],"x"]]],["stat",["assign",true,["sub",["name","vka"],["binary","+",["name","offset_morphTarget"],["num",4]]],["dot",["name","v2"],"y"]]],["stat",["assign",true,["sub",["name","vka"],["binary","+",["name","offset_morphTarget"],["num",5]]],["dot",["name","v2"],"z"]]],["stat",["assign",true,["sub",["name","vka"],["binary","+",["name","offset_morphTarget"],["num",6]]],["dot",["name","v3"],"x"]]],["stat",["assign",true,["sub",["name","vka"],["binary","+",["name","offset_morphTarget"],["num",7]]],["dot",["name","v3"],"y"]]],["stat",["assign",true,["sub",["name","vka"],["binary","+",["name","offset_morphTarget"],["num",8]]],["dot",["name","v3"],"z"]]],["stat",["assign",true,["sub",["name","vka"],["binary","+",["name","offset_morphTarget"],["num",9]]],["dot",["name","v4"],"x"]]],["stat",["assign",true,["sub",["name","vka"],["binary","+",["name","offset_morphTarget"],["num",10]]],["dot",["name","v4"],"y"]]],["stat",["assign",true,["sub",["name","vka"],["binary","+",["name","offset_morphTarget"],["num",11]]],["dot",["name","v4"],"z"]]],["if",["dot",["name","material"],"morphNormals"],["block",[["if",["name","needsSmoothNormals"],["block",[["stat",["assign",true,["name","faceVertexNormals"],["sub",["dot",["sub",["name","morphNormals"],["name","vk"]],"vertexNormals"],["name","chf"]]]],["stat",["assign",true,["name","n1"],["dot",["name","faceVertexNormals"],"a"]]],["stat",["assign",true,["name","n2"],["dot",["name","faceVertexNormals"],"b"]]],["stat",["assign",true,["name","n3"],["dot",["name","faceVertexNormals"],"c"]]],["stat",["assign",true,["name","n4"],["dot",["name","faceVertexNormals"],"d"]]]]],["block",[["stat",["assign",true,["name","n1"],["sub",["dot",["sub",["name","morphNormals"],["name","vk"]],"faceNormals"],["name","chf"]]]],["stat",["assign",true,["name","n2"],["name","n1"]]],["stat",["assign",true,["name","n3"],["name","n1"]]],["stat",["assign",true,["name","n4"],["name","n1"]]]]]],["stat",["assign",true,["name","nka"],["sub",["name","morphNormalsArrays"],["name","vk"]]]],["stat",["assign",true,["sub",["name","nka"],["name","offset_morphTarget"]],["dot",["name","n1"],"x"]]],["stat",["assign",true,["sub",["name","nka"],["binary","+",["name","offset_morphTarget"],["num",1]]],["dot",["name","n1"],"y"]]],["stat",["assign",true,["sub",["name","nka"],["binary","+",["name","offset_morphTarget"],["num",2]]],["dot",["name","n1"],"z"]]],["stat",["assign",true,["sub",["name","nka"],["binary","+",["name","offset_morphTarget"],["num",3]]],["dot",["name","n2"],"x"]]],["stat",["assign",true,["sub",["name","nka"],["binary","+",["name","offset_morphTarget"],["num",4]]],["dot",["name","n2"],"y"]]],["stat",["assign",true,["sub",["name","nka"],["binary","+",["name","offset_morphTarget"],["num",5]]],["dot",["name","n2"],"z"]]],["stat",["assign",true,["sub",["name","nka"],["binary","+",["name","offset_morphTarget"],["num",6]]],["dot",["name","n3"],"x"]]],["stat",["assign",true,["sub",["name","nka"],["binary","+",["name","offset_morphTarget"],["num",7]]],["dot",["name","n3"],"y"]]],["stat",["assign",true,["sub",["name","nka"],["binary","+",["name","offset_morphTarget"],["num",8]]],["dot",["name","n3"],"z"]]],["stat",["assign",true,["sub",["name","nka"],["binary","+",["name","offset_morphTarget"],["num",9]]],["dot",["name","n4"],"x"]]],["stat",["assign",true,["sub",["name","nka"],["binary","+",["name","offset_morphTarget"],["num",10]]],["dot",["name","n4"],"y"]]],["stat",["assign",true,["sub",["name","nka"],["binary","+",["name","offset_morphTarget"],["num",11]]],["dot",["name","n4"],"z"]]]]],null],["stat",["assign","+",["name","offset_morphTarget"],["num",12]]]]]],["stat",["call",["dot",["name","_gl"],"bindBuffer"],[["dot",["name","_gl"],"ARRAY_BUFFER"],["sub",["dot",["name","geometryGroup"],"__webglMorphTargetsBuffers"],["name","vk"]]]]],["stat",["call",["dot",["name","_gl"],"bufferData"],[["dot",["name","_gl"],"ARRAY_BUFFER"],["sub",["name","morphTargetsArrays"],["name","vk"]],["name","hint"]]]],["if",["dot",["name","material"],"morphNormals"],["block",[["stat",["call",["dot",["name","_gl"],"bindBuffer"],[["dot",["name","_gl"],"ARRAY_BUFFER"],["sub",["dot",["name","geometryGroup"],"__webglMorphNormalsBuffers"],["name","vk"]]]]],["stat",["call",["dot",["name","_gl"],"bufferData"],[["dot",["name","_gl"],"ARRAY_BUFFER"],["sub",["name","morphNormalsArrays"],["name","vk"]],["name","hint"]]]]]],null]]]]]],null],["if",["dot",["name","obj_skinWeights"],"length"],["block",[["for",["seq",["assign",true,["name","f"],["num",0]],["assign",true,["name","fl"],["dot",["name","chunk_faces3"],"length"]]],["binary","<",["name","f"],["name","fl"]],["unary-postfix","++",["name","f"]],["block",[["stat",["assign",true,["name","face"],["sub",["name","obj_faces"],["sub",["name","chunk_faces3"],["name","f"]]]]],["stat",["assign",true,["name","sw1"],["sub",["name","obj_skinWeights"],["dot",["name","face"],"a"]]]],["stat",["assign",true,["name","sw2"],["sub",["name","obj_skinWeights"],["dot",["name","face"],"b"]]]],["stat",["assign",true,["name","sw3"],["sub",["name","obj_skinWeights"],["dot",["name","face"],"c"]]]],["stat",["assign",true,["sub",["name","skinWeightArray"],["name","offset_skin"]],["dot",["name","sw1"],"x"]]],["stat",["assign",true,["sub",["name","skinWeightArray"],["binary","+",["name","offset_skin"],["num",1]]],["dot",["name","sw1"],"y"]]],["stat",["assign",true,["sub",["name","skinWeightArray"],["binary","+",["name","offset_skin"],["num",2]]],["dot",["name","sw1"],"z"]]],["stat",["assign",true,["sub",["name","skinWeightArray"],["binary","+",["name","offset_skin"],["num",3]]],["dot",["name","sw1"],"w"]]],["stat",["assign",true,["sub",["name","skinWeightArray"],["binary","+",["name","offset_skin"],["num",4]]],["dot",["name","sw2"],"x"]]],["stat",["assign",true,["sub",["name","skinWeightArray"],["binary","+",["name","offset_skin"],["num",5]]],["dot",["name","sw2"],"y"]]],["stat",["assign",true,["sub",["name","skinWeightArray"],["binary","+",["name","offset_skin"],["num",6]]],["dot",["name","sw2"],"z"]]],["stat",["assign",true,["sub",["name","skinWeightArray"],["binary","+",["name","offset_skin"],["num",7]]],["dot",["name","sw2"],"w"]]],["stat",["assign",true,["sub",["name","skinWeightArray"],["binary","+",["name","offset_skin"],["num",8]]],["dot",["name","sw3"],"x"]]],["stat",["assign",true,["sub",["name","skinWeightArray"],["binary","+",["name","offset_skin"],["num",9]]],["dot",["name","sw3"],"y"]]],["stat",["assign",true,["sub",["name","skinWeightArray"],["binary","+",["name","offset_skin"],["num",10]]],["dot",["name","sw3"],"z"]]],["stat",["assign",true,["sub",["name","skinWeightArray"],["binary","+",["name","offset_skin"],["num",11]]],["dot",["name","sw3"],"w"]]],["stat",["assign",true,["name","si1"],["sub",["name","obj_skinIndices"],["dot",["name","face"],"a"]]]],["stat",["assign",true,["name","si2"],["sub",["name","obj_skinIndices"],["dot",["name","face"],"b"]]]],["stat",["assign",true,["name","si3"],["sub",["name","obj_skinIndices"],["dot",["name","face"],"c"]]]],["stat",["assign",true,["sub",["name","skinIndexArray"],["name","offset_skin"]],["dot",["name","si1"],"x"]]],["stat",["assign",true,["sub",["name","skinIndexArray"],["binary","+",["name","offset_skin"],["num",1]]],["dot",["name","si1"],"y"]]],["stat",["assign",true,["sub",["name","skinIndexArray"],["binary","+",["name","offset_skin"],["num",2]]],["dot",["name","si1"],"z"]]],["stat",["assign",true,["sub",["name","skinIndexArray"],["binary","+",["name","offset_skin"],["num",3]]],["dot",["name","si1"],"w"]]],["stat",["assign",true,["sub",["name","skinIndexArray"],["binary","+",["name","offset_skin"],["num",4]]],["dot",["name","si2"],"x"]]],["stat",["assign",true,["sub",["name","skinIndexArray"],["binary","+",["name","offset_skin"],["num",5]]],["dot",["name","si2"],"y"]]],["stat",["assign",true,["sub",["name","skinIndexArray"],["binary","+",["name","offset_skin"],["num",6]]],["dot",["name","si2"],"z"]]],["stat",["assign",true,["sub",["name","skinIndexArray"],["binary","+",["name","offset_skin"],["num",7]]],["dot",["name","si2"],"w"]]],["stat",["assign",true,["sub",["name","skinIndexArray"],["binary","+",["name","offset_skin"],["num",8]]],["dot",["name","si3"],"x"]]],["stat",["assign",true,["sub",["name","skinIndexArray"],["binary","+",["name","offset_skin"],["num",9]]],["dot",["name","si3"],"y"]]],["stat",["assign",true,["sub",["name","skinIndexArray"],["binary","+",["name","offset_skin"],["num",10]]],["dot",["name","si3"],"z"]]],["stat",["assign",true,["sub",["name","skinIndexArray"],["binary","+",["name","offset_skin"],["num",11]]],["dot",["name","si3"],"w"]]],["stat",["assign",true,["name","sa1"],["sub",["name","obj_skinVerticesA"],["dot",["name","face"],"a"]]]],["stat",["assign",true,["name","sa2"],["sub",["name","obj_skinVerticesA"],["dot",["name","face"],"b"]]]],["stat",["assign",true,["name","sa3"],["sub",["name","obj_skinVerticesA"],["dot",["name","face"],"c"]]]],["stat",["assign",true,["sub",["name","skinVertexAArray"],["name","offset_skin"]],["dot",["name","sa1"],"x"]]],["stat",["assign",true,["sub",["name","skinVertexAArray"],["binary","+",["name","offset_skin"],["num",1]]],["dot",["name","sa1"],"y"]]],["stat",["assign",true,["sub",["name","skinVertexAArray"],["binary","+",["name","offset_skin"],["num",2]]],["dot",["name","sa1"],"z"]]],["stat",["assign",true,["sub",["name","skinVertexAArray"],["binary","+",["name","offset_skin"],["num",3]]],["num",1]]],["stat",["assign",true,["sub",["name","skinVertexAArray"],["binary","+",["name","offset_skin"],["num",4]]],["dot",["name","sa2"],"x"]]],["stat",["assign",true,["sub",["name","skinVertexAArray"],["binary","+",["name","offset_skin"],["num",5]]],["dot",["name","sa2"],"y"]]],["stat",["assign",true,["sub",["name","skinVertexAArray"],["binary","+",["name","offset_skin"],["num",6]]],["dot",["name","sa2"],"z"]]],["stat",["assign",true,["sub",["name","skinVertexAArray"],["binary","+",["name","offset_skin"],["num",7]]],["num",1]]],["stat",["assign",true,["sub",["name","skinVertexAArray"],["binary","+",["name","offset_skin"],["num",8]]],["dot",["name","sa3"],"x"]]],["stat",["assign",true,["sub",["name","skinVertexAArray"],["binary","+",["name","offset_skin"],["num",9]]],["dot",["name","sa3"],"y"]]],["stat",["assign",true,["sub",["name","skinVertexAArray"],["binary","+",["name","offset_skin"],["num",10]]],["dot",["name","sa3"],"z"]]],["stat",["assign",true,["sub",["name","skinVertexAArray"],["binary","+",["name","offset_skin"],["num",11]]],["num",1]]],["stat",["assign",true,["name","sb1"],["sub",["name","obj_skinVerticesB"],["dot",["name","face"],"a"]]]],["stat",["assign",true,["name","sb2"],["sub",["name","obj_skinVerticesB"],["dot",["name","face"],"b"]]]],["stat",["assign",true,["name","sb3"],["sub",["name","obj_skinVerticesB"],["dot",["name","face"],"c"]]]],["stat",["assign",true,["sub",["name","skinVertexBArray"],["name","offset_skin"]],["dot",["name","sb1"],"x"]]],["stat",["assign",true,["sub",["name","skinVertexBArray"],["binary","+",["name","offset_skin"],["num",1]]],["dot",["name","sb1"],"y"]]],["stat",["assign",true,["sub",["name","skinVertexBArray"],["binary","+",["name","offset_skin"],["num",2]]],["dot",["name","sb1"],"z"]]],["stat",["assign",true,["sub",["name","skinVertexBArray"],["binary","+",["name","offset_skin"],["num",3]]],["num",1]]],["stat",["assign",true,["sub",["name","skinVertexBArray"],["binary","+",["name","offset_skin"],["num",4]]],["dot",["name","sb2"],"x"]]],["stat",["assign",true,["sub",["name","skinVertexBArray"],["binary","+",["name","offset_skin"],["num",5]]],["dot",["name","sb2"],"y"]]],["stat",["assign",true,["sub",["name","skinVertexBArray"],["binary","+",["name","offset_skin"],["num",6]]],["dot",["name","sb2"],"z"]]],["stat",["assign",true,["sub",["name","skinVertexBArray"],["binary","+",["name","offset_skin"],["num",7]]],["num",1]]],["stat",["assign",true,["sub",["name","skinVertexBArray"],["binary","+",["name","offset_skin"],["num",8]]],["dot",["name","sb3"],"x"]]],["stat",["assign",true,["sub",["name","skinVertexBArray"],["binary","+",["name","offset_skin"],["num",9]]],["dot",["name","sb3"],"y"]]],["stat",["assign",true,["sub",["name","skinVertexBArray"],["binary","+",["name","offset_skin"],["num",10]]],["dot",["name","sb3"],"z"]]],["stat",["assign",true,["sub",["name","skinVertexBArray"],["binary","+",["name","offset_skin"],["num",11]]],["num",1]]],["stat",["assign","+",["name","offset_skin"],["num",12]]]]]],["for",["seq",["assign",true,["name","f"],["num",0]],["assign",true,["name","fl"],["dot",["name","chunk_faces4"],"length"]]],["binary","<",["name","f"],["name","fl"]],["unary-postfix","++",["name","f"]],["block",[["stat",["assign",true,["name","face"],["sub",["name","obj_faces"],["sub",["name","chunk_faces4"],["name","f"]]]]],["stat",["assign",true,["name","sw1"],["sub",["name","obj_skinWeights"],["dot",["name","face"],"a"]]]],["stat",["assign",true,["name","sw2"],["sub",["name","obj_skinWeights"],["dot",["name","face"],"b"]]]],["stat",["assign",true,["name","sw3"],["sub",["name","obj_skinWeights"],["dot",["name","face"],"c"]]]],["stat",["assign",true,["name","sw4"],["sub",["name","obj_skinWeights"],["dot",["name","face"],"d"]]]],["stat",["assign",true,["sub",["name","skinWeightArray"],["name","offset_skin"]],["dot",["name","sw1"],"x"]]],["stat",["assign",true,["sub",["name","skinWeightArray"],["binary","+",["name","offset_skin"],["num",1]]],["dot",["name","sw1"],"y"]]],["stat",["assign",true,["sub",["name","skinWeightArray"],["binary","+",["name","offset_skin"],["num",2]]],["dot",["name","sw1"],"z"]]],["stat",["assign",true,["sub",["name","skinWeightArray"],["binary","+",["name","offset_skin"],["num",3]]],["dot",["name","sw1"],"w"]]],["stat",["assign",true,["sub",["name","skinWeightArray"],["binary","+",["name","offset_skin"],["num",4]]],["dot",["name","sw2"],"x"]]],["stat",["assign",true,["sub",["name","skinWeightArray"],["binary","+",["name","offset_skin"],["num",5]]],["dot",["name","sw2"],"y"]]],["stat",["assign",true,["sub",["name","skinWeightArray"],["binary","+",["name","offset_skin"],["num",6]]],["dot",["name","sw2"],"z"]]],["stat",["assign",true,["sub",["name","skinWeightArray"],["binary","+",["name","offset_skin"],["num",7]]],["dot",["name","sw2"],"w"]]],["stat",["assign",true,["sub",["name","skinWeightArray"],["binary","+",["name","offset_skin"],["num",8]]],["dot",["name","sw3"],"x"]]],["stat",["assign",true,["sub",["name","skinWeightArray"],["binary","+",["name","offset_skin"],["num",9]]],["dot",["name","sw3"],"y"]]],["stat",["assign",true,["sub",["name","skinWeightArray"],["binary","+",["name","offset_skin"],["num",10]]],["dot",["name","sw3"],"z"]]],["stat",["assign",true,["sub",["name","skinWeightArray"],["binary","+",["name","offset_skin"],["num",11]]],["dot",["name","sw3"],"w"]]],["stat",["assign",true,["sub",["name","skinWeightArray"],["binary","+",["name","offset_skin"],["num",12]]],["dot",["name","sw4"],"x"]]],["stat",["assign",true,["sub",["name","skinWeightArray"],["binary","+",["name","offset_skin"],["num",13]]],["dot",["name","sw4"],"y"]]],["stat",["assign",true,["sub",["name","skinWeightArray"],["binary","+",["name","offset_skin"],["num",14]]],["dot",["name","sw4"],"z"]]],["stat",["assign",true,["sub",["name","skinWeightArray"],["binary","+",["name","offset_skin"],["num",15]]],["dot",["name","sw4"],"w"]]],["stat",["assign",true,["name","si1"],["sub",["name","obj_skinIndices"],["dot",["name","face"],"a"]]]],["stat",["assign",true,["name","si2"],["sub",["name","obj_skinIndices"],["dot",["name","face"],"b"]]]],["stat",["assign",true,["name","si3"],["sub",["name","obj_skinIndices"],["dot",["name","face"],"c"]]]],["stat",["assign",true,["name","si4"],["sub",["name","obj_skinIndices"],["dot",["name","face"],"d"]]]],["stat",["assign",true,["sub",["name","skinIndexArray"],["name","offset_skin"]],["dot",["name","si1"],"x"]]],["stat",["assign",true,["sub",["name","skinIndexArray"],["binary","+",["name","offset_skin"],["num",1]]],["dot",["name","si1"],"y"]]],["stat",["assign",true,["sub",["name","skinIndexArray"],["binary","+",["name","offset_skin"],["num",2]]],["dot",["name","si1"],"z"]]],["stat",["assign",true,["sub",["name","skinIndexArray"],["binary","+",["name","offset_skin"],["num",3]]],["dot",["name","si1"],"w"]]],["stat",["assign",true,["sub",["name","skinIndexArray"],["binary","+",["name","offset_skin"],["num",4]]],["dot",["name","si2"],"x"]]],["stat",["assign",true,["sub",["name","skinIndexArray"],["binary","+",["name","offset_skin"],["num",5]]],["dot",["name","si2"],"y"]]],["stat",["assign",true,["sub",["name","skinIndexArray"],["binary","+",["name","offset_skin"],["num",6]]],["dot",["name","si2"],"z"]]],["stat",["assign",true,["sub",["name","skinIndexArray"],["binary","+",["name","offset_skin"],["num",7]]],["dot",["name","si2"],"w"]]],["stat",["assign",true,["sub",["name","skinIndexArray"],["binary","+",["name","offset_skin"],["num",8]]],["dot",["name","si3"],"x"]]],["stat",["assign",true,["sub",["name","skinIndexArray"],["binary","+",["name","offset_skin"],["num",9]]],["dot",["name","si3"],"y"]]],["stat",["assign",true,["sub",["name","skinIndexArray"],["binary","+",["name","offset_skin"],["num",10]]],["dot",["name","si3"],"z"]]],["stat",["assign",true,["sub",["name","skinIndexArray"],["binary","+",["name","offset_skin"],["num",11]]],["dot",["name","si3"],"w"]]],["stat",["assign",true,["sub",["name","skinIndexArray"],["binary","+",["name","offset_skin"],["num",12]]],["dot",["name","si4"],"x"]]],["stat",["assign",true,["sub",["name","skinIndexArray"],["binary","+",["name","offset_skin"],["num",13]]],["dot",["name","si4"],"y"]]],["stat",["assign",true,["sub",["name","skinIndexArray"],["binary","+",["name","offset_skin"],["num",14]]],["dot",["name","si4"],"z"]]],["stat",["assign",true,["sub",["name","skinIndexArray"],["binary","+",["name","offset_skin"],["num",15]]],["dot",["name","si4"],"w"]]],["stat",["assign",true,["name","sa1"],["sub",["name","obj_skinVerticesA"],["dot",["name","face"],"a"]]]],["stat",["assign",true,["name","sa2"],["sub",["name","obj_skinVerticesA"],["dot",["name","face"],"b"]]]],["stat",["assign",true,["name","sa3"],["sub",["name","obj_skinVerticesA"],["dot",["name","face"],"c"]]]],["stat",["assign",true,["name","sa4"],["sub",["name","obj_skinVerticesA"],["dot",["name","face"],"d"]]]],["stat",["assign",true,["sub",["name","skinVertexAArray"],["name","offset_skin"]],["dot",["name","sa1"],"x"]]],["stat",["assign",true,["sub",["name","skinVertexAArray"],["binary","+",["name","offset_skin"],["num",1]]],["dot",["name","sa1"],"y"]]],["stat",["assign",true,["sub",["name","skinVertexAArray"],["binary","+",["name","offset_skin"],["num",2]]],["dot",["name","sa1"],"z"]]],["stat",["assign",true,["sub",["name","skinVertexAArray"],["binary","+",["name","offset_skin"],["num",3]]],["num",1]]],["stat",["assign",true,["sub",["name","skinVertexAArray"],["binary","+",["name","offset_skin"],["num",4]]],["dot",["name","sa2"],"x"]]],["stat",["assign",true,["sub",["name","skinVertexAArray"],["binary","+",["name","offset_skin"],["num",5]]],["dot",["name","sa2"],"y"]]],["stat",["assign",true,["sub",["name","skinVertexAArray"],["binary","+",["name","offset_skin"],["num",6]]],["dot",["name","sa2"],"z"]]],["stat",["assign",true,["sub",["name","skinVertexAArray"],["binary","+",["name","offset_skin"],["num",7]]],["num",1]]],["stat",["assign",true,["sub",["name","skinVertexAArray"],["binary","+",["name","offset_skin"],["num",8]]],["dot",["name","sa3"],"x"]]],["stat",["assign",true,["sub",["name","skinVertexAArray"],["binary","+",["name","offset_skin"],["num",9]]],["dot",["name","sa3"],"y"]]],["stat",["assign",true,["sub",["name","skinVertexAArray"],["binary","+",["name","offset_skin"],["num",10]]],["dot",["name","sa3"],"z"]]],["stat",["assign",true,["sub",["name","skinVertexAArray"],["binary","+",["name","offset_skin"],["num",11]]],["num",1]]],["stat",["assign",true,["sub",["name","skinVertexAArray"],["binary","+",["name","offset_skin"],["num",12]]],["dot",["name","sa4"],"x"]]],["stat",["assign",true,["sub",["name","skinVertexAArray"],["binary","+",["name","offset_skin"],["num",13]]],["dot",["name","sa4"],"y"]]],["stat",["assign",true,["sub",["name","skinVertexAArray"],["binary","+",["name","offset_skin"],["num",14]]],["dot",["name","sa4"],"z"]]],["stat",["assign",true,["sub",["name","skinVertexAArray"],["binary","+",["name","offset_skin"],["num",15]]],["num",1]]],["stat",["assign",true,["name","sb1"],["sub",["name","obj_skinVerticesB"],["dot",["name","face"],"a"]]]],["stat",["assign",true,["name","sb2"],["sub",["name","obj_skinVerticesB"],["dot",["name","face"],"b"]]]],["stat",["assign",true,["name","sb3"],["sub",["name","obj_skinVerticesB"],["dot",["name","face"],"c"]]]],["stat",["assign",true,["name","sb4"],["sub",["name","obj_skinVerticesB"],["dot",["name","face"],"d"]]]],["stat",["assign",true,["sub",["name","skinVertexBArray"],["name","offset_skin"]],["dot",["name","sb1"],"x"]]],["stat",["assign",true,["sub",["name","skinVertexBArray"],["binary","+",["name","offset_skin"],["num",1]]],["dot",["name","sb1"],"y"]]],["stat",["assign",true,["sub",["name","skinVertexBArray"],["binary","+",["name","offset_skin"],["num",2]]],["dot",["name","sb1"],"z"]]],["stat",["assign",true,["sub",["name","skinVertexBArray"],["binary","+",["name","offset_skin"],["num",3]]],["num",1]]],["stat",["assign",true,["sub",["name","skinVertexBArray"],["binary","+",["name","offset_skin"],["num",4]]],["dot",["name","sb2"],"x"]]],["stat",["assign",true,["sub",["name","skinVertexBArray"],["binary","+",["name","offset_skin"],["num",5]]],["dot",["name","sb2"],"y"]]],["stat",["assign",true,["sub",["name","skinVertexBArray"],["binary","+",["name","offset_skin"],["num",6]]],["dot",["name","sb2"],"z"]]],["stat",["assign",true,["sub",["name","skinVertexBArray"],["binary","+",["name","offset_skin"],["num",7]]],["num",1]]],["stat",["assign",true,["sub",["name","skinVertexBArray"],["binary","+",["name","offset_skin"],["num",8]]],["dot",["name","sb3"],"x"]]],["stat",["assign",true,["sub",["name","skinVertexBArray"],["binary","+",["name","offset_skin"],["num",9]]],["dot",["name","sb3"],"y"]]],["stat",["assign",true,["sub",["name","skinVertexBArray"],["binary","+",["name","offset_skin"],["num",10]]],["dot",["name","sb3"],"z"]]],["stat",["assign",true,["sub",["name","skinVertexBArray"],["binary","+",["name","offset_skin"],["num",11]]],["num",1]]],["stat",["assign",true,["sub",["name","skinVertexBArray"],["binary","+",["name","offset_skin"],["num",12]]],["dot",["name","sb4"],"x"]]],["stat",["assign",true,["sub",["name","skinVertexBArray"],["binary","+",["name","offset_skin"],["num",13]]],["dot",["name","sb4"],"y"]]],["stat",["assign",true,["sub",["name","skinVertexBArray"],["binary","+",["name","offset_skin"],["num",14]]],["dot",["name","sb4"],"z"]]],["stat",["assign",true,["sub",["name","skinVertexBArray"],["binary","+",["name","offset_skin"],["num",15]]],["num",1]]],["stat",["assign","+",["name","offset_skin"],["num",16]]]]]],["if",["binary",">",["name","offset_skin"],["num",0]],["block",[["stat",["call",["dot",["name","_gl"],"bindBuffer"],[["dot",["name","_gl"],"ARRAY_BUFFER"],["dot",["name","geometryGroup"],"__webglSkinVertexABuffer"]]]],["stat",["call",["dot",["name","_gl"],"bufferData"],[["dot",["name","_gl"],"ARRAY_BUFFER"],["name","skinVertexAArray"],["name","hint"]]]],["stat",["call",["dot",["name","_gl"],"bindBuffer"],[["dot",["name","_gl"],"ARRAY_BUFFER"],["dot",["name","geometryGroup"],"__webglSkinVertexBBuffer"]]]],["stat",["call",["dot",["name","_gl"],"bufferData"],[["dot",["name","_gl"],"ARRAY_BUFFER"],["name","skinVertexBArray"],["name","hint"]]]],["stat",["call",["dot",["name","_gl"],"bindBuffer"],[["dot",["name","_gl"],"ARRAY_BUFFER"],["dot",["name","geometryGroup"],"__webglSkinIndicesBuffer"]]]],["stat",["call",["dot",["name","_gl"],"bufferData"],[["dot",["name","_gl"],"ARRAY_BUFFER"],["name","skinIndexArray"],["name","hint"]]]],["stat",["call",["dot",["name","_gl"],"bindBuffer"],[["dot",["name","_gl"],"ARRAY_BUFFER"],["dot",["name","geometryGroup"],"__webglSkinWeightsBuffer"]]]],["stat",["call",["dot",["name","_gl"],"bufferData"],[["dot",["name","_gl"],"ARRAY_BUFFER"],["name","skinWeightArray"],["name","hint"]]]]]],null]]],null],["if",["binary","&&",["name","dirtyColors"],["name","vertexColorType"]],["block",[["for",["seq",["assign",true,["name","f"],["num",0]],["assign",true,["name","fl"],["dot",["name","chunk_faces3"],"length"]]],["binary","<",["name","f"],["name","fl"]],["unary-postfix","++",["name","f"]],["block",[["stat",["assign",true,["name","face"],["sub",["name","obj_faces"],["sub",["name","chunk_faces3"],["name","f"]]]]],["stat",["assign",true,["name","vertexColors"],["dot",["name","face"],"vertexColors"]]],["stat",["assign",true,["name","faceColor"],["dot",["name","face"],"color"]]],["if",["binary","&&",["binary","===",["dot",["name","vertexColors"],"length"],["num",3]],["binary","===",["name","vertexColorType"],["dot",["name","THREE"],"VertexColors"]]],["block",[["stat",["assign",true,["name","c1"],["sub",["name","vertexColors"],["num",0]]]],["stat",["assign",true,["name","c2"],["sub",["name","vertexColors"],["num",1]]]],["stat",["assign",true,["name","c3"],["sub",["name","vertexColors"],["num",2]]]]]],["block",[["stat",["assign",true,["name","c1"],["name","faceColor"]]],["stat",["assign",true,["name","c2"],["name","faceColor"]]],["stat",["assign",true,["name","c3"],["name","faceColor"]]]]]],["stat",["assign",true,["sub",["name","colorArray"],["name","offset_color"]],["dot",["name","c1"],"r"]]],["stat",["assign",true,["sub",["name","colorArray"],["binary","+",["name","offset_color"],["num",1]]],["dot",["name","c1"],"g"]]],["stat",["assign",true,["sub",["name","colorArray"],["binary","+",["name","offset_color"],["num",2]]],["dot",["name","c1"],"b"]]],["stat",["assign",true,["sub",["name","colorArray"],["binary","+",["name","offset_color"],["num",3]]],["dot",["name","c2"],"r"]]],["stat",["assign",true,["sub",["name","colorArray"],["binary","+",["name","offset_color"],["num",4]]],["dot",["name","c2"],"g"]]],["stat",["assign",true,["sub",["name","colorArray"],["binary","+",["name","offset_color"],["num",5]]],["dot",["name","c2"],"b"]]],["stat",["assign",true,["sub",["name","colorArray"],["binary","+",["name","offset_color"],["num",6]]],["dot",["name","c3"],"r"]]],["stat",["assign",true,["sub",["name","colorArray"],["binary","+",["name","offset_color"],["num",7]]],["dot",["name","c3"],"g"]]],["stat",["assign",true,["sub",["name","colorArray"],["binary","+",["name","offset_color"],["num",8]]],["dot",["name","c3"],"b"]]],["stat",["assign","+",["name","offset_color"],["num",9]]]]]],["for",["seq",["assign",true,["name","f"],["num",0]],["assign",true,["name","fl"],["dot",["name","chunk_faces4"],"length"]]],["binary","<",["name","f"],["name","fl"]],["unary-postfix","++",["name","f"]],["block",[["stat",["assign",true,["name","face"],["sub",["name","obj_faces"],["sub",["name","chunk_faces4"],["name","f"]]]]],["stat",["assign",true,["name","vertexColors"],["dot",["name","face"],"vertexColors"]]],["stat",["assign",true,["name","faceColor"],["dot",["name","face"],"color"]]],["if",["binary","&&",["binary","===",["dot",["name","vertexColors"],"length"],["num",4]],["binary","===",["name","vertexColorType"],["dot",["name","THREE"],"VertexColors"]]],["block",[["stat",["assign",true,["name","c1"],["sub",["name","vertexColors"],["num",0]]]],["stat",["assign",true,["name","c2"],["sub",["name","vertexColors"],["num",1]]]],["stat",["assign",true,["name","c3"],["sub",["name","vertexColors"],["num",2]]]],["stat",["assign",true,["name","c4"],["sub",["name","vertexColors"],["num",3]]]]]],["block",[["stat",["assign",true,["name","c1"],["name","faceColor"]]],["stat",["assign",true,["name","c2"],["name","faceColor"]]],["stat",["assign",true,["name","c3"],["name","faceColor"]]],["stat",["assign",true,["name","c4"],["name","faceColor"]]]]]],["stat",["assign",true,["sub",["name","colorArray"],["name","offset_color"]],["dot",["name","c1"],"r"]]],["stat",["assign",true,["sub",["name","colorArray"],["binary","+",["name","offset_color"],["num",1]]],["dot",["name","c1"],"g"]]],["stat",["assign",true,["sub",["name","colorArray"],["binary","+",["name","offset_color"],["num",2]]],["dot",["name","c1"],"b"]]],["stat",["assign",true,["sub",["name","colorArray"],["binary","+",["name","offset_color"],["num",3]]],["dot",["name","c2"],"r"]]],["stat",["assign",true,["sub",["name","colorArray"],["binary","+",["name","offset_color"],["num",4]]],["dot",["name","c2"],"g"]]],["stat",["assign",true,["sub",["name","colorArray"],["binary","+",["name","offset_color"],["num",5]]],["dot",["name","c2"],"b"]]],["stat",["assign",true,["sub",["name","colorArray"],["binary","+",["name","offset_color"],["num",6]]],["dot",["name","c3"],"r"]]],["stat",["assign",true,["sub",["name","colorArray"],["binary","+",["name","offset_color"],["num",7]]],["dot",["name","c3"],"g"]]],["stat",["assign",true,["sub",["name","colorArray"],["binary","+",["name","offset_color"],["num",8]]],["dot",["name","c3"],"b"]]],["stat",["assign",true,["sub",["name","colorArray"],["binary","+",["name","offset_color"],["num",9]]],["dot",["name","c4"],"r"]]],["stat",["assign",true,["sub",["name","colorArray"],["binary","+",["name","offset_color"],["num",10]]],["dot",["name","c4"],"g"]]],["stat",["assign",true,["sub",["name","colorArray"],["binary","+",["name","offset_color"],["num",11]]],["dot",["name","c4"],"b"]]],["stat",["assign","+",["name","offset_color"],["num",12]]]]]],["if",["binary",">",["name","offset_color"],["num",0]],["block",[["stat",["call",["dot",["name","_gl"],"bindBuffer"],[["dot",["name","_gl"],"ARRAY_BUFFER"],["dot",["name","geometryGroup"],"__webglColorBuffer"]]]],["stat",["call",["dot",["name","_gl"],"bufferData"],[["dot",["name","_gl"],"ARRAY_BUFFER"],["name","colorArray"],["name","hint"]]]]]],null]]],null],["if",["binary","&&",["name","dirtyTangents"],["dot",["name","geometry"],"hasTangents"]],["block",[["for",["seq",["assign",true,["name","f"],["num",0]],["assign",true,["name","fl"],["dot",["name","chunk_faces3"],"length"]]],["binary","<",["name","f"],["name","fl"]],["unary-postfix","++",["name","f"]],["block",[["stat",["assign",true,["name","face"],["sub",["name","obj_faces"],["sub",["name","chunk_faces3"],["name","f"]]]]],["stat",["assign",true,["name","vertexTangents"],["dot",["name","face"],"vertexTangents"]]],["stat",["assign",true,["name","t1"],["sub",["name","vertexTangents"],["num",0]]]],["stat",["assign",true,["name","t2"],["sub",["name","vertexTangents"],["num",1]]]],["stat",["assign",true,["name","t3"],["sub",["name","vertexTangents"],["num",2]]]],["stat",["assign",true,["sub",["name","tangentArray"],["name","offset_tangent"]],["dot",["name","t1"],"x"]]],["stat",["assign",true,["sub",["name","tangentArray"],["binary","+",["name","offset_tangent"],["num",1]]],["dot",["name","t1"],"y"]]],["stat",["assign",true,["sub",["name","tangentArray"],["binary","+",["name","offset_tangent"],["num",2]]],["dot",["name","t1"],"z"]]],["stat",["assign",true,["sub",["name","tangentArray"],["binary","+",["name","offset_tangent"],["num",3]]],["dot",["name","t1"],"w"]]],["stat",["assign",true,["sub",["name","tangentArray"],["binary","+",["name","offset_tangent"],["num",4]]],["dot",["name","t2"],"x"]]],["stat",["assign",true,["sub",["name","tangentArray"],["binary","+",["name","offset_tangent"],["num",5]]],["dot",["name","t2"],"y"]]],["stat",["assign",true,["sub",["name","tangentArray"],["binary","+",["name","offset_tangent"],["num",6]]],["dot",["name","t2"],"z"]]],["stat",["assign",true,["sub",["name","tangentArray"],["binary","+",["name","offset_tangent"],["num",7]]],["dot",["name","t2"],"w"]]],["stat",["assign",true,["sub",["name","tangentArray"],["binary","+",["name","offset_tangent"],["num",8]]],["dot",["name","t3"],"x"]]],["stat",["assign",true,["sub",["name","tangentArray"],["binary","+",["name","offset_tangent"],["num",9]]],["dot",["name","t3"],"y"]]],["stat",["assign",true,["sub",["name","tangentArray"],["binary","+",["name","offset_tangent"],["num",10]]],["dot",["name","t3"],"z"]]],["stat",["assign",true,["sub",["name","tangentArray"],["binary","+",["name","offset_tangent"],["num",11]]],["dot",["name","t3"],"w"]]],["stat",["assign","+",["name","offset_tangent"],["num",12]]]]]],["for",["seq",["assign",true,["name","f"],["num",0]],["assign",true,["name","fl"],["dot",["name","chunk_faces4"],"length"]]],["binary","<",["name","f"],["name","fl"]],["unary-postfix","++",["name","f"]],["block",[["stat",["assign",true,["name","face"],["sub",["name","obj_faces"],["sub",["name","chunk_faces4"],["name","f"]]]]],["stat",["assign",true,["name","vertexTangents"],["dot",["name","face"],"vertexTangents"]]],["stat",["assign",true,["name","t1"],["sub",["name","vertexTangents"],["num",0]]]],["stat",["assign",true,["name","t2"],["sub",["name","vertexTangents"],["num",1]]]],["stat",["assign",true,["name","t3"],["sub",["name","vertexTangents"],["num",2]]]],["stat",["assign",true,["name","t4"],["sub",["name","vertexTangents"],["num",3]]]],["stat",["assign",true,["sub",["name","tangentArray"],["name","offset_tangent"]],["dot",["name","t1"],"x"]]],["stat",["assign",true,["sub",["name","tangentArray"],["binary","+",["name","offset_tangent"],["num",1]]],["dot",["name","t1"],"y"]]],["stat",["assign",true,["sub",["name","tangentArray"],["binary","+",["name","offset_tangent"],["num",2]]],["dot",["name","t1"],"z"]]],["stat",["assign",true,["sub",["name","tangentArray"],["binary","+",["name","offset_tangent"],["num",3]]],["dot",["name","t1"],"w"]]],["stat",["assign",true,["sub",["name","tangentArray"],["binary","+",["name","offset_tangent"],["num",4]]],["dot",["name","t2"],"x"]]],["stat",["assign",true,["sub",["name","tangentArray"],["binary","+",["name","offset_tangent"],["num",5]]],["dot",["name","t2"],"y"]]],["stat",["assign",true,["sub",["name","tangentArray"],["binary","+",["name","offset_tangent"],["num",6]]],["dot",["name","t2"],"z"]]],["stat",["assign",true,["sub",["name","tangentArray"],["binary","+",["name","offset_tangent"],["num",7]]],["dot",["name","t2"],"w"]]],["stat",["assign",true,["sub",["name","tangentArray"],["binary","+",["name","offset_tangent"],["num",8]]],["dot",["name","t3"],"x"]]],["stat",["assign",true,["sub",["name","tangentArray"],["binary","+",["name","offset_tangent"],["num",9]]],["dot",["name","t3"],"y"]]],["stat",["assign",true,["sub",["name","tangentArray"],["binary","+",["name","offset_tangent"],["num",10]]],["dot",["name","t3"],"z"]]],["stat",["assign",true,["sub",["name","tangentArray"],["binary","+",["name","offset_tangent"],["num",11]]],["dot",["name","t3"],"w"]]],["stat",["assign",true,["sub",["name","tangentArray"],["binary","+",["name","offset_tangent"],["num",12]]],["dot",["name","t4"],"x"]]],["stat",["assign",true,["sub",["name","tangentArray"],["binary","+",["name","offset_tangent"],["num",13]]],["dot",["name","t4"],"y"]]],["stat",["assign",true,["sub",["name","tangentArray"],["binary","+",["name","offset_tangent"],["num",14]]],["dot",["name","t4"],"z"]]],["stat",["assign",true,["sub",["name","tangentArray"],["binary","+",["name","offset_tangent"],["num",15]]],["dot",["name","t4"],"w"]]],["stat",["assign","+",["name","offset_tangent"],["num",16]]]]]],["stat",["call",["dot",["name","_gl"],"bindBuffer"],[["dot",["name","_gl"],"ARRAY_BUFFER"],["dot",["name","geometryGroup"],"__webglTangentBuffer"]]]],["stat",["call",["dot",["name","_gl"],"bufferData"],[["dot",["name","_gl"],"ARRAY_BUFFER"],["name","tangentArray"],["name","hint"]]]]]],null],["if",["binary","&&",["name","dirtyNormals"],["name","normalType"]],["block",[["for",["seq",["assign",true,["name","f"],["num",0]],["assign",true,["name","fl"],["dot",["name","chunk_faces3"],"length"]]],["binary","<",["name","f"],["name","fl"]],["unary-postfix","++",["name","f"]],["block",[["stat",["assign",true,["name","face"],["sub",["name","obj_faces"],["sub",["name","chunk_faces3"],["name","f"]]]]],["stat",["assign",true,["name","vertexNormals"],["dot",["name","face"],"vertexNormals"]]],["stat",["assign",true,["name","faceNormal"],["dot",["name","face"],"normal"]]],["if",["binary","&&",["binary","===",["dot",["name","vertexNormals"],"length"],["num",3]],["name","needsSmoothNormals"]],["block",[["for",["assign",true,["name","i"],["num",0]],["binary","<",["name","i"],["num",3]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","vn"],["sub",["name","vertexNormals"],["name","i"]]]],["stat",["assign",true,["sub",["name","normalArray"],["name","offset_normal"]],["dot",["name","vn"],"x"]]],["stat",["assign",true,["sub",["name","normalArray"],["binary","+",["name","offset_normal"],["num",1]]],["dot",["name","vn"],"y"]]],["stat",["assign",true,["sub",["name","normalArray"],["binary","+",["name","offset_normal"],["num",2]]],["dot",["name","vn"],"z"]]],["stat",["assign","+",["name","offset_normal"],["num",3]]]]]]]],["block",[["for",["assign",true,["name","i"],["num",0]],["binary","<",["name","i"],["num",3]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["sub",["name","normalArray"],["name","offset_normal"]],["dot",["name","faceNormal"],"x"]]],["stat",["assign",true,["sub",["name","normalArray"],["binary","+",["name","offset_normal"],["num",1]]],["dot",["name","faceNormal"],"y"]]],["stat",["assign",true,["sub",["name","normalArray"],["binary","+",["name","offset_normal"],["num",2]]],["dot",["name","faceNormal"],"z"]]],["stat",["assign","+",["name","offset_normal"],["num",3]]]]]]]]]]]],["for",["seq",["assign",true,["name","f"],["num",0]],["assign",true,["name","fl"],["dot",["name","chunk_faces4"],"length"]]],["binary","<",["name","f"],["name","fl"]],["unary-postfix","++",["name","f"]],["block",[["stat",["assign",true,["name","face"],["sub",["name","obj_faces"],["sub",["name","chunk_faces4"],["name","f"]]]]],["stat",["assign",true,["name","vertexNormals"],["dot",["name","face"],"vertexNormals"]]],["stat",["assign",true,["name","faceNormal"],["dot",["name","face"],"normal"]]],["if",["binary","&&",["binary","===",["dot",["name","vertexNormals"],"length"],["num",4]],["name","needsSmoothNormals"]],["block",[["for",["assign",true,["name","i"],["num",0]],["binary","<",["name","i"],["num",4]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","vn"],["sub",["name","vertexNormals"],["name","i"]]]],["stat",["assign",true,["sub",["name","normalArray"],["name","offset_normal"]],["dot",["name","vn"],"x"]]],["stat",["assign",true,["sub",["name","normalArray"],["binary","+",["name","offset_normal"],["num",1]]],["dot",["name","vn"],"y"]]],["stat",["assign",true,["sub",["name","normalArray"],["binary","+",["name","offset_normal"],["num",2]]],["dot",["name","vn"],"z"]]],["stat",["assign","+",["name","offset_normal"],["num",3]]]]]]]],["block",[["for",["assign",true,["name","i"],["num",0]],["binary","<",["name","i"],["num",4]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["sub",["name","normalArray"],["name","offset_normal"]],["dot",["name","faceNormal"],"x"]]],["stat",["assign",true,["sub",["name","normalArray"],["binary","+",["name","offset_normal"],["num",1]]],["dot",["name","faceNormal"],"y"]]],["stat",["assign",true,["sub",["name","normalArray"],["binary","+",["name","offset_normal"],["num",2]]],["dot",["name","faceNormal"],"z"]]],["stat",["assign","+",["name","offset_normal"],["num",3]]]]]]]]]]]],["stat",["call",["dot",["name","_gl"],"bindBuffer"],[["dot",["name","_gl"],"ARRAY_BUFFER"],["dot",["name","geometryGroup"],"__webglNormalBuffer"]]]],["stat",["call",["dot",["name","_gl"],"bufferData"],[["dot",["name","_gl"],"ARRAY_BUFFER"],["name","normalArray"],["name","hint"]]]]]],null],["if",["binary","&&",["binary","&&",["name","dirtyUvs"],["name","obj_uvs"]],["name","uvType"]],["block",[["for",["seq",["assign",true,["name","f"],["num",0]],["assign",true,["name","fl"],["dot",["name","chunk_faces3"],"length"]]],["binary","<",["name","f"],["name","fl"]],["unary-postfix","++",["name","f"]],["block",[["stat",["assign",true,["name","fi"],["sub",["name","chunk_faces3"],["name","f"]]]],["stat",["assign",true,["name","face"],["sub",["name","obj_faces"],["name","fi"]]]],["stat",["assign",true,["name","uv"],["sub",["name","obj_uvs"],["name","fi"]]]],["if",["binary","===",["name","uv"],["name","undefined"]],["continue",null],null],["for",["assign",true,["name","i"],["num",0]],["binary","<",["name","i"],["num",3]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","uvi"],["sub",["name","uv"],["name","i"]]]],["stat",["assign",true,["sub",["name","uvArray"],["name","offset_uv"]],["dot",["name","uvi"],"u"]]],["stat",["assign",true,["sub",["name","uvArray"],["binary","+",["name","offset_uv"],["num",1]]],["dot",["name","uvi"],"v"]]],["stat",["assign","+",["name","offset_uv"],["num",2]]]]]]]]],["for",["seq",["assign",true,["name","f"],["num",0]],["assign",true,["name","fl"],["dot",["name","chunk_faces4"],"length"]]],["binary","<",["name","f"],["name","fl"]],["unary-postfix","++",["name","f"]],["block",[["stat",["assign",true,["name","fi"],["sub",["name","chunk_faces4"],["name","f"]]]],["stat",["assign",true,["name","face"],["sub",["name","obj_faces"],["name","fi"]]]],["stat",["assign",true,["name","uv"],["sub",["name","obj_uvs"],["name","fi"]]]],["if",["binary","===",["name","uv"],["name","undefined"]],["continue",null],null],["for",["assign",true,["name","i"],["num",0]],["binary","<",["name","i"],["num",4]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","uvi"],["sub",["name","uv"],["name","i"]]]],["stat",["assign",true,["sub",["name","uvArray"],["name","offset_uv"]],["dot",["name","uvi"],"u"]]],["stat",["assign",true,["sub",["name","uvArray"],["binary","+",["name","offset_uv"],["num",1]]],["dot",["name","uvi"],"v"]]],["stat",["assign","+",["name","offset_uv"],["num",2]]]]]]]]],["if",["binary",">",["name","offset_uv"],["num",0]],["block",[["stat",["call",["dot",["name","_gl"],"bindBuffer"],[["dot",["name","_gl"],"ARRAY_BUFFER"],["dot",["name","geometryGroup"],"__webglUVBuffer"]]]],["stat",["call",["dot",["name","_gl"],"bufferData"],[["dot",["name","_gl"],"ARRAY_BUFFER"],["name","uvArray"],["name","hint"]]]]]],null]]],null],["if",["binary","&&",["binary","&&",["name","dirtyUvs"],["name","obj_uvs2"]],["name","uvType"]],["block",[["for",["seq",["assign",true,["name","f"],["num",0]],["assign",true,["name","fl"],["dot",["name","chunk_faces3"],"length"]]],["binary","<",["name","f"],["name","fl"]],["unary-postfix","++",["name","f"]],["block",[["stat",["assign",true,["name","fi"],["sub",["name","chunk_faces3"],["name","f"]]]],["stat",["assign",true,["name","face"],["sub",["name","obj_faces"],["name","fi"]]]],["stat",["assign",true,["name","uv2"],["sub",["name","obj_uvs2"],["name","fi"]]]],["if",["binary","===",["name","uv2"],["name","undefined"]],["continue",null],null],["for",["assign",true,["name","i"],["num",0]],["binary","<",["name","i"],["num",3]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","uv2i"],["sub",["name","uv2"],["name","i"]]]],["stat",["assign",true,["sub",["name","uv2Array"],["name","offset_uv2"]],["dot",["name","uv2i"],"u"]]],["stat",["assign",true,["sub",["name","uv2Array"],["binary","+",["name","offset_uv2"],["num",1]]],["dot",["name","uv2i"],"v"]]],["stat",["assign","+",["name","offset_uv2"],["num",2]]]]]]]]],["for",["seq",["assign",true,["name","f"],["num",0]],["assign",true,["name","fl"],["dot",["name","chunk_faces4"],"length"]]],["binary","<",["name","f"],["name","fl"]],["unary-postfix","++",["name","f"]],["block",[["stat",["assign",true,["name","fi"],["sub",["name","chunk_faces4"],["name","f"]]]],["stat",["assign",true,["name","face"],["sub",["name","obj_faces"],["name","fi"]]]],["stat",["assign",true,["name","uv2"],["sub",["name","obj_uvs2"],["name","fi"]]]],["if",["binary","===",["name","uv2"],["name","undefined"]],["continue",null],null],["for",["assign",true,["name","i"],["num",0]],["binary","<",["name","i"],["num",4]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","uv2i"],["sub",["name","uv2"],["name","i"]]]],["stat",["assign",true,["sub",["name","uv2Array"],["name","offset_uv2"]],["dot",["name","uv2i"],"u"]]],["stat",["assign",true,["sub",["name","uv2Array"],["binary","+",["name","offset_uv2"],["num",1]]],["dot",["name","uv2i"],"v"]]],["stat",["assign","+",["name","offset_uv2"],["num",2]]]]]]]]],["if",["binary",">",["name","offset_uv2"],["num",0]],["block",[["stat",["call",["dot",["name","_gl"],"bindBuffer"],[["dot",["name","_gl"],"ARRAY_BUFFER"],["dot",["name","geometryGroup"],"__webglUV2Buffer"]]]],["stat",["call",["dot",["name","_gl"],"bufferData"],[["dot",["name","_gl"],"ARRAY_BUFFER"],["name","uv2Array"],["name","hint"]]]]]],null]]],null],["if",["name","dirtyElements"],["block",[["for",["seq",["assign",true,["name","f"],["num",0]],["assign",true,["name","fl"],["dot",["name","chunk_faces3"],"length"]]],["binary","<",["name","f"],["name","fl"]],["unary-postfix","++",["name","f"]],["block",[["stat",["assign",true,["name","face"],["sub",["name","obj_faces"],["sub",["name","chunk_faces3"],["name","f"]]]]],["stat",["assign",true,["sub",["name","faceArray"],["name","offset_face"]],["name","vertexIndex"]]],["stat",["assign",true,["sub",["name","faceArray"],["binary","+",["name","offset_face"],["num",1]]],["binary","+",["name","vertexIndex"],["num",1]]]],["stat",["assign",true,["sub",["name","faceArray"],["binary","+",["name","offset_face"],["num",2]]],["binary","+",["name","vertexIndex"],["num",2]]]],["stat",["assign","+",["name","offset_face"],["num",3]]],["stat",["assign",true,["sub",["name","lineArray"],["name","offset_line"]],["name","vertexIndex"]]],["stat",["assign",true,["sub",["name","lineArray"],["binary","+",["name","offset_line"],["num",1]]],["binary","+",["name","vertexIndex"],["num",1]]]],["stat",["assign",true,["sub",["name","lineArray"],["binary","+",["name","offset_line"],["num",2]]],["name","vertexIndex"]]],["stat",["assign",true,["sub",["name","lineArray"],["binary","+",["name","offset_line"],["num",3]]],["binary","+",["name","vertexIndex"],["num",2]]]],["stat",["assign",true,["sub",["name","lineArray"],["binary","+",["name","offset_line"],["num",4]]],["binary","+",["name","vertexIndex"],["num",1]]]],["stat",["assign",true,["sub",["name","lineArray"],["binary","+",["name","offset_line"],["num",5]]],["binary","+",["name","vertexIndex"],["num",2]]]],["stat",["assign","+",["name","offset_line"],["num",6]]],["stat",["assign","+",["name","vertexIndex"],["num",3]]]]]],["for",["seq",["assign",true,["name","f"],["num",0]],["assign",true,["name","fl"],["dot",["name","chunk_faces4"],"length"]]],["binary","<",["name","f"],["name","fl"]],["unary-postfix","++",["name","f"]],["block",[["stat",["assign",true,["name","face"],["sub",["name","obj_faces"],["sub",["name","chunk_faces4"],["name","f"]]]]],["stat",["assign",true,["sub",["name","faceArray"],["name","offset_face"]],["name","vertexIndex"]]],["stat",["assign",true,["sub",["name","faceArray"],["binary","+",["name","offset_face"],["num",1]]],["binary","+",["name","vertexIndex"],["num",1]]]],["stat",["assign",true,["sub",["name","faceArray"],["binary","+",["name","offset_face"],["num",2]]],["binary","+",["name","vertexIndex"],["num",3]]]],["stat",["assign",true,["sub",["name","faceArray"],["binary","+",["name","offset_face"],["num",3]]],["binary","+",["name","vertexIndex"],["num",1]]]],["stat",["assign",true,["sub",["name","faceArray"],["binary","+",["name","offset_face"],["num",4]]],["binary","+",["name","vertexIndex"],["num",2]]]],["stat",["assign",true,["sub",["name","faceArray"],["binary","+",["name","offset_face"],["num",5]]],["binary","+",["name","vertexIndex"],["num",3]]]],["stat",["assign","+",["name","offset_face"],["num",6]]],["stat",["assign",true,["sub",["name","lineArray"],["name","offset_line"]],["name","vertexIndex"]]],["stat",["assign",true,["sub",["name","lineArray"],["binary","+",["name","offset_line"],["num",1]]],["binary","+",["name","vertexIndex"],["num",1]]]],["stat",["assign",true,["sub",["name","lineArray"],["binary","+",["name","offset_line"],["num",2]]],["name","vertexIndex"]]],["stat",["assign",true,["sub",["name","lineArray"],["binary","+",["name","offset_line"],["num",3]]],["binary","+",["name","vertexIndex"],["num",3]]]],["stat",["assign",true,["sub",["name","lineArray"],["binary","+",["name","offset_line"],["num",4]]],["binary","+",["name","vertexIndex"],["num",1]]]],["stat",["assign",true,["sub",["name","lineArray"],["binary","+",["name","offset_line"],["num",5]]],["binary","+",["name","vertexIndex"],["num",2]]]],["stat",["assign",true,["sub",["name","lineArray"],["binary","+",["name","offset_line"],["num",6]]],["binary","+",["name","vertexIndex"],["num",2]]]],["stat",["assign",true,["sub",["name","lineArray"],["binary","+",["name","offset_line"],["num",7]]],["binary","+",["name","vertexIndex"],["num",3]]]],["stat",["assign","+",["name","offset_line"],["num",8]]],["stat",["assign","+",["name","vertexIndex"],["num",4]]]]]],["stat",["call",["dot",["name","_gl"],"bindBuffer"],[["dot",["name","_gl"],"ELEMENT_ARRAY_BUFFER"],["dot",["name","geometryGroup"],"__webglFaceBuffer"]]]],["stat",["call",["dot",["name","_gl"],"bufferData"],[["dot",["name","_gl"],"ELEMENT_ARRAY_BUFFER"],["name","faceArray"],["name","hint"]]]],["stat",["call",["dot",["name","_gl"],"bindBuffer"],[["dot",["name","_gl"],"ELEMENT_ARRAY_BUFFER"],["dot",["name","geometryGroup"],"__webglLineBuffer"]]]],["stat",["call",["dot",["name","_gl"],"bufferData"],[["dot",["name","_gl"],"ELEMENT_ARRAY_BUFFER"],["name","lineArray"],["name","hint"]]]]]],null],["if",["name","customAttributes"],["block",[["for",["seq",["assign",true,["name","i"],["num",0]],["assign",true,["name","il"],["dot",["name","customAttributes"],"length"]]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","customAttribute"],["sub",["name","customAttributes"],["name","i"]]]],["if",["unary-prefix","!",["dot",["dot",["name","customAttribute"],"__original"],"needsUpdate"]],["continue",null],null],["stat",["assign",true,["name","offset_custom"],["num",0]]],["stat",["assign",true,["name","offset_customSrc"],["num",0]]],["if",["binary","===",["dot",["name","customAttribute"],"size"],["num",1]],["block",[["if",["binary","||",["binary","===",["dot",["name","customAttribute"],"boundTo"],["name","undefined"]],["binary","===",["dot",["name","customAttribute"],"boundTo"],["string","vertices"]]],["block",[["for",["seq",["assign",true,["name","f"],["num",0]],["assign",true,["name","fl"],["dot",["name","chunk_faces3"],"length"]]],["binary","<",["name","f"],["name","fl"]],["unary-postfix","++",["name","f"]],["block",[["stat",["assign",true,["name","face"],["sub",["name","obj_faces"],["sub",["name","chunk_faces3"],["name","f"]]]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["name","offset_custom"]],["sub",["dot",["name","customAttribute"],"value"],["dot",["name","face"],"a"]]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",1]]],["sub",["dot",["name","customAttribute"],"value"],["dot",["name","face"],"b"]]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",2]]],["sub",["dot",["name","customAttribute"],"value"],["dot",["name","face"],"c"]]]],["stat",["assign","+",["name","offset_custom"],["num",3]]]]]],["for",["seq",["assign",true,["name","f"],["num",0]],["assign",true,["name","fl"],["dot",["name","chunk_faces4"],"length"]]],["binary","<",["name","f"],["name","fl"]],["unary-postfix","++",["name","f"]],["block",[["stat",["assign",true,["name","face"],["sub",["name","obj_faces"],["sub",["name","chunk_faces4"],["name","f"]]]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["name","offset_custom"]],["sub",["dot",["name","customAttribute"],"value"],["dot",["name","face"],"a"]]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",1]]],["sub",["dot",["name","customAttribute"],"value"],["dot",["name","face"],"b"]]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",2]]],["sub",["dot",["name","customAttribute"],"value"],["dot",["name","face"],"c"]]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",3]]],["sub",["dot",["name","customAttribute"],"value"],["dot",["name","face"],"d"]]]],["stat",["assign","+",["name","offset_custom"],["num",4]]]]]]]],["if",["binary","===",["dot",["name","customAttribute"],"boundTo"],["string","faces"]],["block",[["for",["seq",["assign",true,["name","f"],["num",0]],["assign",true,["name","fl"],["dot",["name","chunk_faces3"],"length"]]],["binary","<",["name","f"],["name","fl"]],["unary-postfix","++",["name","f"]],["block",[["stat",["assign",true,["name","value"],["sub",["dot",["name","customAttribute"],"value"],["sub",["name","chunk_faces3"],["name","f"]]]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["name","offset_custom"]],["name","value"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",1]]],["name","value"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",2]]],["name","value"]]],["stat",["assign","+",["name","offset_custom"],["num",3]]]]]],["for",["seq",["assign",true,["name","f"],["num",0]],["assign",true,["name","fl"],["dot",["name","chunk_faces4"],"length"]]],["binary","<",["name","f"],["name","fl"]],["unary-postfix","++",["name","f"]],["block",[["stat",["assign",true,["name","value"],["sub",["dot",["name","customAttribute"],"value"],["sub",["name","chunk_faces4"],["name","f"]]]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["name","offset_custom"]],["name","value"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",1]]],["name","value"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",2]]],["name","value"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",3]]],["name","value"]]],["stat",["assign","+",["name","offset_custom"],["num",4]]]]]]]],null]]]],["if",["binary","===",["dot",["name","customAttribute"],"size"],["num",2]],["block",[["if",["binary","||",["binary","===",["dot",["name","customAttribute"],"boundTo"],["name","undefined"]],["binary","===",["dot",["name","customAttribute"],"boundTo"],["string","vertices"]]],["block",[["for",["seq",["assign",true,["name","f"],["num",0]],["assign",true,["name","fl"],["dot",["name","chunk_faces3"],"length"]]],["binary","<",["name","f"],["name","fl"]],["unary-postfix","++",["name","f"]],["block",[["stat",["assign",true,["name","face"],["sub",["name","obj_faces"],["sub",["name","chunk_faces3"],["name","f"]]]]],["stat",["assign",true,["name","v1"],["sub",["dot",["name","customAttribute"],"value"],["dot",["name","face"],"a"]]]],["stat",["assign",true,["name","v2"],["sub",["dot",["name","customAttribute"],"value"],["dot",["name","face"],"b"]]]],["stat",["assign",true,["name","v3"],["sub",["dot",["name","customAttribute"],"value"],["dot",["name","face"],"c"]]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["name","offset_custom"]],["dot",["name","v1"],"x"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",1]]],["dot",["name","v1"],"y"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",2]]],["dot",["name","v2"],"x"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",3]]],["dot",["name","v2"],"y"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",4]]],["dot",["name","v3"],"x"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",5]]],["dot",["name","v3"],"y"]]],["stat",["assign","+",["name","offset_custom"],["num",6]]]]]],["for",["seq",["assign",true,["name","f"],["num",0]],["assign",true,["name","fl"],["dot",["name","chunk_faces4"],"length"]]],["binary","<",["name","f"],["name","fl"]],["unary-postfix","++",["name","f"]],["block",[["stat",["assign",true,["name","face"],["sub",["name","obj_faces"],["sub",["name","chunk_faces4"],["name","f"]]]]],["stat",["assign",true,["name","v1"],["sub",["dot",["name","customAttribute"],"value"],["dot",["name","face"],"a"]]]],["stat",["assign",true,["name","v2"],["sub",["dot",["name","customAttribute"],"value"],["dot",["name","face"],"b"]]]],["stat",["assign",true,["name","v3"],["sub",["dot",["name","customAttribute"],"value"],["dot",["name","face"],"c"]]]],["stat",["assign",true,["name","v4"],["sub",["dot",["name","customAttribute"],"value"],["dot",["name","face"],"d"]]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["name","offset_custom"]],["dot",["name","v1"],"x"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",1]]],["dot",["name","v1"],"y"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",2]]],["dot",["name","v2"],"x"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",3]]],["dot",["name","v2"],"y"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",4]]],["dot",["name","v3"],"x"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",5]]],["dot",["name","v3"],"y"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",6]]],["dot",["name","v4"],"x"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",7]]],["dot",["name","v4"],"y"]]],["stat",["assign","+",["name","offset_custom"],["num",8]]]]]]]],["if",["binary","===",["dot",["name","customAttribute"],"boundTo"],["string","faces"]],["block",[["for",["seq",["assign",true,["name","f"],["num",0]],["assign",true,["name","fl"],["dot",["name","chunk_faces3"],"length"]]],["binary","<",["name","f"],["name","fl"]],["unary-postfix","++",["name","f"]],["block",[["stat",["assign",true,["name","value"],["sub",["dot",["name","customAttribute"],"value"],["sub",["name","chunk_faces3"],["name","f"]]]]],["stat",["assign",true,["name","v1"],["name","value"]]],["stat",["assign",true,["name","v2"],["name","value"]]],["stat",["assign",true,["name","v3"],["name","value"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["name","offset_custom"]],["dot",["name","v1"],"x"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",1]]],["dot",["name","v1"],"y"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",2]]],["dot",["name","v2"],"x"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",3]]],["dot",["name","v2"],"y"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",4]]],["dot",["name","v3"],"x"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",5]]],["dot",["name","v3"],"y"]]],["stat",["assign","+",["name","offset_custom"],["num",6]]]]]],["for",["seq",["assign",true,["name","f"],["num",0]],["assign",true,["name","fl"],["dot",["name","chunk_faces4"],"length"]]],["binary","<",["name","f"],["name","fl"]],["unary-postfix","++",["name","f"]],["block",[["stat",["assign",true,["name","value"],["sub",["dot",["name","customAttribute"],"value"],["sub",["name","chunk_faces4"],["name","f"]]]]],["stat",["assign",true,["name","v1"],["name","value"]]],["stat",["assign",true,["name","v2"],["name","value"]]],["stat",["assign",true,["name","v3"],["name","value"]]],["stat",["assign",true,["name","v4"],["name","value"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["name","offset_custom"]],["dot",["name","v1"],"x"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",1]]],["dot",["name","v1"],"y"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",2]]],["dot",["name","v2"],"x"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",3]]],["dot",["name","v2"],"y"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",4]]],["dot",["name","v3"],"x"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",5]]],["dot",["name","v3"],"y"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",6]]],["dot",["name","v4"],"x"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",7]]],["dot",["name","v4"],"y"]]],["stat",["assign","+",["name","offset_custom"],["num",8]]]]]]]],null]]]],["if",["binary","===",["dot",["name","customAttribute"],"size"],["num",3]],["block",[["var",[["pp"]]],["if",["binary","===",["dot",["name","customAttribute"],"type"],["string","c"]],["block",[["stat",["assign",true,["name","pp"],["array",[["string","r"],["string","g"],["string","b"]]]]]]],["block",[["stat",["assign",true,["name","pp"],["array",[["string","x"],["string","y"],["string","z"]]]]]]]],["if",["binary","||",["binary","===",["dot",["name","customAttribute"],"boundTo"],["name","undefined"]],["binary","===",["dot",["name","customAttribute"],"boundTo"],["string","vertices"]]],["block",[["for",["seq",["assign",true,["name","f"],["num",0]],["assign",true,["name","fl"],["dot",["name","chunk_faces3"],"length"]]],["binary","<",["name","f"],["name","fl"]],["unary-postfix","++",["name","f"]],["block",[["stat",["assign",true,["name","face"],["sub",["name","obj_faces"],["sub",["name","chunk_faces3"],["name","f"]]]]],["stat",["assign",true,["name","v1"],["sub",["dot",["name","customAttribute"],"value"],["dot",["name","face"],"a"]]]],["stat",["assign",true,["name","v2"],["sub",["dot",["name","customAttribute"],"value"],["dot",["name","face"],"b"]]]],["stat",["assign",true,["name","v3"],["sub",["dot",["name","customAttribute"],"value"],["dot",["name","face"],"c"]]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["name","offset_custom"]],["sub",["name","v1"],["sub",["name","pp"],["num",0]]]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",1]]],["sub",["name","v1"],["sub",["name","pp"],["num",1]]]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",2]]],["sub",["name","v1"],["sub",["name","pp"],["num",2]]]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",3]]],["sub",["name","v2"],["sub",["name","pp"],["num",0]]]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",4]]],["sub",["name","v2"],["sub",["name","pp"],["num",1]]]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",5]]],["sub",["name","v2"],["sub",["name","pp"],["num",2]]]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",6]]],["sub",["name","v3"],["sub",["name","pp"],["num",0]]]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",7]]],["sub",["name","v3"],["sub",["name","pp"],["num",1]]]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",8]]],["sub",["name","v3"],["sub",["name","pp"],["num",2]]]]],["stat",["assign","+",["name","offset_custom"],["num",9]]]]]],["for",["seq",["assign",true,["name","f"],["num",0]],["assign",true,["name","fl"],["dot",["name","chunk_faces4"],"length"]]],["binary","<",["name","f"],["name","fl"]],["unary-postfix","++",["name","f"]],["block",[["stat",["assign",true,["name","face"],["sub",["name","obj_faces"],["sub",["name","chunk_faces4"],["name","f"]]]]],["stat",["assign",true,["name","v1"],["sub",["dot",["name","customAttribute"],"value"],["dot",["name","face"],"a"]]]],["stat",["assign",true,["name","v2"],["sub",["dot",["name","customAttribute"],"value"],["dot",["name","face"],"b"]]]],["stat",["assign",true,["name","v3"],["sub",["dot",["name","customAttribute"],"value"],["dot",["name","face"],"c"]]]],["stat",["assign",true,["name","v4"],["sub",["dot",["name","customAttribute"],"value"],["dot",["name","face"],"d"]]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["name","offset_custom"]],["sub",["name","v1"],["sub",["name","pp"],["num",0]]]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",1]]],["sub",["name","v1"],["sub",["name","pp"],["num",1]]]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",2]]],["sub",["name","v1"],["sub",["name","pp"],["num",2]]]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",3]]],["sub",["name","v2"],["sub",["name","pp"],["num",0]]]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",4]]],["sub",["name","v2"],["sub",["name","pp"],["num",1]]]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",5]]],["sub",["name","v2"],["sub",["name","pp"],["num",2]]]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",6]]],["sub",["name","v3"],["sub",["name","pp"],["num",0]]]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",7]]],["sub",["name","v3"],["sub",["name","pp"],["num",1]]]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",8]]],["sub",["name","v3"],["sub",["name","pp"],["num",2]]]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",9]]],["sub",["name","v4"],["sub",["name","pp"],["num",0]]]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",10]]],["sub",["name","v4"],["sub",["name","pp"],["num",1]]]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",11]]],["sub",["name","v4"],["sub",["name","pp"],["num",2]]]]],["stat",["assign","+",["name","offset_custom"],["num",12]]]]]]]],["if",["binary","===",["dot",["name","customAttribute"],"boundTo"],["string","faces"]],["block",[["for",["seq",["assign",true,["name","f"],["num",0]],["assign",true,["name","fl"],["dot",["name","chunk_faces3"],"length"]]],["binary","<",["name","f"],["name","fl"]],["unary-postfix","++",["name","f"]],["block",[["stat",["assign",true,["name","value"],["sub",["dot",["name","customAttribute"],"value"],["sub",["name","chunk_faces3"],["name","f"]]]]],["stat",["assign",true,["name","v1"],["name","value"]]],["stat",["assign",true,["name","v2"],["name","value"]]],["stat",["assign",true,["name","v3"],["name","value"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["name","offset_custom"]],["sub",["name","v1"],["sub",["name","pp"],["num",0]]]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",1]]],["sub",["name","v1"],["sub",["name","pp"],["num",1]]]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",2]]],["sub",["name","v1"],["sub",["name","pp"],["num",2]]]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",3]]],["sub",["name","v2"],["sub",["name","pp"],["num",0]]]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",4]]],["sub",["name","v2"],["sub",["name","pp"],["num",1]]]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",5]]],["sub",["name","v2"],["sub",["name","pp"],["num",2]]]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",6]]],["sub",["name","v3"],["sub",["name","pp"],["num",0]]]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",7]]],["sub",["name","v3"],["sub",["name","pp"],["num",1]]]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",8]]],["sub",["name","v3"],["sub",["name","pp"],["num",2]]]]],["stat",["assign","+",["name","offset_custom"],["num",9]]]]]],["for",["seq",["assign",true,["name","f"],["num",0]],["assign",true,["name","fl"],["dot",["name","chunk_faces4"],"length"]]],["binary","<",["name","f"],["name","fl"]],["unary-postfix","++",["name","f"]],["block",[["stat",["assign",true,["name","value"],["sub",["dot",["name","customAttribute"],"value"],["sub",["name","chunk_faces4"],["name","f"]]]]],["stat",["assign",true,["name","v1"],["name","value"]]],["stat",["assign",true,["name","v2"],["name","value"]]],["stat",["assign",true,["name","v3"],["name","value"]]],["stat",["assign",true,["name","v4"],["name","value"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["name","offset_custom"]],["sub",["name","v1"],["sub",["name","pp"],["num",0]]]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",1]]],["sub",["name","v1"],["sub",["name","pp"],["num",1]]]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",2]]],["sub",["name","v1"],["sub",["name","pp"],["num",2]]]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",3]]],["sub",["name","v2"],["sub",["name","pp"],["num",0]]]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",4]]],["sub",["name","v2"],["sub",["name","pp"],["num",1]]]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",5]]],["sub",["name","v2"],["sub",["name","pp"],["num",2]]]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",6]]],["sub",["name","v3"],["sub",["name","pp"],["num",0]]]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",7]]],["sub",["name","v3"],["sub",["name","pp"],["num",1]]]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",8]]],["sub",["name","v3"],["sub",["name","pp"],["num",2]]]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",9]]],["sub",["name","v4"],["sub",["name","pp"],["num",0]]]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",10]]],["sub",["name","v4"],["sub",["name","pp"],["num",1]]]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",11]]],["sub",["name","v4"],["sub",["name","pp"],["num",2]]]]],["stat",["assign","+",["name","offset_custom"],["num",12]]]]]]]],null]]]],["if",["binary","===",["dot",["name","customAttribute"],"size"],["num",4]],["block",[["if",["binary","||",["binary","===",["dot",["name","customAttribute"],"boundTo"],["name","undefined"]],["binary","===",["dot",["name","customAttribute"],"boundTo"],["string","vertices"]]],["block",[["for",["seq",["assign",true,["name","f"],["num",0]],["assign",true,["name","fl"],["dot",["name","chunk_faces3"],"length"]]],["binary","<",["name","f"],["name","fl"]],["unary-postfix","++",["name","f"]],["block",[["stat",["assign",true,["name","face"],["sub",["name","obj_faces"],["sub",["name","chunk_faces3"],["name","f"]]]]],["stat",["assign",true,["name","v1"],["sub",["dot",["name","customAttribute"],"value"],["dot",["name","face"],"a"]]]],["stat",["assign",true,["name","v2"],["sub",["dot",["name","customAttribute"],"value"],["dot",["name","face"],"b"]]]],["stat",["assign",true,["name","v3"],["sub",["dot",["name","customAttribute"],"value"],["dot",["name","face"],"c"]]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["name","offset_custom"]],["dot",["name","v1"],"x"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",1]]],["dot",["name","v1"],"y"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",2]]],["dot",["name","v1"],"z"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",3]]],["dot",["name","v1"],"w"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",4]]],["dot",["name","v2"],"x"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",5]]],["dot",["name","v2"],"y"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",6]]],["dot",["name","v2"],"z"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",7]]],["dot",["name","v2"],"w"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",8]]],["dot",["name","v3"],"x"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",9]]],["dot",["name","v3"],"y"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",10]]],["dot",["name","v3"],"z"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",11]]],["dot",["name","v3"],"w"]]],["stat",["assign","+",["name","offset_custom"],["num",12]]]]]],["for",["seq",["assign",true,["name","f"],["num",0]],["assign",true,["name","fl"],["dot",["name","chunk_faces4"],"length"]]],["binary","<",["name","f"],["name","fl"]],["unary-postfix","++",["name","f"]],["block",[["stat",["assign",true,["name","face"],["sub",["name","obj_faces"],["sub",["name","chunk_faces4"],["name","f"]]]]],["stat",["assign",true,["name","v1"],["sub",["dot",["name","customAttribute"],"value"],["dot",["name","face"],"a"]]]],["stat",["assign",true,["name","v2"],["sub",["dot",["name","customAttribute"],"value"],["dot",["name","face"],"b"]]]],["stat",["assign",true,["name","v3"],["sub",["dot",["name","customAttribute"],"value"],["dot",["name","face"],"c"]]]],["stat",["assign",true,["name","v4"],["sub",["dot",["name","customAttribute"],"value"],["dot",["name","face"],"d"]]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["name","offset_custom"]],["dot",["name","v1"],"x"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",1]]],["dot",["name","v1"],"y"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",2]]],["dot",["name","v1"],"z"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",3]]],["dot",["name","v1"],"w"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",4]]],["dot",["name","v2"],"x"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",5]]],["dot",["name","v2"],"y"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",6]]],["dot",["name","v2"],"z"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",7]]],["dot",["name","v2"],"w"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",8]]],["dot",["name","v3"],"x"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",9]]],["dot",["name","v3"],"y"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",10]]],["dot",["name","v3"],"z"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",11]]],["dot",["name","v3"],"w"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",12]]],["dot",["name","v4"],"x"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",13]]],["dot",["name","v4"],"y"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",14]]],["dot",["name","v4"],"z"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",15]]],["dot",["name","v4"],"w"]]],["stat",["assign","+",["name","offset_custom"],["num",16]]]]]]]],["if",["binary","===",["dot",["name","customAttribute"],"boundTo"],["string","faces"]],["block",[["for",["seq",["assign",true,["name","f"],["num",0]],["assign",true,["name","fl"],["dot",["name","chunk_faces3"],"length"]]],["binary","<",["name","f"],["name","fl"]],["unary-postfix","++",["name","f"]],["block",[["stat",["assign",true,["name","value"],["sub",["dot",["name","customAttribute"],"value"],["sub",["name","chunk_faces3"],["name","f"]]]]],["stat",["assign",true,["name","v1"],["name","value"]]],["stat",["assign",true,["name","v2"],["name","value"]]],["stat",["assign",true,["name","v3"],["name","value"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["name","offset_custom"]],["dot",["name","v1"],"x"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",1]]],["dot",["name","v1"],"y"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",2]]],["dot",["name","v1"],"z"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",3]]],["dot",["name","v1"],"w"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",4]]],["dot",["name","v2"],"x"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",5]]],["dot",["name","v2"],"y"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",6]]],["dot",["name","v2"],"z"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",7]]],["dot",["name","v2"],"w"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",8]]],["dot",["name","v3"],"x"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",9]]],["dot",["name","v3"],"y"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",10]]],["dot",["name","v3"],"z"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",11]]],["dot",["name","v3"],"w"]]],["stat",["assign","+",["name","offset_custom"],["num",12]]]]]],["for",["seq",["assign",true,["name","f"],["num",0]],["assign",true,["name","fl"],["dot",["name","chunk_faces4"],"length"]]],["binary","<",["name","f"],["name","fl"]],["unary-postfix","++",["name","f"]],["block",[["stat",["assign",true,["name","value"],["sub",["dot",["name","customAttribute"],"value"],["sub",["name","chunk_faces4"],["name","f"]]]]],["stat",["assign",true,["name","v1"],["name","value"]]],["stat",["assign",true,["name","v2"],["name","value"]]],["stat",["assign",true,["name","v3"],["name","value"]]],["stat",["assign",true,["name","v4"],["name","value"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["name","offset_custom"]],["dot",["name","v1"],"x"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",1]]],["dot",["name","v1"],"y"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",2]]],["dot",["name","v1"],"z"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",3]]],["dot",["name","v1"],"w"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",4]]],["dot",["name","v2"],"x"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",5]]],["dot",["name","v2"],"y"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",6]]],["dot",["name","v2"],"z"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",7]]],["dot",["name","v2"],"w"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",8]]],["dot",["name","v3"],"x"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",9]]],["dot",["name","v3"],"y"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",10]]],["dot",["name","v3"],"z"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",11]]],["dot",["name","v3"],"w"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",12]]],["dot",["name","v4"],"x"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",13]]],["dot",["name","v4"],"y"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",14]]],["dot",["name","v4"],"z"]]],["stat",["assign",true,["sub",["dot",["name","customAttribute"],"array"],["binary","+",["name","offset_custom"],["num",15]]],["dot",["name","v4"],"w"]]],["stat",["assign","+",["name","offset_custom"],["num",16]]]]]]]],null]]]],null]]]],["stat",["call",["dot",["name","_gl"],"bindBuffer"],[["dot",["name","_gl"],"ARRAY_BUFFER"],["dot",["name","customAttribute"],"buffer"]]]],["stat",["call",["dot",["name","_gl"],"bufferData"],[["dot",["name","_gl"],"ARRAY_BUFFER"],["dot",["name","customAttribute"],"array"],["name","hint"]]]]]]]]],null],["if",["name","dispose"],["block",[["stat",["unary-prefix","delete",["dot",["name","geometryGroup"],"__inittedArrays"]]],["stat",["unary-prefix","delete",["dot",["name","geometryGroup"],"__colorArray"]]],["stat",["unary-prefix","delete",["dot",["name","geometryGroup"],"__normalArray"]]],["stat",["unary-prefix","delete",["dot",["name","geometryGroup"],"__tangentArray"]]],["stat",["unary-prefix","delete",["dot",["name","geometryGroup"],"__uvArray"]]],["stat",["unary-prefix","delete",["dot",["name","geometryGroup"],"__uv2Array"]]],["stat",["unary-prefix","delete",["dot",["name","geometryGroup"],"__faceArray"]]],["stat",["unary-prefix","delete",["dot",["name","geometryGroup"],"__vertexArray"]]],["stat",["unary-prefix","delete",["dot",["name","geometryGroup"],"__lineArray"]]],["stat",["unary-prefix","delete",["dot",["name","geometryGroup"],"__skinVertexAArray"]]],["stat",["unary-prefix","delete",["dot",["name","geometryGroup"],"__skinVertexBArray"]]],["stat",["unary-prefix","delete",["dot",["name","geometryGroup"],"__skinIndexArray"]]],["stat",["unary-prefix","delete",["dot",["name","geometryGroup"],"__skinWeightArray"]]]]],null]]],["block"],["stat",["assign",true,["dot",["name","this"],"renderBufferImmediate"],["function",null,["object","program","shading"],[["if",["unary-prefix","!",["dot",["name","object"],"__webglVertexBuffer"]],["stat",["assign",true,["dot",["name","object"],"__webglVertexBuffer"],["call",["dot",["name","_gl"],"createBuffer"],[]]]],null],["if",["unary-prefix","!",["dot",["name","object"],"__webglNormalBuffer"]],["stat",["assign",true,["dot",["name","object"],"__webglNormalBuffer"],["call",["dot",["name","_gl"],"createBuffer"],[]]]],null],["if",["dot",["name","object"],"hasPos"],["block",[["stat",["call",["dot",["name","_gl"],"bindBuffer"],[["dot",["name","_gl"],"ARRAY_BUFFER"],["dot",["name","object"],"__webglVertexBuffer"]]]],["stat",["call",["dot",["name","_gl"],"bufferData"],[["dot",["name","_gl"],"ARRAY_BUFFER"],["dot",["name","object"],"positionArray"],["dot",["name","_gl"],"DYNAMIC_DRAW"]]]],["stat",["call",["dot",["name","_gl"],"enableVertexAttribArray"],[["dot",["dot",["name","program"],"attributes"],"position"]]]],["stat",["call",["dot",["name","_gl"],"vertexAttribPointer"],[["dot",["dot",["name","program"],"attributes"],"position"],["num",3],["dot",["name","_gl"],"FLOAT"],["name","false"],["num",0],["num",0]]]]]],null],["if",["dot",["name","object"],"hasNormal"],["block",[["stat",["call",["dot",["name","_gl"],"bindBuffer"],[["dot",["name","_gl"],"ARRAY_BUFFER"],["dot",["name","object"],"__webglNormalBuffer"]]]],["if",["binary","===",["name","shading"],["dot",["name","THREE"],"FlatShading"]],["block",[["var",[["nx"],["ny"],["nz"],["nax"],["nbx"],["ncx"],["nay"],["nby"],["ncy"],["naz"],["nbz"],["ncz"],["normalArray"],["i"],["il",["binary","*",["dot",["name","object"],"count"],["num",3]]]]],["for",["assign",true,["name","i"],["num",0]],["binary","<",["name","i"],["name","il"]],["assign","+",["name","i"],["num",9]],["block",[["stat",["assign",true,["name","normalArray"],["dot",["name","object"],"normalArray"]]],["stat",["assign",true,["name","nax"],["sub",["name","normalArray"],["name","i"]]]],["stat",["assign",true,["name","nay"],["sub",["name","normalArray"],["binary","+",["name","i"],["num",1]]]]],["stat",["assign",true,["name","naz"],["sub",["name","normalArray"],["binary","+",["name","i"],["num",2]]]]],["stat",["assign",true,["name","nbx"],["sub",["name","normalArray"],["binary","+",["name","i"],["num",3]]]]],["stat",["assign",true,["name","nby"],["sub",["name","normalArray"],["binary","+",["name","i"],["num",4]]]]],["stat",["assign",true,["name","nbz"],["sub",["name","normalArray"],["binary","+",["name","i"],["num",5]]]]],["stat",["assign",true,["name","ncx"],["sub",["name","normalArray"],["binary","+",["name","i"],["num",6]]]]],["stat",["assign",true,["name","ncy"],["sub",["name","normalArray"],["binary","+",["name","i"],["num",7]]]]],["stat",["assign",true,["name","ncz"],["sub",["name","normalArray"],["binary","+",["name","i"],["num",8]]]]],["stat",["assign",true,["name","nx"],["binary","/",["binary","+",["binary","+",["name","nax"],["name","nbx"]],["name","ncx"]],["num",3]]]],["stat",["assign",true,["name","ny"],["binary","/",["binary","+",["binary","+",["name","nay"],["name","nby"]],["name","ncy"]],["num",3]]]],["stat",["assign",true,["name","nz"],["binary","/",["binary","+",["binary","+",["name","naz"],["name","nbz"]],["name","ncz"]],["num",3]]]],["stat",["assign",true,["sub",["name","normalArray"],["name","i"]],["name","nx"]]],["stat",["assign",true,["sub",["name","normalArray"],["binary","+",["name","i"],["num",1]]],["name","ny"]]],["stat",["assign",true,["sub",["name","normalArray"],["binary","+",["name","i"],["num",2]]],["name","nz"]]],["stat",["assign",true,["sub",["name","normalArray"],["binary","+",["name","i"],["num",3]]],["name","nx"]]],["stat",["assign",true,["sub",["name","normalArray"],["binary","+",["name","i"],["num",4]]],["name","ny"]]],["stat",["assign",true,["sub",["name","normalArray"],["binary","+",["name","i"],["num",5]]],["name","nz"]]],["stat",["assign",true,["sub",["name","normalArray"],["binary","+",["name","i"],["num",6]]],["name","nx"]]],["stat",["assign",true,["sub",["name","normalArray"],["binary","+",["name","i"],["num",7]]],["name","ny"]]],["stat",["assign",true,["sub",["name","normalArray"],["binary","+",["name","i"],["num",8]]],["name","nz"]]]]]]]],null],["stat",["call",["dot",["name","_gl"],"bufferData"],[["dot",["name","_gl"],"ARRAY_BUFFER"],["dot",["name","object"],"normalArray"],["dot",["name","_gl"],"DYNAMIC_DRAW"]]]],["stat",["call",["dot",["name","_gl"],"enableVertexAttribArray"],[["dot",["dot",["name","program"],"attributes"],"normal"]]]],["stat",["call",["dot",["name","_gl"],"vertexAttribPointer"],[["dot",["dot",["name","program"],"attributes"],"normal"],["num",3],["dot",["name","_gl"],"FLOAT"],["name","false"],["num",0],["num",0]]]]]],null],["stat",["call",["dot",["name","_gl"],"drawArrays"],[["dot",["name","_gl"],"TRIANGLES"],["num",0],["dot",["name","object"],"count"]]]],["stat",["assign",true,["dot",["name","object"],"count"],["num",0]]]]]]],["stat",["assign",true,["dot",["name","this"],"renderBufferDirect"],["function",null,["camera","lights","fog","material","geometryGroup","object"],[["if",["binary","===",["dot",["name","material"],"visible"],["name","false"]],["return",null],null],["var",[["program"],["attributes"],["linewidth"],["primitives"],["a"],["attribute"]]],["stat",["assign",true,["name","program"],["call",["name","setProgram"],[["name","camera"],["name","lights"],["name","fog"],["name","material"],["name","object"]]]]],["stat",["assign",true,["name","attributes"],["dot",["name","program"],"attributes"]]],["var",[["updateBuffers",["name","false"]],["wireframeBit",["conditional",["dot",["name","material"],"wireframe"],["num",1],["num",0]]],["geometryGroupHash",["binary","+",["binary","+",["binary","*",["dot",["name","geometryGroup"],"id"],["num",16777215]],["binary","*",["dot",["name","program"],"id"],["num",2]]],["name","wireframeBit"]]]]],["if",["binary","!==",["name","geometryGroupHash"],["name","_currentGeometryGroupHash"]],["block",[["stat",["assign",true,["name","_currentGeometryGroupHash"],["name","geometryGroupHash"]]],["stat",["assign",true,["name","updateBuffers"],["name","true"]]]]],null],["if",["binary","instanceof",["name","object"],["dot",["name","THREE"],"Mesh"]],["block",[["var",[["offsets",["dot",["name","geometryGroup"],"offsets"]]]],["for",["var",[["i",["num",0]],["il",["dot",["name","offsets"],"length"]]]],["binary","<",["name","i"],["name","il"]],["unary-prefix","++",["name","i"]],["block",[["if",["name","updateBuffers"],["block",[["stat",["call",["dot",["name","_gl"],"bindBuffer"],[["dot",["name","_gl"],"ARRAY_BUFFER"],["dot",["name","geometryGroup"],"vertexPositionBuffer"]]]],["stat",["call",["dot",["name","_gl"],"vertexAttribPointer"],[["dot",["name","attributes"],"position"],["dot",["dot",["name","geometryGroup"],"vertexPositionBuffer"],"itemSize"],["dot",["name","_gl"],"FLOAT"],["name","false"],["num",0],["binary","*",["binary","*",["dot",["sub",["name","offsets"],["name","i"]],"index"],["num",4]],["num",3]]]]],["if",["binary","&&",["binary",">=",["dot",["name","attributes"],"normal"],["num",0]],["dot",["name","geometryGroup"],"vertexNormalBuffer"]],["block",[["stat",["call",["dot",["name","_gl"],"bindBuffer"],[["dot",["name","_gl"],"ARRAY_BUFFER"],["dot",["name","geometryGroup"],"vertexNormalBuffer"]]]],["stat",["call",["dot",["name","_gl"],"vertexAttribPointer"],[["dot",["name","attributes"],"normal"],["dot",["dot",["name","geometryGroup"],"vertexNormalBuffer"],"itemSize"],["dot",["name","_gl"],"FLOAT"],["name","false"],["num",0],["binary","*",["binary","*",["dot",["sub",["name","offsets"],["name","i"]],"index"],["num",4]],["num",3]]]]]]],null],["if",["binary","&&",["binary",">=",["dot",["name","attributes"],"uv"],["num",0]],["dot",["name","geometryGroup"],"vertexUvBuffer"]],["block",[["if",["dot",["name","geometryGroup"],"vertexUvBuffer"],["block",[["stat",["call",["dot",["name","_gl"],"bindBuffer"],[["dot",["name","_gl"],"ARRAY_BUFFER"],["dot",["name","geometryGroup"],"vertexUvBuffer"]]]],["stat",["call",["dot",["name","_gl"],"vertexAttribPointer"],[["dot",["name","attributes"],"uv"],["dot",["dot",["name","geometryGroup"],"vertexUvBuffer"],"itemSize"],["dot",["name","_gl"],"FLOAT"],["name","false"],["num",0],["binary","*",["binary","*",["dot",["sub",["name","offsets"],["name","i"]],"index"],["num",4]],["num",2]]]]],["stat",["call",["dot",["name","_gl"],"enableVertexAttribArray"],[["dot",["name","attributes"],"uv"]]]]]],["block",[["stat",["call",["dot",["name","_gl"],"disableVertexAttribArray"],[["dot",["name","attributes"],"uv"]]]]]]]]],null],["if",["binary","&&",["binary",">=",["dot",["name","attributes"],"color"],["num",0]],["dot",["name","geometryGroup"],"vertexColorBuffer"]],["block",[["stat",["call",["dot",["name","_gl"],"bindBuffer"],[["dot",["name","_gl"],"ARRAY_BUFFER"],["dot",["name","geometryGroup"],"vertexColorBuffer"]]]],["stat",["call",["dot",["name","_gl"],"vertexAttribPointer"],[["dot",["name","attributes"],"color"],["dot",["dot",["name","geometryGroup"],"vertexColorBuffer"],"itemSize"],["dot",["name","_gl"],"FLOAT"],["name","false"],["num",0],["binary","*",["binary","*",["dot",["sub",["name","offsets"],["name","i"]],"index"],["num",4]],["num",4]]]]]]],null],["stat",["call",["dot",["name","_gl"],"bindBuffer"],[["dot",["name","_gl"],"ELEMENT_ARRAY_BUFFER"],["dot",["name","geometryGroup"],"vertexIndexBuffer"]]]]]],null],["stat",["call",["dot",["name","_gl"],"drawElements"],[["dot",["name","_gl"],"TRIANGLES"],["dot",["sub",["name","offsets"],["name","i"]],"count"],["dot",["name","_gl"],"UNSIGNED_SHORT"],["binary","*",["dot",["sub",["name","offsets"],["name","i"]],"start"],["num",2]]]]],["stat",["unary-postfix","++",["dot",["dot",["dot",["name","_this"],"info"],"render"],"calls"]]],["stat",["assign","+",["dot",["dot",["dot",["name","_this"],"info"],"render"],"vertices"],["dot",["sub",["name","offsets"],["name","i"]],"count"]]],["stat",["assign","+",["dot",["dot",["dot",["name","_this"],"info"],"render"],"faces"],["binary","/",["dot",["sub",["name","offsets"],["name","i"]],"count"],["num",3]]]]]]]]],null]]]]],["stat",["assign",true,["dot",["name","this"],"renderBuffer"],["function",null,["camera","lights","fog","material","geometryGroup","object"],[["if",["binary","===",["dot",["name","material"],"visible"],["name","false"]],["return",null],null],["var",[["program"],["attributes"],["linewidth"],["primitives"],["a"],["attribute"],["i"],["il"]]],["stat",["assign",true,["name","program"],["call",["name","setProgram"],[["name","camera"],["name","lights"],["name","fog"],["name","material"],["name","object"]]]]],["stat",["assign",true,["name","attributes"],["dot",["name","program"],"attributes"]]],["var",[["updateBuffers",["name","false"]],["wireframeBit",["conditional",["dot",["name","material"],"wireframe"],["num",1],["num",0]]],["geometryGroupHash",["binary","+",["binary","+",["binary","*",["dot",["name","geometryGroup"],"id"],["num",16777215]],["binary","*",["dot",["name","program"],"id"],["num",2]]],["name","wireframeBit"]]]]],["if",["binary","!==",["name","geometryGroupHash"],["name","_currentGeometryGroupHash"]],["block",[["stat",["assign",true,["name","_currentGeometryGroupHash"],["name","geometryGroupHash"]]],["stat",["assign",true,["name","updateBuffers"],["name","true"]]]]],null],["if",["binary","&&",["unary-prefix","!",["dot",["name","material"],"morphTargets"]],["binary",">=",["dot",["name","attributes"],"position"],["num",0]]],["block",[["if",["name","updateBuffers"],["block",[["stat",["call",["dot",["name","_gl"],"bindBuffer"],[["dot",["name","_gl"],"ARRAY_BUFFER"],["dot",["name","geometryGroup"],"__webglVertexBuffer"]]]],["stat",["call",["dot",["name","_gl"],"vertexAttribPointer"],[["dot",["name","attributes"],"position"],["num",3],["dot",["name","_gl"],"FLOAT"],["name","false"],["num",0],["num",0]]]]]],null]]],["block",[["if",["dot",["name","object"],"morphTargetBase"],["block",[["stat",["call",["name","setupMorphTargets"],[["name","material"],["name","geometryGroup"],["name","object"]]]]]],null]]]],["if",["name","updateBuffers"],["block",[["if",["dot",["name","geometryGroup"],"__webglCustomAttributesList"],["block",[["for",["seq",["assign",true,["name","i"],["num",0]],["assign",true,["name","il"],["dot",["dot",["name","geometryGroup"],"__webglCustomAttributesList"],"length"]]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","attribute"],["sub",["dot",["name","geometryGroup"],"__webglCustomAttributesList"],["name","i"]]]],["if",["binary",">=",["sub",["name","attributes"],["dot",["dot",["name","attribute"],"buffer"],"belongsToAttribute"]],["num",0]],["block",[["stat",["call",["dot",["name","_gl"],"bindBuffer"],[["dot",["name","_gl"],"ARRAY_BUFFER"],["dot",["name","attribute"],"buffer"]]]],["stat",["call",["dot",["name","_gl"],"vertexAttribPointer"],[["sub",["name","attributes"],["dot",["dot",["name","attribute"],"buffer"],"belongsToAttribute"]],["dot",["name","attribute"],"size"],["dot",["name","_gl"],"FLOAT"],["name","false"],["num",0],["num",0]]]]]],null]]]]]],null],["if",["binary",">=",["dot",["name","attributes"],"color"],["num",0]],["block",[["stat",["call",["dot",["name","_gl"],"bindBuffer"],[["dot",["name","_gl"],"ARRAY_BUFFER"],["dot",["name","geometryGroup"],"__webglColorBuffer"]]]],["stat",["call",["dot",["name","_gl"],"vertexAttribPointer"],[["dot",["name","attributes"],"color"],["num",3],["dot",["name","_gl"],"FLOAT"],["name","false"],["num",0],["num",0]]]]]],null],["if",["binary",">=",["dot",["name","attributes"],"normal"],["num",0]],["block",[["stat",["call",["dot",["name","_gl"],"bindBuffer"],[["dot",["name","_gl"],"ARRAY_BUFFER"],["dot",["name","geometryGroup"],"__webglNormalBuffer"]]]],["stat",["call",["dot",["name","_gl"],"vertexAttribPointer"],[["dot",["name","attributes"],"normal"],["num",3],["dot",["name","_gl"],"FLOAT"],["name","false"],["num",0],["num",0]]]]]],null],["if",["binary",">=",["dot",["name","attributes"],"tangent"],["num",0]],["block",[["stat",["call",["dot",["name","_gl"],"bindBuffer"],[["dot",["name","_gl"],"ARRAY_BUFFER"],["dot",["name","geometryGroup"],"__webglTangentBuffer"]]]],["stat",["call",["dot",["name","_gl"],"vertexAttribPointer"],[["dot",["name","attributes"],"tangent"],["num",4],["dot",["name","_gl"],"FLOAT"],["name","false"],["num",0],["num",0]]]]]],null],["if",["binary",">=",["dot",["name","attributes"],"uv"],["num",0]],["block",[["if",["dot",["name","geometryGroup"],"__webglUVBuffer"],["block",[["stat",["call",["dot",["name","_gl"],"bindBuffer"],[["dot",["name","_gl"],"ARRAY_BUFFER"],["dot",["name","geometryGroup"],"__webglUVBuffer"]]]],["stat",["call",["dot",["name","_gl"],"vertexAttribPointer"],[["dot",["name","attributes"],"uv"],["num",2],["dot",["name","_gl"],"FLOAT"],["name","false"],["num",0],["num",0]]]],["stat",["call",["dot",["name","_gl"],"enableVertexAttribArray"],[["dot",["name","attributes"],"uv"]]]]]],["block",[["stat",["call",["dot",["name","_gl"],"disableVertexAttribArray"],[["dot",["name","attributes"],"uv"]]]]]]]]],null],["if",["binary",">=",["dot",["name","attributes"],"uv2"],["num",0]],["block",[["if",["dot",["name","geometryGroup"],"__webglUV2Buffer"],["block",[["stat",["call",["dot",["name","_gl"],"bindBuffer"],[["dot",["name","_gl"],"ARRAY_BUFFER"],["dot",["name","geometryGroup"],"__webglUV2Buffer"]]]],["stat",["call",["dot",["name","_gl"],"vertexAttribPointer"],[["dot",["name","attributes"],"uv2"],["num",2],["dot",["name","_gl"],"FLOAT"],["name","false"],["num",0],["num",0]]]],["stat",["call",["dot",["name","_gl"],"enableVertexAttribArray"],[["dot",["name","attributes"],"uv2"]]]]]],["block",[["stat",["call",["dot",["name","_gl"],"disableVertexAttribArray"],[["dot",["name","attributes"],"uv2"]]]]]]]]],null],["if",["binary","&&",["binary","&&",["binary","&&",["binary","&&",["dot",["name","material"],"skinning"],["binary",">=",["dot",["name","attributes"],"skinVertexA"],["num",0]]],["binary",">=",["dot",["name","attributes"],"skinVertexB"],["num",0]]],["binary",">=",["dot",["name","attributes"],"skinIndex"],["num",0]]],["binary",">=",["dot",["name","attributes"],"skinWeight"],["num",0]]],["block",[["stat",["call",["dot",["name","_gl"],"bindBuffer"],[["dot",["name","_gl"],"ARRAY_BUFFER"],["dot",["name","geometryGroup"],"__webglSkinVertexABuffer"]]]],["stat",["call",["dot",["name","_gl"],"vertexAttribPointer"],[["dot",["name","attributes"],"skinVertexA"],["num",4],["dot",["name","_gl"],"FLOAT"],["name","false"],["num",0],["num",0]]]],["stat",["call",["dot",["name","_gl"],"bindBuffer"],[["dot",["name","_gl"],"ARRAY_BUFFER"],["dot",["name","geometryGroup"],"__webglSkinVertexBBuffer"]]]],["stat",["call",["dot",["name","_gl"],"vertexAttribPointer"],[["dot",["name","attributes"],"skinVertexB"],["num",4],["dot",["name","_gl"],"FLOAT"],["name","false"],["num",0],["num",0]]]],["stat",["call",["dot",["name","_gl"],"bindBuffer"],[["dot",["name","_gl"],"ARRAY_BUFFER"],["dot",["name","geometryGroup"],"__webglSkinIndicesBuffer"]]]],["stat",["call",["dot",["name","_gl"],"vertexAttribPointer"],[["dot",["name","attributes"],"skinIndex"],["num",4],["dot",["name","_gl"],"FLOAT"],["name","false"],["num",0],["num",0]]]],["stat",["call",["dot",["name","_gl"],"bindBuffer"],[["dot",["name","_gl"],"ARRAY_BUFFER"],["dot",["name","geometryGroup"],"__webglSkinWeightsBuffer"]]]],["stat",["call",["dot",["name","_gl"],"vertexAttribPointer"],[["dot",["name","attributes"],"skinWeight"],["num",4],["dot",["name","_gl"],"FLOAT"],["name","false"],["num",0],["num",0]]]]]],null]]],null],["if",["binary","instanceof",["name","object"],["dot",["name","THREE"],"Mesh"]],["block",[["if",["dot",["name","material"],"wireframe"],["block",[["stat",["call",["name","setLineWidth"],[["dot",["name","material"],"wireframeLinewidth"]]]],["if",["name","updateBuffers"],["stat",["call",["dot",["name","_gl"],"bindBuffer"],[["dot",["name","_gl"],"ELEMENT_ARRAY_BUFFER"],["dot",["name","geometryGroup"],"__webglLineBuffer"]]]],null],["stat",["call",["dot",["name","_gl"],"drawElements"],[["dot",["name","_gl"],"LINES"],["dot",["name","geometryGroup"],"__webglLineCount"],["dot",["name","_gl"],"UNSIGNED_SHORT"],["num",0]]]]]],["block",[["if",["name","updateBuffers"],["stat",["call",["dot",["name","_gl"],"bindBuffer"],[["dot",["name","_gl"],"ELEMENT_ARRAY_BUFFER"],["dot",["name","geometryGroup"],"__webglFaceBuffer"]]]],null],["stat",["call",["dot",["name","_gl"],"drawElements"],[["dot",["name","_gl"],"TRIANGLES"],["dot",["name","geometryGroup"],"__webglFaceCount"],["dot",["name","_gl"],"UNSIGNED_SHORT"],["num",0]]]]]]],["stat",["unary-postfix","++",["dot",["dot",["dot",["name","_this"],"info"],"render"],"calls"]]],["stat",["assign","+",["dot",["dot",["dot",["name","_this"],"info"],"render"],"vertices"],["dot",["name","geometryGroup"],"__webglFaceCount"]]],["stat",["assign","+",["dot",["dot",["dot",["name","_this"],"info"],"render"],"faces"],["binary","/",["dot",["name","geometryGroup"],"__webglFaceCount"],["num",3]]]]]],["if",["binary","instanceof",["name","object"],["dot",["name","THREE"],"Line"]],["block",[["stat",["assign",true,["name","primitives"],["conditional",["binary","===",["dot",["name","object"],"type"],["dot",["name","THREE"],"LineStrip"]],["dot",["name","_gl"],"LINE_STRIP"],["dot",["name","_gl"],"LINES"]]]],["stat",["call",["name","setLineWidth"],[["dot",["name","material"],"linewidth"]]]],["stat",["call",["dot",["name","_gl"],"drawArrays"],[["name","primitives"],["num",0],["dot",["name","geometryGroup"],"__webglLineCount"]]]],["stat",["unary-postfix","++",["dot",["dot",["dot",["name","_this"],"info"],"render"],"calls"]]]]],["if",["binary","instanceof",["name","object"],["dot",["name","THREE"],"ParticleSystem"]],["block",[["stat",["call",["dot",["name","_gl"],"drawArrays"],[["dot",["name","_gl"],"POINTS"],["num",0],["dot",["name","geometryGroup"],"__webglParticleCount"]]]],["stat",["unary-postfix","++",["dot",["dot",["dot",["name","_this"],"info"],"render"],"calls"]]],["stat",["assign","+",["dot",["dot",["dot",["name","_this"],"info"],"render"],"points"],["dot",["name","geometryGroup"],"__webglParticleCount"]]]]],["if",["binary","instanceof",["name","object"],["dot",["name","THREE"],"Ribbon"]],["block",[["stat",["call",["dot",["name","_gl"],"drawArrays"],[["dot",["name","_gl"],"TRIANGLE_STRIP"],["num",0],["dot",["name","geometryGroup"],"__webglVertexCount"]]]],["stat",["unary-postfix","++",["dot",["dot",["dot",["name","_this"],"info"],"render"],"calls"]]]]],null]]]]]]]],["defun","setupMorphTargets",["material","geometryGroup","object"],[["var",[["attributes",["dot",["dot",["name","material"],"program"],"attributes"]]]],["if",["binary","!==",["dot",["name","object"],"morphTargetBase"],["unary-prefix","-",["num",1]]],["block",[["stat",["call",["dot",["name","_gl"],"bindBuffer"],[["dot",["name","_gl"],"ARRAY_BUFFER"],["sub",["dot",["name","geometryGroup"],"__webglMorphTargetsBuffers"],["dot",["name","object"],"morphTargetBase"]]]]],["stat",["call",["dot",["name","_gl"],"vertexAttribPointer"],[["dot",["name","attributes"],"position"],["num",3],["dot",["name","_gl"],"FLOAT"],["name","false"],["num",0],["num",0]]]]]],["if",["binary",">=",["dot",["name","attributes"],"position"],["num",0]],["block",[["stat",["call",["dot",["name","_gl"],"bindBuffer"],[["dot",["name","_gl"],"ARRAY_BUFFER"],["dot",["name","geometryGroup"],"__webglVertexBuffer"]]]],["stat",["call",["dot",["name","_gl"],"vertexAttribPointer"],[["dot",["name","attributes"],"position"],["num",3],["dot",["name","_gl"],"FLOAT"],["name","false"],["num",0],["num",0]]]]]],null]],["if",["dot",["dot",["name","object"],"morphTargetForcedOrder"],"length"],["block",[["var",[["m",["num",0]]]],["var",[["order",["dot",["name","object"],"morphTargetForcedOrder"]]]],["var",[["influences",["dot",["name","object"],"morphTargetInfluences"]]]],["while",["binary","&&",["binary","<",["name","m"],["dot",["name","material"],"numSupportedMorphTargets"]],["binary","<",["name","m"],["dot",["name","order"],"length"]]],["block",[["stat",["call",["dot",["name","_gl"],"bindBuffer"],[["dot",["name","_gl"],"ARRAY_BUFFER"],["sub",["dot",["name","geometryGroup"],"__webglMorphTargetsBuffers"],["sub",["name","order"],["name","m"]]]]]],["stat",["call",["dot",["name","_gl"],"vertexAttribPointer"],[["sub",["name","attributes"],["binary","+",["string","morphTarget"],["name","m"]]],["num",3],["dot",["name","_gl"],"FLOAT"],["name","false"],["num",0],["num",0]]]],["if",["dot",["name","material"],"morphNormals"],["block",[["stat",["call",["dot",["name","_gl"],"bindBuffer"],[["dot",["name","_gl"],"ARRAY_BUFFER"],["sub",["dot",["name","geometryGroup"],"__webglMorphNormalsBuffers"],["sub",["name","order"],["name","m"]]]]]],["stat",["call",["dot",["name","_gl"],"vertexAttribPointer"],[["sub",["name","attributes"],["binary","+",["string","morphNormal"],["name","m"]]],["num",3],["dot",["name","_gl"],"FLOAT"],["name","false"],["num",0],["num",0]]]]]],null],["stat",["assign",true,["sub",["dot",["name","object"],"__webglMorphTargetInfluences"],["name","m"]],["sub",["name","influences"],["sub",["name","order"],["name","m"]]]]],["stat",["unary-postfix","++",["name","m"]]]]]]]],["block",[["var",[["used",["array",[]]]]],["var",[["candidateInfluence",["unary-prefix","-",["num",1]]]]],["var",[["candidate",["num",0]]]],["var",[["influences",["dot",["name","object"],"morphTargetInfluences"]]]],["var",[["i"],["il",["dot",["name","influences"],"length"]]]],["var",[["m",["num",0]]]],["if",["binary","!==",["dot",["name","object"],"morphTargetBase"],["unary-prefix","-",["num",1]]],["block",[["stat",["assign",true,["sub",["name","used"],["dot",["name","object"],"morphTargetBase"]],["name","true"]]]]],null],["while",["binary","<",["name","m"],["dot",["name","material"],"numSupportedMorphTargets"]],["block",[["for",["assign",true,["name","i"],["num",0]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["block",[["if",["binary","&&",["unary-prefix","!",["sub",["name","used"],["name","i"]]],["binary",">",["sub",["name","influences"],["name","i"]],["name","candidateInfluence"]]],["block",[["stat",["assign",true,["name","candidate"],["name","i"]]],["stat",["assign",true,["name","candidateInfluence"],["sub",["name","influences"],["name","candidate"]]]]]],null]]]],["stat",["call",["dot",["name","_gl"],"bindBuffer"],[["dot",["name","_gl"],"ARRAY_BUFFER"],["sub",["dot",["name","geometryGroup"],"__webglMorphTargetsBuffers"],["name","candidate"]]]]],["stat",["call",["dot",["name","_gl"],"vertexAttribPointer"],[["sub",["name","attributes"],["binary","+",["string","morphTarget"],["name","m"]]],["num",3],["dot",["name","_gl"],"FLOAT"],["name","false"],["num",0],["num",0]]]],["if",["dot",["name","material"],"morphNormals"],["block",[["stat",["call",["dot",["name","_gl"],"bindBuffer"],[["dot",["name","_gl"],"ARRAY_BUFFER"],["sub",["dot",["name","geometryGroup"],"__webglMorphNormalsBuffers"],["name","candidate"]]]]],["stat",["call",["dot",["name","_gl"],"vertexAttribPointer"],[["sub",["name","attributes"],["binary","+",["string","morphNormal"],["name","m"]]],["num",3],["dot",["name","_gl"],"FLOAT"],["name","false"],["num",0],["num",0]]]]]],null],["stat",["assign",true,["sub",["dot",["name","object"],"__webglMorphTargetInfluences"],["name","m"]],["name","candidateInfluence"]]],["stat",["assign",true,["sub",["name","used"],["name","candidate"]],["num",1]]],["stat",["assign",true,["name","candidateInfluence"],["unary-prefix","-",["num",1]]]],["stat",["unary-postfix","++",["name","m"]]]]]]]]],["if",["binary","!==",["dot",["dot",["dot",["name","material"],"program"],"uniforms"],"morphTargetInfluences"],["name","null"]],["block",[["stat",["call",["dot",["name","_gl"],"uniform1fv"],[["dot",["dot",["dot",["name","material"],"program"],"uniforms"],"morphTargetInfluences"],["dot",["name","object"],"__webglMorphTargetInfluences"]]]]]],null]]],["block"],["defun","painterSort",["a","b"],[["return",["binary","-",["dot",["name","b"],"z"],["dot",["name","a"],"z"]]]]],["block"],["stat",["assign",true,["dot",["name","this"],"render"],["function",null,["scene","camera","renderTarget","forceClear"],[["var",[["i"],["il"],["webglObject"],["object"],["renderList"],["lights",["dot",["name","scene"],"__lights"]],["fog",["dot",["name","scene"],"fog"]]]],["stat",["assign",true,["name","_currentMaterialId"],["unary-prefix","-",["num",1]]]],["stat",["assign",true,["name","_lightsNeedUpdate"],["name","true"]]],["if",["binary","===",["dot",["name","camera"],"parent"],["name","undefined"]],["block",[["stat",["call",["dot",["name","console"],"warn"],[["string","DEPRECATED: Camera hasn't been added to a Scene. Adding it..."]]]],["stat",["call",["dot",["name","scene"],"add"],[["name","camera"]]]]]],null],["if",["dot",["name","this"],"autoUpdateScene"],["stat",["call",["dot",["name","scene"],"updateMatrixWorld"],[]]],null],["if",["unary-prefix","!",["dot",["name","camera"],"_viewMatrixArray"]],["stat",["assign",true,["dot",["name","camera"],"_viewMatrixArray"],["new",["name","Float32Array"],[["num",16]]]]],null],["if",["unary-prefix","!",["dot",["name","camera"],"_projectionMatrixArray"]],["stat",["assign",true,["dot",["name","camera"],"_projectionMatrixArray"],["new",["name","Float32Array"],[["num",16]]]]],null],["stat",["call",["dot",["dot",["name","camera"],"matrixWorldInverse"],"getInverse"],[["dot",["name","camera"],"matrixWorld"]]]],["stat",["call",["dot",["dot",["name","camera"],"matrixWorldInverse"],"flattenToArray"],[["dot",["name","camera"],"_viewMatrixArray"]]]],["stat",["call",["dot",["dot",["name","camera"],"projectionMatrix"],"flattenToArray"],[["dot",["name","camera"],"_projectionMatrixArray"]]]],["stat",["call",["dot",["name","_projScreenMatrix"],"multiply"],[["dot",["name","camera"],"projectionMatrix"],["dot",["name","camera"],"matrixWorldInverse"]]]],["stat",["call",["dot",["name","_frustum"],"setFromMatrix"],[["name","_projScreenMatrix"]]]],["if",["dot",["name","this"],"autoUpdateObjects"],["stat",["call",["dot",["name","this"],"initWebGLObjects"],[["name","scene"]]]],null],["stat",["call",["name","renderPlugins"],[["dot",["name","this"],"renderPluginsPre"],["name","scene"],["name","camera"]]]],["stat",["assign",true,["dot",["dot",["dot",["name","_this"],"info"],"render"],"calls"],["num",0]]],["stat",["assign",true,["dot",["dot",["dot",["name","_this"],"info"],"render"],"vertices"],["num",0]]],["stat",["assign",true,["dot",["dot",["dot",["name","_this"],"info"],"render"],"faces"],["num",0]]],["stat",["assign",true,["dot",["dot",["dot",["name","_this"],"info"],"render"],"points"],["num",0]]],["stat",["call",["dot",["name","this"],"setRenderTarget"],[["name","renderTarget"]]]],["if",["binary","||",["dot",["name","this"],"autoClear"],["name","forceClear"]],["block",[["stat",["call",["dot",["name","this"],"clear"],[["dot",["name","this"],"autoClearColor"],["dot",["name","this"],"autoClearDepth"],["dot",["name","this"],"autoClearStencil"]]]]]],null],["stat",["assign",true,["name","renderList"],["dot",["name","scene"],"__webglObjects"]]],["for",["seq",["assign",true,["name","i"],["num",0]],["assign",true,["name","il"],["dot",["name","renderList"],"length"]]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","webglObject"],["sub",["name","renderList"],["name","i"]]]],["stat",["assign",true,["name","object"],["dot",["name","webglObject"],"object"]]],["stat",["assign",true,["dot",["name","webglObject"],"render"],["name","false"]]],["if",["dot",["name","object"],"visible"],["block",[["if",["binary","||",["binary","||",["unary-prefix","!",["binary","||",["binary","instanceof",["name","object"],["dot",["name","THREE"],"Mesh"]],["binary","instanceof",["name","object"],["dot",["name","THREE"],"ParticleSystem"]]]],["unary-prefix","!",["dot",["name","object"],"frustumCulled"]]],["call",["dot",["name","_frustum"],"contains"],[["name","object"]]]],["block",[["stat",["call",["name","setupMatrices"],[["name","object"],["name","camera"]]]],["stat",["call",["name","unrollBufferMaterial"],[["name","webglObject"]]]],["stat",["assign",true,["dot",["name","webglObject"],"render"],["name","true"]]],["if",["dot",["name","this"],"sortObjects"],["block",[["if",["dot",["name","object"],"renderDepth"],["block",[["stat",["assign",true,["dot",["name","webglObject"],"z"],["dot",["name","object"],"renderDepth"]]]]],["block",[["stat",["call",["dot",["name","_vector3"],"copy"],[["call",["dot",["dot",["name","object"],"matrixWorld"],"getPosition"],[]]]]],["stat",["call",["dot",["name","_projScreenMatrix"],"multiplyVector3"],[["name","_vector3"]]]],["stat",["assign",true,["dot",["name","webglObject"],"z"],["dot",["name","_vector3"],"z"]]]]]]]],null]]],null]]],null]]]],["if",["dot",["name","this"],"sortObjects"],["block",[["stat",["call",["dot",["name","renderList"],"sort"],[["name","painterSort"]]]]]],null],["stat",["assign",true,["name","renderList"],["dot",["name","scene"],"__webglObjectsImmediate"]]],["for",["seq",["assign",true,["name","i"],["num",0]],["assign",true,["name","il"],["dot",["name","renderList"],"length"]]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","webglObject"],["sub",["name","renderList"],["name","i"]]]],["stat",["assign",true,["name","object"],["dot",["name","webglObject"],"object"]]],["if",["dot",["name","object"],"visible"],["block",[["stat",["call",["name","setupMatrices"],[["name","object"],["name","camera"]]]],["stat",["call",["name","unrollImmediateBufferMaterial"],[["name","webglObject"]]]]]],null]]]],["if",["dot",["name","scene"],"overrideMaterial"],["block",[["var",[["material",["dot",["name","scene"],"overrideMaterial"]]]],["stat",["call",["dot",["name","this"],"setBlending"],[["dot",["name","material"],"blending"],["dot",["name","material"],"blendEquation"],["dot",["name","material"],"blendSrc"],["dot",["name","material"],"blendDst"]]]],["stat",["call",["dot",["name","this"],"setDepthTest"],[["dot",["name","material"],"depthTest"]]]],["stat",["call",["dot",["name","this"],"setDepthWrite"],[["dot",["name","material"],"depthWrite"]]]],["stat",["call",["name","setPolygonOffset"],[["dot",["name","material"],"polygonOffset"],["dot",["name","material"],"polygonOffsetFactor"],["dot",["name","material"],"polygonOffsetUnits"]]]],["stat",["call",["name","renderObjects"],[["dot",["name","scene"],"__webglObjects"],["name","false"],["string",""],["name","camera"],["name","lights"],["name","fog"],["name","true"],["name","material"]]]],["stat",["call",["name","renderObjectsImmediate"],[["dot",["name","scene"],"__webglObjectsImmediate"],["string",""],["name","camera"],["name","lights"],["name","fog"],["name","false"],["name","material"]]]]]],["block",[["stat",["call",["dot",["name","this"],"setBlending"],[["dot",["name","THREE"],"NormalBlending"]]]],["stat",["call",["name","renderObjects"],[["dot",["name","scene"],"__webglObjects"],["name","true"],["string","opaque"],["name","camera"],["name","lights"],["name","fog"],["name","false"]]]],["stat",["call",["name","renderObjectsImmediate"],[["dot",["name","scene"],"__webglObjectsImmediate"],["string","opaque"],["name","camera"],["name","lights"],["name","fog"],["name","false"]]]],["stat",["call",["name","renderObjects"],[["dot",["name","scene"],"__webglObjects"],["name","false"],["string","transparent"],["name","camera"],["name","lights"],["name","fog"],["name","true"]]]],["stat",["call",["name","renderObjectsImmediate"],[["dot",["name","scene"],"__webglObjectsImmediate"],["string","transparent"],["name","camera"],["name","lights"],["name","fog"],["name","true"]]]]]]],["stat",["call",["name","renderPlugins"],[["dot",["name","this"],"renderPluginsPost"],["name","scene"],["name","camera"]]]],["if",["binary","&&",["binary","&&",["binary","&&",["name","renderTarget"],["dot",["name","renderTarget"],"generateMipmaps"]],["binary","!==",["dot",["name","renderTarget"],"minFilter"],["dot",["name","THREE"],"NearestFilter"]]],["binary","!==",["dot",["name","renderTarget"],"minFilter"],["dot",["name","THREE"],"LinearFilter"]]],["block",[["stat",["call",["name","updateRenderTargetMipmap"],[["name","renderTarget"]]]]]],null],["stat",["call",["dot",["name","this"],"setDepthTest"],[["name","true"]]]],["stat",["call",["dot",["name","this"],"setDepthWrite"],[["name","true"]]]]]]]],["defun","renderPlugins",["plugins","scene","camera"],[["if",["unary-prefix","!",["dot",["name","plugins"],"length"]],["return",null],null],["for",["var",[["i",["num",0]],["il",["dot",["name","plugins"],"length"]]]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","_currentProgram"],["name","null"]]],["stat",["assign",true,["name","_currentCamera"],["name","null"]]],["stat",["assign",true,["name","_oldBlending"],["unary-prefix","-",["num",1]]]],["stat",["assign",true,["name","_oldDepthTest"],["unary-prefix","-",["num",1]]]],["stat",["assign",true,["name","_oldDepthWrite"],["unary-prefix","-",["num",1]]]],["stat",["assign",true,["name","_oldDoubleSided"],["unary-prefix","-",["num",1]]]],["stat",["assign",true,["name","_oldFlipSided"],["unary-prefix","-",["num",1]]]],["stat",["assign",true,["name","_currentGeometryGroupHash"],["unary-prefix","-",["num",1]]]],["stat",["assign",true,["name","_currentMaterialId"],["unary-prefix","-",["num",1]]]],["stat",["assign",true,["name","_lightsNeedUpdate"],["name","true"]]],["stat",["call",["dot",["sub",["name","plugins"],["name","i"]],"render"],[["name","scene"],["name","camera"],["name","_currentWidth"],["name","_currentHeight"]]]],["stat",["assign",true,["name","_currentProgram"],["name","null"]]],["stat",["assign",true,["name","_currentCamera"],["name","null"]]],["stat",["assign",true,["name","_oldBlending"],["unary-prefix","-",["num",1]]]],["stat",["assign",true,["name","_oldDepthTest"],["unary-prefix","-",["num",1]]]],["stat",["assign",true,["name","_oldDepthWrite"],["unary-prefix","-",["num",1]]]],["stat",["assign",true,["name","_oldDoubleSided"],["unary-prefix","-",["num",1]]]],["stat",["assign",true,["name","_oldFlipSided"],["unary-prefix","-",["num",1]]]],["stat",["assign",true,["name","_currentGeometryGroupHash"],["unary-prefix","-",["num",1]]]],["stat",["assign",true,["name","_currentMaterialId"],["unary-prefix","-",["num",1]]]],["stat",["assign",true,["name","_lightsNeedUpdate"],["name","true"]]]]]]]],["block"],["defun","renderObjects",["renderList","reverse","materialType","camera","lights","fog","useBlending","overrideMaterial"],[["var",[["webglObject"],["object"],["buffer"],["material"],["start"],["end"],["delta"]]],["if",["name","reverse"],["block",[["stat",["assign",true,["name","start"],["binary","-",["dot",["name","renderList"],"length"],["num",1]]]],["stat",["assign",true,["name","end"],["unary-prefix","-",["num",1]]]],["stat",["assign",true,["name","delta"],["unary-prefix","-",["num",1]]]]]],["block",[["stat",["assign",true,["name","start"],["num",0]]],["stat",["assign",true,["name","end"],["dot",["name","renderList"],"length"]]],["stat",["assign",true,["name","delta"],["num",1]]]]]],["for",["var",[["i",["name","start"]]]],["binary","!==",["name","i"],["name","end"]],["assign","+",["name","i"],["name","delta"]],["block",[["stat",["assign",true,["name","webglObject"],["sub",["name","renderList"],["name","i"]]]],["if",["dot",["name","webglObject"],"render"],["block",[["stat",["assign",true,["name","object"],["dot",["name","webglObject"],"object"]]],["stat",["assign",true,["name","buffer"],["dot",["name","webglObject"],"buffer"]]],["if",["name","overrideMaterial"],["block",[["stat",["assign",true,["name","material"],["name","overrideMaterial"]]]]],["block",[["stat",["assign",true,["name","material"],["sub",["name","webglObject"],["name","materialType"]]]],["if",["unary-prefix","!",["name","material"]],["continue",null],null],["if",["name","useBlending"],["stat",["call",["dot",["name","_this"],"setBlending"],[["dot",["name","material"],"blending"],["dot",["name","material"],"blendEquation"],["dot",["name","material"],"blendSrc"],["dot",["name","material"],"blendDst"]]]],null],["stat",["call",["dot",["name","_this"],"setDepthTest"],[["dot",["name","material"],"depthTest"]]]],["stat",["call",["dot",["name","_this"],"setDepthWrite"],[["dot",["name","material"],"depthWrite"]]]],["stat",["call",["name","setPolygonOffset"],[["dot",["name","material"],"polygonOffset"],["dot",["name","material"],"polygonOffsetFactor"],["dot",["name","material"],"polygonOffsetUnits"]]]]]]],["stat",["call",["dot",["name","_this"],"setObjectFaces"],[["name","object"]]]],["if",["binary","instanceof",["name","buffer"],["dot",["name","THREE"],"BufferGeometry"]],["block",[["stat",["call",["dot",["name","_this"],"renderBufferDirect"],[["name","camera"],["name","lights"],["name","fog"],["name","material"],["name","buffer"],["name","object"]]]]]],["block",[["stat",["call",["dot",["name","_this"],"renderBuffer"],[["name","camera"],["name","lights"],["name","fog"],["name","material"],["name","buffer"],["name","object"]]]]]]]]],null]]]]]],["block"],["defun","renderObjectsImmediate",["renderList","materialType","camera","lights","fog","useBlending","overrideMaterial"],[["var",[["webglObject"],["object"],["material"],["program"]]],["for",["var",[["i",["num",0]],["il",["dot",["name","renderList"],"length"]]]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","webglObject"],["sub",["name","renderList"],["name","i"]]]],["stat",["assign",true,["name","object"],["dot",["name","webglObject"],"object"]]],["if",["dot",["name","object"],"visible"],["block",[["if",["name","overrideMaterial"],["block",[["stat",["assign",true,["name","material"],["name","overrideMaterial"]]]]],["block",[["stat",["assign",true,["name","material"],["sub",["name","webglObject"],["name","materialType"]]]],["if",["unary-prefix","!",["name","material"]],["continue",null],null],["if",["name","useBlending"],["stat",["call",["dot",["name","_this"],"setBlending"],[["dot",["name","material"],"blending"],["dot",["name","material"],"blendEquation"],["dot",["name","material"],"blendSrc"],["dot",["name","material"],"blendDst"]]]],null],["stat",["call",["dot",["name","_this"],"setDepthTest"],[["dot",["name","material"],"depthTest"]]]],["stat",["call",["dot",["name","_this"],"setDepthWrite"],[["dot",["name","material"],"depthWrite"]]]],["stat",["call",["name","setPolygonOffset"],[["dot",["name","material"],"polygonOffset"],["dot",["name","material"],"polygonOffsetFactor"],["dot",["name","material"],"polygonOffsetUnits"]]]]]]],["stat",["call",["dot",["name","_this"],"renderImmediateObject"],[["name","camera"],["name","lights"],["name","fog"],["name","material"],["name","object"]]]]]],null]]]]]],["block"],["stat",["assign",true,["dot",["name","this"],"renderImmediateObject"],["function",null,["camera","lights","fog","material","object"],[["var",[["program",["call",["name","setProgram"],[["name","camera"],["name","lights"],["name","fog"],["name","material"],["name","object"]]]]]],["stat",["assign",true,["name","_currentGeometryGroupHash"],["unary-prefix","-",["num",1]]]],["stat",["call",["dot",["name","_this"],"setObjectFaces"],[["name","object"]]]],["if",["dot",["name","object"],"immediateRenderCallback"],["block",[["stat",["call",["dot",["name","object"],"immediateRenderCallback"],[["name","program"],["name","_gl"],["name","_frustum"]]]]]],["block",[["stat",["call",["dot",["name","object"],"render"],[["function",null,["object"],[["stat",["call",["dot",["name","_this"],"renderBufferImmediate"],[["name","object"],["name","program"],["dot",["name","material"],"shading"]]]]]]]]]]]]]]]],["defun","unrollImmediateBufferMaterial",["globject"],[["var",[["object",["dot",["name","globject"],"object"]],["material",["dot",["name","object"],"material"]]]],["if",["dot",["name","material"],"transparent"],["block",[["stat",["assign",true,["dot",["name","globject"],"transparent"],["name","material"]]],["stat",["assign",true,["dot",["name","globject"],"opaque"],["name","null"]]]]],["block",[["stat",["assign",true,["dot",["name","globject"],"opaque"],["name","material"]]],["stat",["assign",true,["dot",["name","globject"],"transparent"],["name","null"]]]]]]]],["block"],["defun","unrollBufferMaterial",["globject"],[["var",[["object",["dot",["name","globject"],"object"]],["buffer",["dot",["name","globject"],"buffer"]],["material"],["materialIndex"],["meshMaterial"]]],["stat",["assign",true,["name","meshMaterial"],["dot",["name","object"],"material"]]],["if",["binary","instanceof",["name","meshMaterial"],["dot",["name","THREE"],"MeshFaceMaterial"]],["block",[["stat",["assign",true,["name","materialIndex"],["dot",["name","buffer"],"materialIndex"]]],["if",["binary",">=",["name","materialIndex"],["num",0]],["block",[["stat",["assign",true,["name","material"],["sub",["dot",["dot",["name","object"],"geometry"],"materials"],["name","materialIndex"]]]],["if",["dot",["name","material"],"transparent"],["block",[["stat",["assign",true,["dot",["name","globject"],"transparent"],["name","material"]]],["stat",["assign",true,["dot",["name","globject"],"opaque"],["name","null"]]]]],["block",[["stat",["assign",true,["dot",["name","globject"],"opaque"],["name","material"]]],["stat",["assign",true,["dot",["name","globject"],"transparent"],["name","null"]]]]]]]],null]]],["block",[["stat",["assign",true,["name","material"],["name","meshMaterial"]]],["if",["name","material"],["block",[["if",["dot",["name","material"],"transparent"],["block",[["stat",["assign",true,["dot",["name","globject"],"transparent"],["name","material"]]],["stat",["assign",true,["dot",["name","globject"],"opaque"],["name","null"]]]]],["block",[["stat",["assign",true,["dot",["name","globject"],"opaque"],["name","material"]]],["stat",["assign",true,["dot",["name","globject"],"transparent"],["name","null"]]]]]]]],null]]]]]],["block"],["defun","sortFacesByMaterial",["geometry"],[["var",[["f"],["fl"],["face"],["materialIndex"],["vertices"],["materialHash"],["groupHash"],["hash_map",["object",[]]]]],["var",[["numMorphTargets",["dot",["dot",["name","geometry"],"morphTargets"],"length"]]]],["var",[["numMorphNormals",["dot",["dot",["name","geometry"],"morphNormals"],"length"]]]],["stat",["assign",true,["dot",["name","geometry"],"geometryGroups"],["object",[]]]],["for",["seq",["assign",true,["name","f"],["num",0]],["assign",true,["name","fl"],["dot",["dot",["name","geometry"],"faces"],"length"]]],["binary","<",["name","f"],["name","fl"]],["unary-postfix","++",["name","f"]],["block",[["stat",["assign",true,["name","face"],["sub",["dot",["name","geometry"],"faces"],["name","f"]]]],["stat",["assign",true,["name","materialIndex"],["dot",["name","face"],"materialIndex"]]],["stat",["assign",true,["name","materialHash"],["conditional",["binary","!==",["name","materialIndex"],["name","undefined"]],["name","materialIndex"],["unary-prefix","-",["num",1]]]]],["if",["binary","===",["sub",["name","hash_map"],["name","materialHash"]],["name","undefined"]],["block",[["stat",["assign",true,["sub",["name","hash_map"],["name","materialHash"]],["object",[["hash",["name","materialHash"]],["counter",["num",0]]]]]]]],null],["stat",["assign",true,["name","groupHash"],["binary","+",["binary","+",["dot",["sub",["name","hash_map"],["name","materialHash"]],"hash"],["string","_"]],["dot",["sub",["name","hash_map"],["name","materialHash"]],"counter"]]]],["if",["binary","===",["sub",["dot",["name","geometry"],"geometryGroups"],["name","groupHash"]],["name","undefined"]],["block",[["stat",["assign",true,["sub",["dot",["name","geometry"],"geometryGroups"],["name","groupHash"]],["object",[["faces3",["array",[]]],["faces4",["array",[]]],["materialIndex",["name","materialIndex"]],["vertices",["num",0]],["numMorphTargets",["name","numMorphTargets"]],["numMorphNormals",["name","numMorphNormals"]]]]]]]],null],["stat",["assign",true,["name","vertices"],["conditional",["binary","instanceof",["name","face"],["dot",["name","THREE"],"Face3"]],["num",3],["num",4]]]],["if",["binary",">",["binary","+",["dot",["sub",["dot",["name","geometry"],"geometryGroups"],["name","groupHash"]],"vertices"],["name","vertices"]],["num",65535]],["block",[["stat",["assign","+",["dot",["sub",["name","hash_map"],["name","materialHash"]],"counter"],["num",1]]],["stat",["assign",true,["name","groupHash"],["binary","+",["binary","+",["dot",["sub",["name","hash_map"],["name","materialHash"]],"hash"],["string","_"]],["dot",["sub",["name","hash_map"],["name","materialHash"]],"counter"]]]],["if",["binary","===",["sub",["dot",["name","geometry"],"geometryGroups"],["name","groupHash"]],["name","undefined"]],["block",[["stat",["assign",true,["sub",["dot",["name","geometry"],"geometryGroups"],["name","groupHash"]],["object",[["faces3",["array",[]]],["faces4",["array",[]]],["materialIndex",["name","materialIndex"]],["vertices",["num",0]],["numMorphTargets",["name","numMorphTargets"]],["numMorphNormals",["name","numMorphNormals"]]]]]]]],null]]],null],["if",["binary","instanceof",["name","face"],["dot",["name","THREE"],"Face3"]],["block",[["stat",["call",["dot",["dot",["sub",["dot",["name","geometry"],"geometryGroups"],["name","groupHash"]],"faces3"],"push"],[["name","f"]]]]]],["block",[["stat",["call",["dot",["dot",["sub",["dot",["name","geometry"],"geometryGroups"],["name","groupHash"]],"faces4"],"push"],[["name","f"]]]]]]],["stat",["assign","+",["dot",["sub",["dot",["name","geometry"],"geometryGroups"],["name","groupHash"]],"vertices"],["name","vertices"]]]]]],["stat",["assign",true,["dot",["name","geometry"],"geometryGroupsList"],["array",[]]]],["for-in",["var",[["g"]]],["name",["g"]],["dot",["name","geometry"],"geometryGroups"],["block",[["stat",["assign",true,["dot",["sub",["dot",["name","geometry"],"geometryGroups"],["name","g"]],"id"],["unary-postfix","++",["name","_geometryGroupCounter"]]]],["stat",["call",["dot",["dot",["name","geometry"],"geometryGroupsList"],"push"],[["sub",["dot",["name","geometry"],"geometryGroups"],["name","g"]]]]]]]]]],["block"],["stat",["assign",true,["dot",["name","this"],"initWebGLObjects"],["function",null,["scene"],[["if",["unary-prefix","!",["dot",["name","scene"],"__webglObjects"]],["block",[["stat",["assign",true,["dot",["name","scene"],"__webglObjects"],["array",[]]]],["stat",["assign",true,["dot",["name","scene"],"__webglObjectsImmediate"],["array",[]]]],["stat",["assign",true,["dot",["name","scene"],"__webglSprites"],["array",[]]]],["stat",["assign",true,["dot",["name","scene"],"__webglFlares"],["array",[]]]]]],null],["while",["dot",["dot",["name","scene"],"__objectsAdded"],"length"],["block",[["stat",["call",["name","addObject"],[["sub",["dot",["name","scene"],"__objectsAdded"],["num",0]],["name","scene"]]]],["stat",["call",["dot",["dot",["name","scene"],"__objectsAdded"],"splice"],[["num",0],["num",1]]]]]]],["while",["dot",["dot",["name","scene"],"__objectsRemoved"],"length"],["block",[["stat",["call",["name","removeObject"],[["sub",["dot",["name","scene"],"__objectsRemoved"],["num",0]],["name","scene"]]]],["stat",["call",["dot",["dot",["name","scene"],"__objectsRemoved"],"splice"],[["num",0],["num",1]]]]]]],["for",["var",[["o",["num",0]],["ol",["dot",["dot",["name","scene"],"__webglObjects"],"length"]]]],["binary","<",["name","o"],["name","ol"]],["unary-postfix","++",["name","o"]],["block",[["stat",["call",["name","updateObject"],[["dot",["sub",["dot",["name","scene"],"__webglObjects"],["name","o"]],"object"]]]]]]]]]]],["defun","addObject",["object","scene"],[["var",[["g"],["geometry"],["geometryGroup"]]],["if",["unary-prefix","!",["dot",["name","object"],"__webglInit"]],["block",[["stat",["assign",true,["dot",["name","object"],"__webglInit"],["name","true"]]],["stat",["assign",true,["dot",["name","object"],"_modelViewMatrix"],["new",["dot",["name","THREE"],"Matrix4"],[]]]],["stat",["assign",true,["dot",["name","object"],"_normalMatrix"],["new",["dot",["name","THREE"],"Matrix3"],[]]]],["if",["binary","instanceof",["name","object"],["dot",["name","THREE"],"Mesh"]],["block",[["stat",["assign",true,["name","geometry"],["dot",["name","object"],"geometry"]]],["if",["binary","instanceof",["name","geometry"],["dot",["name","THREE"],"Geometry"]],["block",[["if",["binary","===",["dot",["name","geometry"],"geometryGroups"],["name","undefined"]],["block",[["stat",["call",["name","sortFacesByMaterial"],[["name","geometry"]]]]]],null],["for-in",["name","g"],["name","g"],["dot",["name","geometry"],"geometryGroups"],["block",[["stat",["assign",true,["name","geometryGroup"],["sub",["dot",["name","geometry"],"geometryGroups"],["name","g"]]]],["if",["unary-prefix","!",["dot",["name","geometryGroup"],"__webglVertexBuffer"]],["block",[["stat",["call",["name","createMeshBuffers"],[["name","geometryGroup"]]]],["stat",["call",["name","initMeshBuffers"],[["name","geometryGroup"],["name","object"]]]],["stat",["assign",true,["dot",["name","geometry"],"verticesNeedUpdate"],["name","true"]]],["stat",["assign",true,["dot",["name","geometry"],"morphTargetsNeedUpdate"],["name","true"]]],["stat",["assign",true,["dot",["name","geometry"],"elementsNeedUpdate"],["name","true"]]],["stat",["assign",true,["dot",["name","geometry"],"uvsNeedUpdate"],["name","true"]]],["stat",["assign",true,["dot",["name","geometry"],"normalsNeedUpdate"],["name","true"]]],["stat",["assign",true,["dot",["name","geometry"],"tangetsNeedUpdate"],["name","true"]]],["stat",["assign",true,["dot",["name","geometry"],"colorsNeedUpdate"],["name","true"]]]]],null]]]]]],null]]],["if",["binary","instanceof",["name","object"],["dot",["name","THREE"],"Ribbon"]],["block",[["stat",["assign",true,["name","geometry"],["dot",["name","object"],"geometry"]]],["if",["unary-prefix","!",["dot",["name","geometry"],"__webglVertexBuffer"]],["block",[["stat",["call",["name","createRibbonBuffers"],[["name","geometry"]]]],["stat",["call",["name","initRibbonBuffers"],[["name","geometry"]]]],["stat",["assign",true,["dot",["name","geometry"],"verticesNeedUpdate"],["name","true"]]],["stat",["assign",true,["dot",["name","geometry"],"colorsNeedUpdate"],["name","true"]]]]],null]]],["if",["binary","instanceof",["name","object"],["dot",["name","THREE"],"Line"]],["block",[["stat",["assign",true,["name","geometry"],["dot",["name","object"],"geometry"]]],["if",["unary-prefix","!",["dot",["name","geometry"],"__webglVertexBuffer"]],["block",[["stat",["call",["name","createLineBuffers"],[["name","geometry"]]]],["stat",["call",["name","initLineBuffers"],[["name","geometry"],["name","object"]]]],["stat",["assign",true,["dot",["name","geometry"],"verticesNeedUpdate"],["name","true"]]],["stat",["assign",true,["dot",["name","geometry"],"colorsNeedUpdate"],["name","true"]]]]],null]]],["if",["binary","instanceof",["name","object"],["dot",["name","THREE"],"ParticleSystem"]],["block",[["stat",["assign",true,["name","geometry"],["dot",["name","object"],"geometry"]]],["if",["unary-prefix","!",["dot",["name","geometry"],"__webglVertexBuffer"]],["block",[["stat",["call",["name","createParticleBuffers"],[["name","geometry"]]]],["stat",["call",["name","initParticleBuffers"],[["name","geometry"],["name","object"]]]],["stat",["assign",true,["dot",["name","geometry"],"verticesNeedUpdate"],["name","true"]]],["stat",["assign",true,["dot",["name","geometry"],"colorsNeedUpdate"],["name","true"]]]]],null]]],null]]]]]],null],["if",["unary-prefix","!",["dot",["name","object"],"__webglActive"]],["block",[["if",["binary","instanceof",["name","object"],["dot",["name","THREE"],"Mesh"]],["block",[["stat",["assign",true,["name","geometry"],["dot",["name","object"],"geometry"]]],["if",["binary","instanceof",["name","geometry"],["dot",["name","THREE"],"BufferGeometry"]],["block",[["stat",["call",["name","addBuffer"],[["dot",["name","scene"],"__webglObjects"],["name","geometry"],["name","object"]]]]]],["block",[["for-in",["name","g"],["name","g"],["dot",["name","geometry"],"geometryGroups"],["block",[["stat",["assign",true,["name","geometryGroup"],["sub",["dot",["name","geometry"],"geometryGroups"],["name","g"]]]],["stat",["call",["name","addBuffer"],[["dot",["name","scene"],"__webglObjects"],["name","geometryGroup"],["name","object"]]]]]]]]]]]],["if",["binary","||",["binary","||",["binary","instanceof",["name","object"],["dot",["name","THREE"],"Ribbon"]],["binary","instanceof",["name","object"],["dot",["name","THREE"],"Line"]]],["binary","instanceof",["name","object"],["dot",["name","THREE"],"ParticleSystem"]]],["block",[["stat",["assign",true,["name","geometry"],["dot",["name","object"],"geometry"]]],["stat",["call",["name","addBuffer"],[["dot",["name","scene"],"__webglObjects"],["name","geometry"],["name","object"]]]]]],["if",["binary","||",["binary","instanceof",["name","object"],["dot",["name","THREE"],"ImmediateRenderObject"]],["dot",["name","object"],"immediateRenderCallback"]],["block",[["stat",["call",["name","addBufferImmediate"],[["dot",["name","scene"],"__webglObjectsImmediate"],["name","object"]]]]]],["if",["binary","instanceof",["name","object"],["dot",["name","THREE"],"Sprite"]],["block",[["stat",["call",["dot",["dot",["name","scene"],"__webglSprites"],"push"],[["name","object"]]]]]],["if",["binary","instanceof",["name","object"],["dot",["name","THREE"],"LensFlare"]],["block",[["stat",["call",["dot",["dot",["name","scene"],"__webglFlares"],"push"],[["name","object"]]]]]],null]]]]],["stat",["assign",true,["dot",["name","object"],"__webglActive"],["name","true"]]]]],null]]],["block"],["defun","addBuffer",["objlist","buffer","object"],[["stat",["call",["dot",["name","objlist"],"push"],[["object",[["buffer",["name","buffer"]],["object",["name","object"]],["opaque",["name","null"]],["transparent",["name","null"]]]]]]]]],["block"],["defun","addBufferImmediate",["objlist","object"],[["stat",["call",["dot",["name","objlist"],"push"],[["object",[["object",["name","object"]],["opaque",["name","null"]],["transparent",["name","null"]]]]]]]]],["block"],["defun","updateObject",["object"],[["var",[["geometry",["dot",["name","object"],"geometry"]],["geometryGroup"],["customAttributesDirty"],["material"]]],["if",["binary","instanceof",["name","object"],["dot",["name","THREE"],"Mesh"]],["block",[["if",["binary","instanceof",["name","geometry"],["dot",["name","THREE"],"BufferGeometry"]],["block",[["stat",["assign",true,["dot",["name","geometry"],"verticesNeedUpdate"],["name","false"]]],["stat",["assign",true,["dot",["name","geometry"],"elementsNeedUpdate"],["name","false"]]],["stat",["assign",true,["dot",["name","geometry"],"uvsNeedUpdate"],["name","false"]]],["stat",["assign",true,["dot",["name","geometry"],"normalsNeedUpdate"],["name","false"]]],["stat",["assign",true,["dot",["name","geometry"],"colorsNeedUpdate"],["name","false"]]]]],["block",[["for",["var",[["i",["num",0]],["il",["dot",["dot",["name","geometry"],"geometryGroupsList"],"length"]]]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","geometryGroup"],["sub",["dot",["name","geometry"],"geometryGroupsList"],["name","i"]]]],["stat",["assign",true,["name","material"],["call",["name","getBufferMaterial"],[["name","object"],["name","geometryGroup"]]]]],["stat",["assign",true,["name","customAttributesDirty"],["binary","&&",["dot",["name","material"],"attributes"],["call",["name","areCustomAttributesDirty"],[["name","material"]]]]]],["if",["binary","||",["binary","||",["binary","||",["binary","||",["binary","||",["binary","||",["binary","||",["dot",["name","geometry"],"verticesNeedUpdate"],["dot",["name","geometry"],"morphTargetsNeedUpdate"]],["dot",["name","geometry"],"elementsNeedUpdate"]],["dot",["name","geometry"],"uvsNeedUpdate"]],["dot",["name","geometry"],"normalsNeedUpdate"]],["dot",["name","geometry"],"colorsNeedUpdate"]],["dot",["name","geometry"],"tangetsNeedUpdate"]],["name","customAttributesDirty"]],["block",[["stat",["call",["name","setMeshBuffers"],[["name","geometryGroup"],["name","object"],["dot",["name","_gl"],"DYNAMIC_DRAW"],["unary-prefix","!",["dot",["name","geometry"],"dynamic"]],["name","material"]]]]]],null]]]],["stat",["assign",true,["dot",["name","geometry"],"verticesNeedUpdate"],["name","false"]]],["stat",["assign",true,["dot",["name","geometry"],"morphTargetsNeedUpdate"],["name","false"]]],["stat",["assign",true,["dot",["name","geometry"],"elementsNeedUpdate"],["name","false"]]],["stat",["assign",true,["dot",["name","geometry"],"uvsNeedUpdate"],["name","false"]]],["stat",["assign",true,["dot",["name","geometry"],"normalsNeedUpdate"],["name","false"]]],["stat",["assign",true,["dot",["name","geometry"],"colorsNeedUpdate"],["name","false"]]],["stat",["assign",true,["dot",["name","geometry"],"tangetsNeedUpdate"],["name","false"]]],["stat",["binary","&&",["dot",["name","material"],"attributes"],["call",["name","clearCustomAttributes"],[["name","material"]]]]]]]]]],["if",["binary","instanceof",["name","object"],["dot",["name","THREE"],"Ribbon"]],["block",[["if",["binary","||",["dot",["name","geometry"],"verticesNeedUpdate"],["dot",["name","geometry"],"colorsNeedUpdate"]],["block",[["stat",["call",["name","setRibbonBuffers"],[["name","geometry"],["dot",["name","_gl"],"DYNAMIC_DRAW"]]]]]],null],["stat",["assign",true,["dot",["name","geometry"],"verticesNeedUpdate"],["name","false"]]],["stat",["assign",true,["dot",["name","geometry"],"colorsNeedUpdate"],["name","false"]]]]],["if",["binary","instanceof",["name","object"],["dot",["name","THREE"],"Line"]],["block",[["stat",["assign",true,["name","material"],["call",["name","getBufferMaterial"],[["name","object"],["name","geometryGroup"]]]]],["stat",["assign",true,["name","customAttributesDirty"],["binary","&&",["dot",["name","material"],"attributes"],["call",["name","areCustomAttributesDirty"],[["name","material"]]]]]],["if",["binary","||",["binary","||",["dot",["name","geometry"],"verticesNeedUpdate"],["dot",["name","geometry"],"colorsNeedUpdate"]],["name","customAttributesDirty"]],["block",[["stat",["call",["name","setLineBuffers"],[["name","geometry"],["dot",["name","_gl"],"DYNAMIC_DRAW"]]]]]],null],["stat",["assign",true,["dot",["name","geometry"],"verticesNeedUpdate"],["name","false"]]],["stat",["assign",true,["dot",["name","geometry"],"colorsNeedUpdate"],["name","false"]]],["stat",["binary","&&",["dot",["name","material"],"attributes"],["call",["name","clearCustomAttributes"],[["name","material"]]]]]]],["if",["binary","instanceof",["name","object"],["dot",["name","THREE"],"ParticleSystem"]],["block",[["stat",["assign",true,["name","material"],["call",["name","getBufferMaterial"],[["name","object"],["name","geometryGroup"]]]]],["stat",["assign",true,["name","customAttributesDirty"],["binary","&&",["dot",["name","material"],"attributes"],["call",["name","areCustomAttributesDirty"],[["name","material"]]]]]],["if",["binary","||",["binary","||",["binary","||",["dot",["name","geometry"],"verticesNeedUpdate"],["dot",["name","geometry"],"colorsNeedUpdate"]],["dot",["name","object"],"sortParticles"]],["name","customAttributesDirty"]],["block",[["stat",["call",["name","setParticleBuffers"],[["name","geometry"],["dot",["name","_gl"],"DYNAMIC_DRAW"],["name","object"]]]]]],null],["stat",["assign",true,["dot",["name","geometry"],"verticesNeedUpdate"],["name","false"]]],["stat",["assign",true,["dot",["name","geometry"],"colorsNeedUpdate"],["name","false"]]],["stat",["binary","&&",["dot",["name","material"],"attributes"],["call",["name","clearCustomAttributes"],[["name","material"]]]]]]],null]]]]]],["block"],["defun","areCustomAttributesDirty",["material"],[["for-in",["var",[["a"]]],["name",["a"]],["dot",["name","material"],"attributes"],["block",[["if",["dot",["sub",["dot",["name","material"],"attributes"],["name","a"]],"needsUpdate"],["return",["name","true"]],null]]]],["return",["name","false"]]]],["block"],["defun","clearCustomAttributes",["material"],[["for-in",["var",[["a"]]],["name",["a"]],["dot",["name","material"],"attributes"],["block",[["stat",["assign",true,["dot",["sub",["dot",["name","material"],"attributes"],["name","a"]],"needsUpdate"],["name","false"]]]]]]]],["block"],["defun","removeObject",["object","scene"],[["if",["binary","||",["binary","||",["binary","||",["binary","instanceof",["name","object"],["dot",["name","THREE"],"Mesh"]],["binary","instanceof",["name","object"],["dot",["name","THREE"],"ParticleSystem"]]],["binary","instanceof",["name","object"],["dot",["name","THREE"],"Ribbon"]]],["binary","instanceof",["name","object"],["dot",["name","THREE"],"Line"]]],["block",[["stat",["call",["name","removeInstances"],[["dot",["name","scene"],"__webglObjects"],["name","object"]]]]]],["if",["binary","instanceof",["name","object"],["dot",["name","THREE"],"Sprite"]],["block",[["stat",["call",["name","removeInstancesDirect"],[["dot",["name","scene"],"__webglSprites"],["name","object"]]]]]],["if",["binary","instanceof",["name","object"],["dot",["name","THREE"],"LensFlare"]],["block",[["stat",["call",["name","removeInstancesDirect"],[["dot",["name","scene"],"__webglFlares"],["name","object"]]]]]],["if",["binary","||",["binary","instanceof",["name","object"],["dot",["name","THREE"],"ImmediateRenderObject"]],["dot",["name","object"],"immediateRenderCallback"]],["block",[["stat",["call",["name","removeInstances"],[["dot",["name","scene"],"__webglObjectsImmediate"],["name","object"]]]]]],null]]]],["stat",["assign",true,["dot",["name","object"],"__webglActive"],["name","false"]]]]],["block"],["defun","removeInstances",["objlist","object"],[["for",["var",[["o",["binary","-",["dot",["name","objlist"],"length"],["num",1]]]]],["binary",">=",["name","o"],["num",0]],["unary-postfix","--",["name","o"]],["block",[["if",["binary","===",["dot",["sub",["name","objlist"],["name","o"]],"object"],["name","object"]],["block",[["stat",["call",["dot",["name","objlist"],"splice"],[["name","o"],["num",1]]]]]],null]]]]]],["block"],["defun","removeInstancesDirect",["objlist","object"],[["for",["var",[["o",["binary","-",["dot",["name","objlist"],"length"],["num",1]]]]],["binary",">=",["name","o"],["num",0]],["unary-postfix","--",["name","o"]],["block",[["if",["binary","===",["sub",["name","objlist"],["name","o"]],["name","object"]],["block",[["stat",["call",["dot",["name","objlist"],"splice"],[["name","o"],["num",1]]]]]],null]]]]]],["block"],["stat",["assign",true,["dot",["name","this"],"initMaterial"],["function",null,["material","lights","fog","object"],[["var",[["u"],["a"],["identifiers"],["i"],["parameters"],["maxLightCount"],["maxBones"],["maxShadows"],["shaderID"]]],["if",["binary","instanceof",["name","material"],["dot",["name","THREE"],"MeshDepthMaterial"]],["block",[["stat",["assign",true,["name","shaderID"],["string","depth"]]]]],["if",["binary","instanceof",["name","material"],["dot",["name","THREE"],"MeshNormalMaterial"]],["block",[["stat",["assign",true,["name","shaderID"],["string","normal"]]]]],["if",["binary","instanceof",["name","material"],["dot",["name","THREE"],"MeshBasicMaterial"]],["block",[["stat",["assign",true,["name","shaderID"],["string","basic"]]]]],["if",["binary","instanceof",["name","material"],["dot",["name","THREE"],"MeshLambertMaterial"]],["block",[["stat",["assign",true,["name","shaderID"],["string","lambert"]]]]],["if",["binary","instanceof",["name","material"],["dot",["name","THREE"],"MeshPhongMaterial"]],["block",[["stat",["assign",true,["name","shaderID"],["string","phong"]]]]],["if",["binary","instanceof",["name","material"],["dot",["name","THREE"],"LineBasicMaterial"]],["block",[["stat",["assign",true,["name","shaderID"],["string","basic"]]]]],["if",["binary","instanceof",["name","material"],["dot",["name","THREE"],"ParticleBasicMaterial"]],["block",[["stat",["assign",true,["name","shaderID"],["string","particle_basic"]]]]],null]]]]]]],["if",["name","shaderID"],["block",[["stat",["call",["name","setMaterialShaders"],[["name","material"],["sub",["dot",["name","THREE"],"ShaderLib"],["name","shaderID"]]]]]]],null],["stat",["assign",true,["name","maxLightCount"],["call",["name","allocateLights"],[["name","lights"]]]]],["stat",["assign",true,["name","maxShadows"],["call",["name","allocateShadows"],[["name","lights"]]]]],["stat",["assign",true,["name","maxBones"],["call",["name","allocateBones"],[["name","object"]]]]],["stat",["assign",true,["name","parameters"],["object",[["map",["unary-prefix","!",["unary-prefix","!",["dot",["name","material"],"map"]]]],["envMap",["unary-prefix","!",["unary-prefix","!",["dot",["name","material"],"envMap"]]]],["lightMap",["unary-prefix","!",["unary-prefix","!",["dot",["name","material"],"lightMap"]]]],["vertexColors",["dot",["name","material"],"vertexColors"]],["fog",["name","fog"]],["useFog",["dot",["name","material"],"fog"]],["sizeAttenuation",["dot",["name","material"],"sizeAttenuation"]],["skinning",["dot",["name","material"],"skinning"]],["maxBones",["name","maxBones"]],["morphTargets",["dot",["name","material"],"morphTargets"]],["morphNormals",["dot",["name","material"],"morphNormals"]],["maxMorphTargets",["dot",["name","this"],"maxMorphTargets"]],["maxMorphNormals",["dot",["name","this"],"maxMorphNormals"]],["maxDirLights",["dot",["name","maxLightCount"],"directional"]],["maxPointLights",["dot",["name","maxLightCount"],"point"]],["maxSpotLights",["dot",["name","maxLightCount"],"spot"]],["maxShadows",["name","maxShadows"]],["shadowMapEnabled",["binary","&&",["dot",["name","this"],"shadowMapEnabled"],["dot",["name","object"],"receiveShadow"]]],["shadowMapSoft",["dot",["name","this"],"shadowMapSoft"]],["shadowMapDebug",["dot",["name","this"],"shadowMapDebug"]],["shadowMapCascade",["dot",["name","this"],"shadowMapCascade"]],["alphaTest",["dot",["name","material"],"alphaTest"]],["metal",["dot",["name","material"],"metal"]],["perPixel",["dot",["name","material"],"perPixel"]],["wrapAround",["dot",["name","material"],"wrapAround"]],["doubleSided",["binary","&&",["name","object"],["dot",["name","object"],"doubleSided"]]]]]]],["stat",["assign",true,["dot",["name","material"],"program"],["call",["name","buildProgram"],[["name","shaderID"],["dot",["name","material"],"fragmentShader"],["dot",["name","material"],"vertexShader"],["dot",["name","material"],"uniforms"],["dot",["name","material"],"attributes"],["name","parameters"]]]]],["var",[["attributes",["dot",["dot",["name","material"],"program"],"attributes"]]]],["if",["binary",">=",["dot",["name","attributes"],"position"],["num",0]],["stat",["call",["dot",["name","_gl"],"enableVertexAttribArray"],[["dot",["name","attributes"],"position"]]]],null],["if",["binary",">=",["dot",["name","attributes"],"color"],["num",0]],["stat",["call",["dot",["name","_gl"],"enableVertexAttribArray"],[["dot",["name","attributes"],"color"]]]],null],["if",["binary",">=",["dot",["name","attributes"],"normal"],["num",0]],["stat",["call",["dot",["name","_gl"],"enableVertexAttribArray"],[["dot",["name","attributes"],"normal"]]]],null],["if",["binary",">=",["dot",["name","attributes"],"tangent"],["num",0]],["stat",["call",["dot",["name","_gl"],"enableVertexAttribArray"],[["dot",["name","attributes"],"tangent"]]]],null],["if",["binary","&&",["binary","&&",["binary","&&",["binary","&&",["dot",["name","material"],"skinning"],["binary",">=",["dot",["name","attributes"],"skinVertexA"],["num",0]]],["binary",">=",["dot",["name","attributes"],"skinVertexB"],["num",0]]],["binary",">=",["dot",["name","attributes"],"skinIndex"],["num",0]]],["binary",">=",["dot",["name","attributes"],"skinWeight"],["num",0]]],["block",[["stat",["call",["dot",["name","_gl"],"enableVertexAttribArray"],[["dot",["name","attributes"],"skinVertexA"]]]],["stat",["call",["dot",["name","_gl"],"enableVertexAttribArray"],[["dot",["name","attributes"],"skinVertexB"]]]],["stat",["call",["dot",["name","_gl"],"enableVertexAttribArray"],[["dot",["name","attributes"],"skinIndex"]]]],["stat",["call",["dot",["name","_gl"],"enableVertexAttribArray"],[["dot",["name","attributes"],"skinWeight"]]]]]],null],["if",["dot",["name","material"],"attributes"],["block",[["for-in",["name","a"],["name","a"],["dot",["name","material"],"attributes"],["block",[["if",["binary","&&",["binary","!==",["sub",["name","attributes"],["name","a"]],["name","undefined"]],["binary",">=",["sub",["name","attributes"],["name","a"]],["num",0]]],["stat",["call",["dot",["name","_gl"],"enableVertexAttribArray"],[["sub",["name","attributes"],["name","a"]]]]],null]]]]]],null],["if",["dot",["name","material"],"morphTargets"],["block",[["stat",["assign",true,["dot",["name","material"],"numSupportedMorphTargets"],["num",0]]],["var",[["id"],["base",["string","morphTarget"]]]],["for",["assign",true,["name","i"],["num",0]],["binary","<",["name","i"],["dot",["name","this"],"maxMorphTargets"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","id"],["binary","+",["name","base"],["name","i"]]]],["if",["binary",">=",["sub",["name","attributes"],["name","id"]],["num",0]],["block",[["stat",["call",["dot",["name","_gl"],"enableVertexAttribArray"],[["sub",["name","attributes"],["name","id"]]]]],["stat",["unary-postfix","++",["dot",["name","material"],"numSupportedMorphTargets"]]]]],null]]]]]],null],["if",["dot",["name","material"],"morphNormals"],["block",[["stat",["assign",true,["dot",["name","material"],"numSupportedMorphNormals"],["num",0]]],["var",[["id"],["base",["string","morphNormal"]]]],["for",["assign",true,["name","i"],["num",0]],["binary","<",["name","i"],["dot",["name","this"],"maxMorphNormals"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","id"],["binary","+",["name","base"],["name","i"]]]],["if",["binary",">=",["sub",["name","attributes"],["name","id"]],["num",0]],["block",[["stat",["call",["dot",["name","_gl"],"enableVertexAttribArray"],[["sub",["name","attributes"],["name","id"]]]]],["stat",["unary-postfix","++",["dot",["name","material"],"numSupportedMorphNormals"]]]]],null]]]]]],null],["stat",["assign",true,["dot",["name","material"],"uniformsList"],["array",[]]]],["for-in",["name","u"],["name","u"],["dot",["name","material"],"uniforms"],["block",[["stat",["call",["dot",["dot",["name","material"],"uniformsList"],"push"],[["array",[["sub",["dot",["name","material"],"uniforms"],["name","u"]],["name","u"]]]]]]]]]]]]],["defun","setMaterialShaders",["material","shaders"],[["stat",["assign",true,["dot",["name","material"],"uniforms"],["call",["dot",["dot",["name","THREE"],"UniformsUtils"],"clone"],[["dot",["name","shaders"],"uniforms"]]]]],["stat",["assign",true,["dot",["name","material"],"vertexShader"],["dot",["name","shaders"],"vertexShader"]]],["stat",["assign",true,["dot",["name","material"],"fragmentShader"],["dot",["name","shaders"],"fragmentShader"]]]]],["block"],["defun","setProgram",["camera","lights","fog","material","object"],[["if",["binary","||",["unary-prefix","!",["dot",["name","material"],"program"]],["dot",["name","material"],"needsUpdate"]],["block",[["stat",["call",["dot",["name","_this"],"initMaterial"],[["name","material"],["name","lights"],["name","fog"],["name","object"]]]],["stat",["assign",true,["dot",["name","material"],"needsUpdate"],["name","false"]]]]],null],["if",["dot",["name","material"],"morphTargets"],["block",[["if",["unary-prefix","!",["dot",["name","object"],"__webglMorphTargetInfluences"]],["block",[["stat",["assign",true,["dot",["name","object"],"__webglMorphTargetInfluences"],["new",["name","Float32Array"],[["dot",["name","_this"],"maxMorphTargets"]]]]],["for",["var",[["i",["num",0]],["il",["dot",["name","_this"],"maxMorphTargets"]]]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["sub",["dot",["name","object"],"__webglMorphTargetInfluences"],["name","i"]],["num",0]]]]]]]],null]]],null],["var",[["refreshMaterial",["name","false"]]]],["var",[["program",["dot",["name","material"],"program"]],["p_uniforms",["dot",["name","program"],"uniforms"]],["m_uniforms",["dot",["name","material"],"uniforms"]]]],["if",["binary","!==",["name","program"],["name","_currentProgram"]],["block",[["stat",["call",["dot",["name","_gl"],"useProgram"],[["name","program"]]]],["stat",["assign",true,["name","_currentProgram"],["name","program"]]],["stat",["assign",true,["name","refreshMaterial"],["name","true"]]]]],null],["if",["binary","!==",["dot",["name","material"],"id"],["name","_currentMaterialId"]],["block",[["stat",["assign",true,["name","_currentMaterialId"],["dot",["name","material"],"id"]]],["stat",["assign",true,["name","refreshMaterial"],["name","true"]]]]],null],["if",["binary","||",["name","refreshMaterial"],["binary","!==",["name","camera"],["name","_currentCamera"]]],["block",[["stat",["call",["dot",["name","_gl"],"uniformMatrix4fv"],[["dot",["name","p_uniforms"],"projectionMatrix"],["name","false"],["dot",["name","camera"],"_projectionMatrixArray"]]]],["if",["binary","!==",["name","camera"],["name","_currentCamera"]],["stat",["assign",true,["name","_currentCamera"],["name","camera"]]],null]]],null],["if",["name","refreshMaterial"],["block",[["if",["binary","&&",["name","fog"],["dot",["name","material"],"fog"]],["block",[["stat",["call",["name","refreshUniformsFog"],[["name","m_uniforms"],["name","fog"]]]]]],null],["if",["binary","||",["binary","||",["binary","instanceof",["name","material"],["dot",["name","THREE"],"MeshPhongMaterial"]],["binary","instanceof",["name","material"],["dot",["name","THREE"],"MeshLambertMaterial"]]],["dot",["name","material"],"lights"]],["block",[["if",["name","_lightsNeedUpdate"],["block",[["stat",["call",["name","setupLights"],[["name","program"],["name","lights"]]]],["stat",["assign",true,["name","_lightsNeedUpdate"],["name","false"]]]]],null],["stat",["call",["name","refreshUniformsLights"],[["name","m_uniforms"],["name","_lights"]]]]]],null],["if",["binary","||",["binary","||",["binary","instanceof",["name","material"],["dot",["name","THREE"],"MeshBasicMaterial"]],["binary","instanceof",["name","material"],["dot",["name","THREE"],"MeshLambertMaterial"]]],["binary","instanceof",["name","material"],["dot",["name","THREE"],"MeshPhongMaterial"]]],["block",[["stat",["call",["name","refreshUniformsCommon"],[["name","m_uniforms"],["name","material"]]]]]],null],["if",["binary","instanceof",["name","material"],["dot",["name","THREE"],"LineBasicMaterial"]],["block",[["stat",["call",["name","refreshUniformsLine"],[["name","m_uniforms"],["name","material"]]]]]],["if",["binary","instanceof",["name","material"],["dot",["name","THREE"],"ParticleBasicMaterial"]],["block",[["stat",["call",["name","refreshUniformsParticle"],[["name","m_uniforms"],["name","material"]]]]]],["if",["binary","instanceof",["name","material"],["dot",["name","THREE"],"MeshPhongMaterial"]],["block",[["stat",["call",["name","refreshUniformsPhong"],[["name","m_uniforms"],["name","material"]]]]]],["if",["binary","instanceof",["name","material"],["dot",["name","THREE"],"MeshLambertMaterial"]],["block",[["stat",["call",["name","refreshUniformsLambert"],[["name","m_uniforms"],["name","material"]]]]]],["if",["binary","instanceof",["name","material"],["dot",["name","THREE"],"MeshDepthMaterial"]],["block",[["stat",["assign",true,["dot",["dot",["name","m_uniforms"],"mNear"],"value"],["dot",["name","camera"],"near"]]],["stat",["assign",true,["dot",["dot",["name","m_uniforms"],"mFar"],"value"],["dot",["name","camera"],"far"]]],["stat",["assign",true,["dot",["dot",["name","m_uniforms"],"opacity"],"value"],["dot",["name","material"],"opacity"]]]]],["if",["binary","instanceof",["name","material"],["dot",["name","THREE"],"MeshNormalMaterial"]],["block",[["stat",["assign",true,["dot",["dot",["name","m_uniforms"],"opacity"],"value"],["dot",["name","material"],"opacity"]]]]],null]]]]]],["if",["binary","&&",["dot",["name","object"],"receiveShadow"],["unary-prefix","!",["dot",["name","material"],"_shadowPass"]]],["block",[["stat",["call",["name","refreshUniformsShadow"],[["name","m_uniforms"],["name","lights"]]]]]],null],["stat",["call",["name","loadUniformsGeneric"],[["name","program"],["dot",["name","material"],"uniformsList"]]]],["if",["binary","||",["binary","||",["binary","instanceof",["name","material"],["dot",["name","THREE"],"ShaderMaterial"]],["binary","instanceof",["name","material"],["dot",["name","THREE"],"MeshPhongMaterial"]]],["dot",["name","material"],"envMap"]],["block",[["if",["binary","!==",["dot",["name","p_uniforms"],"cameraPosition"],["name","null"]],["block",[["var",[["position",["call",["dot",["dot",["name","camera"],"matrixWorld"],"getPosition"],[]]]]],["stat",["call",["dot",["name","_gl"],"uniform3f"],[["dot",["name","p_uniforms"],"cameraPosition"],["dot",["name","position"],"x"],["dot",["name","position"],"y"],["dot",["name","position"],"z"]]]]]],null]]],null],["if",["binary","||",["binary","||",["binary","||",["binary","instanceof",["name","material"],["dot",["name","THREE"],"MeshPhongMaterial"]],["binary","instanceof",["name","material"],["dot",["name","THREE"],"MeshLambertMaterial"]]],["binary","instanceof",["name","material"],["dot",["name","THREE"],"ShaderMaterial"]]],["dot",["name","material"],"skinning"]],["block",[["if",["binary","!==",["dot",["name","p_uniforms"],"viewMatrix"],["name","null"]],["block",[["stat",["call",["dot",["name","_gl"],"uniformMatrix4fv"],[["dot",["name","p_uniforms"],"viewMatrix"],["name","false"],["dot",["name","camera"],"_viewMatrixArray"]]]]]],null]]],null],["if",["dot",["name","material"],"skinning"],["block",[["stat",["call",["dot",["name","_gl"],"uniformMatrix4fv"],[["dot",["name","p_uniforms"],"boneGlobalMatrices"],["name","false"],["dot",["name","object"],"boneMatrices"]]]]]],null]]],null],["stat",["call",["name","loadUniformsMatrices"],[["name","p_uniforms"],["name","object"]]]],["if",["binary","!==",["dot",["name","p_uniforms"],"objectMatrix"],["name","null"]],["block",[["stat",["call",["dot",["name","_gl"],"uniformMatrix4fv"],[["dot",["name","p_uniforms"],"objectMatrix"],["name","false"],["dot",["dot",["name","object"],"matrixWorld"],"elements"]]]]]],null],["return",["name","program"]]]],["block"],["defun","refreshUniformsCommon",["uniforms","material"],[["stat",["assign",true,["dot",["dot",["name","uniforms"],"opacity"],"value"],["dot",["name","material"],"opacity"]]],["if",["dot",["name","_this"],"gammaInput"],["block",[["stat",["call",["dot",["dot",["dot",["name","uniforms"],"diffuse"],"value"],"copyGammaToLinear"],[["dot",["name","material"],"color"]]]]]],["block",[["stat",["assign",true,["dot",["dot",["name","uniforms"],"diffuse"],"value"],["dot",["name","material"],"color"]]]]]],["stat",["assign",true,["dot",["dot",["name","uniforms"],"map"],"texture"],["dot",["name","material"],"map"]]],["if",["dot",["name","material"],"map"],["block",[["stat",["call",["dot",["dot",["dot",["name","uniforms"],"offsetRepeat"],"value"],"set"],[["dot",["dot",["dot",["name","material"],"map"],"offset"],"x"],["dot",["dot",["dot",["name","material"],"map"],"offset"],"y"],["dot",["dot",["dot",["name","material"],"map"],"repeat"],"x"],["dot",["dot",["dot",["name","material"],"map"],"repeat"],"y"]]]]]],null],["stat",["assign",true,["dot",["dot",["name","uniforms"],"lightMap"],"texture"],["dot",["name","material"],"lightMap"]]],["stat",["assign",true,["dot",["dot",["name","uniforms"],"envMap"],"texture"],["dot",["name","material"],"envMap"]]],["stat",["assign",true,["dot",["dot",["name","uniforms"],"flipEnvMap"],"value"],["conditional",["binary","instanceof",["dot",["name","material"],"envMap"],["dot",["name","THREE"],"WebGLRenderTargetCube"]],["num",1],["unary-prefix","-",["num",1]]]]],["if",["dot",["name","_this"],"gammaInput"],["block",[["stat",["assign",true,["dot",["dot",["name","uniforms"],"reflectivity"],"value"],["dot",["name","material"],"reflectivity"]]]]],["block",[["stat",["assign",true,["dot",["dot",["name","uniforms"],"reflectivity"],"value"],["dot",["name","material"],"reflectivity"]]]]]],["stat",["assign",true,["dot",["dot",["name","uniforms"],"refractionRatio"],"value"],["dot",["name","material"],"refractionRatio"]]],["stat",["assign",true,["dot",["dot",["name","uniforms"],"combine"],"value"],["dot",["name","material"],"combine"]]],["stat",["assign",true,["dot",["dot",["name","uniforms"],"useRefract"],"value"],["binary","&&",["dot",["name","material"],"envMap"],["binary","instanceof",["dot",["dot",["name","material"],"envMap"],"mapping"],["dot",["name","THREE"],"CubeRefractionMapping"]]]]]]],["block"],["defun","refreshUniformsLine",["uniforms","material"],[["stat",["assign",true,["dot",["dot",["name","uniforms"],"diffuse"],"value"],["dot",["name","material"],"color"]]],["stat",["assign",true,["dot",["dot",["name","uniforms"],"opacity"],"value"],["dot",["name","material"],"opacity"]]]]],["block"],["defun","refreshUniformsParticle",["uniforms","material"],[["stat",["assign",true,["dot",["dot",["name","uniforms"],"psColor"],"value"],["dot",["name","material"],"color"]]],["stat",["assign",true,["dot",["dot",["name","uniforms"],"opacity"],"value"],["dot",["name","material"],"opacity"]]],["stat",["assign",true,["dot",["dot",["name","uniforms"],"size"],"value"],["dot",["name","material"],"size"]]],["stat",["assign",true,["dot",["dot",["name","uniforms"],"scale"],"value"],["binary","/",["dot",["name","_canvas"],"height"],["num",2]]]],["stat",["assign",true,["dot",["dot",["name","uniforms"],"map"],"texture"],["dot",["name","material"],"map"]]]]],["block"],["defun","refreshUniformsFog",["uniforms","fog"],[["stat",["assign",true,["dot",["dot",["name","uniforms"],"fogColor"],"value"],["dot",["name","fog"],"color"]]],["if",["binary","instanceof",["name","fog"],["dot",["name","THREE"],"Fog"]],["block",[["stat",["assign",true,["dot",["dot",["name","uniforms"],"fogNear"],"value"],["dot",["name","fog"],"near"]]],["stat",["assign",true,["dot",["dot",["name","uniforms"],"fogFar"],"value"],["dot",["name","fog"],"far"]]]]],["if",["binary","instanceof",["name","fog"],["dot",["name","THREE"],"FogExp2"]],["block",[["stat",["assign",true,["dot",["dot",["name","uniforms"],"fogDensity"],"value"],["dot",["name","fog"],"density"]]]]],null]]]],["block"],["defun","refreshUniformsPhong",["uniforms","material"],[["stat",["assign",true,["dot",["dot",["name","uniforms"],"shininess"],"value"],["dot",["name","material"],"shininess"]]],["if",["dot",["name","_this"],"gammaInput"],["block",[["stat",["call",["dot",["dot",["dot",["name","uniforms"],"ambient"],"value"],"copyGammaToLinear"],[["dot",["name","material"],"ambient"]]]],["stat",["call",["dot",["dot",["dot",["name","uniforms"],"emissive"],"value"],"copyGammaToLinear"],[["dot",["name","material"],"emissive"]]]],["stat",["call",["dot",["dot",["dot",["name","uniforms"],"specular"],"value"],"copyGammaToLinear"],[["dot",["name","material"],"specular"]]]]]],["block",[["stat",["assign",true,["dot",["dot",["name","uniforms"],"ambient"],"value"],["dot",["name","material"],"ambient"]]],["stat",["assign",true,["dot",["dot",["name","uniforms"],"emissive"],"value"],["dot",["name","material"],"emissive"]]],["stat",["assign",true,["dot",["dot",["name","uniforms"],"specular"],"value"],["dot",["name","material"],"specular"]]]]]],["if",["dot",["name","material"],"wrapAround"],["block",[["stat",["call",["dot",["dot",["dot",["name","uniforms"],"wrapRGB"],"value"],"copy"],[["dot",["name","material"],"wrapRGB"]]]]]],null]]],["block"],["defun","refreshUniformsLambert",["uniforms","material"],[["if",["dot",["name","_this"],"gammaInput"],["block",[["stat",["call",["dot",["dot",["dot",["name","uniforms"],"ambient"],"value"],"copyGammaToLinear"],[["dot",["name","material"],"ambient"]]]],["stat",["call",["dot",["dot",["dot",["name","uniforms"],"emissive"],"value"],"copyGammaToLinear"],[["dot",["name","material"],"emissive"]]]]]],["block",[["stat",["assign",true,["dot",["dot",["name","uniforms"],"ambient"],"value"],["dot",["name","material"],"ambient"]]],["stat",["assign",true,["dot",["dot",["name","uniforms"],"emissive"],"value"],["dot",["name","material"],"emissive"]]]]]],["if",["dot",["name","material"],"wrapAround"],["block",[["stat",["call",["dot",["dot",["dot",["name","uniforms"],"wrapRGB"],"value"],"copy"],[["dot",["name","material"],"wrapRGB"]]]]]],null]]],["block"],["defun","refreshUniformsLights",["uniforms","lights"],[["stat",["assign",true,["dot",["dot",["name","uniforms"],"ambientLightColor"],"value"],["dot",["name","lights"],"ambient"]]],["stat",["assign",true,["dot",["dot",["name","uniforms"],"directionalLightColor"],"value"],["dot",["dot",["name","lights"],"directional"],"colors"]]],["stat",["assign",true,["dot",["dot",["name","uniforms"],"directionalLightDirection"],"value"],["dot",["dot",["name","lights"],"directional"],"positions"]]],["stat",["assign",true,["dot",["dot",["name","uniforms"],"pointLightColor"],"value"],["dot",["dot",["name","lights"],"point"],"colors"]]],["stat",["assign",true,["dot",["dot",["name","uniforms"],"pointLightPosition"],"value"],["dot",["dot",["name","lights"],"point"],"positions"]]],["stat",["assign",true,["dot",["dot",["name","uniforms"],"pointLightDistance"],"value"],["dot",["dot",["name","lights"],"point"],"distances"]]],["stat",["assign",true,["dot",["dot",["name","uniforms"],"spotLightColor"],"value"],["dot",["dot",["name","lights"],"spot"],"colors"]]],["stat",["assign",true,["dot",["dot",["name","uniforms"],"spotLightPosition"],"value"],["dot",["dot",["name","lights"],"spot"],"positions"]]],["stat",["assign",true,["dot",["dot",["name","uniforms"],"spotLightDistance"],"value"],["dot",["dot",["name","lights"],"spot"],"distances"]]],["stat",["assign",true,["dot",["dot",["name","uniforms"],"spotLightDirection"],"value"],["dot",["dot",["name","lights"],"spot"],"directions"]]],["stat",["assign",true,["dot",["dot",["name","uniforms"],"spotLightAngle"],"value"],["dot",["dot",["name","lights"],"spot"],"angles"]]],["stat",["assign",true,["dot",["dot",["name","uniforms"],"spotLightExponent"],"value"],["dot",["dot",["name","lights"],"spot"],"exponents"]]]]],["block"],["defun","refreshUniformsShadow",["uniforms","lights"],[["if",["dot",["name","uniforms"],"shadowMatrix"],["block",[["var",[["j",["num",0]]]],["for",["var",[["i",["num",0]],["il",["dot",["name","lights"],"length"]]]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["block",[["var",[["light",["sub",["name","lights"],["name","i"]]]]],["if",["unary-prefix","!",["dot",["name","light"],"castShadow"]],["continue",null],null],["if",["binary","||",["binary","instanceof",["name","light"],["dot",["name","THREE"],"SpotLight"]],["binary","&&",["binary","instanceof",["name","light"],["dot",["name","THREE"],"DirectionalLight"]],["unary-prefix","!",["dot",["name","light"],"shadowCascade"]]]],["block",[["stat",["assign",true,["sub",["dot",["dot",["name","uniforms"],"shadowMap"],"texture"],["name","j"]],["dot",["name","light"],"shadowMap"]]],["stat",["assign",true,["sub",["dot",["dot",["name","uniforms"],"shadowMapSize"],"value"],["name","j"]],["dot",["name","light"],"shadowMapSize"]]],["stat",["assign",true,["sub",["dot",["dot",["name","uniforms"],"shadowMatrix"],"value"],["name","j"]],["dot",["name","light"],"shadowMatrix"]]],["stat",["assign",true,["sub",["dot",["dot",["name","uniforms"],"shadowDarkness"],"value"],["name","j"]],["dot",["name","light"],"shadowDarkness"]]],["stat",["assign",true,["sub",["dot",["dot",["name","uniforms"],"shadowBias"],"value"],["name","j"]],["dot",["name","light"],"shadowBias"]]],["stat",["unary-postfix","++",["name","j"]]]]],null]]]]]],null]]],["block"],["defun","loadUniformsMatrices",["uniforms","object"],[["stat",["call",["dot",["name","_gl"],"uniformMatrix4fv"],[["dot",["name","uniforms"],"modelViewMatrix"],["name","false"],["dot",["dot",["name","object"],"_modelViewMatrix"],"elements"]]]],["if",["dot",["name","uniforms"],"normalMatrix"],["block",[["stat",["call",["dot",["name","_gl"],"uniformMatrix3fv"],[["dot",["name","uniforms"],"normalMatrix"],["name","false"],["dot",["dot",["name","object"],"_normalMatrix"],"elements"]]]]]],null]]],["block"],["defun","loadUniformsGeneric",["program","uniforms"],[["var",[["uniform"],["value"],["type"],["location"],["texture"],["i"],["il"],["j"],["jl"],["offset"]]],["for",["seq",["assign",true,["name","j"],["num",0]],["assign",true,["name","jl"],["dot",["name","uniforms"],"length"]]],["binary","<",["name","j"],["name","jl"]],["unary-postfix","++",["name","j"]],["block",[["stat",["assign",true,["name","location"],["sub",["dot",["name","program"],"uniforms"],["sub",["sub",["name","uniforms"],["name","j"]],["num",1]]]]],["if",["unary-prefix","!",["name","location"]],["continue",null],null],["stat",["assign",true,["name","uniform"],["sub",["sub",["name","uniforms"],["name","j"]],["num",0]]]],["stat",["assign",true,["name","type"],["dot",["name","uniform"],"type"]]],["stat",["assign",true,["name","value"],["dot",["name","uniform"],"value"]]],["switch",["name","type"],[[["string","i"],[["stat",["call",["dot",["name","_gl"],"uniform1i"],[["name","location"],["name","value"]]]],["break",null]]],[["string","f"],[["stat",["call",["dot",["name","_gl"],"uniform1f"],[["name","location"],["name","value"]]]],["break",null]]],[["string","v2"],[["stat",["call",["dot",["name","_gl"],"uniform2f"],[["name","location"],["dot",["name","value"],"x"],["dot",["name","value"],"y"]]]],["break",null]]],[["string","v3"],[["stat",["call",["dot",["name","_gl"],"uniform3f"],[["name","location"],["dot",["name","value"],"x"],["dot",["name","value"],"y"],["dot",["name","value"],"z"]]]],["break",null]]],[["string","v4"],[["stat",["call",["dot",["name","_gl"],"uniform4f"],[["name","location"],["dot",["name","value"],"x"],["dot",["name","value"],"y"],["dot",["name","value"],"z"],["dot",["name","value"],"w"]]]],["break",null]]],[["string","c"],[["stat",["call",["dot",["name","_gl"],"uniform3f"],[["name","location"],["dot",["name","value"],"r"],["dot",["name","value"],"g"],["dot",["name","value"],"b"]]]],["break",null]]],[["string","fv1"],[["stat",["call",["dot",["name","_gl"],"uniform1fv"],[["name","location"],["name","value"]]]],["break",null]]],[["string","fv"],[["stat",["call",["dot",["name","_gl"],"uniform3fv"],[["name","location"],["name","value"]]]],["break",null]]],[["string","v2v"],[["if",["unary-prefix","!",["dot",["name","uniform"],"_array"]],["block",[["stat",["assign",true,["dot",["name","uniform"],"_array"],["new",["name","Float32Array"],[["binary","*",["num",2],["dot",["name","value"],"length"]]]]]]]],null],["for",["seq",["assign",true,["name","i"],["num",0]],["assign",true,["name","il"],["dot",["name","value"],"length"]]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","offset"],["binary","*",["name","i"],["num",2]]]],["stat",["assign",true,["sub",["dot",["name","uniform"],"_array"],["name","offset"]],["dot",["sub",["name","value"],["name","i"]],"x"]]],["stat",["assign",true,["sub",["dot",["name","uniform"],"_array"],["binary","+",["name","offset"],["num",1]]],["dot",["sub",["name","value"],["name","i"]],"y"]]]]]],["stat",["call",["dot",["name","_gl"],"uniform2fv"],[["name","location"],["dot",["name","uniform"],"_array"]]]],["break",null]]],[["string","v3v"],[["if",["unary-prefix","!",["dot",["name","uniform"],"_array"]],["block",[["stat",["assign",true,["dot",["name","uniform"],"_array"],["new",["name","Float32Array"],[["binary","*",["num",3],["dot",["name","value"],"length"]]]]]]]],null],["for",["seq",["assign",true,["name","i"],["num",0]],["assign",true,["name","il"],["dot",["name","value"],"length"]]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","offset"],["binary","*",["name","i"],["num",3]]]],["stat",["assign",true,["sub",["dot",["name","uniform"],"_array"],["name","offset"]],["dot",["sub",["name","value"],["name","i"]],"x"]]],["stat",["assign",true,["sub",["dot",["name","uniform"],"_array"],["binary","+",["name","offset"],["num",1]]],["dot",["sub",["name","value"],["name","i"]],"y"]]],["stat",["assign",true,["sub",["dot",["name","uniform"],"_array"],["binary","+",["name","offset"],["num",2]]],["dot",["sub",["name","value"],["name","i"]],"z"]]]]]],["stat",["call",["dot",["name","_gl"],"uniform3fv"],[["name","location"],["dot",["name","uniform"],"_array"]]]],["break",null]]],[["string","v4v"],[["if",["unary-prefix","!",["dot",["name","uniform"],"_array"]],["block",[["stat",["assign",true,["dot",["name","uniform"],"_array"],["new",["name","Float32Array"],[["binary","*",["num",4],["dot",["name","value"],"length"]]]]]]]],null],["for",["seq",["assign",true,["name","i"],["num",0]],["assign",true,["name","il"],["dot",["name","value"],"length"]]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","offset"],["binary","*",["name","i"],["num",4]]]],["stat",["assign",true,["sub",["dot",["name","uniform"],"_array"],["name","offset"]],["dot",["sub",["name","value"],["name","i"]],"x"]]],["stat",["assign",true,["sub",["dot",["name","uniform"],"_array"],["binary","+",["name","offset"],["num",1]]],["dot",["sub",["name","value"],["name","i"]],"y"]]],["stat",["assign",true,["sub",["dot",["name","uniform"],"_array"],["binary","+",["name","offset"],["num",2]]],["dot",["sub",["name","value"],["name","i"]],"z"]]],["stat",["assign",true,["sub",["dot",["name","uniform"],"_array"],["binary","+",["name","offset"],["num",3]]],["dot",["sub",["name","value"],["name","i"]],"w"]]]]]],["stat",["call",["dot",["name","_gl"],"uniform4fv"],[["name","location"],["dot",["name","uniform"],"_array"]]]],["break",null]]],[["string","m4"],[["if",["unary-prefix","!",["dot",["name","uniform"],"_array"]],["block",[["stat",["assign",true,["dot",["name","uniform"],"_array"],["new",["name","Float32Array"],[["num",16]]]]]]],null],["stat",["call",["dot",["name","value"],"flattenToArray"],[["dot",["name","uniform"],"_array"]]]],["stat",["call",["dot",["name","_gl"],"uniformMatrix4fv"],[["name","location"],["name","false"],["dot",["name","uniform"],"_array"]]]],["break",null]]],[["string","m4v"],[["if",["unary-prefix","!",["dot",["name","uniform"],"_array"]],["block",[["stat",["assign",true,["dot",["name","uniform"],"_array"],["new",["name","Float32Array"],[["binary","*",["num",16],["dot",["name","value"],"length"]]]]]]]],null],["for",["seq",["assign",true,["name","i"],["num",0]],["assign",true,["name","il"],["dot",["name","value"],"length"]]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["block",[["stat",["call",["dot",["sub",["name","value"],["name","i"]],"flattenToArrayOffset"],[["dot",["name","uniform"],"_array"],["binary","*",["name","i"],["num",16]]]]]]]],["stat",["call",["dot",["name","_gl"],"uniformMatrix4fv"],[["name","location"],["name","false"],["dot",["name","uniform"],"_array"]]]],["break",null]]],[["string","t"],[["stat",["call",["dot",["name","_gl"],"uniform1i"],[["name","location"],["name","value"]]]],["stat",["assign",true,["name","texture"],["dot",["name","uniform"],"texture"]]],["if",["unary-prefix","!",["name","texture"]],["continue",null],null],["if",["binary","&&",["binary","instanceof",["dot",["name","texture"],"image"],["name","Array"]],["binary","===",["dot",["dot",["name","texture"],"image"],"length"],["num",6]]],["block",[["stat",["call",["name","setCubeTexture"],[["name","texture"],["name","value"]]]]]],["if",["binary","instanceof",["name","texture"],["dot",["name","THREE"],"WebGLRenderTargetCube"]],["block",[["stat",["call",["name","setCubeTextureDynamic"],[["name","texture"],["name","value"]]]]]],["block",[["stat",["call",["dot",["name","_this"],"setTexture"],[["name","texture"],["name","value"]]]]]]]],["break",null]]],[["string","tv"],[["if",["unary-prefix","!",["dot",["name","uniform"],"_array"]],["block",[["stat",["assign",true,["dot",["name","uniform"],"_array"],["array",[]]]],["for",["seq",["assign",true,["name","i"],["num",0]],["assign",true,["name","il"],["dot",["dot",["name","uniform"],"texture"],"length"]]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["sub",["dot",["name","uniform"],"_array"],["name","i"]],["binary","+",["name","value"],["name","i"]]]]]]]]],null],["stat",["call",["dot",["name","_gl"],"uniform1iv"],[["name","location"],["dot",["name","uniform"],"_array"]]]],["for",["seq",["assign",true,["name","i"],["num",0]],["assign",true,["name","il"],["dot",["dot",["name","uniform"],"texture"],"length"]]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","texture"],["sub",["dot",["name","uniform"],"texture"],["name","i"]]]],["if",["unary-prefix","!",["name","texture"]],["continue",null],null],["stat",["call",["dot",["name","_this"],"setTexture"],[["name","texture"],["sub",["dot",["name","uniform"],"_array"],["name","i"]]]]]]]],["break",null]]]]]]]]]],["block"],["defun","setupMatrices",["object","camera"],[["stat",["call",["dot",["dot",["name","object"],"_modelViewMatrix"],"multiply"],[["dot",["name","camera"],"matrixWorldInverse"],["dot",["name","object"],"matrixWorld"]]]],["stat",["call",["dot",["dot",["name","object"],"_normalMatrix"],"getInverse"],[["dot",["name","object"],"_modelViewMatrix"]]]],["stat",["call",["dot",["dot",["name","object"],"_normalMatrix"],"transpose"],[]]]]],["block"],["defun","setupLights",["program","lights"],[["var",[["l"],["ll"],["light"],["n"],["r",["num",0]],["g",["num",0]],["b",["num",0]],["color"],["position"],["intensity"],["distance"],["zlights",["name","_lights"]],["dcolors",["dot",["dot",["name","zlights"],"directional"],"colors"]],["dpositions",["dot",["dot",["name","zlights"],"directional"],"positions"]],["pcolors",["dot",["dot",["name","zlights"],"point"],"colors"]],["ppositions",["dot",["dot",["name","zlights"],"point"],"positions"]],["pdistances",["dot",["dot",["name","zlights"],"point"],"distances"]],["scolors",["dot",["dot",["name","zlights"],"spot"],"colors"]],["spositions",["dot",["dot",["name","zlights"],"spot"],"positions"]],["sdistances",["dot",["dot",["name","zlights"],"spot"],"distances"]],["sdirections",["dot",["dot",["name","zlights"],"spot"],"directions"]],["sangles",["dot",["dot",["name","zlights"],"spot"],"angles"]],["sexponents",["dot",["dot",["name","zlights"],"spot"],"exponents"]],["dlength",["num",0]],["plength",["num",0]],["slength",["num",0]],["doffset",["num",0]],["poffset",["num",0]],["soffset",["num",0]]]],["for",["seq",["assign",true,["name","l"],["num",0]],["assign",true,["name","ll"],["dot",["name","lights"],"length"]]],["binary","<",["name","l"],["name","ll"]],["unary-postfix","++",["name","l"]],["block",[["stat",["assign",true,["name","light"],["sub",["name","lights"],["name","l"]]]],["if",["dot",["name","light"],"onlyShadow"],["continue",null],null],["stat",["assign",true,["name","color"],["dot",["name","light"],"color"]]],["stat",["assign",true,["name","intensity"],["dot",["name","light"],"intensity"]]],["stat",["assign",true,["name","distance"],["dot",["name","light"],"distance"]]],["if",["binary","instanceof",["name","light"],["dot",["name","THREE"],"AmbientLight"]],["block",[["if",["dot",["name","_this"],"gammaInput"],["block",[["stat",["assign","+",["name","r"],["binary","*",["dot",["name","color"],"r"],["dot",["name","color"],"r"]]]],["stat",["assign","+",["name","g"],["binary","*",["dot",["name","color"],"g"],["dot",["name","color"],"g"]]]],["stat",["assign","+",["name","b"],["binary","*",["dot",["name","color"],"b"],["dot",["name","color"],"b"]]]]]],["block",[["stat",["assign","+",["name","r"],["dot",["name","color"],"r"]]],["stat",["assign","+",["name","g"],["dot",["name","color"],"g"]]],["stat",["assign","+",["name","b"],["dot",["name","color"],"b"]]]]]]]],["if",["binary","instanceof",["name","light"],["dot",["name","THREE"],"DirectionalLight"]],["block",[["stat",["assign",true,["name","doffset"],["binary","*",["name","dlength"],["num",3]]]],["if",["dot",["name","_this"],"gammaInput"],["block",[["stat",["assign",true,["sub",["name","dcolors"],["name","doffset"]],["binary","*",["binary","*",["binary","*",["dot",["name","color"],"r"],["dot",["name","color"],"r"]],["name","intensity"]],["name","intensity"]]]],["stat",["assign",true,["sub",["name","dcolors"],["binary","+",["name","doffset"],["num",1]]],["binary","*",["binary","*",["binary","*",["dot",["name","color"],"g"],["dot",["name","color"],"g"]],["name","intensity"]],["name","intensity"]]]],["stat",["assign",true,["sub",["name","dcolors"],["binary","+",["name","doffset"],["num",2]]],["binary","*",["binary","*",["binary","*",["dot",["name","color"],"b"],["dot",["name","color"],"b"]],["name","intensity"]],["name","intensity"]]]]]],["block",[["stat",["assign",true,["sub",["name","dcolors"],["name","doffset"]],["binary","*",["dot",["name","color"],"r"],["name","intensity"]]]],["stat",["assign",true,["sub",["name","dcolors"],["binary","+",["name","doffset"],["num",1]]],["binary","*",["dot",["name","color"],"g"],["name","intensity"]]]],["stat",["assign",true,["sub",["name","dcolors"],["binary","+",["name","doffset"],["num",2]]],["binary","*",["dot",["name","color"],"b"],["name","intensity"]]]]]]],["stat",["call",["dot",["name","_direction"],"copy"],[["call",["dot",["dot",["name","light"],"matrixWorld"],"getPosition"],[]]]]],["stat",["call",["dot",["name","_direction"],"subSelf"],[["call",["dot",["dot",["dot",["name","light"],"target"],"matrixWorld"],"getPosition"],[]]]]],["stat",["call",["dot",["name","_direction"],"normalize"],[]]],["stat",["assign",true,["sub",["name","dpositions"],["name","doffset"]],["dot",["name","_direction"],"x"]]],["stat",["assign",true,["sub",["name","dpositions"],["binary","+",["name","doffset"],["num",1]]],["dot",["name","_direction"],"y"]]],["stat",["assign",true,["sub",["name","dpositions"],["binary","+",["name","doffset"],["num",2]]],["dot",["name","_direction"],"z"]]],["stat",["assign","+",["name","dlength"],["num",1]]]]],["if",["binary","instanceof",["name","light"],["dot",["name","THREE"],"PointLight"]],["block",[["stat",["assign",true,["name","poffset"],["binary","*",["name","plength"],["num",3]]]],["if",["dot",["name","_this"],"gammaInput"],["block",[["stat",["assign",true,["sub",["name","pcolors"],["name","poffset"]],["binary","*",["binary","*",["binary","*",["dot",["name","color"],"r"],["dot",["name","color"],"r"]],["name","intensity"]],["name","intensity"]]]],["stat",["assign",true,["sub",["name","pcolors"],["binary","+",["name","poffset"],["num",1]]],["binary","*",["binary","*",["binary","*",["dot",["name","color"],"g"],["dot",["name","color"],"g"]],["name","intensity"]],["name","intensity"]]]],["stat",["assign",true,["sub",["name","pcolors"],["binary","+",["name","poffset"],["num",2]]],["binary","*",["binary","*",["binary","*",["dot",["name","color"],"b"],["dot",["name","color"],"b"]],["name","intensity"]],["name","intensity"]]]]]],["block",[["stat",["assign",true,["sub",["name","pcolors"],["name","poffset"]],["binary","*",["dot",["name","color"],"r"],["name","intensity"]]]],["stat",["assign",true,["sub",["name","pcolors"],["binary","+",["name","poffset"],["num",1]]],["binary","*",["dot",["name","color"],"g"],["name","intensity"]]]],["stat",["assign",true,["sub",["name","pcolors"],["binary","+",["name","poffset"],["num",2]]],["binary","*",["dot",["name","color"],"b"],["name","intensity"]]]]]]],["stat",["assign",true,["name","position"],["call",["dot",["dot",["name","light"],"matrixWorld"],"getPosition"],[]]]],["stat",["assign",true,["sub",["name","ppositions"],["name","poffset"]],["dot",["name","position"],"x"]]],["stat",["assign",true,["sub",["name","ppositions"],["binary","+",["name","poffset"],["num",1]]],["dot",["name","position"],"y"]]],["stat",["assign",true,["sub",["name","ppositions"],["binary","+",["name","poffset"],["num",2]]],["dot",["name","position"],"z"]]],["stat",["assign",true,["sub",["name","pdistances"],["name","plength"]],["name","distance"]]],["stat",["assign","+",["name","plength"],["num",1]]]]],["if",["binary","instanceof",["name","light"],["dot",["name","THREE"],"SpotLight"]],["block",[["stat",["assign",true,["name","soffset"],["binary","*",["name","slength"],["num",3]]]],["if",["dot",["name","_this"],"gammaInput"],["block",[["stat",["assign",true,["sub",["name","scolors"],["name","soffset"]],["binary","*",["binary","*",["binary","*",["dot",["name","color"],"r"],["dot",["name","color"],"r"]],["name","intensity"]],["name","intensity"]]]],["stat",["assign",true,["sub",["name","scolors"],["binary","+",["name","soffset"],["num",1]]],["binary","*",["binary","*",["binary","*",["dot",["name","color"],"g"],["dot",["name","color"],"g"]],["name","intensity"]],["name","intensity"]]]],["stat",["assign",true,["sub",["name","scolors"],["binary","+",["name","soffset"],["num",2]]],["binary","*",["binary","*",["binary","*",["dot",["name","color"],"b"],["dot",["name","color"],"b"]],["name","intensity"]],["name","intensity"]]]]]],["block",[["stat",["assign",true,["sub",["name","scolors"],["name","soffset"]],["binary","*",["dot",["name","color"],"r"],["name","intensity"]]]],["stat",["assign",true,["sub",["name","scolors"],["binary","+",["name","soffset"],["num",1]]],["binary","*",["dot",["name","color"],"g"],["name","intensity"]]]],["stat",["assign",true,["sub",["name","scolors"],["binary","+",["name","soffset"],["num",2]]],["binary","*",["dot",["name","color"],"b"],["name","intensity"]]]]]]],["stat",["assign",true,["name","position"],["call",["dot",["dot",["name","light"],"matrixWorld"],"getPosition"],[]]]],["stat",["assign",true,["sub",["name","spositions"],["name","soffset"]],["dot",["name","position"],"x"]]],["stat",["assign",true,["sub",["name","spositions"],["binary","+",["name","soffset"],["num",1]]],["dot",["name","position"],"y"]]],["stat",["assign",true,["sub",["name","spositions"],["binary","+",["name","soffset"],["num",2]]],["dot",["name","position"],"z"]]],["stat",["assign",true,["sub",["name","sdistances"],["name","slength"]],["name","distance"]]],["stat",["call",["dot",["name","_direction"],"copy"],[["name","position"]]]],["stat",["call",["dot",["name","_direction"],"subSelf"],[["call",["dot",["dot",["dot",["name","light"],"target"],"matrixWorld"],"getPosition"],[]]]]],["stat",["call",["dot",["name","_direction"],"normalize"],[]]],["stat",["assign",true,["sub",["name","sdirections"],["name","soffset"]],["dot",["name","_direction"],"x"]]],["stat",["assign",true,["sub",["name","sdirections"],["binary","+",["name","soffset"],["num",1]]],["dot",["name","_direction"],"y"]]],["stat",["assign",true,["sub",["name","sdirections"],["binary","+",["name","soffset"],["num",2]]],["dot",["name","_direction"],"z"]]],["stat",["assign",true,["sub",["name","sangles"],["name","slength"]],["call",["dot",["name","Math"],"cos"],[["dot",["name","light"],"angle"]]]]],["stat",["assign",true,["sub",["name","sexponents"],["name","slength"]],["dot",["name","light"],"exponent"]]],["stat",["assign","+",["name","slength"],["num",1]]]]],null]]]]]]],["for",["seq",["assign",true,["name","l"],["binary","*",["name","dlength"],["num",3]]],["assign",true,["name","ll"],["dot",["name","dcolors"],"length"]]],["binary","<",["name","l"],["name","ll"]],["unary-postfix","++",["name","l"]],["stat",["assign",true,["sub",["name","dcolors"],["name","l"]],["num",0]]]],["for",["seq",["assign",true,["name","l"],["binary","*",["name","plength"],["num",3]]],["assign",true,["name","ll"],["dot",["name","pcolors"],"length"]]],["binary","<",["name","l"],["name","ll"]],["unary-postfix","++",["name","l"]],["stat",["assign",true,["sub",["name","pcolors"],["name","l"]],["num",0]]]],["for",["seq",["assign",true,["name","l"],["binary","*",["name","slength"],["num",3]]],["assign",true,["name","ll"],["dot",["name","scolors"],"length"]]],["binary","<",["name","l"],["name","ll"]],["unary-postfix","++",["name","l"]],["stat",["assign",true,["sub",["name","scolors"],["name","l"]],["num",0]]]],["stat",["assign",true,["dot",["dot",["name","zlights"],"directional"],"length"],["name","dlength"]]],["stat",["assign",true,["dot",["dot",["name","zlights"],"point"],"length"],["name","plength"]]],["stat",["assign",true,["dot",["dot",["name","zlights"],"spot"],"length"],["name","slength"]]],["stat",["assign",true,["sub",["dot",["name","zlights"],"ambient"],["num",0]],["name","r"]]],["stat",["assign",true,["sub",["dot",["name","zlights"],"ambient"],["num",1]],["name","g"]]],["stat",["assign",true,["sub",["dot",["name","zlights"],"ambient"],["num",2]],["name","b"]]]]],["block"],["stat",["assign",true,["dot",["name","this"],"setFaceCulling"],["function",null,["cullFace","frontFace"],[["if",["name","cullFace"],["block",[["if",["binary","||",["unary-prefix","!",["name","frontFace"]],["binary","===",["name","frontFace"],["string","ccw"]]],["block",[["stat",["call",["dot",["name","_gl"],"frontFace"],[["dot",["name","_gl"],"CCW"]]]]]],["block",[["stat",["call",["dot",["name","_gl"],"frontFace"],[["dot",["name","_gl"],"CW"]]]]]]],["if",["binary","===",["name","cullFace"],["string","back"]],["block",[["stat",["call",["dot",["name","_gl"],"cullFace"],[["dot",["name","_gl"],"BACK"]]]]]],["if",["binary","===",["name","cullFace"],["string","front"]],["block",[["stat",["call",["dot",["name","_gl"],"cullFace"],[["dot",["name","_gl"],"FRONT"]]]]]],["block",[["stat",["call",["dot",["name","_gl"],"cullFace"],[["dot",["name","_gl"],"FRONT_AND_BACK"]]]]]]]],["stat",["call",["dot",["name","_gl"],"enable"],[["dot",["name","_gl"],"CULL_FACE"]]]]]],["block",[["stat",["call",["dot",["name","_gl"],"disable"],[["dot",["name","_gl"],"CULL_FACE"]]]]]]]]]]],["stat",["assign",true,["dot",["name","this"],"setObjectFaces"],["function",null,["object"],[["if",["binary","!==",["name","_oldDoubleSided"],["dot",["name","object"],"doubleSided"]],["block",[["if",["dot",["name","object"],"doubleSided"],["block",[["stat",["call",["dot",["name","_gl"],"disable"],[["dot",["name","_gl"],"CULL_FACE"]]]]]],["block",[["stat",["call",["dot",["name","_gl"],"enable"],[["dot",["name","_gl"],"CULL_FACE"]]]]]]],["stat",["assign",true,["name","_oldDoubleSided"],["dot",["name","object"],"doubleSided"]]]]],null],["if",["binary","!==",["name","_oldFlipSided"],["dot",["name","object"],"flipSided"]],["block",[["if",["dot",["name","object"],"flipSided"],["block",[["stat",["call",["dot",["name","_gl"],"frontFace"],[["dot",["name","_gl"],"CW"]]]]]],["block",[["stat",["call",["dot",["name","_gl"],"frontFace"],[["dot",["name","_gl"],"CCW"]]]]]]],["stat",["assign",true,["name","_oldFlipSided"],["dot",["name","object"],"flipSided"]]]]],null]]]]],["stat",["assign",true,["dot",["name","this"],"setDepthTest"],["function",null,["depthTest"],[["if",["binary","!==",["name","_oldDepthTest"],["name","depthTest"]],["block",[["if",["name","depthTest"],["block",[["stat",["call",["dot",["name","_gl"],"enable"],[["dot",["name","_gl"],"DEPTH_TEST"]]]]]],["block",[["stat",["call",["dot",["name","_gl"],"disable"],[["dot",["name","_gl"],"DEPTH_TEST"]]]]]]],["stat",["assign",true,["name","_oldDepthTest"],["name","depthTest"]]]]],null]]]]],["stat",["assign",true,["dot",["name","this"],"setDepthWrite"],["function",null,["depthWrite"],[["if",["binary","!==",["name","_oldDepthWrite"],["name","depthWrite"]],["block",[["stat",["call",["dot",["name","_gl"],"depthMask"],[["name","depthWrite"]]]],["stat",["assign",true,["name","_oldDepthWrite"],["name","depthWrite"]]]]],null]]]]],["defun","setLineWidth",["width"],[["if",["binary","!==",["name","width"],["name","_oldLineWidth"]],["block",[["stat",["call",["dot",["name","_gl"],"lineWidth"],[["name","width"]]]],["stat",["assign",true,["name","_oldLineWidth"],["name","width"]]]]],null]]],["block"],["defun","setPolygonOffset",["polygonoffset","factor","units"],[["if",["binary","!==",["name","_oldPolygonOffset"],["name","polygonoffset"]],["block",[["if",["name","polygonoffset"],["block",[["stat",["call",["dot",["name","_gl"],"enable"],[["dot",["name","_gl"],"POLYGON_OFFSET_FILL"]]]]]],["block",[["stat",["call",["dot",["name","_gl"],"disable"],[["dot",["name","_gl"],"POLYGON_OFFSET_FILL"]]]]]]],["stat",["assign",true,["name","_oldPolygonOffset"],["name","polygonoffset"]]]]],null],["if",["binary","&&",["name","polygonoffset"],["binary","||",["binary","!==",["name","_oldPolygonOffsetFactor"],["name","factor"]],["binary","!==",["name","_oldPolygonOffsetUnits"],["name","units"]]]],["block",[["stat",["call",["dot",["name","_gl"],"polygonOffset"],[["name","factor"],["name","units"]]]],["stat",["assign",true,["name","_oldPolygonOffsetFactor"],["name","factor"]]],["stat",["assign",true,["name","_oldPolygonOffsetUnits"],["name","units"]]]]],null]]],["block"],["stat",["assign",true,["dot",["name","this"],"setBlending"],["function",null,["blending","blendEquation","blendSrc","blendDst"],[["if",["binary","!==",["name","blending"],["name","_oldBlending"]],["block",[["switch",["name","blending"],[[["dot",["name","THREE"],"NoBlending"],[["stat",["call",["dot",["name","_gl"],"disable"],[["dot",["name","_gl"],"BLEND"]]]],["break",null]]],[["dot",["name","THREE"],"AdditiveBlending"],[["stat",["call",["dot",["name","_gl"],"enable"],[["dot",["name","_gl"],"BLEND"]]]],["stat",["call",["dot",["name","_gl"],"blendEquation"],[["dot",["name","_gl"],"FUNC_ADD"]]]],["stat",["call",["dot",["name","_gl"],"blendFunc"],[["dot",["name","_gl"],"SRC_ALPHA"],["dot",["name","_gl"],"ONE"]]]],["break",null]]],[["dot",["name","THREE"],"SubtractiveBlending"],[["stat",["call",["dot",["name","_gl"],"enable"],[["dot",["name","_gl"],"BLEND"]]]],["stat",["call",["dot",["name","_gl"],"blendEquation"],[["dot",["name","_gl"],"FUNC_ADD"]]]],["stat",["call",["dot",["name","_gl"],"blendFunc"],[["dot",["name","_gl"],"ZERO"],["dot",["name","_gl"],"ONE_MINUS_SRC_COLOR"]]]],["break",null]]],[["dot",["name","THREE"],"MultiplyBlending"],[["stat",["call",["dot",["name","_gl"],"enable"],[["dot",["name","_gl"],"BLEND"]]]],["stat",["call",["dot",["name","_gl"],"blendEquation"],[["dot",["name","_gl"],"FUNC_ADD"]]]],["stat",["call",["dot",["name","_gl"],"blendFunc"],[["dot",["name","_gl"],"ZERO"],["dot",["name","_gl"],"SRC_COLOR"]]]],["break",null]]],[["dot",["name","THREE"],"CustomBlending"],[["stat",["call",["dot",["name","_gl"],"enable"],[["dot",["name","_gl"],"BLEND"]]]],["break",null]]],[null,[["stat",["call",["dot",["name","_gl"],"enable"],[["dot",["name","_gl"],"BLEND"]]]],["stat",["call",["dot",["name","_gl"],"blendEquationSeparate"],[["dot",["name","_gl"],"FUNC_ADD"],["dot",["name","_gl"],"FUNC_ADD"]]]],["stat",["call",["dot",["name","_gl"],"blendFuncSeparate"],[["dot",["name","_gl"],"SRC_ALPHA"],["dot",["name","_gl"],"ONE_MINUS_SRC_ALPHA"],["dot",["name","_gl"],"ONE"],["dot",["name","_gl"],"ONE_MINUS_SRC_ALPHA"]]]],["break",null]]]]],["stat",["assign",true,["name","_oldBlending"],["name","blending"]]]]],null],["if",["binary","===",["name","blending"],["dot",["name","THREE"],"CustomBlending"]],["block",[["if",["binary","!==",["name","blendEquation"],["name","_oldBlendEquation"]],["block",[["stat",["call",["dot",["name","_gl"],"blendEquation"],[["call",["name","paramThreeToGL"],[["name","blendEquation"]]]]]],["stat",["assign",true,["name","_oldBlendEquation"],["name","blendEquation"]]]]],null],["if",["binary","||",["binary","!==",["name","blendSrc"],["name","_oldBlendSrc"]],["binary","!==",["name","blendDst"],["name","_oldBlendDst"]]],["block",[["stat",["call",["dot",["name","_gl"],"blendFunc"],[["call",["name","paramThreeToGL"],[["name","blendSrc"]]],["call",["name","paramThreeToGL"],[["name","blendDst"]]]]]],["stat",["assign",true,["name","_oldBlendSrc"],["name","blendSrc"]]],["stat",["assign",true,["name","_oldBlendDst"],["name","blendDst"]]]]],null]]],["block",[["stat",["assign",true,["name","_oldBlendEquation"],["name","null"]]],["stat",["assign",true,["name","_oldBlendSrc"],["name","null"]]],["stat",["assign",true,["name","_oldBlendDst"],["name","null"]]]]]]]]]],["defun","buildProgram",["shaderID","fragmentShader","vertexShader","uniforms","attributes","parameters"],[["var",[["p"],["pl"],["program"],["code"]]],["var",[["chunks",["array",[]]]]],["if",["name","shaderID"],["block",[["stat",["call",["dot",["name","chunks"],"push"],[["name","shaderID"]]]]]],["block",[["stat",["call",["dot",["name","chunks"],"push"],[["name","fragmentShader"]]]],["stat",["call",["dot",["name","chunks"],"push"],[["name","vertexShader"]]]]]]],["for-in",["name","p"],["name","p"],["name","parameters"],["block",[["stat",["call",["dot",["name","chunks"],"push"],[["name","p"]]]],["stat",["call",["dot",["name","chunks"],"push"],[["sub",["name","parameters"],["name","p"]]]]]]]],["stat",["assign",true,["name","code"],["call",["dot",["name","chunks"],"join"],[]]]],["for",["seq",["assign",true,["name","p"],["num",0]],["assign",true,["name","pl"],["dot",["name","_programs"],"length"]]],["binary","<",["name","p"],["name","pl"]],["unary-postfix","++",["name","p"]],["block",[["if",["binary","===",["dot",["sub",["name","_programs"],["name","p"]],"code"],["name","code"]],["block",[["return",["dot",["sub",["name","_programs"],["name","p"]],"program"]]]],null]]]],["stat",["assign",true,["name","program"],["call",["dot",["name","_gl"],"createProgram"],[]]]],["var",[["prefix_vertex",["call",["dot",["array",[["binary","+",["binary","+",["string","precision "],["name","_precision"]],["string"," float;"]],["conditional",["binary",">",["name","_maxVertexTextures"],["num",0]],["string","#define VERTEX_TEXTURES"],["string",""]],["conditional",["dot",["name","_this"],"gammaInput"],["string","#define GAMMA_INPUT"],["string",""]],["conditional",["dot",["name","_this"],"gammaOutput"],["string","#define GAMMA_OUTPUT"],["string",""]],["conditional",["dot",["name","_this"],"physicallyBasedShading"],["string","#define PHYSICALLY_BASED_SHADING"],["string",""]],["binary","+",["string","#define MAX_DIR_LIGHTS "],["dot",["name","parameters"],"maxDirLights"]],["binary","+",["string","#define MAX_POINT_LIGHTS "],["dot",["name","parameters"],"maxPointLights"]],["binary","+",["string","#define MAX_SPOT_LIGHTS "],["dot",["name","parameters"],"maxSpotLights"]],["binary","+",["string","#define MAX_SHADOWS "],["dot",["name","parameters"],"maxShadows"]],["binary","+",["string","#define MAX_BONES "],["dot",["name","parameters"],"maxBones"]],["conditional",["dot",["name","parameters"],"map"],["string","#define USE_MAP"],["string",""]],["conditional",["dot",["name","parameters"],"envMap"],["string","#define USE_ENVMAP"],["string",""]],["conditional",["dot",["name","parameters"],"lightMap"],["string","#define USE_LIGHTMAP"],["string",""]],["conditional",["dot",["name","parameters"],"vertexColors"],["string","#define USE_COLOR"],["string",""]],["conditional",["dot",["name","parameters"],"skinning"],["string","#define USE_SKINNING"],["string",""]],["conditional",["dot",["name","parameters"],"morphTargets"],["string","#define USE_MORPHTARGETS"],["string",""]],["conditional",["dot",["name","parameters"],"morphNormals"],["string","#define USE_MORPHNORMALS"],["string",""]],["conditional",["dot",["name","parameters"],"perPixel"],["string","#define PHONG_PER_PIXEL"],["string",""]],["conditional",["dot",["name","parameters"],"wrapAround"],["string","#define WRAP_AROUND"],["string",""]],["conditional",["dot",["name","parameters"],"doubleSided"],["string","#define DOUBLE_SIDED"],["string",""]],["conditional",["dot",["name","parameters"],"shadowMapEnabled"],["string","#define USE_SHADOWMAP"],["string",""]],["conditional",["dot",["name","parameters"],"shadowMapSoft"],["string","#define SHADOWMAP_SOFT"],["string",""]],["conditional",["dot",["name","parameters"],"shadowMapDebug"],["string","#define SHADOWMAP_DEBUG"],["string",""]],["conditional",["dot",["name","parameters"],"shadowMapCascade"],["string","#define SHADOWMAP_CASCADE"],["string",""]],["conditional",["dot",["name","parameters"],"sizeAttenuation"],["string","#define USE_SIZEATTENUATION"],["string",""]],["string","uniform mat4 objectMatrix;"],["string","uniform mat4 modelViewMatrix;"],["string","uniform mat4 projectionMatrix;"],["string","uniform mat4 viewMatrix;"],["string","uniform mat3 normalMatrix;"],["string","uniform vec3 cameraPosition;"],["string","attribute vec3 position;"],["string","attribute vec3 normal;"],["string","attribute vec2 uv;"],["string","attribute vec2 uv2;"],["string","#ifdef USE_COLOR"],["string","attribute vec3 color;"],["string","#endif"],["string","#ifdef USE_MORPHTARGETS"],["string","attribute vec3 morphTarget0;"],["string","attribute vec3 morphTarget1;"],["string","attribute vec3 morphTarget2;"],["string","attribute vec3 morphTarget3;"],["string","#ifdef USE_MORPHNORMALS"],["string","attribute vec3 morphNormal0;"],["string","attribute vec3 morphNormal1;"],["string","attribute vec3 morphNormal2;"],["string","attribute vec3 morphNormal3;"],["string","#else"],["string","attribute vec3 morphTarget4;"],["string","attribute vec3 morphTarget5;"],["string","attribute vec3 morphTarget6;"],["string","attribute vec3 morphTarget7;"],["string","#endif"],["string","#endif"],["string","#ifdef USE_SKINNING"],["string","attribute vec4 skinVertexA;"],["string","attribute vec4 skinVertexB;"],["string","attribute vec4 skinIndex;"],["string","attribute vec4 skinWeight;"],["string","#endif"],["string",""]]],"join"],[["string","\n"]]]]]],["var",[["prefix_fragment",["call",["dot",["array",[["binary","+",["binary","+",["string","precision "],["name","_precision"]],["string"," float;"]],["binary","+",["string","#define MAX_DIR_LIGHTS "],["dot",["name","parameters"],"maxDirLights"]],["binary","+",["string","#define MAX_POINT_LIGHTS "],["dot",["name","parameters"],"maxPointLights"]],["binary","+",["string","#define MAX_SPOT_LIGHTS "],["dot",["name","parameters"],"maxSpotLights"]],["binary","+",["string","#define MAX_SHADOWS "],["dot",["name","parameters"],"maxShadows"]],["conditional",["dot",["name","parameters"],"alphaTest"],["binary","+",["string","#define ALPHATEST "],["dot",["name","parameters"],"alphaTest"]],["string",""]],["conditional",["dot",["name","_this"],"gammaInput"],["string","#define GAMMA_INPUT"],["string",""]],["conditional",["dot",["name","_this"],"gammaOutput"],["string","#define GAMMA_OUTPUT"],["string",""]],["conditional",["dot",["name","_this"],"physicallyBasedShading"],["string","#define PHYSICALLY_BASED_SHADING"],["string",""]],["conditional",["binary","&&",["dot",["name","parameters"],"useFog"],["dot",["name","parameters"],"fog"]],["string","#define USE_FOG"],["string",""]],["conditional",["binary","&&",["dot",["name","parameters"],"useFog"],["binary","instanceof",["dot",["name","parameters"],"fog"],["dot",["name","THREE"],"FogExp2"]]],["string","#define FOG_EXP2"],["string",""]],["conditional",["dot",["name","parameters"],"map"],["string","#define USE_MAP"],["string",""]],["conditional",["dot",["name","parameters"],"envMap"],["string","#define USE_ENVMAP"],["string",""]],["conditional",["dot",["name","parameters"],"lightMap"],["string","#define USE_LIGHTMAP"],["string",""]],["conditional",["dot",["name","parameters"],"vertexColors"],["string","#define USE_COLOR"],["string",""]],["conditional",["dot",["name","parameters"],"metal"],["string","#define METAL"],["string",""]],["conditional",["dot",["name","parameters"],"perPixel"],["string","#define PHONG_PER_PIXEL"],["string",""]],["conditional",["dot",["name","parameters"],"wrapAround"],["string","#define WRAP_AROUND"],["string",""]],["conditional",["dot",["name","parameters"],"doubleSided"],["string","#define DOUBLE_SIDED"],["string",""]],["conditional",["dot",["name","parameters"],"shadowMapEnabled"],["string","#define USE_SHADOWMAP"],["string",""]],["conditional",["dot",["name","parameters"],"shadowMapSoft"],["string","#define SHADOWMAP_SOFT"],["string",""]],["conditional",["dot",["name","parameters"],"shadowMapDebug"],["string","#define SHADOWMAP_DEBUG"],["string",""]],["conditional",["dot",["name","parameters"],"shadowMapCascade"],["string","#define SHADOWMAP_CASCADE"],["string",""]],["string","uniform mat4 viewMatrix;"],["string","uniform vec3 cameraPosition;"],["string",""]]],"join"],[["string","\n"]]]]]],["stat",["call",["dot",["name","_gl"],"attachShader"],[["name","program"],["call",["name","getShader"],[["string","fragment"],["binary","+",["name","prefix_fragment"],["name","fragmentShader"]]]]]]],["stat",["call",["dot",["name","_gl"],"attachShader"],[["name","program"],["call",["name","getShader"],[["string","vertex"],["binary","+",["name","prefix_vertex"],["name","vertexShader"]]]]]]],["stat",["call",["dot",["name","_gl"],"linkProgram"],[["name","program"]]]],["if",["unary-prefix","!",["call",["dot",["name","_gl"],"getProgramParameter"],[["name","program"],["dot",["name","_gl"],"LINK_STATUS"]]]],["block",[["stat",["call",["dot",["name","console"],"error"],[["binary","+",["binary","+",["binary","+",["binary","+",["binary","+",["string","Could not initialise shader\n"],["string","VALIDATE_STATUS: "]],["call",["dot",["name","_gl"],"getProgramParameter"],[["name","program"],["dot",["name","_gl"],"VALIDATE_STATUS"]]]],["string",", gl error ["]],["call",["dot",["name","_gl"],"getError"],[]]],["string","]"]]]]]]],null],["stat",["assign",true,["dot",["name","program"],"uniforms"],["object",[]]]],["stat",["assign",true,["dot",["name","program"],"attributes"],["object",[]]]],["var",[["identifiers"],["u"],["a"],["i"]]],["stat",["assign",true,["name","identifiers"],["array",[["string","viewMatrix"],["string","modelViewMatrix"],["string","projectionMatrix"],["string","normalMatrix"],["string","objectMatrix"],["string","cameraPosition"],["string","boneGlobalMatrices"],["string","morphTargetInfluences"]]]]],["for-in",["name","u"],["name","u"],["name","uniforms"],["block",[["stat",["call",["dot",["name","identifiers"],"push"],[["name","u"]]]]]]],["stat",["call",["name","cacheUniformLocations"],[["name","program"],["name","identifiers"]]]],["stat",["assign",true,["name","identifiers"],["array",[["string","position"],["string","normal"],["string","uv"],["string","uv2"],["string","tangent"],["string","color"],["string","skinVertexA"],["string","skinVertexB"],["string","skinIndex"],["string","skinWeight"]]]]],["for",["assign",true,["name","i"],["num",0]],["binary","<",["name","i"],["dot",["name","parameters"],"maxMorphTargets"]],["unary-postfix","++",["name","i"]],["block",[["stat",["call",["dot",["name","identifiers"],"push"],[["binary","+",["string","morphTarget"],["name","i"]]]]]]]],["for",["assign",true,["name","i"],["num",0]],["binary","<",["name","i"],["dot",["name","parameters"],"maxMorphNormals"]],["unary-postfix","++",["name","i"]],["block",[["stat",["call",["dot",["name","identifiers"],"push"],[["binary","+",["string","morphNormal"],["name","i"]]]]]]]],["for-in",["name","a"],["name","a"],["name","attributes"],["block",[["stat",["call",["dot",["name","identifiers"],"push"],[["name","a"]]]]]]],["stat",["call",["name","cacheAttributeLocations"],[["name","program"],["name","identifiers"]]]],["stat",["assign",true,["dot",["name","program"],"id"],["dot",["name","_programs"],"length"]]],["stat",["call",["dot",["name","_programs"],"push"],[["object",[["program",["name","program"]],["code",["name","code"]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","_this"],"info"],"memory"],"programs"],["dot",["name","_programs"],"length"]]],["return",["name","program"]]]],["block"],["defun","cacheUniformLocations",["program","identifiers"],[["var",[["i"],["l"],["id"]]],["for",["seq",["assign",true,["name","i"],["num",0]],["assign",true,["name","l"],["dot",["name","identifiers"],"length"]]],["binary","<",["name","i"],["name","l"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","id"],["sub",["name","identifiers"],["name","i"]]]],["stat",["assign",true,["sub",["dot",["name","program"],"uniforms"],["name","id"]],["call",["dot",["name","_gl"],"getUniformLocation"],[["name","program"],["name","id"]]]]]]]]]],["block"],["defun","cacheAttributeLocations",["program","identifiers"],[["var",[["i"],["l"],["id"]]],["for",["seq",["assign",true,["name","i"],["num",0]],["assign",true,["name","l"],["dot",["name","identifiers"],"length"]]],["binary","<",["name","i"],["name","l"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","id"],["sub",["name","identifiers"],["name","i"]]]],["stat",["assign",true,["sub",["dot",["name","program"],"attributes"],["name","id"]],["call",["dot",["name","_gl"],"getAttribLocation"],[["name","program"],["name","id"]]]]]]]]]],["block"],["defun","getShader",["type","string"],[["var",[["shader"]]],["if",["binary","===",["name","type"],["string","fragment"]],["block",[["stat",["assign",true,["name","shader"],["call",["dot",["name","_gl"],"createShader"],[["dot",["name","_gl"],"FRAGMENT_SHADER"]]]]]]],["if",["binary","===",["name","type"],["string","vertex"]],["block",[["stat",["assign",true,["name","shader"],["call",["dot",["name","_gl"],"createShader"],[["dot",["name","_gl"],"VERTEX_SHADER"]]]]]]],null]],["stat",["call",["dot",["name","_gl"],"shaderSource"],[["name","shader"],["name","string"]]]],["stat",["call",["dot",["name","_gl"],"compileShader"],[["name","shader"]]]],["if",["unary-prefix","!",["call",["dot",["name","_gl"],"getShaderParameter"],[["name","shader"],["dot",["name","_gl"],"COMPILE_STATUS"]]]],["block",[["stat",["call",["dot",["name","console"],"error"],[["call",["dot",["name","_gl"],"getShaderInfoLog"],[["name","shader"]]]]]],["stat",["call",["dot",["name","console"],"error"],[["name","string"]]]],["return",["name","null"]]]],null],["return",["name","shader"]]]],["block"],["defun","isPowerOfTwo",["value"],[["return",["binary","===",["binary","&",["name","value"],["binary","-",["name","value"],["num",1]]],["num",0]]]]],["block"],["defun","setTextureParameters",["textureType","texture","isImagePowerOfTwo"],[["if",["name","isImagePowerOfTwo"],["block",[["stat",["call",["dot",["name","_gl"],"texParameteri"],[["name","textureType"],["dot",["name","_gl"],"TEXTURE_WRAP_S"],["call",["name","paramThreeToGL"],[["dot",["name","texture"],"wrapS"]]]]]],["stat",["call",["dot",["name","_gl"],"texParameteri"],[["name","textureType"],["dot",["name","_gl"],"TEXTURE_WRAP_T"],["call",["name","paramThreeToGL"],[["dot",["name","texture"],"wrapT"]]]]]],["stat",["call",["dot",["name","_gl"],"texParameteri"],[["name","textureType"],["dot",["name","_gl"],"TEXTURE_MAG_FILTER"],["call",["name","paramThreeToGL"],[["dot",["name","texture"],"magFilter"]]]]]],["stat",["call",["dot",["name","_gl"],"texParameteri"],[["name","textureType"],["dot",["name","_gl"],"TEXTURE_MIN_FILTER"],["call",["name","paramThreeToGL"],[["dot",["name","texture"],"minFilter"]]]]]]]],["block",[["stat",["call",["dot",["name","_gl"],"texParameteri"],[["name","textureType"],["dot",["name","_gl"],"TEXTURE_WRAP_S"],["dot",["name","_gl"],"CLAMP_TO_EDGE"]]]],["stat",["call",["dot",["name","_gl"],"texParameteri"],[["name","textureType"],["dot",["name","_gl"],"TEXTURE_WRAP_T"],["dot",["name","_gl"],"CLAMP_TO_EDGE"]]]],["stat",["call",["dot",["name","_gl"],"texParameteri"],[["name","textureType"],["dot",["name","_gl"],"TEXTURE_MAG_FILTER"],["call",["name","filterFallback"],[["dot",["name","texture"],"magFilter"]]]]]],["stat",["call",["dot",["name","_gl"],"texParameteri"],[["name","textureType"],["dot",["name","_gl"],"TEXTURE_MIN_FILTER"],["call",["name","filterFallback"],[["dot",["name","texture"],"minFilter"]]]]]]]]]]],["block"],["stat",["assign",true,["dot",["name","this"],"setTexture"],["function",null,["texture","slot"],[["if",["dot",["name","texture"],"needsUpdate"],["block",[["if",["unary-prefix","!",["dot",["name","texture"],"__webglInit"]],["block",[["stat",["assign",true,["dot",["name","texture"],"__webglInit"],["name","true"]]],["stat",["assign",true,["dot",["name","texture"],"__webglTexture"],["call",["dot",["name","_gl"],"createTexture"],[]]]],["stat",["unary-postfix","++",["dot",["dot",["dot",["name","_this"],"info"],"memory"],"textures"]]]]],null],["stat",["call",["dot",["name","_gl"],"activeTexture"],[["binary","+",["dot",["name","_gl"],"TEXTURE0"],["name","slot"]]]]],["stat",["call",["dot",["name","_gl"],"bindTexture"],[["dot",["name","_gl"],"TEXTURE_2D"],["dot",["name","texture"],"__webglTexture"]]]],["stat",["call",["dot",["name","_gl"],"pixelStorei"],[["dot",["name","_gl"],"UNPACK_PREMULTIPLY_ALPHA_WEBGL"],["dot",["name","texture"],"premultiplyAlpha"]]]],["var",[["image",["dot",["name","texture"],"image"]],["isImagePowerOfTwo",["binary","&&",["call",["name","isPowerOfTwo"],[["dot",["name","image"],"width"]]],["call",["name","isPowerOfTwo"],[["dot",["name","image"],"height"]]]]],["glFormat",["call",["name","paramThreeToGL"],[["dot",["name","texture"],"format"]]]],["glType",["call",["name","paramThreeToGL"],[["dot",["name","texture"],"type"]]]]]],["stat",["call",["name","setTextureParameters"],[["dot",["name","_gl"],"TEXTURE_2D"],["name","texture"],["name","isImagePowerOfTwo"]]]],["if",["binary","instanceof",["name","texture"],["dot",["name","THREE"],"DataTexture"]],["block",[["stat",["call",["dot",["name","_gl"],"texImage2D"],[["dot",["name","_gl"],"TEXTURE_2D"],["num",0],["name","glFormat"],["dot",["name","image"],"width"],["dot",["name","image"],"height"],["num",0],["name","glFormat"],["name","glType"],["dot",["name","image"],"data"]]]]]],["block",[["stat",["call",["dot",["name","_gl"],"texImage2D"],[["dot",["name","_gl"],"TEXTURE_2D"],["num",0],["name","glFormat"],["name","glFormat"],["name","glType"],["dot",["name","texture"],"image"]]]]]]],["if",["binary","&&",["dot",["name","texture"],"generateMipmaps"],["name","isImagePowerOfTwo"]],["stat",["call",["dot",["name","_gl"],"generateMipmap"],[["dot",["name","_gl"],"TEXTURE_2D"]]]],null],["stat",["assign",true,["dot",["name","texture"],"needsUpdate"],["name","false"]]],["if",["dot",["name","texture"],"onUpdate"],["stat",["call",["dot",["name","texture"],"onUpdate"],[]]],null]]],["block",[["stat",["call",["dot",["name","_gl"],"activeTexture"],[["binary","+",["dot",["name","_gl"],"TEXTURE0"],["name","slot"]]]]],["stat",["call",["dot",["name","_gl"],"bindTexture"],[["dot",["name","_gl"],"TEXTURE_2D"],["dot",["name","texture"],"__webglTexture"]]]]]]]]]]],["defun","clampToMaxSize",["image","maxSize"],[["if",["binary","&&",["binary","<=",["dot",["name","image"],"width"],["name","maxSize"]],["binary","<=",["dot",["name","image"],"height"],["name","maxSize"]]],["block",[["return",["name","image"]]]],null],["var",[["maxDimension",["call",["dot",["name","Math"],"max"],[["dot",["name","image"],"width"],["dot",["name","image"],"height"]]]]]],["var",[["newWidth",["call",["dot",["name","Math"],"floor"],[["binary","/",["binary","*",["dot",["name","image"],"width"],["name","maxSize"]],["name","maxDimension"]]]]]]],["var",[["newHeight",["call",["dot",["name","Math"],"floor"],[["binary","/",["binary","*",["dot",["name","image"],"height"],["name","maxSize"]],["name","maxDimension"]]]]]]],["var",[["canvas",["call",["dot",["name","document"],"createElement"],[["string","canvas"]]]]]],["stat",["assign",true,["dot",["name","canvas"],"width"],["name","newWidth"]]],["stat",["assign",true,["dot",["name","canvas"],"height"],["name","newHeight"]]],["var",[["ctx",["call",["dot",["name","canvas"],"getContext"],[["string","2d"]]]]]],["stat",["call",["dot",["name","ctx"],"drawImage"],[["name","image"],["num",0],["num",0],["dot",["name","image"],"width"],["dot",["name","image"],"height"],["num",0],["num",0],["name","newWidth"],["name","newHeight"]]]],["return",["name","canvas"]]]],["defun","setCubeTexture",["texture","slot"],[["if",["binary","===",["dot",["dot",["name","texture"],"image"],"length"],["num",6]],["block",[["if",["dot",["name","texture"],"needsUpdate"],["block",[["if",["unary-prefix","!",["dot",["dot",["name","texture"],"image"],"__webglTextureCube"]],["block",[["stat",["assign",true,["dot",["dot",["name","texture"],"image"],"__webglTextureCube"],["call",["dot",["name","_gl"],"createTexture"],[]]]]]],null],["stat",["call",["dot",["name","_gl"],"activeTexture"],[["binary","+",["dot",["name","_gl"],"TEXTURE0"],["name","slot"]]]]],["stat",["call",["dot",["name","_gl"],"bindTexture"],[["dot",["name","_gl"],"TEXTURE_CUBE_MAP"],["dot",["dot",["name","texture"],"image"],"__webglTextureCube"]]]],["var",[["cubeImage",["array",[]]]]],["for",["var",[["i",["num",0]]]],["binary","<",["name","i"],["num",6]],["unary-postfix","++",["name","i"]],["block",[["if",["dot",["name","_this"],"autoScaleCubemaps"],["block",[["stat",["assign",true,["sub",["name","cubeImage"],["name","i"]],["call",["name","clampToMaxSize"],[["sub",["dot",["name","texture"],"image"],["name","i"]],["name","_maxCubemapSize"]]]]]]],["block",[["stat",["assign",true,["sub",["name","cubeImage"],["name","i"]],["sub",["dot",["name","texture"],"image"],["name","i"]]]]]]]]]],["var",[["image",["sub",["name","cubeImage"],["num",0]]],["isImagePowerOfTwo",["binary","&&",["call",["name","isPowerOfTwo"],[["dot",["name","image"],"width"]]],["call",["name","isPowerOfTwo"],[["dot",["name","image"],"height"]]]]],["glFormat",["call",["name","paramThreeToGL"],[["dot",["name","texture"],"format"]]]],["glType",["call",["name","paramThreeToGL"],[["dot",["name","texture"],"type"]]]]]],["stat",["call",["name","setTextureParameters"],[["dot",["name","_gl"],"TEXTURE_CUBE_MAP"],["name","texture"],["name","isImagePowerOfTwo"]]]],["for",["var",[["i",["num",0]]]],["binary","<",["name","i"],["num",6]],["unary-postfix","++",["name","i"]],["block",[["stat",["call",["dot",["name","_gl"],"texImage2D"],[["binary","+",["dot",["name","_gl"],"TEXTURE_CUBE_MAP_POSITIVE_X"],["name","i"]],["num",0],["name","glFormat"],["name","glFormat"],["name","glType"],["sub",["name","cubeImage"],["name","i"]]]]]]]],["if",["binary","&&",["dot",["name","texture"],"generateMipmaps"],["name","isImagePowerOfTwo"]],["stat",["call",["dot",["name","_gl"],"generateMipmap"],[["dot",["name","_gl"],"TEXTURE_CUBE_MAP"]]]],null],["stat",["assign",true,["dot",["name","texture"],"needsUpdate"],["name","false"]]],["if",["dot",["name","texture"],"onUpdate"],["stat",["call",["dot",["name","texture"],"onUpdate"],[]]],null]]],["block",[["stat",["call",["dot",["name","_gl"],"activeTexture"],[["binary","+",["dot",["name","_gl"],"TEXTURE0"],["name","slot"]]]]],["stat",["call",["dot",["name","_gl"],"bindTexture"],[["dot",["name","_gl"],"TEXTURE_CUBE_MAP"],["dot",["dot",["name","texture"],"image"],"__webglTextureCube"]]]]]]]]],null]]],["block"],["defun","setCubeTextureDynamic",["texture","slot"],[["stat",["call",["dot",["name","_gl"],"activeTexture"],[["binary","+",["dot",["name","_gl"],"TEXTURE0"],["name","slot"]]]]],["stat",["call",["dot",["name","_gl"],"bindTexture"],[["dot",["name","_gl"],"TEXTURE_CUBE_MAP"],["dot",["name","texture"],"__webglTexture"]]]]]],["block"],["defun","setupFrameBuffer",["framebuffer","renderTarget","textureTarget"],[["stat",["call",["dot",["name","_gl"],"bindFramebuffer"],[["dot",["name","_gl"],"FRAMEBUFFER"],["name","framebuffer"]]]],["stat",["call",["dot",["name","_gl"],"framebufferTexture2D"],[["dot",["name","_gl"],"FRAMEBUFFER"],["dot",["name","_gl"],"COLOR_ATTACHMENT0"],["name","textureTarget"],["dot",["name","renderTarget"],"__webglTexture"],["num",0]]]]]],["block"],["defun","setupRenderBuffer",["renderbuffer","renderTarget"],[["stat",["call",["dot",["name","_gl"],"bindRenderbuffer"],[["dot",["name","_gl"],"RENDERBUFFER"],["name","renderbuffer"]]]],["if",["binary","&&",["dot",["name","renderTarget"],"depthBuffer"],["unary-prefix","!",["dot",["name","renderTarget"],"stencilBuffer"]]],["block",[["stat",["call",["dot",["name","_gl"],"renderbufferStorage"],[["dot",["name","_gl"],"RENDERBUFFER"],["dot",["name","_gl"],"DEPTH_COMPONENT16"],["dot",["name","renderTarget"],"width"],["dot",["name","renderTarget"],"height"]]]],["stat",["call",["dot",["name","_gl"],"framebufferRenderbuffer"],[["dot",["name","_gl"],"FRAMEBUFFER"],["dot",["name","_gl"],"DEPTH_ATTACHMENT"],["dot",["name","_gl"],"RENDERBUFFER"],["name","renderbuffer"]]]]]],["if",["binary","&&",["dot",["name","renderTarget"],"depthBuffer"],["dot",["name","renderTarget"],"stencilBuffer"]],["block",[["stat",["call",["dot",["name","_gl"],"renderbufferStorage"],[["dot",["name","_gl"],"RENDERBUFFER"],["dot",["name","_gl"],"DEPTH_STENCIL"],["dot",["name","renderTarget"],"width"],["dot",["name","renderTarget"],"height"]]]],["stat",["call",["dot",["name","_gl"],"framebufferRenderbuffer"],[["dot",["name","_gl"],"FRAMEBUFFER"],["dot",["name","_gl"],"DEPTH_STENCIL_ATTACHMENT"],["dot",["name","_gl"],"RENDERBUFFER"],["name","renderbuffer"]]]]]],["block",[["stat",["call",["dot",["name","_gl"],"renderbufferStorage"],[["dot",["name","_gl"],"RENDERBUFFER"],["dot",["name","_gl"],"RGBA4"],["dot",["name","renderTarget"],"width"],["dot",["name","renderTarget"],"height"]]]]]]]]]],["block"],["stat",["assign",true,["dot",["name","this"],"setRenderTarget"],["function",null,["renderTarget"],[["var",[["isCube",["binary","instanceof",["name","renderTarget"],["dot",["name","THREE"],"WebGLRenderTargetCube"]]]]],["if",["binary","&&",["name","renderTarget"],["unary-prefix","!",["dot",["name","renderTarget"],"__webglFramebuffer"]]],["block",[["if",["binary","===",["dot",["name","renderTarget"],"depthBuffer"],["name","undefined"]],["stat",["assign",true,["dot",["name","renderTarget"],"depthBuffer"],["name","true"]]],null],["if",["binary","===",["dot",["name","renderTarget"],"stencilBuffer"],["name","undefined"]],["stat",["assign",true,["dot",["name","renderTarget"],"stencilBuffer"],["name","true"]]],null],["stat",["assign",true,["dot",["name","renderTarget"],"__webglTexture"],["call",["dot",["name","_gl"],"createTexture"],[]]]],["var",[["isTargetPowerOfTwo",["binary","&&",["call",["name","isPowerOfTwo"],[["dot",["name","renderTarget"],"width"]]],["call",["name","isPowerOfTwo"],[["dot",["name","renderTarget"],"height"]]]]],["glFormat",["call",["name","paramThreeToGL"],[["dot",["name","renderTarget"],"format"]]]],["glType",["call",["name","paramThreeToGL"],[["dot",["name","renderTarget"],"type"]]]]]],["if",["name","isCube"],["block",[["stat",["assign",true,["dot",["name","renderTarget"],"__webglFramebuffer"],["array",[]]]],["stat",["assign",true,["dot",["name","renderTarget"],"__webglRenderbuffer"],["array",[]]]],["stat",["call",["dot",["name","_gl"],"bindTexture"],[["dot",["name","_gl"],"TEXTURE_CUBE_MAP"],["dot",["name","renderTarget"],"__webglTexture"]]]],["stat",["call",["name","setTextureParameters"],[["dot",["name","_gl"],"TEXTURE_CUBE_MAP"],["name","renderTarget"],["name","isTargetPowerOfTwo"]]]],["for",["var",[["i",["num",0]]]],["binary","<",["name","i"],["num",6]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["sub",["dot",["name","renderTarget"],"__webglFramebuffer"],["name","i"]],["call",["dot",["name","_gl"],"createFramebuffer"],[]]]],["stat",["assign",true,["sub",["dot",["name","renderTarget"],"__webglRenderbuffer"],["name","i"]],["call",["dot",["name","_gl"],"createRenderbuffer"],[]]]],["stat",["call",["dot",["name","_gl"],"texImage2D"],[["binary","+",["dot",["name","_gl"],"TEXTURE_CUBE_MAP_POSITIVE_X"],["name","i"]],["num",0],["name","glFormat"],["dot",["name","renderTarget"],"width"],["dot",["name","renderTarget"],"height"],["num",0],["name","glFormat"],["name","glType"],["name","null"]]]],["stat",["call",["name","setupFrameBuffer"],[["sub",["dot",["name","renderTarget"],"__webglFramebuffer"],["name","i"]],["name","renderTarget"],["binary","+",["dot",["name","_gl"],"TEXTURE_CUBE_MAP_POSITIVE_X"],["name","i"]]]]],["stat",["call",["name","setupRenderBuffer"],[["sub",["dot",["name","renderTarget"],"__webglRenderbuffer"],["name","i"]],["name","renderTarget"]]]]]]],["if",["name","isTargetPowerOfTwo"],["stat",["call",["dot",["name","_gl"],"generateMipmap"],[["dot",["name","_gl"],"TEXTURE_CUBE_MAP"]]]],null]]],["block",[["stat",["assign",true,["dot",["name","renderTarget"],"__webglFramebuffer"],["call",["dot",["name","_gl"],"createFramebuffer"],[]]]],["stat",["assign",true,["dot",["name","renderTarget"],"__webglRenderbuffer"],["call",["dot",["name","_gl"],"createRenderbuffer"],[]]]],["stat",["call",["dot",["name","_gl"],"bindTexture"],[["dot",["name","_gl"],"TEXTURE_2D"],["dot",["name","renderTarget"],"__webglTexture"]]]],["stat",["call",["name","setTextureParameters"],[["dot",["name","_gl"],"TEXTURE_2D"],["name","renderTarget"],["name","isTargetPowerOfTwo"]]]],["stat",["call",["dot",["name","_gl"],"texImage2D"],[["dot",["name","_gl"],"TEXTURE_2D"],["num",0],["name","glFormat"],["dot",["name","renderTarget"],"width"],["dot",["name","renderTarget"],"height"],["num",0],["name","glFormat"],["name","glType"],["name","null"]]]],["stat",["call",["name","setupFrameBuffer"],[["dot",["name","renderTarget"],"__webglFramebuffer"],["name","renderTarget"],["dot",["name","_gl"],"TEXTURE_2D"]]]],["stat",["call",["name","setupRenderBuffer"],[["dot",["name","renderTarget"],"__webglRenderbuffer"],["name","renderTarget"]]]],["if",["name","isTargetPowerOfTwo"],["stat",["call",["dot",["name","_gl"],"generateMipmap"],[["dot",["name","_gl"],"TEXTURE_2D"]]]],null]]]],["if",["name","isCube"],["block",[["stat",["call",["dot",["name","_gl"],"bindTexture"],[["dot",["name","_gl"],"TEXTURE_CUBE_MAP"],["name","null"]]]]]],["block",[["stat",["call",["dot",["name","_gl"],"bindTexture"],[["dot",["name","_gl"],"TEXTURE_2D"],["name","null"]]]]]]],["stat",["call",["dot",["name","_gl"],"bindRenderbuffer"],[["dot",["name","_gl"],"RENDERBUFFER"],["name","null"]]]],["stat",["call",["dot",["name","_gl"],"bindFramebuffer"],[["dot",["name","_gl"],"FRAMEBUFFER"],["name","null"]]]]]],null],["var",[["framebuffer"],["width"],["height"],["vx"],["vy"]]],["if",["name","renderTarget"],["block",[["if",["name","isCube"],["block",[["stat",["assign",true,["name","framebuffer"],["sub",["dot",["name","renderTarget"],"__webglFramebuffer"],["dot",["name","renderTarget"],"activeCubeFace"]]]]]],["block",[["stat",["assign",true,["name","framebuffer"],["dot",["name","renderTarget"],"__webglFramebuffer"]]]]]],["stat",["assign",true,["name","width"],["dot",["name","renderTarget"],"width"]]],["stat",["assign",true,["name","height"],["dot",["name","renderTarget"],"height"]]],["stat",["assign",true,["name","vx"],["num",0]]],["stat",["assign",true,["name","vy"],["num",0]]]]],["block",[["stat",["assign",true,["name","framebuffer"],["name","null"]]],["stat",["assign",true,["name","width"],["name","_viewportWidth"]]],["stat",["assign",true,["name","height"],["name","_viewportHeight"]]],["stat",["assign",true,["name","vx"],["name","_viewportX"]]],["stat",["assign",true,["name","vy"],["name","_viewportY"]]]]]],["if",["binary","!==",["name","framebuffer"],["name","_currentFramebuffer"]],["block",[["stat",["call",["dot",["name","_gl"],"bindFramebuffer"],[["dot",["name","_gl"],"FRAMEBUFFER"],["name","framebuffer"]]]],["stat",["call",["dot",["name","_gl"],"viewport"],[["name","vx"],["name","vy"],["name","width"],["name","height"]]]],["stat",["assign",true,["name","_currentFramebuffer"],["name","framebuffer"]]]]],null],["stat",["assign",true,["name","_currentWidth"],["name","width"]]],["stat",["assign",true,["name","_currentHeight"],["name","height"]]]]]]],["defun","updateRenderTargetMipmap",["renderTarget"],[["if",["binary","instanceof",["name","renderTarget"],["dot",["name","THREE"],"WebGLRenderTargetCube"]],["block",[["stat",["call",["dot",["name","_gl"],"bindTexture"],[["dot",["name","_gl"],"TEXTURE_CUBE_MAP"],["dot",["name","renderTarget"],"__webglTexture"]]]],["stat",["call",["dot",["name","_gl"],"generateMipmap"],[["dot",["name","_gl"],"TEXTURE_CUBE_MAP"]]]],["stat",["call",["dot",["name","_gl"],"bindTexture"],[["dot",["name","_gl"],"TEXTURE_CUBE_MAP"],["name","null"]]]]]],["block",[["stat",["call",["dot",["name","_gl"],"bindTexture"],[["dot",["name","_gl"],"TEXTURE_2D"],["dot",["name","renderTarget"],"__webglTexture"]]]],["stat",["call",["dot",["name","_gl"],"generateMipmap"],[["dot",["name","_gl"],"TEXTURE_2D"]]]],["stat",["call",["dot",["name","_gl"],"bindTexture"],[["dot",["name","_gl"],"TEXTURE_2D"],["name","null"]]]]]]]]],["block"],["defun","filterFallback",["f"],[["switch",["name","f"],[[["dot",["name","THREE"],"NearestFilter"],[]],[["dot",["name","THREE"],"NearestMipMapNearestFilter"],[]],[["dot",["name","THREE"],"NearestMipMapLinearFilter"],[["return",["dot",["name","_gl"],"NEAREST"]],["break",null]]],[["dot",["name","THREE"],"LinearFilter"],[]],[["dot",["name","THREE"],"LinearMipMapNearestFilter"],[]],[["dot",["name","THREE"],"LinearMipMapLinearFilter"],[]],[null,[["return",["dot",["name","_gl"],"LINEAR"]],["break",null]]]]]]],["block"],["defun","paramThreeToGL",["p"],[["switch",["name","p"],[[["dot",["name","THREE"],"RepeatWrapping"],[["return",["dot",["name","_gl"],"REPEAT"]],["break",null]]],[["dot",["name","THREE"],"ClampToEdgeWrapping"],[["return",["dot",["name","_gl"],"CLAMP_TO_EDGE"]],["break",null]]],[["dot",["name","THREE"],"MirroredRepeatWrapping"],[["return",["dot",["name","_gl"],"MIRRORED_REPEAT"]],["break",null]]],[["dot",["name","THREE"],"NearestFilter"],[["return",["dot",["name","_gl"],"NEAREST"]],["break",null]]],[["dot",["name","THREE"],"NearestMipMapNearestFilter"],[["return",["dot",["name","_gl"],"NEAREST_MIPMAP_NEAREST"]],["break",null]]],[["dot",["name","THREE"],"NearestMipMapLinearFilter"],[["return",["dot",["name","_gl"],"NEAREST_MIPMAP_LINEAR"]],["break",null]]],[["dot",["name","THREE"],"LinearFilter"],[["return",["dot",["name","_gl"],"LINEAR"]],["break",null]]],[["dot",["name","THREE"],"LinearMipMapNearestFilter"],[["return",["dot",["name","_gl"],"LINEAR_MIPMAP_NEAREST"]],["break",null]]],[["dot",["name","THREE"],"LinearMipMapLinearFilter"],[["return",["dot",["name","_gl"],"LINEAR_MIPMAP_LINEAR"]],["break",null]]],[["dot",["name","THREE"],"ByteType"],[["return",["dot",["name","_gl"],"BYTE"]],["break",null]]],[["dot",["name","THREE"],"UnsignedByteType"],[["return",["dot",["name","_gl"],"UNSIGNED_BYTE"]],["break",null]]],[["dot",["name","THREE"],"ShortType"],[["return",["dot",["name","_gl"],"SHORT"]],["break",null]]],[["dot",["name","THREE"],"UnsignedShortType"],[["return",["dot",["name","_gl"],"UNSIGNED_SHORT"]],["break",null]]],[["dot",["name","THREE"],"IntType"],[["return",["dot",["name","_gl"],"INT"]],["break",null]]],[["dot",["name","THREE"],"UnsignedIntType"],[["return",["dot",["name","_gl"],"UNSIGNED_INT"]],["break",null]]],[["dot",["name","THREE"],"FloatType"],[["return",["dot",["name","_gl"],"FLOAT"]],["break",null]]],[["dot",["name","THREE"],"AlphaFormat"],[["return",["dot",["name","_gl"],"ALPHA"]],["break",null]]],[["dot",["name","THREE"],"RGBFormat"],[["return",["dot",["name","_gl"],"RGB"]],["break",null]]],[["dot",["name","THREE"],"RGBAFormat"],[["return",["dot",["name","_gl"],"RGBA"]],["break",null]]],[["dot",["name","THREE"],"LuminanceFormat"],[["return",["dot",["name","_gl"],"LUMINANCE"]],["break",null]]],[["dot",["name","THREE"],"LuminanceAlphaFormat"],[["return",["dot",["name","_gl"],"LUMINANCE_ALPHA"]],["break",null]]],[["dot",["name","THREE"],"AddEquation"],[["return",["dot",["name","_gl"],"FUNC_ADD"]],["break",null]]],[["dot",["name","THREE"],"SubtractEquation"],[["return",["dot",["name","_gl"],"FUNC_SUBTRACT"]],["break",null]]],[["dot",["name","THREE"],"ReverseSubtractEquation"],[["return",["dot",["name","_gl"],"FUNC_REVERSE_SUBTRACT"]],["break",null]]],[["dot",["name","THREE"],"ZeroFactor"],[["return",["dot",["name","_gl"],"ZERO"]],["break",null]]],[["dot",["name","THREE"],"OneFactor"],[["return",["dot",["name","_gl"],"ONE"]],["break",null]]],[["dot",["name","THREE"],"SrcColorFactor"],[["return",["dot",["name","_gl"],"SRC_COLOR"]],["break",null]]],[["dot",["name","THREE"],"OneMinusSrcColorFactor"],[["return",["dot",["name","_gl"],"ONE_MINUS_SRC_COLOR"]],["break",null]]],[["dot",["name","THREE"],"SrcAlphaFactor"],[["return",["dot",["name","_gl"],"SRC_ALPHA"]],["break",null]]],[["dot",["name","THREE"],"OneMinusSrcAlphaFactor"],[["return",["dot",["name","_gl"],"ONE_MINUS_SRC_ALPHA"]],["break",null]]],[["dot",["name","THREE"],"DstAlphaFactor"],[["return",["dot",["name","_gl"],"DST_ALPHA"]],["break",null]]],[["dot",["name","THREE"],"OneMinusDstAlphaFactor"],[["return",["dot",["name","_gl"],"ONE_MINUS_DST_ALPHA"]],["break",null]]],[["dot",["name","THREE"],"DstColorFactor"],[["return",["dot",["name","_gl"],"DST_COLOR"]],["break",null]]],[["dot",["name","THREE"],"OneMinusDstColorFactor"],[["return",["dot",["name","_gl"],"ONE_MINUS_DST_COLOR"]],["break",null]]],[["dot",["name","THREE"],"SrcAlphaSaturateFactor"],[["return",["dot",["name","_gl"],"SRC_ALPHA_SATURATE"]],["break",null]]]]],["return",["num",0]]]],["block"],["defun","allocateBones",["object"],[["var",[["maxBones",["num",50]]]],["if",["binary","&&",["binary","!==",["name","object"],["name","undefined"]],["binary","instanceof",["name","object"],["dot",["name","THREE"],"SkinnedMesh"]]],["block",[["stat",["assign",true,["name","maxBones"],["dot",["dot",["name","object"],"bones"],"length"]]]]],null],["return",["name","maxBones"]]]],["block"],["defun","allocateLights",["lights"],[["var",[["l"],["ll"],["light"],["dirLights"],["pointLights"],["spotLights"],["maxDirLights"],["maxPointLights"],["maxSpotLights"]]],["stat",["assign",true,["name","dirLights"],["assign",true,["name","pointLights"],["assign",true,["name","spotLights"],["assign",true,["name","maxDirLights"],["assign",true,["name","maxPointLights"],["assign",true,["name","maxSpotLights"],["num",0]]]]]]]],["for",["seq",["assign",true,["name","l"],["num",0]],["assign",true,["name","ll"],["dot",["name","lights"],"length"]]],["binary","<",["name","l"],["name","ll"]],["unary-postfix","++",["name","l"]],["block",[["stat",["assign",true,["name","light"],["sub",["name","lights"],["name","l"]]]],["if",["dot",["name","light"],"onlyShadow"],["continue",null],null],["if",["binary","instanceof",["name","light"],["dot",["name","THREE"],"DirectionalLight"]],["stat",["unary-postfix","++",["name","dirLights"]]],null],["if",["binary","instanceof",["name","light"],["dot",["name","THREE"],"PointLight"]],["stat",["unary-postfix","++",["name","pointLights"]]],null],["if",["binary","instanceof",["name","light"],["dot",["name","THREE"],"SpotLight"]],["stat",["unary-postfix","++",["name","spotLights"]]],null]]]],["if",["binary","<=",["binary","+",["binary","+",["name","pointLights"],["name","spotLights"]],["name","dirLights"]],["name","_maxLights"]],["block",[["stat",["assign",true,["name","maxDirLights"],["name","dirLights"]]],["stat",["assign",true,["name","maxPointLights"],["name","pointLights"]]],["stat",["assign",true,["name","maxSpotLights"],["name","spotLights"]]]]],["block",[["stat",["assign",true,["name","maxDirLights"],["call",["dot",["name","Math"],"ceil"],[["binary","/",["binary","*",["name","_maxLights"],["name","dirLights"]],["binary","+",["name","pointLights"],["name","dirLights"]]]]]]],["stat",["assign",true,["name","maxPointLights"],["binary","-",["name","_maxLights"],["name","maxDirLights"]]]],["stat",["assign",true,["name","maxSpotLights"],["name","maxPointLights"]]]]]],["return",["object",[["directional",["name","maxDirLights"]],["point",["name","maxPointLights"]],["spot",["name","maxSpotLights"]]]]]]],["block"],["defun","allocateShadows",["lights"],[["var",[["l"],["ll"],["light"],["maxShadows",["num",0]]]],["for",["seq",["assign",true,["name","l"],["num",0]],["assign",true,["name","ll"],["dot",["name","lights"],"length"]]],["binary","<",["name","l"],["name","ll"]],["unary-postfix","++",["name","l"]],["block",[["stat",["assign",true,["name","light"],["sub",["name","lights"],["name","l"]]]],["if",["unary-prefix","!",["dot",["name","light"],"castShadow"]],["continue",null],null],["if",["binary","instanceof",["name","light"],["dot",["name","THREE"],"SpotLight"]],["stat",["unary-postfix","++",["name","maxShadows"]]],null],["if",["binary","&&",["binary","instanceof",["name","light"],["dot",["name","THREE"],"DirectionalLight"]],["unary-prefix","!",["dot",["name","light"],"shadowCascade"]]],["stat",["unary-postfix","++",["name","maxShadows"]]],null]]]],["return",["name","maxShadows"]]]],["block"],["defun","initGL",[],[["var",[["gl"]]],["try",[["if",["unary-prefix","!",["assign",true,["name","gl"],["call",["dot",["name","_canvas"],"getContext"],[["string","experimental-webgl"],["object",[["alpha",["name","_alpha"]],["premultipliedAlpha",["name","_premultipliedAlpha"]],["antialias",["name","_antialias"]],["stencil",["name","_stencil"]],["preserveDrawingBuffer",["name","_preserveDrawingBuffer"]]]]]]]],["block",[["throw",["string","Error creating WebGL context."]]]],null]],["error",[["stat",["call",["dot",["name","console"],"error"],[["name","error"]]]]]],null],["if",["unary-prefix","!",["call",["dot",["name","gl"],"getExtension"],[["string","OES_texture_float"]]]],["block",[["stat",["call",["dot",["name","console"],"log"],[["string","THREE.WebGLRenderer: Float textures not supported."]]]]]],null],["return",["name","gl"]]]],["block"],["defun","setDefaultGLState",[],[["stat",["call",["dot",["name","_gl"],"clearColor"],[["num",0],["num",0],["num",0],["num",1]]]],["stat",["call",["dot",["name","_gl"],"clearDepth"],[["num",1]]]],["stat",["call",["dot",["name","_gl"],"clearStencil"],[["num",0]]]],["stat",["call",["dot",["name","_gl"],"enable"],[["dot",["name","_gl"],"DEPTH_TEST"]]]],["stat",["call",["dot",["name","_gl"],"depthFunc"],[["dot",["name","_gl"],"LEQUAL"]]]],["stat",["call",["dot",["name","_gl"],"frontFace"],[["dot",["name","_gl"],"CCW"]]]],["stat",["call",["dot",["name","_gl"],"cullFace"],[["dot",["name","_gl"],"BACK"]]]],["stat",["call",["dot",["name","_gl"],"enable"],[["dot",["name","_gl"],"CULL_FACE"]]]],["stat",["call",["dot",["name","_gl"],"enable"],[["dot",["name","_gl"],"BLEND"]]]],["stat",["call",["dot",["name","_gl"],"blendEquation"],[["dot",["name","_gl"],"FUNC_ADD"]]]],["stat",["call",["dot",["name","_gl"],"blendFunc"],[["dot",["name","_gl"],"SRC_ALPHA"],["dot",["name","_gl"],"ONE_MINUS_SRC_ALPHA"]]]],["stat",["call",["dot",["name","_gl"],"clearColor"],[["dot",["name","_clearColor"],"r"],["dot",["name","_clearColor"],"g"],["dot",["name","_clearColor"],"b"],["name","_clearAlpha"]]]]]],["block"],["stat",["assign",true,["dot",["name","this"],"shadowMapPlugin"],["new",["dot",["name","THREE"],"ShadowMapPlugin"],[]]]],["stat",["call",["dot",["name","this"],"addPrePlugin"],[["dot",["name","this"],"shadowMapPlugin"]]]],["stat",["call",["dot",["name","this"],"addPostPlugin"],[["new",["dot",["name","THREE"],"SpritePlugin"],[]]]]],["stat",["call",["dot",["name","this"],"addPostPlugin"],[["new",["dot",["name","THREE"],"LensFlarePlugin"],[]]]]]]]]],["stat",["assign",true,["dot",["name","THREE"],"WebGLRenderTarget"],["function",null,["width","height","options"],[["stat",["assign",true,["dot",["name","this"],"width"],["name","width"]]],["stat",["assign",true,["dot",["name","this"],"height"],["name","height"]]],["stat",["assign",true,["name","options"],["binary","||",["name","options"],["object",[]]]]],["stat",["assign",true,["dot",["name","this"],"wrapS"],["conditional",["binary","!==",["dot",["name","options"],"wrapS"],["name","undefined"]],["dot",["name","options"],"wrapS"],["dot",["name","THREE"],"ClampToEdgeWrapping"]]]],["stat",["assign",true,["dot",["name","this"],"wrapT"],["conditional",["binary","!==",["dot",["name","options"],"wrapT"],["name","undefined"]],["dot",["name","options"],"wrapT"],["dot",["name","THREE"],"ClampToEdgeWrapping"]]]],["stat",["assign",true,["dot",["name","this"],"magFilter"],["conditional",["binary","!==",["dot",["name","options"],"magFilter"],["name","undefined"]],["dot",["name","options"],"magFilter"],["dot",["name","THREE"],"LinearFilter"]]]],["stat",["assign",true,["dot",["name","this"],"minFilter"],["conditional",["binary","!==",["dot",["name","options"],"minFilter"],["name","undefined"]],["dot",["name","options"],"minFilter"],["dot",["name","THREE"],"LinearMipMapLinearFilter"]]]],["stat",["assign",true,["dot",["name","this"],"offset"],["new",["dot",["name","THREE"],"Vector2"],[["num",0],["num",0]]]]],["stat",["assign",true,["dot",["name","this"],"repeat"],["new",["dot",["name","THREE"],"Vector2"],[["num",1],["num",1]]]]],["stat",["assign",true,["dot",["name","this"],"format"],["conditional",["binary","!==",["dot",["name","options"],"format"],["name","undefined"]],["dot",["name","options"],"format"],["dot",["name","THREE"],"RGBAFormat"]]]],["stat",["assign",true,["dot",["name","this"],"type"],["conditional",["binary","!==",["dot",["name","options"],"type"],["name","undefined"]],["dot",["name","options"],"type"],["dot",["name","THREE"],"UnsignedByteType"]]]],["stat",["assign",true,["dot",["name","this"],"depthBuffer"],["conditional",["binary","!==",["dot",["name","options"],"depthBuffer"],["name","undefined"]],["dot",["name","options"],"depthBuffer"],["name","true"]]]],["stat",["assign",true,["dot",["name","this"],"stencilBuffer"],["conditional",["binary","!==",["dot",["name","options"],"stencilBuffer"],["name","undefined"]],["dot",["name","options"],"stencilBuffer"],["name","true"]]]],["stat",["assign",true,["dot",["name","this"],"generateMipmaps"],["name","true"]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"WebGLRenderTarget"],"prototype"],"clone"],["function",null,[],[["var",[["tmp",["new",["dot",["name","THREE"],"WebGLRenderTarget"],[["dot",["name","this"],"width"],["dot",["name","this"],"height"]]]]]],["stat",["assign",true,["dot",["name","tmp"],"wrapS"],["dot",["name","this"],"wrapS"]]],["stat",["assign",true,["dot",["name","tmp"],"wrapT"],["dot",["name","this"],"wrapT"]]],["stat",["assign",true,["dot",["name","tmp"],"magFilter"],["dot",["name","this"],"magFilter"]]],["stat",["assign",true,["dot",["name","tmp"],"minFilter"],["dot",["name","this"],"minFilter"]]],["stat",["call",["dot",["dot",["name","tmp"],"offset"],"copy"],[["dot",["name","this"],"offset"]]]],["stat",["call",["dot",["dot",["name","tmp"],"repeat"],"copy"],[["dot",["name","this"],"repeat"]]]],["stat",["assign",true,["dot",["name","tmp"],"format"],["dot",["name","this"],"format"]]],["stat",["assign",true,["dot",["name","tmp"],"type"],["dot",["name","this"],"type"]]],["stat",["assign",true,["dot",["name","tmp"],"depthBuffer"],["dot",["name","this"],"depthBuffer"]]],["stat",["assign",true,["dot",["name","tmp"],"stencilBuffer"],["dot",["name","this"],"stencilBuffer"]]],["return",["name","tmp"]]]]]],["stat",["assign",true,["dot",["name","THREE"],"WebGLRenderTargetCube"],["function",null,["width","height","options"],[["stat",["call",["dot",["dot",["name","THREE"],"WebGLRenderTarget"],"call"],[["name","this"],["name","width"],["name","height"],["name","options"]]]],["stat",["assign",true,["dot",["name","this"],"activeCubeFace"],["num",0]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"WebGLRenderTargetCube"],"prototype"],["new",["dot",["name","THREE"],"WebGLRenderTarget"],[]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"WebGLRenderTargetCube"],"prototype"],"constructor"],["dot",["name","THREE"],"WebGLRenderTargetCube"]]],["stat",["assign",true,["dot",["name","THREE"],"RenderableVertex"],["function",null,[],[["stat",["assign",true,["dot",["name","this"],"positionWorld"],["new",["dot",["name","THREE"],"Vector3"],[]]]],["stat",["assign",true,["dot",["name","this"],"positionScreen"],["new",["dot",["name","THREE"],"Vector4"],[]]]],["stat",["assign",true,["dot",["name","this"],"visible"],["name","true"]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"RenderableVertex"],"prototype"],"copy"],["function",null,["vertex"],[["stat",["call",["dot",["dot",["name","this"],"positionWorld"],"copy"],[["dot",["name","vertex"],"positionWorld"]]]],["stat",["call",["dot",["dot",["name","this"],"positionScreen"],"copy"],[["dot",["name","vertex"],"positionScreen"]]]]]]]],["stat",["assign",true,["dot",["name","THREE"],"RenderableFace3"],["function",null,[],[["stat",["assign",true,["dot",["name","this"],"v1"],["new",["dot",["name","THREE"],"RenderableVertex"],[]]]],["stat",["assign",true,["dot",["name","this"],"v2"],["new",["dot",["name","THREE"],"RenderableVertex"],[]]]],["stat",["assign",true,["dot",["name","this"],"v3"],["new",["dot",["name","THREE"],"RenderableVertex"],[]]]],["stat",["assign",true,["dot",["name","this"],"centroidWorld"],["new",["dot",["name","THREE"],"Vector3"],[]]]],["stat",["assign",true,["dot",["name","this"],"centroidScreen"],["new",["dot",["name","THREE"],"Vector3"],[]]]],["stat",["assign",true,["dot",["name","this"],"normalWorld"],["new",["dot",["name","THREE"],"Vector3"],[]]]],["stat",["assign",true,["dot",["name","this"],"vertexNormalsWorld"],["array",[["new",["dot",["name","THREE"],"Vector3"],[]],["new",["dot",["name","THREE"],"Vector3"],[]],["new",["dot",["name","THREE"],"Vector3"],[]]]]]],["stat",["assign",true,["dot",["name","this"],"material"],["name","null"]]],["stat",["assign",true,["dot",["name","this"],"faceMaterial"],["name","null"]]],["stat",["assign",true,["dot",["name","this"],"uvs"],["array",[["array",[]]]]]],["stat",["assign",true,["dot",["name","this"],"z"],["name","null"]]]]]]],["stat",["assign",true,["dot",["name","THREE"],"RenderableFace4"],["function",null,[],[["stat",["assign",true,["dot",["name","this"],"v1"],["new",["dot",["name","THREE"],"RenderableVertex"],[]]]],["stat",["assign",true,["dot",["name","this"],"v2"],["new",["dot",["name","THREE"],"RenderableVertex"],[]]]],["stat",["assign",true,["dot",["name","this"],"v3"],["new",["dot",["name","THREE"],"RenderableVertex"],[]]]],["stat",["assign",true,["dot",["name","this"],"v4"],["new",["dot",["name","THREE"],"RenderableVertex"],[]]]],["stat",["assign",true,["dot",["name","this"],"centroidWorld"],["new",["dot",["name","THREE"],"Vector3"],[]]]],["stat",["assign",true,["dot",["name","this"],"centroidScreen"],["new",["dot",["name","THREE"],"Vector3"],[]]]],["stat",["assign",true,["dot",["name","this"],"normalWorld"],["new",["dot",["name","THREE"],"Vector3"],[]]]],["stat",["assign",true,["dot",["name","this"],"vertexNormalsWorld"],["array",[["new",["dot",["name","THREE"],"Vector3"],[]],["new",["dot",["name","THREE"],"Vector3"],[]],["new",["dot",["name","THREE"],"Vector3"],[]],["new",["dot",["name","THREE"],"Vector3"],[]]]]]],["stat",["assign",true,["dot",["name","this"],"material"],["name","null"]]],["stat",["assign",true,["dot",["name","this"],"faceMaterial"],["name","null"]]],["stat",["assign",true,["dot",["name","this"],"uvs"],["array",[["array",[]]]]]],["stat",["assign",true,["dot",["name","this"],"z"],["name","null"]]]]]]],["stat",["assign",true,["dot",["name","THREE"],"RenderableObject"],["function",null,[],[["stat",["assign",true,["dot",["name","this"],"object"],["name","null"]]],["stat",["assign",true,["dot",["name","this"],"z"],["name","null"]]]]]]],["stat",["assign",true,["dot",["name","THREE"],"RenderableParticle"],["function",null,[],[["stat",["assign",true,["dot",["name","this"],"x"],["name","null"]]],["stat",["assign",true,["dot",["name","this"],"y"],["name","null"]]],["stat",["assign",true,["dot",["name","this"],"z"],["name","null"]]],["stat",["assign",true,["dot",["name","this"],"rotation"],["name","null"]]],["stat",["assign",true,["dot",["name","this"],"scale"],["new",["dot",["name","THREE"],"Vector2"],[]]]],["stat",["assign",true,["dot",["name","this"],"material"],["name","null"]]]]]]],["stat",["assign",true,["dot",["name","THREE"],"RenderableLine"],["function",null,[],[["stat",["assign",true,["dot",["name","this"],"z"],["name","null"]]],["stat",["assign",true,["dot",["name","this"],"v1"],["new",["dot",["name","THREE"],"RenderableVertex"],[]]]],["stat",["assign",true,["dot",["name","this"],"v2"],["new",["dot",["name","THREE"],"RenderableVertex"],[]]]],["stat",["assign",true,["dot",["name","this"],"material"],["name","null"]]]]]]],["stat",["assign",true,["dot",["name","THREE"],"ColorUtils"],["object",[["adjustHSV",["function",null,["color","h","s","v"],[["var",[["hsv",["dot",["dot",["name","THREE"],"ColorUtils"],"__hsv"]]]],["stat",["call",["dot",["dot",["name","THREE"],"ColorUtils"],"rgbToHsv"],[["name","color"],["name","hsv"]]]],["stat",["assign",true,["dot",["name","hsv"],"h"],["call",["dot",["dot",["name","THREE"],"Math"],"clamp"],[["binary","+",["dot",["name","hsv"],"h"],["name","h"]],["num",0],["num",1]]]]],["stat",["assign",true,["dot",["name","hsv"],"s"],["call",["dot",["dot",["name","THREE"],"Math"],"clamp"],[["binary","+",["dot",["name","hsv"],"s"],["name","s"]],["num",0],["num",1]]]]],["stat",["assign",true,["dot",["name","hsv"],"v"],["call",["dot",["dot",["name","THREE"],"Math"],"clamp"],[["binary","+",["dot",["name","hsv"],"v"],["name","v"]],["num",0],["num",1]]]]],["stat",["call",["dot",["name","color"],"setHSV"],[["dot",["name","hsv"],"h"],["dot",["name","hsv"],"s"],["dot",["name","hsv"],"v"]]]]]]],["rgbToHsv",["function",null,["color","hsv"],[["var",[["r",["dot",["name","color"],"r"]]]],["var",[["g",["dot",["name","color"],"g"]]]],["var",[["b",["dot",["name","color"],"b"]]]],["var",[["max",["call",["dot",["name","Math"],"max"],[["call",["dot",["name","Math"],"max"],[["name","r"],["name","g"]]],["name","b"]]]]]],["var",[["min",["call",["dot",["name","Math"],"min"],[["call",["dot",["name","Math"],"min"],[["name","r"],["name","g"]]],["name","b"]]]]]],["var",[["hue"]]],["var",[["saturation"]]],["var",[["value",["name","max"]]]],["if",["binary","===",["name","min"],["name","max"]],["block",[["stat",["assign",true,["name","hue"],["num",0]]],["stat",["assign",true,["name","saturation"],["num",0]]]]],["block",[["var",[["delta",["binary","-",["name","max"],["name","min"]]]]],["stat",["assign",true,["name","saturation"],["binary","/",["name","delta"],["name","max"]]]],["if",["binary","===",["name","r"],["name","max"]],["block",[["stat",["assign",true,["name","hue"],["binary","/",["binary","-",["name","g"],["name","b"]],["name","delta"]]]]]],["if",["binary","===",["name","g"],["name","max"]],["block",[["stat",["assign",true,["name","hue"],["binary","+",["num",2],["binary","/",["binary","-",["name","b"],["name","r"]],["name","delta"]]]]]]],["block",[["stat",["assign",true,["name","hue"],["binary","+",["num",4],["binary","/",["binary","-",["name","r"],["name","g"]],["name","delta"]]]]]]]]],["stat",["assign","/",["name","hue"],["num",6]]],["if",["binary","<",["name","hue"],["num",0]],["block",[["stat",["assign","+",["name","hue"],["num",1]]]]],null],["if",["binary",">",["name","hue"],["num",1]],["block",[["stat",["assign","-",["name","hue"],["num",1]]]]],null]]]],["if",["binary","===",["name","hsv"],["name","undefined"]],["block",[["stat",["assign",true,["name","hsv"],["object",[["h",["num",0]],["s",["num",0]],["v",["num",0]]]]]]]],null],["stat",["assign",true,["dot",["name","hsv"],"h"],["name","hue"]]],["stat",["assign",true,["dot",["name","hsv"],"s"],["name","saturation"]]],["stat",["assign",true,["dot",["name","hsv"],"v"],["name","value"]]],["return",["name","hsv"]]]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"ColorUtils"],"__hsv"],["object",[["h",["num",0]],["s",["num",0]],["v",["num",0]]]]]],["stat",["assign",true,["dot",["name","THREE"],"GeometryUtils"],["object",[["merge",["function",null,["geometry1","object2"],[["var",[["matrix"],["matrixRotation"],["vertexOffset",["dot",["dot",["name","geometry1"],"vertices"],"length"]],["uvPosition",["dot",["sub",["dot",["name","geometry1"],"faceVertexUvs"],["num",0]],"length"]],["geometry2",["conditional",["binary","instanceof",["name","object2"],["dot",["name","THREE"],"Mesh"]],["dot",["name","object2"],"geometry"],["name","object2"]]],["vertices1",["dot",["name","geometry1"],"vertices"]],["vertices2",["dot",["name","geometry2"],"vertices"]],["faces1",["dot",["name","geometry1"],"faces"]],["faces2",["dot",["name","geometry2"],"faces"]],["uvs1",["sub",["dot",["name","geometry1"],"faceVertexUvs"],["num",0]]],["uvs2",["sub",["dot",["name","geometry2"],"faceVertexUvs"],["num",0]]]]],["var",[["geo1MaterialsMap",["object",[]]]]],["for",["var",[["i",["num",0]]]],["binary","<",["name","i"],["dot",["dot",["name","geometry1"],"materials"],"length"]],["unary-postfix","++",["name","i"]],["block",[["var",[["id",["dot",["sub",["dot",["name","geometry1"],"materials"],["name","i"]],"id"]]]],["stat",["assign",true,["sub",["name","geo1MaterialsMap"],["name","id"]],["name","i"]]]]]],["if",["binary","instanceof",["name","object2"],["dot",["name","THREE"],"Mesh"]],["block",[["stat",["binary","&&",["dot",["name","object2"],"matrixAutoUpdate"],["call",["dot",["name","object2"],"updateMatrix"],[]]]],["stat",["assign",true,["name","matrix"],["dot",["name","object2"],"matrix"]]],["stat",["assign",true,["name","matrixRotation"],["new",["dot",["name","THREE"],"Matrix4"],[]]]],["stat",["call",["dot",["name","matrixRotation"],"extractRotation"],[["name","matrix"],["dot",["name","object2"],"scale"]]]]]],null],["for",["var",[["i",["num",0]],["il",["dot",["name","vertices2"],"length"]]]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["block",[["var",[["vertex",["sub",["name","vertices2"],["name","i"]]]]],["var",[["vertexCopy",["call",["dot",["name","vertex"],"clone"],[]]]]],["if",["name","matrix"],["stat",["call",["dot",["name","matrix"],"multiplyVector3"],[["name","vertexCopy"]]]],null],["stat",["call",["dot",["name","vertices1"],"push"],[["name","vertexCopy"]]]]]]],["for",["seq",["assign",true,["name","i"],["num",0]],["assign",true,["name","il"],["dot",["name","faces2"],"length"]]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["block",[["var",[["face",["sub",["name","faces2"],["name","i"]]],["faceCopy"],["normal"],["color"],["faceVertexNormals",["dot",["name","face"],"vertexNormals"]],["faceVertexColors",["dot",["name","face"],"vertexColors"]]]],["if",["binary","instanceof",["name","face"],["dot",["name","THREE"],"Face3"]],["block",[["stat",["assign",true,["name","faceCopy"],["new",["dot",["name","THREE"],"Face3"],[["binary","+",["dot",["name","face"],"a"],["name","vertexOffset"]],["binary","+",["dot",["name","face"],"b"],["name","vertexOffset"]],["binary","+",["dot",["name","face"],"c"],["name","vertexOffset"]]]]]]]],["if",["binary","instanceof",["name","face"],["dot",["name","THREE"],"Face4"]],["block",[["stat",["assign",true,["name","faceCopy"],["new",["dot",["name","THREE"],"Face4"],[["binary","+",["dot",["name","face"],"a"],["name","vertexOffset"]],["binary","+",["dot",["name","face"],"b"],["name","vertexOffset"]],["binary","+",["dot",["name","face"],"c"],["name","vertexOffset"]],["binary","+",["dot",["name","face"],"d"],["name","vertexOffset"]]]]]]]],null]],["stat",["call",["dot",["dot",["name","faceCopy"],"normal"],"copy"],[["dot",["name","face"],"normal"]]]],["if",["name","matrixRotation"],["stat",["call",["dot",["name","matrixRotation"],"multiplyVector3"],[["dot",["name","faceCopy"],"normal"]]]],null],["for",["var",[["j",["num",0]],["jl",["dot",["name","faceVertexNormals"],"length"]]]],["binary","<",["name","j"],["name","jl"]],["unary-postfix","++",["name","j"]],["block",[["stat",["assign",true,["name","normal"],["call",["dot",["sub",["name","faceVertexNormals"],["name","j"]],"clone"],[]]]],["if",["name","matrixRotation"],["stat",["call",["dot",["name","matrixRotation"],"multiplyVector3"],[["name","normal"]]]],null],["stat",["call",["dot",["dot",["name","faceCopy"],"vertexNormals"],"push"],[["name","normal"]]]]]]],["stat",["call",["dot",["dot",["name","faceCopy"],"color"],"copy"],[["dot",["name","face"],"color"]]]],["for",["var",[["j",["num",0]],["jl",["dot",["name","faceVertexColors"],"length"]]]],["binary","<",["name","j"],["name","jl"]],["unary-postfix","++",["name","j"]],["block",[["stat",["assign",true,["name","color"],["sub",["name","faceVertexColors"],["name","j"]]]],["stat",["call",["dot",["dot",["name","faceCopy"],"vertexColors"],"push"],[["call",["dot",["name","color"],"clone"],[]]]]]]]],["if",["binary","!==",["dot",["name","face"],"materialIndex"],["name","undefined"]],["block",[["var",[["material2",["sub",["dot",["name","geometry2"],"materials"],["dot",["name","face"],"materialIndex"]]]]],["var",[["materialId2",["dot",["name","material2"],"id"]]]],["var",[["materialIndex",["sub",["name","geo1MaterialsMap"],["name","materialId2"]]]]],["if",["binary","===",["name","materialIndex"],["name","undefined"]],["block",[["stat",["assign",true,["name","materialIndex"],["dot",["dot",["name","geometry1"],"materials"],"length"]]],["stat",["assign",true,["sub",["name","geo1MaterialsMap"],["name","materialId2"]],["name","materialIndex"]]],["stat",["call",["dot",["dot",["name","geometry1"],"materials"],"push"],[["name","material2"]]]]]],null],["stat",["assign",true,["dot",["name","faceCopy"],"materialIndex"],["name","materialIndex"]]]]],null],["stat",["call",["dot",["dot",["name","faceCopy"],"centroid"],"copy"],[["dot",["name","face"],"centroid"]]]],["if",["name","matrix"],["stat",["call",["dot",["name","matrix"],"multiplyVector3"],[["dot",["name","faceCopy"],"centroid"]]]],null],["stat",["call",["dot",["name","faces1"],"push"],[["name","faceCopy"]]]]]]],["for",["seq",["assign",true,["name","i"],["num",0]],["assign",true,["name","il"],["dot",["name","uvs2"],"length"]]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["block",[["var",[["uv",["sub",["name","uvs2"],["name","i"]]],["uvCopy",["array",[]]]]],["for",["var",[["j",["num",0]],["jl",["dot",["name","uv"],"length"]]]],["binary","<",["name","j"],["name","jl"]],["unary-postfix","++",["name","j"]],["block",[["stat",["call",["dot",["name","uvCopy"],"push"],[["new",["dot",["name","THREE"],"UV"],[["dot",["sub",["name","uv"],["name","j"]],"u"],["dot",["sub",["name","uv"],["name","j"]],"v"]]]]]]]]],["stat",["call",["dot",["name","uvs1"],"push"],[["name","uvCopy"]]]]]]]]]],["clone",["function",null,["geometry"],[["var",[["cloneGeo",["new",["dot",["name","THREE"],"Geometry"],[]]]]],["var",[["i"],["il"]]],["var",[["vertices",["dot",["name","geometry"],"vertices"]],["faces",["dot",["name","geometry"],"faces"]],["uvs",["sub",["dot",["name","geometry"],"faceVertexUvs"],["num",0]]]]],["if",["dot",["name","geometry"],"materials"],["block",[["stat",["assign",true,["dot",["name","cloneGeo"],"materials"],["call",["dot",["dot",["name","geometry"],"materials"],"slice"],[]]]]]],null],["for",["seq",["assign",true,["name","i"],["num",0]],["assign",true,["name","il"],["dot",["name","vertices"],"length"]]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["block",[["var",[["vertex",["sub",["name","vertices"],["name","i"]]]]],["stat",["call",["dot",["dot",["name","cloneGeo"],"vertices"],"push"],[["call",["dot",["name","vertex"],"clone"],[]]]]]]]],["for",["seq",["assign",true,["name","i"],["num",0]],["assign",true,["name","il"],["dot",["name","faces"],"length"]]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["block",[["var",[["face",["sub",["name","faces"],["name","i"]]]]],["stat",["call",["dot",["dot",["name","cloneGeo"],"faces"],"push"],[["call",["dot",["name","face"],"clone"],[]]]]]]]],["for",["seq",["assign",true,["name","i"],["num",0]],["assign",true,["name","il"],["dot",["name","uvs"],"length"]]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["block",[["var",[["uv",["sub",["name","uvs"],["name","i"]]],["uvCopy",["array",[]]]]],["for",["var",[["j",["num",0]],["jl",["dot",["name","uv"],"length"]]]],["binary","<",["name","j"],["name","jl"]],["unary-postfix","++",["name","j"]],["block",[["stat",["call",["dot",["name","uvCopy"],"push"],[["new",["dot",["name","THREE"],"UV"],[["dot",["sub",["name","uv"],["name","j"]],"u"],["dot",["sub",["name","uv"],["name","j"]],"v"]]]]]]]]],["stat",["call",["dot",["sub",["dot",["name","cloneGeo"],"faceVertexUvs"],["num",0]],"push"],[["name","uvCopy"]]]]]]],["return",["name","cloneGeo"]]]]],["randomPointInTriangle",["function",null,["vectorA","vectorB","vectorC"],[["var",[["a"],["b"],["c"],["point",["new",["dot",["name","THREE"],"Vector3"],[]]],["tmp",["dot",["dot",["name","THREE"],"GeometryUtils"],"__v1"]]]],["stat",["assign",true,["name","a"],["call",["dot",["dot",["name","THREE"],"GeometryUtils"],"random"],[]]]],["stat",["assign",true,["name","b"],["call",["dot",["dot",["name","THREE"],"GeometryUtils"],"random"],[]]]],["if",["binary",">",["binary","+",["name","a"],["name","b"]],["num",1]],["block",[["stat",["assign",true,["name","a"],["binary","-",["num",1],["name","a"]]]],["stat",["assign",true,["name","b"],["binary","-",["num",1],["name","b"]]]]]],null],["stat",["assign",true,["name","c"],["binary","-",["binary","-",["num",1],["name","a"]],["name","b"]]]],["stat",["call",["dot",["name","point"],"copy"],[["name","vectorA"]]]],["stat",["call",["dot",["name","point"],"multiplyScalar"],[["name","a"]]]],["stat",["call",["dot",["name","tmp"],"copy"],[["name","vectorB"]]]],["stat",["call",["dot",["name","tmp"],"multiplyScalar"],[["name","b"]]]],["stat",["call",["dot",["name","point"],"addSelf"],[["name","tmp"]]]],["stat",["call",["dot",["name","tmp"],"copy"],[["name","vectorC"]]]],["stat",["call",["dot",["name","tmp"],"multiplyScalar"],[["name","c"]]]],["stat",["call",["dot",["name","point"],"addSelf"],[["name","tmp"]]]],["return",["name","point"]]]]],["randomPointInFace",["function",null,["face","geometry","useCachedAreas"],[["var",[["vA"],["vB"],["vC"],["vD"]]],["if",["binary","instanceof",["name","face"],["dot",["name","THREE"],"Face3"]],["block",[["stat",["assign",true,["name","vA"],["sub",["dot",["name","geometry"],"vertices"],["dot",["name","face"],"a"]]]],["stat",["assign",true,["name","vB"],["sub",["dot",["name","geometry"],"vertices"],["dot",["name","face"],"b"]]]],["stat",["assign",true,["name","vC"],["sub",["dot",["name","geometry"],"vertices"],["dot",["name","face"],"c"]]]],["return",["call",["dot",["dot",["name","THREE"],"GeometryUtils"],"randomPointInTriangle"],[["name","vA"],["name","vB"],["name","vC"]]]]]],["if",["binary","instanceof",["name","face"],["dot",["name","THREE"],"Face4"]],["block",[["stat",["assign",true,["name","vA"],["sub",["dot",["name","geometry"],"vertices"],["dot",["name","face"],"a"]]]],["stat",["assign",true,["name","vB"],["sub",["dot",["name","geometry"],"vertices"],["dot",["name","face"],"b"]]]],["stat",["assign",true,["name","vC"],["sub",["dot",["name","geometry"],"vertices"],["dot",["name","face"],"c"]]]],["stat",["assign",true,["name","vD"],["sub",["dot",["name","geometry"],"vertices"],["dot",["name","face"],"d"]]]],["var",[["area1"],["area2"]]],["if",["name","useCachedAreas"],["block",[["if",["binary","&&",["dot",["name","face"],"_area1"],["dot",["name","face"],"_area2"]],["block",[["stat",["assign",true,["name","area1"],["dot",["name","face"],"_area1"]]],["stat",["assign",true,["name","area2"],["dot",["name","face"],"_area2"]]]]],["block",[["stat",["assign",true,["name","area1"],["call",["dot",["dot",["name","THREE"],"GeometryUtils"],"triangleArea"],[["name","vA"],["name","vB"],["name","vD"]]]]],["stat",["assign",true,["name","area2"],["call",["dot",["dot",["name","THREE"],"GeometryUtils"],"triangleArea"],[["name","vB"],["name","vC"],["name","vD"]]]]],["stat",["assign",true,["dot",["name","face"],"_area1"],["name","area1"]]],["stat",["assign",true,["dot",["name","face"],"_area2"],["name","area2"]]]]]]]],["block",[["stat",["seq",["assign",true,["name","area1"],["call",["dot",["dot",["name","THREE"],"GeometryUtils"],"triangleArea"],[["name","vA"],["name","vB"],["name","vD"]]]],["assign",true,["name","area2"],["call",["dot",["dot",["name","THREE"],"GeometryUtils"],"triangleArea"],[["name","vB"],["name","vC"],["name","vD"]]]]]]]]],["var",[["r",["binary","*",["call",["dot",["dot",["name","THREE"],"GeometryUtils"],"random"],[]],["binary","+",["name","area1"],["name","area2"]]]]]],["if",["binary","<",["name","r"],["name","area1"]],["block",[["return",["call",["dot",["dot",["name","THREE"],"GeometryUtils"],"randomPointInTriangle"],[["name","vA"],["name","vB"],["name","vD"]]]]]],["block",[["return",["call",["dot",["dot",["name","THREE"],"GeometryUtils"],"randomPointInTriangle"],[["name","vB"],["name","vC"],["name","vD"]]]]]]]]],null]]]]],["randomPointsInGeometry",["function",null,["geometry","n"],[["var",[["face"],["i"],["faces",["dot",["name","geometry"],"faces"]],["vertices",["dot",["name","geometry"],"vertices"]],["il",["dot",["name","faces"],"length"]],["totalArea",["num",0]],["cumulativeAreas",["array",[]]],["vA"],["vB"],["vC"],["vD"]]],["for",["assign",true,["name","i"],["num",0]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","face"],["sub",["name","faces"],["name","i"]]]],["if",["binary","instanceof",["name","face"],["dot",["name","THREE"],"Face3"]],["block",[["stat",["assign",true,["name","vA"],["sub",["name","vertices"],["dot",["name","face"],"a"]]]],["stat",["assign",true,["name","vB"],["sub",["name","vertices"],["dot",["name","face"],"b"]]]],["stat",["assign",true,["name","vC"],["sub",["name","vertices"],["dot",["name","face"],"c"]]]],["stat",["assign",true,["dot",["name","face"],"_area"],["call",["dot",["dot",["name","THREE"],"GeometryUtils"],"triangleArea"],[["name","vA"],["name","vB"],["name","vC"]]]]]]],["if",["binary","instanceof",["name","face"],["dot",["name","THREE"],"Face4"]],["block",[["stat",["assign",true,["name","vA"],["sub",["name","vertices"],["dot",["name","face"],"a"]]]],["stat",["assign",true,["name","vB"],["sub",["name","vertices"],["dot",["name","face"],"b"]]]],["stat",["assign",true,["name","vC"],["sub",["name","vertices"],["dot",["name","face"],"c"]]]],["stat",["assign",true,["name","vD"],["sub",["name","vertices"],["dot",["name","face"],"d"]]]],["stat",["assign",true,["dot",["name","face"],"_area1"],["call",["dot",["dot",["name","THREE"],"GeometryUtils"],"triangleArea"],[["name","vA"],["name","vB"],["name","vD"]]]]],["stat",["assign",true,["dot",["name","face"],"_area2"],["call",["dot",["dot",["name","THREE"],"GeometryUtils"],"triangleArea"],[["name","vB"],["name","vC"],["name","vD"]]]]],["stat",["assign",true,["dot",["name","face"],"_area"],["binary","+",["dot",["name","face"],"_area1"],["dot",["name","face"],"_area2"]]]]]],null]],["stat",["assign","+",["name","totalArea"],["dot",["name","face"],"_area"]]],["stat",["assign",true,["sub",["name","cumulativeAreas"],["name","i"]],["name","totalArea"]]]]]],["defun","binarySearchIndices",["value"],[["defun","binarySearch",["start","end"],[["if",["binary","<",["name","end"],["name","start"]],["return",["name","start"]],null],["var",[["mid",["binary","+",["name","start"],["call",["dot",["name","Math"],"floor"],[["binary","/",["binary","-",["name","end"],["name","start"]],["num",2]]]]]]]],["if",["binary",">",["sub",["name","cumulativeAreas"],["name","mid"]],["name","value"]],["block",[["return",["call",["name","binarySearch"],[["name","start"],["binary","-",["name","mid"],["num",1]]]]]]],["if",["binary","<",["sub",["name","cumulativeAreas"],["name","mid"]],["name","value"]],["block",[["return",["call",["name","binarySearch"],[["binary","+",["name","mid"],["num",1]],["name","end"]]]]]],["block",[["return",["name","mid"]]]]]]]],["var",[["result",["call",["name","binarySearch"],[["num",0],["binary","-",["dot",["name","cumulativeAreas"],"length"],["num",1]]]]]]],["return",["name","result"]]]],["var",[["r"],["index"],["result",["array",[]]]]],["var",[["stats",["object",[]]]]],["for",["assign",true,["name","i"],["num",0]],["binary","<",["name","i"],["name","n"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","r"],["binary","*",["call",["dot",["dot",["name","THREE"],"GeometryUtils"],"random"],[]],["name","totalArea"]]]],["stat",["assign",true,["name","index"],["call",["name","binarySearchIndices"],[["name","r"]]]]],["stat",["assign",true,["sub",["name","result"],["name","i"]],["call",["dot",["dot",["name","THREE"],"GeometryUtils"],"randomPointInFace"],[["sub",["name","faces"],["name","index"]],["name","geometry"],["name","true"]]]]],["if",["unary-prefix","!",["sub",["name","stats"],["name","index"]]],["block",[["stat",["assign",true,["sub",["name","stats"],["name","index"]],["num",1]]]]],["block",[["stat",["assign","+",["sub",["name","stats"],["name","index"]],["num",1]]]]]]]]],["return",["name","result"]]]]],["triangleArea",["function",null,["vectorA","vectorB","vectorC"],[["var",[["s"],["a"],["b"],["c"],["tmp",["dot",["dot",["name","THREE"],"GeometryUtils"],"__v1"]]]],["stat",["call",["dot",["name","tmp"],"sub"],[["name","vectorA"],["name","vectorB"]]]],["stat",["assign",true,["name","a"],["call",["dot",["name","tmp"],"length"],[]]]],["stat",["call",["dot",["name","tmp"],"sub"],[["name","vectorA"],["name","vectorC"]]]],["stat",["assign",true,["name","b"],["call",["dot",["name","tmp"],"length"],[]]]],["stat",["call",["dot",["name","tmp"],"sub"],[["name","vectorB"],["name","vectorC"]]]],["stat",["assign",true,["name","c"],["call",["dot",["name","tmp"],"length"],[]]]],["stat",["assign",true,["name","s"],["binary","*",["num",0.5],["binary","+",["binary","+",["name","a"],["name","b"]],["name","c"]]]]],["return",["call",["dot",["name","Math"],"sqrt"],[["binary","*",["binary","*",["binary","*",["name","s"],["binary","-",["name","s"],["name","a"]]],["binary","-",["name","s"],["name","b"]]],["binary","-",["name","s"],["name","c"]]]]]]]]],["center",["function",null,["geometry"],[["stat",["call",["dot",["name","geometry"],"computeBoundingBox"],[]]],["var",[["bb",["dot",["name","geometry"],"boundingBox"]]]],["var",[["offset",["new",["dot",["name","THREE"],"Vector3"],[]]]]],["stat",["call",["dot",["name","offset"],"add"],[["dot",["name","bb"],"min"],["dot",["name","bb"],"max"]]]],["stat",["call",["dot",["name","offset"],"multiplyScalar"],[["unary-prefix","-",["num",0.5]]]]],["stat",["call",["dot",["name","geometry"],"applyMatrix"],[["call",["dot",["new",["dot",["name","THREE"],"Matrix4"],[]],"makeTranslation"],[["dot",["name","offset"],"x"],["dot",["name","offset"],"y"],["dot",["name","offset"],"z"]]]]]],["stat",["call",["dot",["name","geometry"],"computeBoundingBox"],[]]],["return",["name","offset"]]]]],["normalizeUVs",["function",null,["geometry"],[["var",[["uvSet",["sub",["dot",["name","geometry"],"faceVertexUvs"],["num",0]]]]],["for",["var",[["i",["num",0]],["il",["dot",["name","uvSet"],"length"]]]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["block",[["var",[["uvs",["sub",["name","uvSet"],["name","i"]]]]],["for",["var",[["j",["num",0]],["jl",["dot",["name","uvs"],"length"]]]],["binary","<",["name","j"],["name","jl"]],["unary-postfix","++",["name","j"]],["block",[["if",["binary","!==",["dot",["sub",["name","uvs"],["name","j"]],"u"],["num",1]],["stat",["assign",true,["dot",["sub",["name","uvs"],["name","j"]],"u"],["binary","-",["dot",["sub",["name","uvs"],["name","j"]],"u"],["call",["dot",["name","Math"],"floor"],[["dot",["sub",["name","uvs"],["name","j"]],"u"]]]]]],null],["if",["binary","!==",["dot",["sub",["name","uvs"],["name","j"]],"v"],["num",1]],["stat",["assign",true,["dot",["sub",["name","uvs"],["name","j"]],"v"],["binary","-",["dot",["sub",["name","uvs"],["name","j"]],"v"],["call",["dot",["name","Math"],"floor"],[["dot",["sub",["name","uvs"],["name","j"]],"v"]]]]]],null]]]]]]]]]],["triangulateQuads",["function",null,["geometry"],[["var",[["i"],["il"],["j"],["jl"]]],["var",[["faces",["array",[]]]]],["var",[["faceUvs",["array",[]]]]],["var",[["faceVertexUvs",["array",[]]]]],["for",["seq",["assign",true,["name","i"],["num",0]],["assign",true,["name","il"],["dot",["dot",["name","geometry"],"faceUvs"],"length"]]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["sub",["name","faceUvs"],["name","i"]],["array",[]]]]]]],["for",["seq",["assign",true,["name","i"],["num",0]],["assign",true,["name","il"],["dot",["dot",["name","geometry"],"faceVertexUvs"],"length"]]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["sub",["name","faceVertexUvs"],["name","i"]],["array",[]]]]]]],["for",["seq",["assign",true,["name","i"],["num",0]],["assign",true,["name","il"],["dot",["dot",["name","geometry"],"faces"],"length"]]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["block",[["var",[["face",["sub",["dot",["name","geometry"],"faces"],["name","i"]]]]],["if",["binary","instanceof",["name","face"],["dot",["name","THREE"],"Face4"]],["block",[["var",[["a",["dot",["name","face"],"a"]]]],["var",[["b",["dot",["name","face"],"b"]]]],["var",[["c",["dot",["name","face"],"c"]]]],["var",[["d",["dot",["name","face"],"d"]]]],["var",[["triA",["new",["dot",["name","THREE"],"Face3"],[]]]]],["var",[["triB",["new",["dot",["name","THREE"],"Face3"],[]]]]],["stat",["call",["dot",["dot",["name","triA"],"color"],"copy"],[["dot",["name","face"],"color"]]]],["stat",["call",["dot",["dot",["name","triB"],"color"],"copy"],[["dot",["name","face"],"color"]]]],["stat",["assign",true,["dot",["name","triA"],"materialIndex"],["dot",["name","face"],"materialIndex"]]],["stat",["assign",true,["dot",["name","triB"],"materialIndex"],["dot",["name","face"],"materialIndex"]]],["stat",["assign",true,["dot",["name","triA"],"a"],["name","a"]]],["stat",["assign",true,["dot",["name","triA"],"b"],["name","b"]]],["stat",["assign",true,["dot",["name","triA"],"c"],["name","d"]]],["stat",["assign",true,["dot",["name","triB"],"a"],["name","b"]]],["stat",["assign",true,["dot",["name","triB"],"b"],["name","c"]]],["stat",["assign",true,["dot",["name","triB"],"c"],["name","d"]]],["if",["binary","===",["dot",["dot",["name","face"],"vertexColors"],"length"],["num",4]],["block",[["stat",["assign",true,["sub",["dot",["name","triA"],"vertexColors"],["num",0]],["call",["dot",["sub",["dot",["name","face"],"vertexColors"],["num",0]],"clone"],[]]]],["stat",["assign",true,["sub",["dot",["name","triA"],"vertexColors"],["num",1]],["call",["dot",["sub",["dot",["name","face"],"vertexColors"],["num",1]],"clone"],[]]]],["stat",["assign",true,["sub",["dot",["name","triA"],"vertexColors"],["num",2]],["call",["dot",["sub",["dot",["name","face"],"vertexColors"],["num",3]],"clone"],[]]]],["stat",["assign",true,["sub",["dot",["name","triB"],"vertexColors"],["num",0]],["call",["dot",["sub",["dot",["name","face"],"vertexColors"],["num",1]],"clone"],[]]]],["stat",["assign",true,["sub",["dot",["name","triB"],"vertexColors"],["num",1]],["call",["dot",["sub",["dot",["name","face"],"vertexColors"],["num",2]],"clone"],[]]]],["stat",["assign",true,["sub",["dot",["name","triB"],"vertexColors"],["num",2]],["call",["dot",["sub",["dot",["name","face"],"vertexColors"],["num",3]],"clone"],[]]]]]],null],["stat",["call",["dot",["name","faces"],"push"],[["name","triA"],["name","triB"]]]],["for",["seq",["assign",true,["name","j"],["num",0]],["assign",true,["name","jl"],["dot",["dot",["name","geometry"],"faceVertexUvs"],"length"]]],["binary","<",["name","j"],["name","jl"]],["unary-postfix","++",["name","j"]],["block",[["if",["dot",["sub",["dot",["name","geometry"],"faceVertexUvs"],["name","j"]],"length"],["block",[["var",[["uvs",["sub",["sub",["dot",["name","geometry"],"faceVertexUvs"],["name","j"]],["name","i"]]]]],["var",[["uvA",["sub",["name","uvs"],["num",0]]]]],["var",[["uvB",["sub",["name","uvs"],["num",1]]]]],["var",[["uvC",["sub",["name","uvs"],["num",2]]]]],["var",[["uvD",["sub",["name","uvs"],["num",3]]]]],["var",[["uvsTriA",["array",[["call",["dot",["name","uvA"],"clone"],[]],["call",["dot",["name","uvB"],"clone"],[]],["call",["dot",["name","uvD"],"clone"],[]]]]]]],["var",[["uvsTriB",["array",[["call",["dot",["name","uvB"],"clone"],[]],["call",["dot",["name","uvC"],"clone"],[]],["call",["dot",["name","uvD"],"clone"],[]]]]]]],["stat",["call",["dot",["sub",["name","faceVertexUvs"],["name","j"]],"push"],[["name","uvsTriA"],["name","uvsTriB"]]]]]],null]]]],["for",["seq",["assign",true,["name","j"],["num",0]],["assign",true,["name","jl"],["dot",["dot",["name","geometry"],"faceUvs"],"length"]]],["binary","<",["name","j"],["name","jl"]],["unary-postfix","++",["name","j"]],["block",[["if",["dot",["sub",["dot",["name","geometry"],"faceUvs"],["name","j"]],"length"],["block",[["var",[["faceUv",["sub",["sub",["dot",["name","geometry"],"faceUvs"],["name","j"]],["name","i"]]]]],["stat",["call",["dot",["sub",["name","faceUvs"],["name","j"]],"push"],[["name","faceUv"],["name","faceUv"]]]]]],null]]]]]],["block",[["stat",["call",["dot",["name","faces"],"push"],[["name","face"]]]],["for",["seq",["assign",true,["name","j"],["num",0]],["assign",true,["name","jl"],["dot",["dot",["name","geometry"],"faceUvs"],"length"]]],["binary","<",["name","j"],["name","jl"]],["unary-postfix","++",["name","j"]],["block",[["stat",["call",["dot",["sub",["name","faceUvs"],["name","j"]],"push"],[["sub",["dot",["name","geometry"],"faceUvs"],["name","j"]]]]]]]],["for",["seq",["assign",true,["name","j"],["num",0]],["assign",true,["name","jl"],["dot",["dot",["name","geometry"],"faceVertexUvs"],"length"]]],["binary","<",["name","j"],["name","jl"]],["unary-postfix","++",["name","j"]],["block",[["stat",["call",["dot",["sub",["name","faceVertexUvs"],["name","j"]],"push"],[["sub",["dot",["name","geometry"],"faceVertexUvs"],["name","j"]]]]]]]]]]]]]],["stat",["assign",true,["dot",["name","geometry"],"faces"],["name","faces"]]],["stat",["assign",true,["dot",["name","geometry"],"faceUvs"],["name","faceUvs"]]],["stat",["assign",true,["dot",["name","geometry"],"faceVertexUvs"],["name","faceVertexUvs"]]],["stat",["call",["dot",["name","geometry"],"computeCentroids"],[]]],["stat",["call",["dot",["name","geometry"],"computeFaceNormals"],[]]],["stat",["call",["dot",["name","geometry"],"computeVertexNormals"],[]]],["if",["dot",["name","geometry"],"hasTangents"],["stat",["call",["dot",["name","geometry"],"computeTangents"],[]]],null]]]],["explode",["function",null,["geometry"],[["var",[["vertices",["array",[]]]]],["for",["var",[["i",["num",0]],["il",["dot",["dot",["name","geometry"],"faces"],"length"]]]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["block",[["var",[["n",["dot",["name","vertices"],"length"]]]],["var",[["face",["sub",["dot",["name","geometry"],"faces"],["name","i"]]]]],["if",["binary","instanceof",["name","face"],["dot",["name","THREE"],"Face4"]],["block",[["var",[["a",["dot",["name","face"],"a"]]]],["var",[["b",["dot",["name","face"],"b"]]]],["var",[["c",["dot",["name","face"],"c"]]]],["var",[["d",["dot",["name","face"],"d"]]]],["var",[["va",["sub",["dot",["name","geometry"],"vertices"],["name","a"]]]]],["var",[["vb",["sub",["dot",["name","geometry"],"vertices"],["name","b"]]]]],["var",[["vc",["sub",["dot",["name","geometry"],"vertices"],["name","c"]]]]],["var",[["vd",["sub",["dot",["name","geometry"],"vertices"],["name","d"]]]]],["stat",["call",["dot",["name","vertices"],"push"],[["call",["dot",["name","va"],"clone"],[]]]]],["stat",["call",["dot",["name","vertices"],"push"],[["call",["dot",["name","vb"],"clone"],[]]]]],["stat",["call",["dot",["name","vertices"],"push"],[["call",["dot",["name","vc"],"clone"],[]]]]],["stat",["call",["dot",["name","vertices"],"push"],[["call",["dot",["name","vd"],"clone"],[]]]]],["stat",["assign",true,["dot",["name","face"],"a"],["name","n"]]],["stat",["assign",true,["dot",["name","face"],"b"],["binary","+",["name","n"],["num",1]]]],["stat",["assign",true,["dot",["name","face"],"c"],["binary","+",["name","n"],["num",2]]]],["stat",["assign",true,["dot",["name","face"],"d"],["binary","+",["name","n"],["num",3]]]]]],["block",[["var",[["a",["dot",["name","face"],"a"]]]],["var",[["b",["dot",["name","face"],"b"]]]],["var",[["c",["dot",["name","face"],"c"]]]],["var",[["va",["sub",["dot",["name","geometry"],"vertices"],["name","a"]]]]],["var",[["vb",["sub",["dot",["name","geometry"],"vertices"],["name","b"]]]]],["var",[["vc",["sub",["dot",["name","geometry"],"vertices"],["name","c"]]]]],["stat",["call",["dot",["name","vertices"],"push"],[["call",["dot",["name","va"],"clone"],[]]]]],["stat",["call",["dot",["name","vertices"],"push"],[["call",["dot",["name","vb"],"clone"],[]]]]],["stat",["call",["dot",["name","vertices"],"push"],[["call",["dot",["name","vc"],"clone"],[]]]]],["stat",["assign",true,["dot",["name","face"],"a"],["name","n"]]],["stat",["assign",true,["dot",["name","face"],"b"],["binary","+",["name","n"],["num",1]]]],["stat",["assign",true,["dot",["name","face"],"c"],["binary","+",["name","n"],["num",2]]]]]]]]]],["stat",["assign",true,["dot",["name","geometry"],"vertices"],["name","vertices"]]],["stat",["unary-prefix","delete",["dot",["name","geometry"],"__tmpVertices"]]]]]],["tessellate",["function",null,["geometry","maxEdgeLength"],[["var",[["i"],["il"],["face"],["a"],["b"],["c"],["d"],["va"],["vb"],["vc"],["vd"],["dab"],["dbc"],["dac"],["dcd"],["dad"],["m"],["m1"],["m2"],["vm"],["vm1"],["vm2"],["vnm"],["vnm1"],["vnm2"],["vcm"],["vcm1"],["vcm2"],["triA"],["triB"],["quadA"],["quadB"],["edge"]]],["var",[["faces",["array",[]]]]],["var",[["faceVertexUvs",["array",[]]]]],["for",["seq",["assign",true,["name","i"],["num",0]],["assign",true,["name","il"],["dot",["dot",["name","geometry"],"faceVertexUvs"],"length"]]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["sub",["name","faceVertexUvs"],["name","i"]],["array",[]]]]]]],["for",["seq",["assign",true,["name","i"],["num",0]],["assign",true,["name","il"],["dot",["dot",["name","geometry"],"faces"],"length"]]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","face"],["sub",["dot",["name","geometry"],"faces"],["name","i"]]]],["if",["binary","instanceof",["name","face"],["dot",["name","THREE"],"Face3"]],["block",[["stat",["assign",true,["name","a"],["dot",["name","face"],"a"]]],["stat",["assign",true,["name","b"],["dot",["name","face"],"b"]]],["stat",["assign",true,["name","c"],["dot",["name","face"],"c"]]],["stat",["assign",true,["name","va"],["sub",["dot",["name","geometry"],"vertices"],["name","a"]]]],["stat",["assign",true,["name","vb"],["sub",["dot",["name","geometry"],"vertices"],["name","b"]]]],["stat",["assign",true,["name","vc"],["sub",["dot",["name","geometry"],"vertices"],["name","c"]]]],["stat",["assign",true,["name","dab"],["call",["dot",["name","va"],"distanceTo"],[["name","vb"]]]]],["stat",["assign",true,["name","dbc"],["call",["dot",["name","vb"],"distanceTo"],[["name","vc"]]]]],["stat",["assign",true,["name","dac"],["call",["dot",["name","va"],"distanceTo"],[["name","vc"]]]]],["if",["binary","||",["binary","||",["binary",">",["name","dab"],["name","maxEdgeLength"]],["binary",">",["name","dbc"],["name","maxEdgeLength"]]],["binary",">",["name","dac"],["name","maxEdgeLength"]]],["block",[["stat",["assign",true,["name","m"],["dot",["dot",["name","geometry"],"vertices"],"length"]]],["stat",["assign",true,["name","triA"],["call",["dot",["name","face"],"clone"],[]]]],["stat",["assign",true,["name","triB"],["call",["dot",["name","face"],"clone"],[]]]],["if",["binary","&&",["binary",">=",["name","dab"],["name","dbc"]],["binary",">=",["name","dab"],["name","dac"]]],["block",[["stat",["assign",true,["name","vm"],["call",["dot",["name","va"],"clone"],[]]]],["stat",["call",["dot",["name","vm"],"lerpSelf"],[["name","vb"],["num",0.5]]]],["stat",["assign",true,["dot",["name","triA"],"a"],["name","a"]]],["stat",["assign",true,["dot",["name","triA"],"b"],["name","m"]]],["stat",["assign",true,["dot",["name","triA"],"c"],["name","c"]]],["stat",["assign",true,["dot",["name","triB"],"a"],["name","m"]]],["stat",["assign",true,["dot",["name","triB"],"b"],["name","b"]]],["stat",["assign",true,["dot",["name","triB"],"c"],["name","c"]]],["if",["binary","===",["dot",["dot",["name","face"],"vertexNormals"],"length"],["num",3]],["block",[["stat",["assign",true,["name","vnm"],["call",["dot",["sub",["dot",["name","face"],"vertexNormals"],["num",0]],"clone"],[]]]],["stat",["call",["dot",["name","vnm"],"lerpSelf"],[["sub",["dot",["name","face"],"vertexNormals"],["num",1]],["num",0.5]]]],["stat",["call",["dot",["sub",["dot",["name","triA"],"vertexNormals"],["num",1]],"copy"],[["name","vnm"]]]],["stat",["call",["dot",["sub",["dot",["name","triB"],"vertexNormals"],["num",0]],"copy"],[["name","vnm"]]]]]],null],["if",["binary","===",["dot",["dot",["name","face"],"vertexColors"],"length"],["num",3]],["block",[["stat",["assign",true,["name","vcm"],["call",["dot",["sub",["dot",["name","face"],"vertexColors"],["num",0]],"clone"],[]]]],["stat",["call",["dot",["name","vcm"],"lerpSelf"],[["sub",["dot",["name","face"],"vertexColors"],["num",1]],["num",0.5]]]],["stat",["call",["dot",["sub",["dot",["name","triA"],"vertexColors"],["num",1]],"copy"],[["name","vcm"]]]],["stat",["call",["dot",["sub",["dot",["name","triB"],"vertexColors"],["num",0]],"copy"],[["name","vcm"]]]]]],null],["stat",["assign",true,["name","edge"],["num",0]]]]],["if",["binary","&&",["binary",">=",["name","dbc"],["name","dab"]],["binary",">=",["name","dbc"],["name","dac"]]],["block",[["stat",["assign",true,["name","vm"],["call",["dot",["name","vb"],"clone"],[]]]],["stat",["call",["dot",["name","vm"],"lerpSelf"],[["name","vc"],["num",0.5]]]],["stat",["assign",true,["dot",["name","triA"],"a"],["name","a"]]],["stat",["assign",true,["dot",["name","triA"],"b"],["name","b"]]],["stat",["assign",true,["dot",["name","triA"],"c"],["name","m"]]],["stat",["assign",true,["dot",["name","triB"],"a"],["name","m"]]],["stat",["assign",true,["dot",["name","triB"],"b"],["name","c"]]],["stat",["assign",true,["dot",["name","triB"],"c"],["name","a"]]],["if",["binary","===",["dot",["dot",["name","face"],"vertexNormals"],"length"],["num",3]],["block",[["stat",["assign",true,["name","vnm"],["call",["dot",["sub",["dot",["name","face"],"vertexNormals"],["num",1]],"clone"],[]]]],["stat",["call",["dot",["name","vnm"],"lerpSelf"],[["sub",["dot",["name","face"],"vertexNormals"],["num",2]],["num",0.5]]]],["stat",["call",["dot",["sub",["dot",["name","triA"],"vertexNormals"],["num",2]],"copy"],[["name","vnm"]]]],["stat",["call",["dot",["sub",["dot",["name","triB"],"vertexNormals"],["num",0]],"copy"],[["name","vnm"]]]],["stat",["call",["dot",["sub",["dot",["name","triB"],"vertexNormals"],["num",1]],"copy"],[["sub",["dot",["name","face"],"vertexNormals"],["num",2]]]]],["stat",["call",["dot",["sub",["dot",["name","triB"],"vertexNormals"],["num",2]],"copy"],[["sub",["dot",["name","face"],"vertexNormals"],["num",0]]]]]]],null],["if",["binary","===",["dot",["dot",["name","face"],"vertexColors"],"length"],["num",3]],["block",[["stat",["assign",true,["name","vcm"],["call",["dot",["sub",["dot",["name","face"],"vertexColors"],["num",1]],"clone"],[]]]],["stat",["call",["dot",["name","vcm"],"lerpSelf"],[["sub",["dot",["name","face"],"vertexColors"],["num",2]],["num",0.5]]]],["stat",["call",["dot",["sub",["dot",["name","triA"],"vertexColors"],["num",2]],"copy"],[["name","vcm"]]]],["stat",["call",["dot",["sub",["dot",["name","triB"],"vertexColors"],["num",0]],"copy"],[["name","vcm"]]]],["stat",["call",["dot",["sub",["dot",["name","triB"],"vertexColors"],["num",1]],"copy"],[["sub",["dot",["name","face"],"vertexColors"],["num",2]]]]],["stat",["call",["dot",["sub",["dot",["name","triB"],"vertexColors"],["num",2]],"copy"],[["sub",["dot",["name","face"],"vertexColors"],["num",0]]]]]]],null],["stat",["assign",true,["name","edge"],["num",1]]]]],["block",[["stat",["assign",true,["name","vm"],["call",["dot",["name","va"],"clone"],[]]]],["stat",["call",["dot",["name","vm"],"lerpSelf"],[["name","vc"],["num",0.5]]]],["stat",["assign",true,["dot",["name","triA"],"a"],["name","a"]]],["stat",["assign",true,["dot",["name","triA"],"b"],["name","b"]]],["stat",["assign",true,["dot",["name","triA"],"c"],["name","m"]]],["stat",["assign",true,["dot",["name","triB"],"a"],["name","m"]]],["stat",["assign",true,["dot",["name","triB"],"b"],["name","b"]]],["stat",["assign",true,["dot",["name","triB"],"c"],["name","c"]]],["if",["binary","===",["dot",["dot",["name","face"],"vertexNormals"],"length"],["num",3]],["block",[["stat",["assign",true,["name","vnm"],["call",["dot",["sub",["dot",["name","face"],"vertexNormals"],["num",0]],"clone"],[]]]],["stat",["call",["dot",["name","vnm"],"lerpSelf"],[["sub",["dot",["name","face"],"vertexNormals"],["num",2]],["num",0.5]]]],["stat",["call",["dot",["sub",["dot",["name","triA"],"vertexNormals"],["num",2]],"copy"],[["name","vnm"]]]],["stat",["call",["dot",["sub",["dot",["name","triB"],"vertexNormals"],["num",0]],"copy"],[["name","vnm"]]]]]],null],["if",["binary","===",["dot",["dot",["name","face"],"vertexColors"],"length"],["num",3]],["block",[["stat",["assign",true,["name","vcm"],["call",["dot",["sub",["dot",["name","face"],"vertexColors"],["num",0]],"clone"],[]]]],["stat",["call",["dot",["name","vcm"],"lerpSelf"],[["sub",["dot",["name","face"],"vertexColors"],["num",2]],["num",0.5]]]],["stat",["call",["dot",["sub",["dot",["name","triA"],"vertexColors"],["num",2]],"copy"],[["name","vcm"]]]],["stat",["call",["dot",["sub",["dot",["name","triB"],"vertexColors"],["num",0]],"copy"],[["name","vcm"]]]]]],null],["stat",["assign",true,["name","edge"],["num",2]]]]]]],["stat",["call",["dot",["name","faces"],"push"],[["name","triA"],["name","triB"]]]],["stat",["call",["dot",["dot",["name","geometry"],"vertices"],"push"],[["name","vm"]]]],["var",[["j"],["jl"],["uvs"],["uvA"],["uvB"],["uvC"],["uvM"],["uvsTriA"],["uvsTriB"]]],["for",["seq",["assign",true,["name","j"],["num",0]],["assign",true,["name","jl"],["dot",["dot",["name","geometry"],"faceVertexUvs"],"length"]]],["binary","<",["name","j"],["name","jl"]],["unary-postfix","++",["name","j"]],["block",[["if",["dot",["sub",["dot",["name","geometry"],"faceVertexUvs"],["name","j"]],"length"],["block",[["stat",["assign",true,["name","uvs"],["sub",["sub",["dot",["name","geometry"],"faceVertexUvs"],["name","j"]],["name","i"]]]],["stat",["assign",true,["name","uvA"],["sub",["name","uvs"],["num",0]]]],["stat",["assign",true,["name","uvB"],["sub",["name","uvs"],["num",1]]]],["stat",["assign",true,["name","uvC"],["sub",["name","uvs"],["num",2]]]],["if",["binary","===",["name","edge"],["num",0]],["block",[["stat",["assign",true,["name","uvM"],["call",["dot",["name","uvA"],"clone"],[]]]],["stat",["call",["dot",["name","uvM"],"lerpSelf"],[["name","uvB"],["num",0.5]]]],["stat",["assign",true,["name","uvsTriA"],["array",[["call",["dot",["name","uvA"],"clone"],[]],["call",["dot",["name","uvM"],"clone"],[]],["call",["dot",["name","uvC"],"clone"],[]]]]]],["stat",["assign",true,["name","uvsTriB"],["array",[["call",["dot",["name","uvM"],"clone"],[]],["call",["dot",["name","uvB"],"clone"],[]],["call",["dot",["name","uvC"],"clone"],[]]]]]]]],["if",["binary","===",["name","edge"],["num",1]],["block",[["stat",["assign",true,["name","uvM"],["call",["dot",["name","uvB"],"clone"],[]]]],["stat",["call",["dot",["name","uvM"],"lerpSelf"],[["name","uvC"],["num",0.5]]]],["stat",["assign",true,["name","uvsTriA"],["array",[["call",["dot",["name","uvA"],"clone"],[]],["call",["dot",["name","uvB"],"clone"],[]],["call",["dot",["name","uvM"],"clone"],[]]]]]],["stat",["assign",true,["name","uvsTriB"],["array",[["call",["dot",["name","uvM"],"clone"],[]],["call",["dot",["name","uvC"],"clone"],[]],["call",["dot",["name","uvA"],"clone"],[]]]]]]]],["block",[["stat",["assign",true,["name","uvM"],["call",["dot",["name","uvA"],"clone"],[]]]],["stat",["call",["dot",["name","uvM"],"lerpSelf"],[["name","uvC"],["num",0.5]]]],["stat",["assign",true,["name","uvsTriA"],["array",[["call",["dot",["name","uvA"],"clone"],[]],["call",["dot",["name","uvB"],"clone"],[]],["call",["dot",["name","uvM"],"clone"],[]]]]]],["stat",["assign",true,["name","uvsTriB"],["array",[["call",["dot",["name","uvM"],"clone"],[]],["call",["dot",["name","uvB"],"clone"],[]],["call",["dot",["name","uvC"],"clone"],[]]]]]]]]]],["stat",["call",["dot",["sub",["name","faceVertexUvs"],["name","j"]],"push"],[["name","uvsTriA"],["name","uvsTriB"]]]]]],null]]]]]],["block",[["stat",["call",["dot",["name","faces"],"push"],[["name","face"]]]],["for",["seq",["assign",true,["name","j"],["num",0]],["assign",true,["name","jl"],["dot",["dot",["name","geometry"],"faceVertexUvs"],"length"]]],["binary","<",["name","j"],["name","jl"]],["unary-postfix","++",["name","j"]],["block",[["stat",["call",["dot",["sub",["name","faceVertexUvs"],["name","j"]],"push"],[["sub",["sub",["dot",["name","geometry"],"faceVertexUvs"],["name","j"]],["name","i"]]]]]]]]]]]]],["block",[["stat",["assign",true,["name","a"],["dot",["name","face"],"a"]]],["stat",["assign",true,["name","b"],["dot",["name","face"],"b"]]],["stat",["assign",true,["name","c"],["dot",["name","face"],"c"]]],["stat",["assign",true,["name","d"],["dot",["name","face"],"d"]]],["stat",["assign",true,["name","va"],["sub",["dot",["name","geometry"],"vertices"],["name","a"]]]],["stat",["assign",true,["name","vb"],["sub",["dot",["name","geometry"],"vertices"],["name","b"]]]],["stat",["assign",true,["name","vc"],["sub",["dot",["name","geometry"],"vertices"],["name","c"]]]],["stat",["assign",true,["name","vd"],["sub",["dot",["name","geometry"],"vertices"],["name","d"]]]],["stat",["assign",true,["name","dab"],["call",["dot",["name","va"],"distanceTo"],[["name","vb"]]]]],["stat",["assign",true,["name","dbc"],["call",["dot",["name","vb"],"distanceTo"],[["name","vc"]]]]],["stat",["assign",true,["name","dcd"],["call",["dot",["name","vc"],"distanceTo"],[["name","vd"]]]]],["stat",["assign",true,["name","dad"],["call",["dot",["name","va"],"distanceTo"],[["name","vd"]]]]],["if",["binary","||",["binary","||",["binary","||",["binary",">",["name","dab"],["name","maxEdgeLength"]],["binary",">",["name","dbc"],["name","maxEdgeLength"]]],["binary",">",["name","dcd"],["name","maxEdgeLength"]]],["binary",">",["name","dad"],["name","maxEdgeLength"]]],["block",[["stat",["assign",true,["name","m1"],["dot",["dot",["name","geometry"],"vertices"],"length"]]],["stat",["assign",true,["name","m2"],["binary","+",["dot",["dot",["name","geometry"],"vertices"],"length"],["num",1]]]],["stat",["assign",true,["name","quadA"],["call",["dot",["name","face"],"clone"],[]]]],["stat",["assign",true,["name","quadB"],["call",["dot",["name","face"],"clone"],[]]]],["if",["binary","||",["binary","&&",["binary","&&",["binary",">=",["name","dab"],["name","dbc"]],["binary",">=",["name","dab"],["name","dcd"]]],["binary",">=",["name","dab"],["name","dad"]]],["binary","&&",["binary","&&",["binary",">=",["name","dcd"],["name","dbc"]],["binary",">=",["name","dcd"],["name","dab"]]],["binary",">=",["name","dcd"],["name","dad"]]]],["block",[["stat",["assign",true,["name","vm1"],["call",["dot",["name","va"],"clone"],[]]]],["stat",["call",["dot",["name","vm1"],"lerpSelf"],[["name","vb"],["num",0.5]]]],["stat",["assign",true,["name","vm2"],["call",["dot",["name","vc"],"clone"],[]]]],["stat",["call",["dot",["name","vm2"],"lerpSelf"],[["name","vd"],["num",0.5]]]],["stat",["assign",true,["dot",["name","quadA"],"a"],["name","a"]]],["stat",["assign",true,["dot",["name","quadA"],"b"],["name","m1"]]],["stat",["assign",true,["dot",["name","quadA"],"c"],["name","m2"]]],["stat",["assign",true,["dot",["name","quadA"],"d"],["name","d"]]],["stat",["assign",true,["dot",["name","quadB"],"a"],["name","m1"]]],["stat",["assign",true,["dot",["name","quadB"],"b"],["name","b"]]],["stat",["assign",true,["dot",["name","quadB"],"c"],["name","c"]]],["stat",["assign",true,["dot",["name","quadB"],"d"],["name","m2"]]],["if",["binary","===",["dot",["dot",["name","face"],"vertexNormals"],"length"],["num",4]],["block",[["stat",["assign",true,["name","vnm1"],["call",["dot",["sub",["dot",["name","face"],"vertexNormals"],["num",0]],"clone"],[]]]],["stat",["call",["dot",["name","vnm1"],"lerpSelf"],[["sub",["dot",["name","face"],"vertexNormals"],["num",1]],["num",0.5]]]],["stat",["assign",true,["name","vnm2"],["call",["dot",["sub",["dot",["name","face"],"vertexNormals"],["num",2]],"clone"],[]]]],["stat",["call",["dot",["name","vnm2"],"lerpSelf"],[["sub",["dot",["name","face"],"vertexNormals"],["num",3]],["num",0.5]]]],["stat",["call",["dot",["sub",["dot",["name","quadA"],"vertexNormals"],["num",1]],"copy"],[["name","vnm1"]]]],["stat",["call",["dot",["sub",["dot",["name","quadA"],"vertexNormals"],["num",2]],"copy"],[["name","vnm2"]]]],["stat",["call",["dot",["sub",["dot",["name","quadB"],"vertexNormals"],["num",0]],"copy"],[["name","vnm1"]]]],["stat",["call",["dot",["sub",["dot",["name","quadB"],"vertexNormals"],["num",3]],"copy"],[["name","vnm2"]]]]]],null],["if",["binary","===",["dot",["dot",["name","face"],"vertexColors"],"length"],["num",4]],["block",[["stat",["assign",true,["name","vcm1"],["call",["dot",["sub",["dot",["name","face"],"vertexColors"],["num",0]],"clone"],[]]]],["stat",["call",["dot",["name","vcm1"],"lerpSelf"],[["sub",["dot",["name","face"],"vertexColors"],["num",1]],["num",0.5]]]],["stat",["assign",true,["name","vcm2"],["call",["dot",["sub",["dot",["name","face"],"vertexColors"],["num",2]],"clone"],[]]]],["stat",["call",["dot",["name","vcm2"],"lerpSelf"],[["sub",["dot",["name","face"],"vertexColors"],["num",3]],["num",0.5]]]],["stat",["call",["dot",["sub",["dot",["name","quadA"],"vertexColors"],["num",1]],"copy"],[["name","vcm1"]]]],["stat",["call",["dot",["sub",["dot",["name","quadA"],"vertexColors"],["num",2]],"copy"],[["name","vcm2"]]]],["stat",["call",["dot",["sub",["dot",["name","quadB"],"vertexColors"],["num",0]],"copy"],[["name","vcm1"]]]],["stat",["call",["dot",["sub",["dot",["name","quadB"],"vertexColors"],["num",3]],"copy"],[["name","vcm2"]]]]]],null],["stat",["assign",true,["name","edge"],["num",0]]]]],["block",[["stat",["assign",true,["name","vm1"],["call",["dot",["name","vb"],"clone"],[]]]],["stat",["call",["dot",["name","vm1"],"lerpSelf"],[["name","vc"],["num",0.5]]]],["stat",["assign",true,["name","vm2"],["call",["dot",["name","vd"],"clone"],[]]]],["stat",["call",["dot",["name","vm2"],"lerpSelf"],[["name","va"],["num",0.5]]]],["stat",["assign",true,["dot",["name","quadA"],"a"],["name","a"]]],["stat",["assign",true,["dot",["name","quadA"],"b"],["name","b"]]],["stat",["assign",true,["dot",["name","quadA"],"c"],["name","m1"]]],["stat",["assign",true,["dot",["name","quadA"],"d"],["name","m2"]]],["stat",["assign",true,["dot",["name","quadB"],"a"],["name","m2"]]],["stat",["assign",true,["dot",["name","quadB"],"b"],["name","m1"]]],["stat",["assign",true,["dot",["name","quadB"],"c"],["name","c"]]],["stat",["assign",true,["dot",["name","quadB"],"d"],["name","d"]]],["if",["binary","===",["dot",["dot",["name","face"],"vertexNormals"],"length"],["num",4]],["block",[["stat",["assign",true,["name","vnm1"],["call",["dot",["sub",["dot",["name","face"],"vertexNormals"],["num",1]],"clone"],[]]]],["stat",["call",["dot",["name","vnm1"],"lerpSelf"],[["sub",["dot",["name","face"],"vertexNormals"],["num",2]],["num",0.5]]]],["stat",["assign",true,["name","vnm2"],["call",["dot",["sub",["dot",["name","face"],"vertexNormals"],["num",3]],"clone"],[]]]],["stat",["call",["dot",["name","vnm2"],"lerpSelf"],[["sub",["dot",["name","face"],"vertexNormals"],["num",0]],["num",0.5]]]],["stat",["call",["dot",["sub",["dot",["name","quadA"],"vertexNormals"],["num",2]],"copy"],[["name","vnm1"]]]],["stat",["call",["dot",["sub",["dot",["name","quadA"],"vertexNormals"],["num",3]],"copy"],[["name","vnm2"]]]],["stat",["call",["dot",["sub",["dot",["name","quadB"],"vertexNormals"],["num",0]],"copy"],[["name","vnm2"]]]],["stat",["call",["dot",["sub",["dot",["name","quadB"],"vertexNormals"],["num",1]],"copy"],[["name","vnm1"]]]]]],null],["if",["binary","===",["dot",["dot",["name","face"],"vertexColors"],"length"],["num",4]],["block",[["stat",["assign",true,["name","vcm1"],["call",["dot",["sub",["dot",["name","face"],"vertexColors"],["num",1]],"clone"],[]]]],["stat",["call",["dot",["name","vcm1"],"lerpSelf"],[["sub",["dot",["name","face"],"vertexColors"],["num",2]],["num",0.5]]]],["stat",["assign",true,["name","vcm2"],["call",["dot",["sub",["dot",["name","face"],"vertexColors"],["num",3]],"clone"],[]]]],["stat",["call",["dot",["name","vcm2"],"lerpSelf"],[["sub",["dot",["name","face"],"vertexColors"],["num",0]],["num",0.5]]]],["stat",["call",["dot",["sub",["dot",["name","quadA"],"vertexColors"],["num",2]],"copy"],[["name","vcm1"]]]],["stat",["call",["dot",["sub",["dot",["name","quadA"],"vertexColors"],["num",3]],"copy"],[["name","vcm2"]]]],["stat",["call",["dot",["sub",["dot",["name","quadB"],"vertexColors"],["num",0]],"copy"],[["name","vcm2"]]]],["stat",["call",["dot",["sub",["dot",["name","quadB"],"vertexColors"],["num",1]],"copy"],[["name","vcm1"]]]]]],null],["stat",["assign",true,["name","edge"],["num",1]]]]]],["stat",["call",["dot",["name","faces"],"push"],[["name","quadA"],["name","quadB"]]]],["stat",["call",["dot",["dot",["name","geometry"],"vertices"],"push"],[["name","vm1"],["name","vm2"]]]],["var",[["j"],["jl"],["uvs"],["uvA"],["uvB"],["uvC"],["uvD"],["uvM1"],["uvM2"],["uvsQuadA"],["uvsQuadB"]]],["for",["seq",["assign",true,["name","j"],["num",0]],["assign",true,["name","jl"],["dot",["dot",["name","geometry"],"faceVertexUvs"],"length"]]],["binary","<",["name","j"],["name","jl"]],["unary-postfix","++",["name","j"]],["block",[["if",["dot",["sub",["dot",["name","geometry"],"faceVertexUvs"],["name","j"]],"length"],["block",[["stat",["assign",true,["name","uvs"],["sub",["sub",["dot",["name","geometry"],"faceVertexUvs"],["name","j"]],["name","i"]]]],["stat",["assign",true,["name","uvA"],["sub",["name","uvs"],["num",0]]]],["stat",["assign",true,["name","uvB"],["sub",["name","uvs"],["num",1]]]],["stat",["assign",true,["name","uvC"],["sub",["name","uvs"],["num",2]]]],["stat",["assign",true,["name","uvD"],["sub",["name","uvs"],["num",3]]]],["if",["binary","===",["name","edge"],["num",0]],["block",[["stat",["assign",true,["name","uvM1"],["call",["dot",["name","uvA"],"clone"],[]]]],["stat",["call",["dot",["name","uvM1"],"lerpSelf"],[["name","uvB"],["num",0.5]]]],["stat",["assign",true,["name","uvM2"],["call",["dot",["name","uvC"],"clone"],[]]]],["stat",["call",["dot",["name","uvM2"],"lerpSelf"],[["name","uvD"],["num",0.5]]]],["stat",["assign",true,["name","uvsQuadA"],["array",[["call",["dot",["name","uvA"],"clone"],[]],["call",["dot",["name","uvM1"],"clone"],[]],["call",["dot",["name","uvM2"],"clone"],[]],["call",["dot",["name","uvD"],"clone"],[]]]]]],["stat",["assign",true,["name","uvsQuadB"],["array",[["call",["dot",["name","uvM1"],"clone"],[]],["call",["dot",["name","uvB"],"clone"],[]],["call",["dot",["name","uvC"],"clone"],[]],["call",["dot",["name","uvM2"],"clone"],[]]]]]]]],["block",[["stat",["assign",true,["name","uvM1"],["call",["dot",["name","uvB"],"clone"],[]]]],["stat",["call",["dot",["name","uvM1"],"lerpSelf"],[["name","uvC"],["num",0.5]]]],["stat",["assign",true,["name","uvM2"],["call",["dot",["name","uvD"],"clone"],[]]]],["stat",["call",["dot",["name","uvM2"],"lerpSelf"],[["name","uvA"],["num",0.5]]]],["stat",["assign",true,["name","uvsQuadA"],["array",[["call",["dot",["name","uvA"],"clone"],[]],["call",["dot",["name","uvB"],"clone"],[]],["call",["dot",["name","uvM1"],"clone"],[]],["call",["dot",["name","uvM2"],"clone"],[]]]]]],["stat",["assign",true,["name","uvsQuadB"],["array",[["call",["dot",["name","uvM2"],"clone"],[]],["call",["dot",["name","uvM1"],"clone"],[]],["call",["dot",["name","uvC"],"clone"],[]],["call",["dot",["name","uvD"],"clone"],[]]]]]]]]],["stat",["call",["dot",["sub",["name","faceVertexUvs"],["name","j"]],"push"],[["name","uvsQuadA"],["name","uvsQuadB"]]]]]],null]]]]]],["block",[["stat",["call",["dot",["name","faces"],"push"],[["name","face"]]]],["for",["seq",["assign",true,["name","j"],["num",0]],["assign",true,["name","jl"],["dot",["dot",["name","geometry"],"faceVertexUvs"],"length"]]],["binary","<",["name","j"],["name","jl"]],["unary-postfix","++",["name","j"]],["block",[["stat",["call",["dot",["sub",["name","faceVertexUvs"],["name","j"]],"push"],[["sub",["sub",["dot",["name","geometry"],"faceVertexUvs"],["name","j"]],["name","i"]]]]]]]]]]]]]]]]],["stat",["assign",true,["dot",["name","geometry"],"faces"],["name","faces"]]],["stat",["assign",true,["dot",["name","geometry"],"faceVertexUvs"],["name","faceVertexUvs"]]]]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"GeometryUtils"],"random"],["dot",["dot",["name","THREE"],"Math"],"random16"]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"GeometryUtils"],"__v1"],["new",["dot",["name","THREE"],"Vector3"],[]]]],["stat",["assign",true,["dot",["name","THREE"],"ImageUtils"],["object",[["crossOrigin",["string","anonymous"]],["loadTexture",["function",null,["path","mapping","callback"],[["var",[["image",["new",["name","Image"],[]]],["texture",["new",["dot",["name","THREE"],"Texture"],[["name","image"],["name","mapping"]]]]]],["stat",["assign",true,["dot",["name","image"],"onload"],["function",null,[],[["stat",["assign",true,["dot",["name","texture"],"needsUpdate"],["name","true"]]],["if",["name","callback"],["stat",["call",["name","callback"],[["name","this"]]]],null]]]]],["stat",["assign",true,["dot",["name","image"],"crossOrigin"],["dot",["name","this"],"crossOrigin"]]],["stat",["assign",true,["dot",["name","image"],"src"],["name","path"]]],["return",["name","texture"]]]]],["loadTextureCube",["function",null,["array","mapping","callback"],[["var",[["i"],["l"],["images",["array",[]]],["texture",["new",["dot",["name","THREE"],"Texture"],[["name","images"],["name","mapping"]]]]]],["stat",["assign",true,["dot",["name","images"],"loadCount"],["num",0]]],["for",["seq",["assign",true,["name","i"],["num",0]],["assign",true,["name","l"],["dot",["name","array"],"length"]]],["binary","<",["name","i"],["name","l"]],["unary-prefix","++",["name","i"]],["block",[["stat",["assign",true,["sub",["name","images"],["name","i"]],["new",["name","Image"],[]]]],["stat",["assign",true,["dot",["sub",["name","images"],["name","i"]],"onload"],["function",null,[],[["stat",["assign","+",["dot",["name","images"],"loadCount"],["num",1]]],["if",["binary","===",["dot",["name","images"],"loadCount"],["num",6]],["stat",["assign",true,["dot",["name","texture"],"needsUpdate"],["name","true"]]],null],["if",["name","callback"],["stat",["call",["name","callback"],[["name","this"]]]],null]]]]],["stat",["assign",true,["dot",["sub",["name","images"],["name","i"]],"crossOrigin"],["dot",["name","this"],"crossOrigin"]]],["stat",["assign",true,["dot",["sub",["name","images"],["name","i"]],"src"],["sub",["name","array"],["name","i"]]]]]]],["return",["name","texture"]]]]],["getNormalMap",["function",null,["image","depth"],[["var",[["cross",["function",null,["a","b"],[["return",["array",[["binary","-",["binary","*",["sub",["name","a"],["num",1]],["sub",["name","b"],["num",2]]],["binary","*",["sub",["name","a"],["num",2]],["sub",["name","b"],["num",1]]]],["binary","-",["binary","*",["sub",["name","a"],["num",2]],["sub",["name","b"],["num",0]]],["binary","*",["sub",["name","a"],["num",0]],["sub",["name","b"],["num",2]]]],["binary","-",["binary","*",["sub",["name","a"],["num",0]],["sub",["name","b"],["num",1]]],["binary","*",["sub",["name","a"],["num",1]],["sub",["name","b"],["num",0]]]]]]]]]]]],["var",[["subtract",["function",null,["a","b"],[["return",["array",[["binary","-",["sub",["name","a"],["num",0]],["sub",["name","b"],["num",0]]],["binary","-",["sub",["name","a"],["num",1]],["sub",["name","b"],["num",1]]],["binary","-",["sub",["name","a"],["num",2]],["sub",["name","b"],["num",2]]]]]]]]]]],["var",[["normalize",["function",null,["a"],[["var",[["l",["call",["dot",["name","Math"],"sqrt"],[["binary","+",["binary","+",["binary","*",["sub",["name","a"],["num",0]],["sub",["name","a"],["num",0]]],["binary","*",["sub",["name","a"],["num",1]],["sub",["name","a"],["num",1]]]],["binary","*",["sub",["name","a"],["num",2]],["sub",["name","a"],["num",2]]]]]]]]],["return",["array",[["binary","/",["sub",["name","a"],["num",0]],["name","l"]],["binary","/",["sub",["name","a"],["num",1]],["name","l"]],["binary","/",["sub",["name","a"],["num",2]],["name","l"]]]]]]]]]],["stat",["assign",true,["name","depth"],["binary","|",["name","depth"],["num",1]]]],["var",[["width",["dot",["name","image"],"width"]]]],["var",[["height",["dot",["name","image"],"height"]]]],["var",[["canvas",["call",["dot",["name","document"],"createElement"],[["string","canvas"]]]]]],["stat",["assign",true,["dot",["name","canvas"],"width"],["name","width"]]],["stat",["assign",true,["dot",["name","canvas"],"height"],["name","height"]]],["var",[["context",["call",["dot",["name","canvas"],"getContext"],[["string","2d"]]]]]],["stat",["call",["dot",["name","context"],"drawImage"],[["name","image"],["num",0],["num",0]]]],["var",[["data",["dot",["call",["dot",["name","context"],"getImageData"],[["num",0],["num",0],["name","width"],["name","height"]]],"data"]]]],["var",[["imageData",["call",["dot",["name","context"],"createImageData"],[["name","width"],["name","height"]]]]]],["var",[["output",["dot",["name","imageData"],"data"]]]],["for",["var",[["x",["num",0]]]],["binary","<",["name","x"],["name","width"]],["unary-postfix","++",["name","x"]],["block",[["for",["var",[["y",["num",0]]]],["binary","<",["name","y"],["name","height"]],["unary-postfix","++",["name","y"]],["block",[["var",[["ly",["conditional",["binary","<",["binary","-",["name","y"],["num",1]],["num",0]],["num",0],["binary","-",["name","y"],["num",1]]]]]],["var",[["uy",["conditional",["binary",">",["binary","+",["name","y"],["num",1]],["binary","-",["name","height"],["num",1]]],["binary","-",["name","height"],["num",1]],["binary","+",["name","y"],["num",1]]]]]],["var",[["lx",["conditional",["binary","<",["binary","-",["name","x"],["num",1]],["num",0]],["num",0],["binary","-",["name","x"],["num",1]]]]]],["var",[["ux",["conditional",["binary",">",["binary","+",["name","x"],["num",1]],["binary","-",["name","width"],["num",1]]],["binary","-",["name","width"],["num",1]],["binary","+",["name","x"],["num",1]]]]]],["var",[["points",["array",[]]]]],["var",[["origin",["array",[["num",0],["num",0],["binary","*",["binary","/",["sub",["name","data"],["binary","*",["binary","+",["binary","*",["name","y"],["name","width"]],["name","x"]],["num",4]]],["num",255]],["name","depth"]]]]]]],["stat",["call",["dot",["name","points"],"push"],[["array",[["unary-prefix","-",["num",1]],["num",0],["binary","*",["binary","/",["sub",["name","data"],["binary","*",["binary","+",["binary","*",["name","y"],["name","width"]],["name","lx"]],["num",4]]],["num",255]],["name","depth"]]]]]]],["stat",["call",["dot",["name","points"],"push"],[["array",[["unary-prefix","-",["num",1]],["unary-prefix","-",["num",1]],["binary","*",["binary","/",["sub",["name","data"],["binary","*",["binary","+",["binary","*",["name","ly"],["name","width"]],["name","lx"]],["num",4]]],["num",255]],["name","depth"]]]]]]],["stat",["call",["dot",["name","points"],"push"],[["array",[["num",0],["unary-prefix","-",["num",1]],["binary","*",["binary","/",["sub",["name","data"],["binary","*",["binary","+",["binary","*",["name","ly"],["name","width"]],["name","x"]],["num",4]]],["num",255]],["name","depth"]]]]]]],["stat",["call",["dot",["name","points"],"push"],[["array",[["num",1],["unary-prefix","-",["num",1]],["binary","*",["binary","/",["sub",["name","data"],["binary","*",["binary","+",["binary","*",["name","ly"],["name","width"]],["name","ux"]],["num",4]]],["num",255]],["name","depth"]]]]]]],["stat",["call",["dot",["name","points"],"push"],[["array",[["num",1],["num",0],["binary","*",["binary","/",["sub",["name","data"],["binary","*",["binary","+",["binary","*",["name","y"],["name","width"]],["name","ux"]],["num",4]]],["num",255]],["name","depth"]]]]]]],["stat",["call",["dot",["name","points"],"push"],[["array",[["num",1],["num",1],["binary","*",["binary","/",["sub",["name","data"],["binary","*",["binary","+",["binary","*",["name","uy"],["name","width"]],["name","ux"]],["num",4]]],["num",255]],["name","depth"]]]]]]],["stat",["call",["dot",["name","points"],"push"],[["array",[["num",0],["num",1],["binary","*",["binary","/",["sub",["name","data"],["binary","*",["binary","+",["binary","*",["name","uy"],["name","width"]],["name","x"]],["num",4]]],["num",255]],["name","depth"]]]]]]],["stat",["call",["dot",["name","points"],"push"],[["array",[["unary-prefix","-",["num",1]],["num",1],["binary","*",["binary","/",["sub",["name","data"],["binary","*",["binary","+",["binary","*",["name","uy"],["name","width"]],["name","lx"]],["num",4]]],["num",255]],["name","depth"]]]]]]],["var",[["normals",["array",[]]]]],["var",[["num_points",["dot",["name","points"],"length"]]]],["for",["var",[["i",["num",0]]]],["binary","<",["name","i"],["name","num_points"]],["unary-postfix","++",["name","i"]],["block",[["var",[["v1",["sub",["name","points"],["name","i"]]]]],["var",[["v2",["sub",["name","points"],["binary","%",["binary","+",["name","i"],["num",1]],["name","num_points"]]]]]],["stat",["assign",true,["name","v1"],["call",["name","subtract"],[["name","v1"],["name","origin"]]]]],["stat",["assign",true,["name","v2"],["call",["name","subtract"],[["name","v2"],["name","origin"]]]]],["stat",["call",["dot",["name","normals"],"push"],[["call",["name","normalize"],[["call",["name","cross"],[["name","v1"],["name","v2"]]]]]]]]]]],["var",[["normal",["array",[["num",0],["num",0],["num",0]]]]]],["for",["var",[["i",["num",0]]]],["binary","<",["name","i"],["dot",["name","normals"],"length"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign","+",["sub",["name","normal"],["num",0]],["sub",["sub",["name","normals"],["name","i"]],["num",0]]]],["stat",["assign","+",["sub",["name","normal"],["num",1]],["sub",["sub",["name","normals"],["name","i"]],["num",1]]]],["stat",["assign","+",["sub",["name","normal"],["num",2]],["sub",["sub",["name","normals"],["name","i"]],["num",2]]]]]]],["stat",["assign","/",["sub",["name","normal"],["num",0]],["dot",["name","normals"],"length"]]],["stat",["assign","/",["sub",["name","normal"],["num",1]],["dot",["name","normals"],"length"]]],["stat",["assign","/",["sub",["name","normal"],["num",2]],["dot",["name","normals"],"length"]]],["var",[["idx",["binary","*",["binary","+",["binary","*",["name","y"],["name","width"]],["name","x"]],["num",4]]]]],["stat",["assign",true,["sub",["name","output"],["name","idx"]],["binary","|",["binary","*",["binary","/",["binary","+",["sub",["name","normal"],["num",0]],["num",1]],["num",2]],["num",255]],["num",0]]]],["stat",["assign",true,["sub",["name","output"],["binary","+",["name","idx"],["num",1]]],["binary","|",["binary","*",["binary","+",["sub",["name","normal"],["num",1]],["binary","/",["num",1],["num",2]]],["num",255]],["num",0]]]],["stat",["assign",true,["sub",["name","output"],["binary","+",["name","idx"],["num",2]]],["binary","|",["binary","*",["sub",["name","normal"],["num",2]],["num",255]],["num",0]]]],["stat",["assign",true,["sub",["name","output"],["binary","+",["name","idx"],["num",3]]],["num",255]]]]]]]]],["stat",["call",["dot",["name","context"],"putImageData"],[["name","imageData"],["num",0],["num",0]]]],["return",["name","canvas"]]]]],["generateDataTexture",["function",null,["width","height","color"],[["var",[["size",["binary","*",["name","width"],["name","height"]]]]],["var",[["data",["new",["name","Uint8Array"],[["binary","*",["num",3],["name","size"]]]]]]],["var",[["r",["call",["dot",["name","Math"],"floor"],[["binary","*",["dot",["name","color"],"r"],["num",255]]]]]]],["var",[["g",["call",["dot",["name","Math"],"floor"],[["binary","*",["dot",["name","color"],"g"],["num",255]]]]]]],["var",[["b",["call",["dot",["name","Math"],"floor"],[["binary","*",["dot",["name","color"],"b"],["num",255]]]]]]],["for",["var",[["i",["num",0]]]],["binary","<",["name","i"],["name","size"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["sub",["name","data"],["binary","*",["name","i"],["num",3]]],["name","r"]]],["stat",["assign",true,["sub",["name","data"],["binary","+",["binary","*",["name","i"],["num",3]],["num",1]]],["name","g"]]],["stat",["assign",true,["sub",["name","data"],["binary","+",["binary","*",["name","i"],["num",3]],["num",2]]],["name","b"]]]]]],["var",[["texture",["new",["dot",["name","THREE"],"DataTexture"],[["name","data"],["name","width"],["name","height"],["dot",["name","THREE"],"RGBFormat"]]]]]],["stat",["assign",true,["dot",["name","texture"],"needsUpdate"],["name","true"]]],["return",["name","texture"]]]]]]]]],["stat",["assign",true,["dot",["name","THREE"],"SceneUtils"],["object",[["showHierarchy",["function",null,["root","visible"],[["stat",["call",["dot",["dot",["name","THREE"],"SceneUtils"],"traverseHierarchy"],[["name","root"],["function",null,["node"],[["stat",["assign",true,["dot",["name","node"],"visible"],["name","visible"]]]]]]]]]]],["traverseHierarchy",["function",null,["root","callback"],[["var",[["n"],["i"],["l",["dot",["dot",["name","root"],"children"],"length"]]]],["for",["assign",true,["name","i"],["num",0]],["binary","<",["name","i"],["name","l"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","n"],["sub",["dot",["name","root"],"children"],["name","i"]]]],["stat",["call",["name","callback"],[["name","n"]]]],["stat",["call",["dot",["dot",["name","THREE"],"SceneUtils"],"traverseHierarchy"],[["name","n"],["name","callback"]]]]]]]]]],["createMultiMaterialObject",["function",null,["geometry","materials"],[["var",[["i"],["il",["dot",["name","materials"],"length"]],["group",["new",["dot",["name","THREE"],"Object3D"],[]]]]],["for",["assign",true,["name","i"],["num",0]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["block",[["var",[["object",["new",["dot",["name","THREE"],"Mesh"],[["name","geometry"],["sub",["name","materials"],["name","i"]]]]]]],["stat",["call",["dot",["name","group"],"add"],[["name","object"]]]]]]],["return",["name","group"]]]]],["cloneObject",["function",null,["source"],[["var",[["object"]]],["if",["binary","instanceof",["name","source"],["dot",["name","THREE"],"MorphAnimMesh"]],["block",[["stat",["assign",true,["name","object"],["new",["dot",["name","THREE"],"MorphAnimMesh"],[["dot",["name","source"],"geometry"],["dot",["name","source"],"material"]]]]],["stat",["assign",true,["dot",["name","object"],"duration"],["dot",["name","source"],"duration"]]],["stat",["assign",true,["dot",["name","object"],"mirroredLoop"],["dot",["name","source"],"mirroredLoop"]]],["stat",["assign",true,["dot",["name","object"],"time"],["dot",["name","source"],"time"]]],["stat",["assign",true,["dot",["name","object"],"lastKeyframe"],["dot",["name","source"],"lastKeyframe"]]],["stat",["assign",true,["dot",["name","object"],"currentKeyframe"],["dot",["name","source"],"currentKeyframe"]]],["stat",["assign",true,["dot",["name","object"],"direction"],["dot",["name","source"],"direction"]]],["stat",["assign",true,["dot",["name","object"],"directionBackwards"],["dot",["name","source"],"directionBackwards"]]]]],["if",["binary","instanceof",["name","source"],["dot",["name","THREE"],"SkinnedMesh"]],["block",[["stat",["assign",true,["name","object"],["new",["dot",["name","THREE"],"SkinnedMesh"],[["dot",["name","source"],"geometry"],["dot",["name","source"],"material"]]]]]]],["if",["binary","instanceof",["name","source"],["dot",["name","THREE"],"Mesh"]],["block",[["stat",["assign",true,["name","object"],["new",["dot",["name","THREE"],"Mesh"],[["dot",["name","source"],"geometry"],["dot",["name","source"],"material"]]]]]]],["if",["binary","instanceof",["name","source"],["dot",["name","THREE"],"Line"]],["block",[["stat",["assign",true,["name","object"],["new",["dot",["name","THREE"],"Line"],[["dot",["name","source"],"geometry"],["dot",["name","source"],"material"],["dot",["name","source"],"type"]]]]]]],["if",["binary","instanceof",["name","source"],["dot",["name","THREE"],"Ribbon"]],["block",[["stat",["assign",true,["name","object"],["new",["dot",["name","THREE"],"Ribbon"],[["dot",["name","source"],"geometry"],["dot",["name","source"],"material"]]]]]]],["if",["binary","instanceof",["name","source"],["dot",["name","THREE"],"ParticleSystem"]],["block",[["stat",["assign",true,["name","object"],["new",["dot",["name","THREE"],"ParticleSystem"],[["dot",["name","source"],"geometry"],["dot",["name","source"],"material"]]]]],["stat",["assign",true,["dot",["name","object"],"sortParticles"],["dot",["name","source"],"sortParticles"]]]]],["if",["binary","instanceof",["name","source"],["dot",["name","THREE"],"Particle"]],["block",[["stat",["assign",true,["name","object"],["new",["dot",["name","THREE"],"Particle"],[["dot",["name","source"],"material"]]]]]]],["if",["binary","instanceof",["name","source"],["dot",["name","THREE"],"Sprite"]],["block",[["stat",["assign",true,["name","object"],["new",["dot",["name","THREE"],"Sprite"],[["object",[]]]]]],["stat",["call",["dot",["dot",["name","object"],"color"],"copy"],[["dot",["name","source"],"color"]]]],["stat",["assign",true,["dot",["name","object"],"map"],["dot",["name","source"],"map"]]],["stat",["assign",true,["dot",["name","object"],"blending"],["dot",["name","source"],"blending"]]],["stat",["assign",true,["dot",["name","object"],"useScreenCoordinates"],["dot",["name","source"],"useScreenCoordinates"]]],["stat",["assign",true,["dot",["name","object"],"mergeWith3D"],["dot",["name","source"],"mergeWith3D"]]],["stat",["assign",true,["dot",["name","object"],"affectedByDistance"],["dot",["name","source"],"affectedByDistance"]]],["stat",["assign",true,["dot",["name","object"],"scaleByViewport"],["dot",["name","source"],"scaleByViewport"]]],["stat",["assign",true,["dot",["name","object"],"alignment"],["dot",["name","source"],"alignment"]]],["stat",["call",["dot",["dot",["name","object"],"rotation3d"],"copy"],[["dot",["name","source"],"rotation3d"]]]],["stat",["assign",true,["dot",["name","object"],"rotation"],["dot",["name","source"],"rotation"]]],["stat",["assign",true,["dot",["name","object"],"opacity"],["dot",["name","source"],"opacity"]]],["stat",["call",["dot",["dot",["name","object"],"uvOffset"],"copy"],[["dot",["name","source"],"uvOffset"]]]],["stat",["call",["dot",["dot",["name","object"],"uvScale"],"copy"],[["dot",["name","source"],"uvScale"]]]]]],["if",["binary","instanceof",["name","source"],["dot",["name","THREE"],"LOD"]],["block",[["stat",["assign",true,["name","object"],["new",["dot",["name","THREE"],"LOD"],[]]]]]],["if",["binary","instanceof",["name","source"],["dot",["name","THREE"],"MarchingCubes"]],["block",[["stat",["assign",true,["name","object"],["new",["dot",["name","THREE"],"MarchingCubes"],[["dot",["name","source"],"resolution"],["dot",["name","source"],"material"]]]]],["stat",["call",["dot",["dot",["name","object"],"field"],"set"],[["dot",["name","source"],"field"]]]],["stat",["assign",true,["dot",["name","object"],"isolation"],["dot",["name","source"],"isolation"]]]]],["if",["binary","instanceof",["name","source"],["dot",["name","THREE"],"Object3D"]],["block",[["stat",["assign",true,["name","object"],["new",["dot",["name","THREE"],"Object3D"],[]]]]]],null]]]]]]]]]]],["stat",["assign",true,["dot",["name","object"],"name"],["dot",["name","source"],"name"]]],["stat",["assign",true,["dot",["name","object"],"parent"],["dot",["name","source"],"parent"]]],["stat",["call",["dot",["dot",["name","object"],"up"],"copy"],[["dot",["name","source"],"up"]]]],["stat",["call",["dot",["dot",["name","object"],"position"],"copy"],[["dot",["name","source"],"position"]]]],["if",["binary","instanceof",["dot",["name","object"],"rotation"],["dot",["name","THREE"],"Vector3"]],["stat",["call",["dot",["dot",["name","object"],"rotation"],"copy"],[["dot",["name","source"],"rotation"]]]],null],["stat",["assign",true,["dot",["name","object"],"eulerOrder"],["dot",["name","source"],"eulerOrder"]]],["stat",["call",["dot",["dot",["name","object"],"scale"],"copy"],[["dot",["name","source"],"scale"]]]],["stat",["assign",true,["dot",["name","object"],"dynamic"],["dot",["name","source"],"dynamic"]]],["stat",["assign",true,["dot",["name","object"],"doubleSided"],["dot",["name","source"],"doubleSided"]]],["stat",["assign",true,["dot",["name","object"],"flipSided"],["dot",["name","source"],"flipSided"]]],["stat",["assign",true,["dot",["name","object"],"renderDepth"],["dot",["name","source"],"renderDepth"]]],["stat",["assign",true,["dot",["name","object"],"rotationAutoUpdate"],["dot",["name","source"],"rotationAutoUpdate"]]],["stat",["call",["dot",["dot",["name","object"],"matrix"],"copy"],[["dot",["name","source"],"matrix"]]]],["stat",["call",["dot",["dot",["name","object"],"matrixWorld"],"copy"],[["dot",["name","source"],"matrixWorld"]]]],["stat",["call",["dot",["dot",["name","object"],"matrixRotationWorld"],"copy"],[["dot",["name","source"],"matrixRotationWorld"]]]],["stat",["assign",true,["dot",["name","object"],"matrixAutoUpdate"],["dot",["name","source"],"matrixAutoUpdate"]]],["stat",["assign",true,["dot",["name","object"],"matrixWorldNeedsUpdate"],["dot",["name","source"],"matrixWorldNeedsUpdate"]]],["stat",["call",["dot",["dot",["name","object"],"quaternion"],"copy"],[["dot",["name","source"],"quaternion"]]]],["stat",["assign",true,["dot",["name","object"],"useQuaternion"],["dot",["name","source"],"useQuaternion"]]],["stat",["assign",true,["dot",["name","object"],"boundRadius"],["dot",["name","source"],"boundRadius"]]],["stat",["assign",true,["dot",["name","object"],"boundRadiusScale"],["dot",["name","source"],"boundRadiusScale"]]],["stat",["assign",true,["dot",["name","object"],"visible"],["dot",["name","source"],"visible"]]],["stat",["assign",true,["dot",["name","object"],"castShadow"],["dot",["name","source"],"castShadow"]]],["stat",["assign",true,["dot",["name","object"],"receiveShadow"],["dot",["name","source"],"receiveShadow"]]],["stat",["assign",true,["dot",["name","object"],"frustumCulled"],["dot",["name","source"],"frustumCulled"]]],["for",["var",[["i",["num",0]]]],["binary","<",["name","i"],["dot",["dot",["name","source"],"children"],"length"]],["unary-postfix","++",["name","i"]],["block",[["var",[["child",["call",["dot",["dot",["name","THREE"],"SceneUtils"],"cloneObject"],[["sub",["dot",["name","source"],"children"],["name","i"]]]]]]],["stat",["assign",true,["sub",["dot",["name","object"],"children"],["name","i"]],["name","child"]]],["stat",["assign",true,["dot",["name","child"],"parent"],["name","object"]]]]]],["if",["binary","instanceof",["name","source"],["dot",["name","THREE"],"LOD"]],["block",[["for",["var",[["i",["num",0]]]],["binary","<",["name","i"],["dot",["dot",["name","source"],"LODs"],"length"]],["unary-postfix","++",["name","i"]],["block",[["var",[["lod",["sub",["dot",["name","source"],"LODs"],["name","i"]]]]],["stat",["assign",true,["sub",["dot",["name","object"],"LODs"],["name","i"]],["object",[["visibleAtDistance",["dot",["name","lod"],"visibleAtDistance"]],["object3D",["sub",["dot",["name","object"],"children"],["name","i"]]]]]]]]]]]],null],["return",["name","object"]]]]],["detach",["function",null,["child","parent","scene"],[["stat",["call",["dot",["name","child"],"applyMatrix"],[["dot",["name","parent"],"matrixWorld"]]]],["stat",["call",["dot",["name","parent"],"remove"],[["name","child"]]]],["stat",["call",["dot",["name","scene"],"add"],[["name","child"]]]]]]],["attach",["function",null,["child","scene","parent"],[["var",[["matrixWorldInverse",["new",["dot",["name","THREE"],"Matrix4"],[]]]]],["stat",["call",["dot",["name","matrixWorldInverse"],"getInverse"],[["dot",["name","parent"],"matrixWorld"]]]],["stat",["call",["dot",["name","child"],"applyMatrix"],[["name","matrixWorldInverse"]]]],["stat",["call",["dot",["name","scene"],"remove"],[["name","child"]]]],["stat",["call",["dot",["name","parent"],"add"],[["name","child"]]]]]]]]]]],["if",["dot",["name","THREE"],"WebGLRenderer"],["block",[["stat",["assign",true,["dot",["name","THREE"],"ShaderUtils"],["object",[["lib",["object",[["fresnel",["object",[["uniforms",["object",[["mRefractionRatio",["object",[["type",["string","f"]],["value",["num",1.02]]]]],["mFresnelBias",["object",[["type",["string","f"]],["value",["num",0.1]]]]],["mFresnelPower",["object",[["type",["string","f"]],["value",["num",2]]]]],["mFresnelScale",["object",[["type",["string","f"]],["value",["num",1]]]]],["tCube",["object",[["type",["string","t"]],["value",["num",1]],["texture",["name","null"]]]]]]]],["fragmentShader",["call",["dot",["array",[["string","uniform samplerCube tCube;"],["string","varying vec3 vReflect;"],["string","varying vec3 vRefract[3];"],["string","varying float vReflectionFactor;"],["string","void main() {"],["string","vec4 reflectedColor = textureCube( tCube, vec3( -vReflect.x, vReflect.yz ) );"],["string","vec4 refractedColor = vec4( 1.0, 1.0, 1.0, 1.0 );"],["string","refractedColor.r = textureCube( tCube, vec3( -vRefract[0].x, vRefract[0].yz ) ).r;"],["string","refractedColor.g = textureCube( tCube, vec3( -vRefract[1].x, vRefract[1].yz ) ).g;"],["string","refractedColor.b = textureCube( tCube, vec3( -vRefract[2].x, vRefract[2].yz ) ).b;"],["string","refractedColor.a = 1.0;"],["string","gl_FragColor = mix( refractedColor, reflectedColor, clamp( vReflectionFactor, 0.0, 1.0 ) );"],["string","}"]]],"join"],[["string","\n"]]]],["vertexShader",["call",["dot",["array",[["string","uniform float mRefractionRatio;"],["string","uniform float mFresnelBias;"],["string","uniform float mFresnelScale;"],["string","uniform float mFresnelPower;"],["string","varying vec3 vReflect;"],["string","varying vec3 vRefract[3];"],["string","varying float vReflectionFactor;"],["string","void main() {"],["string","vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );"],["string","vec4 mPosition = objectMatrix * vec4( position, 1.0 );"],["string","vec3 nWorld = normalize ( mat3( objectMatrix[0].xyz, objectMatrix[1].xyz, objectMatrix[2].xyz ) * normal );"],["string","vec3 I = mPosition.xyz - cameraPosition;"],["string","vReflect = reflect( I, nWorld );"],["string","vRefract[0] = refract( normalize( I ), nWorld, mRefractionRatio );"],["string","vRefract[1] = refract( normalize( I ), nWorld, mRefractionRatio * 0.99 );"],["string","vRefract[2] = refract( normalize( I ), nWorld, mRefractionRatio * 0.98 );"],["string","vReflectionFactor = mFresnelBias + mFresnelScale * pow( 1.0 + dot( normalize( I ), nWorld ), mFresnelPower );"],["string","gl_Position = projectionMatrix * mvPosition;"],["string","}"]]],"join"],[["string","\n"]]]]]]],["normal",["object",[["uniforms",["call",["dot",["dot",["name","THREE"],"UniformsUtils"],"merge"],[["array",[["sub",["dot",["name","THREE"],"UniformsLib"],["string","fog"]],["sub",["dot",["name","THREE"],"UniformsLib"],["string","lights"]],["sub",["dot",["name","THREE"],"UniformsLib"],["string","shadowmap"]],["object",[["enableAO",["object",[["type",["string","i"]],["value",["num",0]]]]],["enableDiffuse",["object",[["type",["string","i"]],["value",["num",0]]]]],["enableSpecular",["object",[["type",["string","i"]],["value",["num",0]]]]],["enableReflection",["object",[["type",["string","i"]],["value",["num",0]]]]],["tDiffuse",["object",[["type",["string","t"]],["value",["num",0]],["texture",["name","null"]]]]],["tCube",["object",[["type",["string","t"]],["value",["num",1]],["texture",["name","null"]]]]],["tNormal",["object",[["type",["string","t"]],["value",["num",2]],["texture",["name","null"]]]]],["tSpecular",["object",[["type",["string","t"]],["value",["num",3]],["texture",["name","null"]]]]],["tAO",["object",[["type",["string","t"]],["value",["num",4]],["texture",["name","null"]]]]],["tDisplacement",["object",[["type",["string","t"]],["value",["num",5]],["texture",["name","null"]]]]],["uNormalScale",["object",[["type",["string","f"]],["value",["num",1]]]]],["uDisplacementBias",["object",[["type",["string","f"]],["value",["num",0]]]]],["uDisplacementScale",["object",[["type",["string","f"]],["value",["num",1]]]]],["uDiffuseColor",["object",[["type",["string","c"]],["value",["new",["dot",["name","THREE"],"Color"],[["num",16777215]]]]]]],["uSpecularColor",["object",[["type",["string","c"]],["value",["new",["dot",["name","THREE"],"Color"],[["num",1118481]]]]]]],["uAmbientColor",["object",[["type",["string","c"]],["value",["new",["dot",["name","THREE"],"Color"],[["num",16777215]]]]]]],["uShininess",["object",[["type",["string","f"]],["value",["num",30]]]]],["uOpacity",["object",[["type",["string","f"]],["value",["num",1]]]]],["uReflectivity",["object",[["type",["string","f"]],["value",["num",0.5]]]]],["uOffset",["object",[["type",["string","v2"]],["value",["new",["dot",["name","THREE"],"Vector2"],[["num",0],["num",0]]]]]]],["uRepeat",["object",[["type",["string","v2"]],["value",["new",["dot",["name","THREE"],"Vector2"],[["num",1],["num",1]]]]]]],["wrapRGB",["object",[["type",["string","v3"]],["value",["new",["dot",["name","THREE"],"Vector3"],[["num",1],["num",1],["num",1]]]]]]]]]]]]]],["fragmentShader",["call",["dot",["array",[["string","uniform vec3 uAmbientColor;"],["string","uniform vec3 uDiffuseColor;"],["string","uniform vec3 uSpecularColor;"],["string","uniform float uShininess;"],["string","uniform float uOpacity;"],["string","uniform bool enableDiffuse;"],["string","uniform bool enableSpecular;"],["string","uniform bool enableAO;"],["string","uniform bool enableReflection;"],["string","uniform sampler2D tDiffuse;"],["string","uniform sampler2D tNormal;"],["string","uniform sampler2D tSpecular;"],["string","uniform sampler2D tAO;"],["string","uniform samplerCube tCube;"],["string","uniform float uNormalScale;"],["string","uniform float uReflectivity;"],["string","varying vec3 vTangent;"],["string","varying vec3 vBinormal;"],["string","varying vec3 vNormal;"],["string","varying vec2 vUv;"],["string","uniform vec3 ambientLightColor;"],["string","#if MAX_DIR_LIGHTS > 0"],["string","uniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];"],["string","uniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];"],["string","#endif"],["string","#if MAX_POINT_LIGHTS > 0"],["string","uniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];"],["string","varying vec4 vPointLight[ MAX_POINT_LIGHTS ];"],["string","#endif"],["string","#ifdef WRAP_AROUND"],["string","uniform vec3 wrapRGB;"],["string","#endif"],["string","varying vec3 vViewPosition;"],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","shadowmap_pars_fragment"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","fog_pars_fragment"]],["string","void main() {"],["string","gl_FragColor = vec4( vec3( 1.0 ), uOpacity );"],["string","vec3 specularTex = vec3( 1.0 );"],["string","vec3 normalTex = texture2D( tNormal, vUv ).xyz * 2.0 - 1.0;"],["string","normalTex.xy *= uNormalScale;"],["string","normalTex = normalize( normalTex );"],["string","if( enableDiffuse ) {"],["string","#ifdef GAMMA_INPUT"],["string","vec4 texelColor = texture2D( tDiffuse, vUv );"],["string","texelColor.xyz *= texelColor.xyz;"],["string","gl_FragColor = gl_FragColor * texelColor;"],["string","#else"],["string","gl_FragColor = gl_FragColor * texture2D( tDiffuse, vUv );"],["string","#endif"],["string","}"],["string","if( enableAO ) {"],["string","#ifdef GAMMA_INPUT"],["string","vec4 aoColor = texture2D( tAO, vUv );"],["string","aoColor.xyz *= aoColor.xyz;"],["string","gl_FragColor.xyz = gl_FragColor.xyz * aoColor.xyz;"],["string","#else"],["string","gl_FragColor.xyz = gl_FragColor.xyz * texture2D( tAO, vUv ).xyz;"],["string","#endif"],["string","}"],["string","if( enableSpecular )"],["string","specularTex = texture2D( tSpecular, vUv ).xyz;"],["string","mat3 tsb = mat3( normalize( vTangent ), normalize( vBinormal ), normalize( vNormal ) );"],["string","vec3 finalNormal = tsb * normalTex;"],["string","vec3 normal = normalize( finalNormal );"],["string","vec3 viewPosition = normalize( vViewPosition );"],["string","#if MAX_POINT_LIGHTS > 0"],["string","vec3 pointDiffuse = vec3( 0.0 );"],["string","vec3 pointSpecular = vec3( 0.0 );"],["string","for ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {"],["string","vec3 pointVector = normalize( vPointLight[ i ].xyz );"],["string","float pointDistance = vPointLight[ i ].w;"],["string","#ifdef WRAP_AROUND"],["string","float pointDiffuseWeightFull = max( dot( normal, pointVector ), 0.0 );"],["string","float pointDiffuseWeightHalf = max( 0.5 * dot( normal, pointVector ) + 0.5, 0.0 );"],["string","vec3 pointDiffuseWeight = mix( vec3 ( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );"],["string","#else"],["string","float pointDiffuseWeight = max( dot( normal, pointVector ), 0.0 );"],["string","#endif"],["string","pointDiffuse += pointDistance * pointLightColor[ i ] * uDiffuseColor * pointDiffuseWeight;"],["string","vec3 pointHalfVector = normalize( pointVector + viewPosition );"],["string","float pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );"],["string","float pointSpecularWeight = specularTex.r * max( pow( pointDotNormalHalf, uShininess ), 0.0 );"],["string","#ifdef PHYSICALLY_BASED_SHADING"],["string","float specularNormalization = ( uShininess + 2.0001 ) / 8.0;"],["string","vec3 schlick = uSpecularColor + vec3( 1.0 - uSpecularColor ) * pow( 1.0 - dot( pointVector, pointHalfVector ), 5.0 );"],["string","pointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * pointDistance * specularNormalization;"],["string","#else"],["string","pointSpecular += pointDistance * pointLightColor[ i ] * uSpecularColor * pointSpecularWeight * pointDiffuseWeight;"],["string","#endif"],["string","}"],["string","#endif"],["string","#if MAX_DIR_LIGHTS > 0"],["string","vec3 dirDiffuse = vec3( 0.0 );"],["string","vec3 dirSpecular = vec3( 0.0 );"],["string","for( int i = 0; i < MAX_DIR_LIGHTS; i++ ) {"],["string","vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );"],["string","vec3 dirVector = normalize( lDirection.xyz );"],["string","#ifdef WRAP_AROUND"],["string","float directionalLightWeightingFull = max( dot( normal, dirVector ), 0.0 );"],["string","float directionalLightWeightingHalf = max( 0.5 * dot( normal, dirVector ) + 0.5, 0.0 );"],["string","vec3 dirDiffuseWeight = mix( vec3( directionalLightWeightingFull ), vec3( directionalLightWeightingHalf ), wrapRGB );"],["string","#else"],["string","float dirDiffuseWeight = max( dot( normal, dirVector ), 0.0 );"],["string","#endif"],["string","dirDiffuse += directionalLightColor[ i ] * uDiffuseColor * dirDiffuseWeight;"],["string","vec3 dirHalfVector = normalize( dirVector + viewPosition );"],["string","float dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );"],["string","float dirSpecularWeight = specularTex.r * max( pow( dirDotNormalHalf, uShininess ), 0.0 );"],["string","#ifdef PHYSICALLY_BASED_SHADING"],["string","float specularNormalization = ( uShininess + 2.0001 ) / 8.0;"],["string","vec3 schlick = uSpecularColor + vec3( 1.0 - uSpecularColor ) * pow( 1.0 - dot( dirVector, dirHalfVector ), 5.0 );"],["string","dirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;"],["string","#else"],["string","dirSpecular += directionalLightColor[ i ] * uSpecularColor * dirSpecularWeight * dirDiffuseWeight;"],["string","#endif"],["string","}"],["string","#endif"],["string","vec3 totalDiffuse = vec3( 0.0 );"],["string","vec3 totalSpecular = vec3( 0.0 );"],["string","#if MAX_DIR_LIGHTS > 0"],["string","totalDiffuse += dirDiffuse;"],["string","totalSpecular += dirSpecular;"],["string","#endif"],["string","#if MAX_POINT_LIGHTS > 0"],["string","totalDiffuse += pointDiffuse;"],["string","totalSpecular += pointSpecular;"],["string","#endif"],["string","gl_FragColor.xyz = gl_FragColor.xyz * ( totalDiffuse + ambientLightColor * uAmbientColor) + totalSpecular;"],["string","if ( enableReflection ) {"],["string","vec3 wPos = cameraPosition - vViewPosition;"],["string","vec3 vReflect = reflect( normalize( wPos ), normal );"],["string","vec4 cubeColor = textureCube( tCube, vec3( -vReflect.x, vReflect.yz ) );"],["string","#ifdef GAMMA_INPUT"],["string","cubeColor.xyz *= cubeColor.xyz;"],["string","#endif"],["string","gl_FragColor.xyz = mix( gl_FragColor.xyz, cubeColor.xyz, specularTex.r * uReflectivity );"],["string","}"],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","shadowmap_fragment"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","linear_to_gamma_fragment"]],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","fog_fragment"]],["string","}"]]],"join"],[["string","\n"]]]],["vertexShader",["call",["dot",["array",[["string","attribute vec4 tangent;"],["string","uniform vec2 uOffset;"],["string","uniform vec2 uRepeat;"],["string","#ifdef VERTEX_TEXTURES"],["string","uniform sampler2D tDisplacement;"],["string","uniform float uDisplacementScale;"],["string","uniform float uDisplacementBias;"],["string","#endif"],["string","varying vec3 vTangent;"],["string","varying vec3 vBinormal;"],["string","varying vec3 vNormal;"],["string","varying vec2 vUv;"],["string","#if MAX_POINT_LIGHTS > 0"],["string","uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];"],["string","uniform float pointLightDistance[ MAX_POINT_LIGHTS ];"],["string","varying vec4 vPointLight[ MAX_POINT_LIGHTS ];"],["string","#endif"],["string","varying vec3 vViewPosition;"],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","shadowmap_pars_vertex"]],["string","void main() {"],["string","vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );"],["string","vViewPosition = -mvPosition.xyz;"],["string","vNormal = normalMatrix * normal;"],["string","vTangent = normalMatrix * tangent.xyz;"],["string","vBinormal = cross( vNormal, vTangent ) * tangent.w;"],["string","vUv = uv * uRepeat + uOffset;"],["string","#if MAX_POINT_LIGHTS > 0"],["string","for( int i = 0; i < MAX_POINT_LIGHTS; i++ ) {"],["string","vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );"],["string","vec3 lVector = lPosition.xyz - mvPosition.xyz;"],["string","float lDistance = 1.0;"],["string","if ( pointLightDistance[ i ] > 0.0 )"],["string","lDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );"],["string","lVector = normalize( lVector );"],["string","vPointLight[ i ] = vec4( lVector, lDistance );"],["string","}"],["string","#endif"],["string","#ifdef VERTEX_TEXTURES"],["string","vec3 dv = texture2D( tDisplacement, uv ).xyz;"],["string","float df = uDisplacementScale * dv.x + uDisplacementBias;"],["string","vec4 displacedPosition = vec4( normalize( vNormal.xyz ) * df, 0.0 ) + mvPosition;"],["string","gl_Position = projectionMatrix * displacedPosition;"],["string","#else"],["string","gl_Position = projectionMatrix * mvPosition;"],["string","#endif"],["sub",["dot",["name","THREE"],"ShaderChunk"],["string","shadowmap_vertex"]],["string","}"]]],"join"],[["string","\n"]]]]]]],["cube",["object",[["uniforms",["object",[["tCube",["object",[["type",["string","t"]],["value",["num",1]],["texture",["name","null"]]]]],["tFlip",["object",[["type",["string","f"]],["value",["unary-prefix","-",["num",1]]]]]]]]],["vertexShader",["call",["dot",["array",[["string","varying vec3 vViewPosition;"],["string","void main() {"],["string","vec4 mPosition = objectMatrix * vec4( position, 1.0 );"],["string","vViewPosition = cameraPosition - mPosition.xyz;"],["string","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );"],["string","}"]]],"join"],[["string","\n"]]]],["fragmentShader",["call",["dot",["array",[["string","uniform samplerCube tCube;"],["string","uniform float tFlip;"],["string","varying vec3 vViewPosition;"],["string","void main() {"],["string","vec3 wPos = cameraPosition - vViewPosition;"],["string","gl_FragColor = textureCube( tCube, vec3( tFlip * wPos.x, wPos.yz ) );"],["string","}"]]],"join"],[["string","\n"]]]]]]]]]]]]]]]],null],["block"],["stat",["assign",true,["dot",["name","THREE"],"BufferGeometry"],["function",null,[],[["stat",["assign",true,["dot",["name","this"],"id"],["unary-postfix","++",["dot",["name","THREE"],"GeometryCount"]]]],["stat",["assign",true,["dot",["name","this"],"vertexIndexBuffer"],["name","null"]]],["stat",["assign",true,["dot",["name","this"],"vertexPositionBuffer"],["name","null"]]],["stat",["assign",true,["dot",["name","this"],"vertexNormalBuffer"],["name","null"]]],["stat",["assign",true,["dot",["name","this"],"vertexUvBuffer"],["name","null"]]],["stat",["assign",true,["dot",["name","this"],"vertexColorBuffer"],["name","null"]]],["stat",["assign",true,["dot",["name","this"],"vertexIndexArray"],["name","null"]]],["stat",["assign",true,["dot",["name","this"],"vertexPositionArray"],["name","null"]]],["stat",["assign",true,["dot",["name","this"],"vertexNormalArray"],["name","null"]]],["stat",["assign",true,["dot",["name","this"],"vertexUvArray"],["name","null"]]],["stat",["assign",true,["dot",["name","this"],"vertexColorArray"],["name","null"]]],["stat",["assign",true,["dot",["name","this"],"dynamic"],["name","false"]]],["stat",["assign",true,["dot",["name","this"],"boundingBox"],["name","null"]]],["stat",["assign",true,["dot",["name","this"],"boundingSphere"],["name","null"]]],["stat",["assign",true,["dot",["name","this"],"morphTargets"],["array",[]]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"BufferGeometry"],"prototype"],["object",[["constructor",["dot",["name","THREE"],"BufferGeometry"]],["computeBoundingBox",["function",null,[],[]]],["computeBoundingSphere",["function",null,[],[]]]]]]],["stat",["assign",true,["dot",["name","THREE"],"Curve"],["function",null,[],[]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"Curve"],"prototype"],"getPoint"],["function",null,["t"],[["stat",["call",["dot",["name","console"],"log"],[["string","Warning, getPoint() not implemented!"]]]],["return",["name","null"]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"Curve"],"prototype"],"getPointAt"],["function",null,["u"],[["var",[["t",["call",["dot",["name","this"],"getUtoTmapping"],[["name","u"]]]]]],["return",["call",["dot",["name","this"],"getPoint"],[["name","t"]]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"Curve"],"prototype"],"getPoints"],["function",null,["divisions"],[["if",["unary-prefix","!",["name","divisions"]],["stat",["assign",true,["name","divisions"],["num",5]]],null],["var",[["d"],["pts",["array",[]]]]],["for",["assign",true,["name","d"],["num",0]],["binary","<=",["name","d"],["name","divisions"]],["unary-postfix","++",["name","d"]],["block",[["stat",["call",["dot",["name","pts"],"push"],[["call",["dot",["name","this"],"getPoint"],[["binary","/",["name","d"],["name","divisions"]]]]]]]]]],["return",["name","pts"]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"Curve"],"prototype"],"getSpacedPoints"],["function",null,["divisions"],[["if",["unary-prefix","!",["name","divisions"]],["stat",["assign",true,["name","divisions"],["num",5]]],null],["var",[["d"],["pts",["array",[]]]]],["for",["assign",true,["name","d"],["num",0]],["binary","<=",["name","d"],["name","divisions"]],["unary-postfix","++",["name","d"]],["block",[["stat",["call",["dot",["name","pts"],"push"],[["call",["dot",["name","this"],"getPointAt"],[["binary","/",["name","d"],["name","divisions"]]]]]]]]]],["return",["name","pts"]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"Curve"],"prototype"],"getLength"],["function",null,[],[["var",[["lengths",["call",["dot",["name","this"],"getLengths"],[]]]]],["return",["sub",["name","lengths"],["binary","-",["dot",["name","lengths"],"length"],["num",1]]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"Curve"],"prototype"],"getLengths"],["function",null,["divisions"],[["if",["unary-prefix","!",["name","divisions"]],["stat",["assign",true,["name","divisions"],["conditional",["dot",["name","this"],"__arcLengthDivisions"],["dot",["name","this"],"__arcLengthDivisions"],["num",200]]]],null],["if",["binary","&&",["binary","&&",["dot",["name","this"],"cacheArcLengths"],["binary","==",["dot",["dot",["name","this"],"cacheArcLengths"],"length"],["binary","+",["name","divisions"],["num",1]]]],["unary-prefix","!",["dot",["name","this"],"needsUpdate"]]],["block",[["return",["dot",["name","this"],"cacheArcLengths"]]]],null],["stat",["assign",true,["dot",["name","this"],"needsUpdate"],["name","false"]]],["var",[["cache",["array",[]]]]],["var",[["current"],["last",["call",["dot",["name","this"],"getPoint"],[["num",0]]]]]],["var",[["p"],["sum",["num",0]]]],["stat",["call",["dot",["name","cache"],"push"],[["num",0]]]],["for",["assign",true,["name","p"],["num",1]],["binary","<=",["name","p"],["name","divisions"]],["unary-postfix","++",["name","p"]],["block",[["stat",["assign",true,["name","current"],["call",["dot",["name","this"],"getPoint"],[["binary","/",["name","p"],["name","divisions"]]]]]],["stat",["assign","+",["name","sum"],["call",["dot",["name","current"],"distanceTo"],[["name","last"]]]]],["stat",["call",["dot",["name","cache"],"push"],[["name","sum"]]]],["stat",["assign",true,["name","last"],["name","current"]]]]]],["stat",["assign",true,["dot",["name","this"],"cacheArcLengths"],["name","cache"]]],["return",["name","cache"]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"Curve"],"prototype"],"updateArcLengths"],["function",null,[],[["stat",["assign",true,["dot",["name","this"],"needsUpdate"],["name","true"]]],["stat",["call",["dot",["name","this"],"getLengths"],[]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"Curve"],"prototype"],"getUtoTmapping"],["function",null,["u","distance"],[["var",[["arcLengths",["call",["dot",["name","this"],"getLengths"],[]]]]],["var",[["i",["num",0]],["il",["dot",["name","arcLengths"],"length"]]]],["var",[["targetArcLength"]]],["if",["name","distance"],["block",[["stat",["assign",true,["name","targetArcLength"],["name","distance"]]]]],["block",[["stat",["assign",true,["name","targetArcLength"],["binary","*",["name","u"],["sub",["name","arcLengths"],["binary","-",["name","il"],["num",1]]]]]]]]],["var",[["low",["num",0]],["high",["binary","-",["name","il"],["num",1]]],["comparison"]]],["while",["binary","<=",["name","low"],["name","high"]],["block",[["stat",["assign",true,["name","i"],["call",["dot",["name","Math"],"floor"],[["binary","+",["name","low"],["binary","/",["binary","-",["name","high"],["name","low"]],["num",2]]]]]]],["stat",["assign",true,["name","comparison"],["binary","-",["sub",["name","arcLengths"],["name","i"]],["name","targetArcLength"]]]],["if",["binary","<",["name","comparison"],["num",0]],["block",[["stat",["assign",true,["name","low"],["binary","+",["name","i"],["num",1]]]],["continue",null]]],["if",["binary",">",["name","comparison"],["num",0]],["block",[["stat",["assign",true,["name","high"],["binary","-",["name","i"],["num",1]]]],["continue",null]]],["block",[["stat",["assign",true,["name","high"],["name","i"]]],["break",null]]]]]]]],["stat",["assign",true,["name","i"],["name","high"]]],["if",["binary","==",["sub",["name","arcLengths"],["name","i"]],["name","targetArcLength"]],["block",[["var",[["t",["binary","/",["name","i"],["binary","-",["name","il"],["num",1]]]]]],["return",["name","t"]]]],null],["var",[["lengthBefore",["sub",["name","arcLengths"],["name","i"]]]]],["var",[["lengthAfter",["sub",["name","arcLengths"],["binary","+",["name","i"],["num",1]]]]]],["var",[["segmentLength",["binary","-",["name","lengthAfter"],["name","lengthBefore"]]]]],["var",[["segmentFraction",["binary","/",["binary","-",["name","targetArcLength"],["name","lengthBefore"]],["name","segmentLength"]]]]],["var",[["t",["binary","/",["binary","+",["name","i"],["name","segmentFraction"]],["binary","-",["name","il"],["num",1]]]]]],["return",["name","t"]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"Curve"],"prototype"],"getNormalVector"],["function",null,["t"],[["var",[["vec",["call",["dot",["name","this"],"getTangent"],[["name","t"]]]]]],["return",["new",["dot",["name","THREE"],"Vector2"],[["unary-prefix","-",["dot",["name","vec"],"y"]],["dot",["name","vec"],"x"]]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"Curve"],"prototype"],"getTangent"],["function",null,["t"],[["var",[["delta",["num",0.0001]]]],["var",[["t1",["binary","-",["name","t"],["name","delta"]]]]],["var",[["t2",["binary","+",["name","t"],["name","delta"]]]]],["if",["binary","<",["name","t1"],["num",0]],["stat",["assign",true,["name","t1"],["num",0]]],null],["if",["binary",">",["name","t2"],["num",1]],["stat",["assign",true,["name","t2"],["num",1]]],null],["var",[["pt1",["call",["dot",["name","this"],"getPoint"],[["name","t1"]]]]]],["var",[["pt2",["call",["dot",["name","this"],"getPoint"],[["name","t2"]]]]]],["var",[["vec",["call",["dot",["call",["dot",["name","pt2"],"clone"],[]],"subSelf"],[["name","pt1"]]]]]],["return",["call",["dot",["name","vec"],"normalize"],[]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"Curve"],"prototype"],"getTangentAt"],["function",null,["u"],[["var",[["t",["call",["dot",["name","this"],"getUtoTmapping"],[["name","u"]]]]]],["return",["call",["dot",["name","this"],"getTangent"],[["name","t"]]]]]]]],["stat",["assign",true,["dot",["name","THREE"],"LineCurve"],["function",null,["v1","v2"],[["stat",["assign",true,["dot",["name","this"],"v1"],["name","v1"]]],["stat",["assign",true,["dot",["name","this"],"v2"],["name","v2"]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"LineCurve"],"prototype"],["new",["dot",["name","THREE"],"Curve"],[]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"LineCurve"],"prototype"],"constructor"],["dot",["name","THREE"],"LineCurve"]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"LineCurve"],"prototype"],"getPoint"],["function",null,["t"],[["var",[["point",["call",["dot",["call",["dot",["dot",["name","this"],"v2"],"clone"],[]],"subSelf"],[["dot",["name","this"],"v1"]]]]]],["stat",["call",["dot",["call",["dot",["name","point"],"multiplyScalar"],[["name","t"]]],"addSelf"],[["dot",["name","this"],"v1"]]]],["return",["name","point"]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"LineCurve"],"prototype"],"getPointAt"],["function",null,["u"],[["return",["call",["dot",["name","this"],"getPoint"],[["name","u"]]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"LineCurve"],"prototype"],"getTangent"],["function",null,["t"],[["var",[["tangent",["call",["dot",["call",["dot",["dot",["name","this"],"v2"],"clone"],[]],"subSelf"],[["dot",["name","this"],"v1"]]]]]],["return",["call",["dot",["name","tangent"],"normalize"],[]]]]]]],["stat",["assign",true,["dot",["name","THREE"],"QuadraticBezierCurve"],["function",null,["v0","v1","v2"],[["stat",["assign",true,["dot",["name","this"],"v0"],["name","v0"]]],["stat",["assign",true,["dot",["name","this"],"v1"],["name","v1"]]],["stat",["assign",true,["dot",["name","this"],"v2"],["name","v2"]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"QuadraticBezierCurve"],"prototype"],["new",["dot",["name","THREE"],"Curve"],[]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"QuadraticBezierCurve"],"prototype"],"constructor"],["dot",["name","THREE"],"QuadraticBezierCurve"]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"QuadraticBezierCurve"],"prototype"],"getPoint"],["function",null,["t"],[["var",[["tx"],["ty"]]],["stat",["assign",true,["name","tx"],["call",["dot",["dot",["dot",["name","THREE"],"Shape"],"Utils"],"b2"],[["name","t"],["dot",["dot",["name","this"],"v0"],"x"],["dot",["dot",["name","this"],"v1"],"x"],["dot",["dot",["name","this"],"v2"],"x"]]]]],["stat",["assign",true,["name","ty"],["call",["dot",["dot",["dot",["name","THREE"],"Shape"],"Utils"],"b2"],[["name","t"],["dot",["dot",["name","this"],"v0"],"y"],["dot",["dot",["name","this"],"v1"],"y"],["dot",["dot",["name","this"],"v2"],"y"]]]]],["return",["new",["dot",["name","THREE"],"Vector2"],[["name","tx"],["name","ty"]]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"QuadraticBezierCurve"],"prototype"],"getTangent"],["function",null,["t"],[["var",[["tx"],["ty"]]],["stat",["assign",true,["name","tx"],["call",["dot",["dot",["dot",["name","THREE"],"Curve"],"Utils"],"tangentQuadraticBezier"],[["name","t"],["dot",["dot",["name","this"],"v0"],"x"],["dot",["dot",["name","this"],"v1"],"x"],["dot",["dot",["name","this"],"v2"],"x"]]]]],["stat",["assign",true,["name","ty"],["call",["dot",["dot",["dot",["name","THREE"],"Curve"],"Utils"],"tangentQuadraticBezier"],[["name","t"],["dot",["dot",["name","this"],"v0"],"y"],["dot",["dot",["name","this"],"v1"],"y"],["dot",["dot",["name","this"],"v2"],"y"]]]]],["var",[["tangent",["new",["dot",["name","THREE"],"Vector2"],[["name","tx"],["name","ty"]]]]]],["stat",["call",["dot",["name","tangent"],"normalize"],[]]],["return",["name","tangent"]]]]]],["stat",["assign",true,["dot",["name","THREE"],"CubicBezierCurve"],["function",null,["v0","v1","v2","v3"],[["stat",["assign",true,["dot",["name","this"],"v0"],["name","v0"]]],["stat",["assign",true,["dot",["name","this"],"v1"],["name","v1"]]],["stat",["assign",true,["dot",["name","this"],"v2"],["name","v2"]]],["stat",["assign",true,["dot",["name","this"],"v3"],["name","v3"]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"CubicBezierCurve"],"prototype"],["new",["dot",["name","THREE"],"Curve"],[]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"CubicBezierCurve"],"prototype"],"constructor"],["dot",["name","THREE"],"CubicBezierCurve"]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"CubicBezierCurve"],"prototype"],"getPoint"],["function",null,["t"],[["var",[["tx"],["ty"]]],["stat",["assign",true,["name","tx"],["call",["dot",["dot",["dot",["name","THREE"],"Shape"],"Utils"],"b3"],[["name","t"],["dot",["dot",["name","this"],"v0"],"x"],["dot",["dot",["name","this"],"v1"],"x"],["dot",["dot",["name","this"],"v2"],"x"],["dot",["dot",["name","this"],"v3"],"x"]]]]],["stat",["assign",true,["name","ty"],["call",["dot",["dot",["dot",["name","THREE"],"Shape"],"Utils"],"b3"],[["name","t"],["dot",["dot",["name","this"],"v0"],"y"],["dot",["dot",["name","this"],"v1"],"y"],["dot",["dot",["name","this"],"v2"],"y"],["dot",["dot",["name","this"],"v3"],"y"]]]]],["return",["new",["dot",["name","THREE"],"Vector2"],[["name","tx"],["name","ty"]]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"CubicBezierCurve"],"prototype"],"getTangent"],["function",null,["t"],[["var",[["tx"],["ty"]]],["stat",["assign",true,["name","tx"],["call",["dot",["dot",["dot",["name","THREE"],"Curve"],"Utils"],"tangentCubicBezier"],[["name","t"],["dot",["dot",["name","this"],"v0"],"x"],["dot",["dot",["name","this"],"v1"],"x"],["dot",["dot",["name","this"],"v2"],"x"],["dot",["dot",["name","this"],"v3"],"x"]]]]],["stat",["assign",true,["name","ty"],["call",["dot",["dot",["dot",["name","THREE"],"Curve"],"Utils"],"tangentCubicBezier"],[["name","t"],["dot",["dot",["name","this"],"v0"],"y"],["dot",["dot",["name","this"],"v1"],"y"],["dot",["dot",["name","this"],"v2"],"y"],["dot",["dot",["name","this"],"v3"],"y"]]]]],["var",[["tangent",["new",["dot",["name","THREE"],"Vector2"],[["name","tx"],["name","ty"]]]]]],["stat",["call",["dot",["name","tangent"],"normalize"],[]]],["return",["name","tangent"]]]]]],["stat",["assign",true,["dot",["name","THREE"],"SplineCurve"],["function",null,["points"],[["stat",["assign",true,["dot",["name","this"],"points"],["conditional",["binary","==",["name","points"],["name","undefined"]],["array",[]],["name","points"]]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"SplineCurve"],"prototype"],["new",["dot",["name","THREE"],"Curve"],[]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"SplineCurve"],"prototype"],"constructor"],["dot",["name","THREE"],"SplineCurve"]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"SplineCurve"],"prototype"],"getPoint"],["function",null,["t"],[["var",[["v",["new",["dot",["name","THREE"],"Vector2"],[]]]]],["var",[["c",["array",[]]]]],["var",[["points",["dot",["name","this"],"points"]],["point"],["intPoint"],["weight"]]],["stat",["assign",true,["name","point"],["binary","*",["binary","-",["dot",["name","points"],"length"],["num",1]],["name","t"]]]],["stat",["assign",true,["name","intPoint"],["call",["dot",["name","Math"],"floor"],[["name","point"]]]]],["stat",["assign",true,["name","weight"],["binary","-",["name","point"],["name","intPoint"]]]],["stat",["assign",true,["sub",["name","c"],["num",0]],["conditional",["binary","==",["name","intPoint"],["num",0]],["name","intPoint"],["binary","-",["name","intPoint"],["num",1]]]]],["stat",["assign",true,["sub",["name","c"],["num",1]],["name","intPoint"]]],["stat",["assign",true,["sub",["name","c"],["num",2]],["conditional",["binary",">",["name","intPoint"],["binary","-",["dot",["name","points"],"length"],["num",2]]],["binary","-",["dot",["name","points"],"length"],["num",1]],["binary","+",["name","intPoint"],["num",1]]]]],["stat",["assign",true,["sub",["name","c"],["num",3]],["conditional",["binary",">",["name","intPoint"],["binary","-",["dot",["name","points"],"length"],["num",3]]],["binary","-",["dot",["name","points"],"length"],["num",1]],["binary","+",["name","intPoint"],["num",2]]]]],["stat",["assign",true,["dot",["name","v"],"x"],["call",["dot",["dot",["dot",["name","THREE"],"Curve"],"Utils"],"interpolate"],[["dot",["sub",["name","points"],["sub",["name","c"],["num",0]]],"x"],["dot",["sub",["name","points"],["sub",["name","c"],["num",1]]],"x"],["dot",["sub",["name","points"],["sub",["name","c"],["num",2]]],"x"],["dot",["sub",["name","points"],["sub",["name","c"],["num",3]]],"x"],["name","weight"]]]]],["stat",["assign",true,["dot",["name","v"],"y"],["call",["dot",["dot",["dot",["name","THREE"],"Curve"],"Utils"],"interpolate"],[["dot",["sub",["name","points"],["sub",["name","c"],["num",0]]],"y"],["dot",["sub",["name","points"],["sub",["name","c"],["num",1]]],"y"],["dot",["sub",["name","points"],["sub",["name","c"],["num",2]]],"y"],["dot",["sub",["name","points"],["sub",["name","c"],["num",3]]],"y"],["name","weight"]]]]],["return",["name","v"]]]]]],["stat",["assign",true,["dot",["name","THREE"],"ArcCurve"],["function",null,["aX","aY","aRadius","aStartAngle","aEndAngle","aClockwise"],[["stat",["assign",true,["dot",["name","this"],"aX"],["name","aX"]]],["stat",["assign",true,["dot",["name","this"],"aY"],["name","aY"]]],["stat",["assign",true,["dot",["name","this"],"aRadius"],["name","aRadius"]]],["stat",["assign",true,["dot",["name","this"],"aStartAngle"],["name","aStartAngle"]]],["stat",["assign",true,["dot",["name","this"],"aEndAngle"],["name","aEndAngle"]]],["stat",["assign",true,["dot",["name","this"],"aClockwise"],["name","aClockwise"]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"ArcCurve"],"prototype"],["new",["dot",["name","THREE"],"Curve"],[]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"ArcCurve"],"prototype"],"constructor"],["dot",["name","THREE"],"ArcCurve"]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"ArcCurve"],"prototype"],"getPoint"],["function",null,["t"],[["var",[["deltaAngle",["binary","-",["dot",["name","this"],"aEndAngle"],["dot",["name","this"],"aStartAngle"]]]]],["if",["unary-prefix","!",["dot",["name","this"],"aClockwise"]],["block",[["stat",["assign",true,["name","t"],["binary","-",["num",1],["name","t"]]]]]],null],["var",[["angle",["binary","+",["dot",["name","this"],"aStartAngle"],["binary","*",["name","t"],["name","deltaAngle"]]]]]],["var",[["tx",["binary","+",["dot",["name","this"],"aX"],["binary","*",["dot",["name","this"],"aRadius"],["call",["dot",["name","Math"],"cos"],[["name","angle"]]]]]]]],["var",[["ty",["binary","+",["dot",["name","this"],"aY"],["binary","*",["dot",["name","this"],"aRadius"],["call",["dot",["name","Math"],"sin"],[["name","angle"]]]]]]]],["return",["new",["dot",["name","THREE"],"Vector2"],[["name","tx"],["name","ty"]]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"Curve"],"Utils"],["object",[["tangentQuadraticBezier",["function",null,["t","p0","p1","p2"],[["return",["binary","+",["binary","*",["binary","*",["num",2],["binary","-",["num",1],["name","t"]]],["binary","-",["name","p1"],["name","p0"]]],["binary","*",["binary","*",["num",2],["name","t"]],["binary","-",["name","p2"],["name","p1"]]]]]]]],["tangentCubicBezier",["function",null,["t","p0","p1","p2","p3"],[["return",["binary","+",["binary","-",["binary","+",["binary","-",["binary","+",["binary","*",["binary","*",["binary","*",["unary-prefix","-",["num",3]],["name","p0"]],["binary","-",["num",1],["name","t"]]],["binary","-",["num",1],["name","t"]]],["binary","*",["binary","*",["binary","*",["num",3],["name","p1"]],["binary","-",["num",1],["name","t"]]],["binary","-",["num",1],["name","t"]]]],["binary","*",["binary","*",["binary","*",["num",6],["name","t"]],["name","p1"]],["binary","-",["num",1],["name","t"]]]],["binary","*",["binary","*",["binary","*",["num",6],["name","t"]],["name","p2"]],["binary","-",["num",1],["name","t"]]]],["binary","*",["binary","*",["binary","*",["num",3],["name","t"]],["name","t"]],["name","p2"]]],["binary","*",["binary","*",["binary","*",["num",3],["name","t"]],["name","t"]],["name","p3"]]]]]]],["tangentSpline",["function",null,["t","p0","p1","p2","p3"],[["var",[["h00",["binary","-",["binary","*",["binary","*",["num",6],["name","t"]],["name","t"]],["binary","*",["num",6],["name","t"]]]]]],["var",[["h10",["binary","+",["binary","-",["binary","*",["binary","*",["num",3],["name","t"]],["name","t"]],["binary","*",["num",4],["name","t"]]],["num",1]]]]],["var",[["h01",["binary","+",["binary","*",["binary","*",["unary-prefix","-",["num",6]],["name","t"]],["name","t"]],["binary","*",["num",6],["name","t"]]]]]],["var",[["h11",["binary","-",["binary","*",["binary","*",["num",3],["name","t"]],["name","t"]],["binary","*",["num",2],["name","t"]]]]]],["return",["binary","+",["binary","+",["binary","+",["name","h00"],["name","h10"]],["name","h01"]],["name","h11"]]]]]],["interpolate",["function",null,["p0","p1","p2","p3","t"],[["var",[["v0",["binary","*",["binary","-",["name","p2"],["name","p0"]],["num",0.5]]]]],["var",[["v1",["binary","*",["binary","-",["name","p3"],["name","p1"]],["num",0.5]]]]],["var",[["t2",["binary","*",["name","t"],["name","t"]]]]],["var",[["t3",["binary","*",["name","t"],["name","t2"]]]]],["return",["binary","+",["binary","+",["binary","+",["binary","*",["binary","+",["binary","+",["binary","-",["binary","*",["num",2],["name","p1"]],["binary","*",["num",2],["name","p2"]]],["name","v0"]],["name","v1"]],["name","t3"]],["binary","*",["binary","-",["binary","-",["binary","+",["binary","*",["unary-prefix","-",["num",3]],["name","p1"]],["binary","*",["num",3],["name","p2"]]],["binary","*",["num",2],["name","v0"]]],["name","v1"]],["name","t2"]]],["binary","*",["name","v0"],["name","t"]]],["name","p1"]]]]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"Curve"],"create"],["function",null,["constructor","getPointFunc"],[["var",[["subClass",["name","constructor"]]]],["stat",["assign",true,["dot",["name","subClass"],"prototype"],["new",["dot",["name","THREE"],"Curve"],[]]]],["stat",["assign",true,["dot",["dot",["name","subClass"],"prototype"],"constructor"],["name","constructor"]]],["stat",["assign",true,["dot",["dot",["name","subClass"],"prototype"],"getPoint"],["name","getPointFunc"]]],["return",["name","subClass"]]]]]],["stat",["assign",true,["dot",["name","THREE"],"LineCurve3"],["call",["dot",["dot",["name","THREE"],"Curve"],"create"],[["function",null,["v1","v2"],[["stat",["assign",true,["dot",["name","this"],"v1"],["name","v1"]]],["stat",["assign",true,["dot",["name","this"],"v2"],["name","v2"]]]]],["function",null,["t"],[["var",[["r",["new",["dot",["name","THREE"],"Vector3"],[]]]]],["stat",["call",["dot",["name","r"],"sub"],[["dot",["name","this"],"v2"],["dot",["name","this"],"v1"]]]],["stat",["call",["dot",["name","r"],"multiplyScalar"],[["name","t"]]]],["stat",["call",["dot",["name","r"],"addSelf"],[["dot",["name","this"],"v1"]]]],["return",["name","r"]]]]]]]],["stat",["assign",true,["dot",["name","THREE"],"QuadraticBezierCurve3"],["call",["dot",["dot",["name","THREE"],"Curve"],"create"],[["function",null,["v0","v1","v2"],[["stat",["assign",true,["dot",["name","this"],"v0"],["name","v0"]]],["stat",["assign",true,["dot",["name","this"],"v1"],["name","v1"]]],["stat",["assign",true,["dot",["name","this"],"v2"],["name","v2"]]]]],["function",null,["t"],[["var",[["tx"],["ty"],["tz"]]],["stat",["assign",true,["name","tx"],["call",["dot",["dot",["dot",["name","THREE"],"Shape"],"Utils"],"b2"],[["name","t"],["dot",["dot",["name","this"],"v0"],"x"],["dot",["dot",["name","this"],"v1"],"x"],["dot",["dot",["name","this"],"v2"],"x"]]]]],["stat",["assign",true,["name","ty"],["call",["dot",["dot",["dot",["name","THREE"],"Shape"],"Utils"],"b2"],[["name","t"],["dot",["dot",["name","this"],"v0"],"y"],["dot",["dot",["name","this"],"v1"],"y"],["dot",["dot",["name","this"],"v2"],"y"]]]]],["stat",["assign",true,["name","tz"],["call",["dot",["dot",["dot",["name","THREE"],"Shape"],"Utils"],"b2"],[["name","t"],["dot",["dot",["name","this"],"v0"],"z"],["dot",["dot",["name","this"],"v1"],"z"],["dot",["dot",["name","this"],"v2"],"z"]]]]],["return",["new",["dot",["name","THREE"],"Vector3"],[["name","tx"],["name","ty"],["name","tz"]]]]]]]]]],["stat",["assign",true,["dot",["name","THREE"],"CubicBezierCurve3"],["call",["dot",["dot",["name","THREE"],"Curve"],"create"],[["function",null,["v0","v1","v2","v3"],[["stat",["assign",true,["dot",["name","this"],"v0"],["name","v0"]]],["stat",["assign",true,["dot",["name","this"],"v1"],["name","v1"]]],["stat",["assign",true,["dot",["name","this"],"v2"],["name","v2"]]],["stat",["assign",true,["dot",["name","this"],"v3"],["name","v3"]]]]],["function",null,["t"],[["var",[["tx"],["ty"],["tz"]]],["stat",["assign",true,["name","tx"],["call",["dot",["dot",["dot",["name","THREE"],"Shape"],"Utils"],"b3"],[["name","t"],["dot",["dot",["name","this"],"v0"],"x"],["dot",["dot",["name","this"],"v1"],"x"],["dot",["dot",["name","this"],"v2"],"x"],["dot",["dot",["name","this"],"v3"],"x"]]]]],["stat",["assign",true,["name","ty"],["call",["dot",["dot",["dot",["name","THREE"],"Shape"],"Utils"],"b3"],[["name","t"],["dot",["dot",["name","this"],"v0"],"y"],["dot",["dot",["name","this"],"v1"],"y"],["dot",["dot",["name","this"],"v2"],"y"],["dot",["dot",["name","this"],"v3"],"y"]]]]],["stat",["assign",true,["name","tz"],["call",["dot",["dot",["dot",["name","THREE"],"Shape"],"Utils"],"b3"],[["name","t"],["dot",["dot",["name","this"],"v0"],"z"],["dot",["dot",["name","this"],"v1"],"z"],["dot",["dot",["name","this"],"v2"],"z"],["dot",["dot",["name","this"],"v3"],"z"]]]]],["return",["new",["dot",["name","THREE"],"Vector3"],[["name","tx"],["name","ty"],["name","tz"]]]]]]]]]],["stat",["assign",true,["dot",["name","THREE"],"SplineCurve3"],["call",["dot",["dot",["name","THREE"],"Curve"],"create"],[["function",null,["points"],[["stat",["assign",true,["dot",["name","this"],"points"],["conditional",["binary","==",["name","points"],["name","undefined"]],["array",[]],["name","points"]]]]]],["function",null,["t"],[["var",[["v",["new",["dot",["name","THREE"],"Vector3"],[]]]]],["var",[["c",["array",[]]]]],["var",[["points",["dot",["name","this"],"points"]],["point"],["intPoint"],["weight"]]],["stat",["assign",true,["name","point"],["binary","*",["binary","-",["dot",["name","points"],"length"],["num",1]],["name","t"]]]],["stat",["assign",true,["name","intPoint"],["call",["dot",["name","Math"],"floor"],[["name","point"]]]]],["stat",["assign",true,["name","weight"],["binary","-",["name","point"],["name","intPoint"]]]],["stat",["assign",true,["sub",["name","c"],["num",0]],["conditional",["binary","==",["name","intPoint"],["num",0]],["name","intPoint"],["binary","-",["name","intPoint"],["num",1]]]]],["stat",["assign",true,["sub",["name","c"],["num",1]],["name","intPoint"]]],["stat",["assign",true,["sub",["name","c"],["num",2]],["conditional",["binary",">",["name","intPoint"],["binary","-",["dot",["name","points"],"length"],["num",2]]],["binary","-",["dot",["name","points"],"length"],["num",1]],["binary","+",["name","intPoint"],["num",1]]]]],["stat",["assign",true,["sub",["name","c"],["num",3]],["conditional",["binary",">",["name","intPoint"],["binary","-",["dot",["name","points"],"length"],["num",3]]],["binary","-",["dot",["name","points"],"length"],["num",1]],["binary","+",["name","intPoint"],["num",2]]]]],["var",[["pt0",["sub",["name","points"],["sub",["name","c"],["num",0]]]],["pt1",["sub",["name","points"],["sub",["name","c"],["num",1]]]],["pt2",["sub",["name","points"],["sub",["name","c"],["num",2]]]],["pt3",["sub",["name","points"],["sub",["name","c"],["num",3]]]]]],["stat",["assign",true,["dot",["name","v"],"x"],["call",["dot",["dot",["dot",["name","THREE"],"Curve"],"Utils"],"interpolate"],[["dot",["name","pt0"],"x"],["dot",["name","pt1"],"x"],["dot",["name","pt2"],"x"],["dot",["name","pt3"],"x"],["name","weight"]]]]],["stat",["assign",true,["dot",["name","v"],"y"],["call",["dot",["dot",["dot",["name","THREE"],"Curve"],"Utils"],"interpolate"],[["dot",["name","pt0"],"y"],["dot",["name","pt1"],"y"],["dot",["name","pt2"],"y"],["dot",["name","pt3"],"y"],["name","weight"]]]]],["stat",["assign",true,["dot",["name","v"],"z"],["call",["dot",["dot",["dot",["name","THREE"],"Curve"],"Utils"],"interpolate"],[["dot",["name","pt0"],"z"],["dot",["name","pt1"],"z"],["dot",["name","pt2"],"z"],["dot",["name","pt3"],"z"],["name","weight"]]]]],["return",["name","v"]]]]]]]],["stat",["assign",true,["dot",["name","THREE"],"ClosedSplineCurve3"],["call",["dot",["dot",["name","THREE"],"Curve"],"create"],[["function",null,["points"],[["stat",["assign",true,["dot",["name","this"],"points"],["conditional",["binary","==",["name","points"],["name","undefined"]],["array",[]],["name","points"]]]]]],["function",null,["t"],[["var",[["v",["new",["dot",["name","THREE"],"Vector3"],[]]]]],["var",[["c",["array",[]]]]],["var",[["points",["dot",["name","this"],"points"]],["point"],["intPoint"],["weight"]]],["stat",["assign",true,["name","point"],["binary","*",["binary","-",["dot",["name","points"],"length"],["num",0]],["name","t"]]]],["stat",["assign",true,["name","intPoint"],["call",["dot",["name","Math"],"floor"],[["name","point"]]]]],["stat",["assign",true,["name","weight"],["binary","-",["name","point"],["name","intPoint"]]]],["stat",["assign","+",["name","intPoint"],["conditional",["binary",">",["name","intPoint"],["num",0]],["num",0],["binary","*",["binary","+",["call",["dot",["name","Math"],"floor"],[["binary","/",["call",["dot",["name","Math"],"abs"],[["name","intPoint"]]],["dot",["name","points"],"length"]]]],["num",1]],["dot",["name","points"],"length"]]]]],["stat",["assign",true,["sub",["name","c"],["num",0]],["binary","%",["binary","-",["name","intPoint"],["num",1]],["dot",["name","points"],"length"]]]],["stat",["assign",true,["sub",["name","c"],["num",1]],["binary","%",["name","intPoint"],["dot",["name","points"],"length"]]]],["stat",["assign",true,["sub",["name","c"],["num",2]],["binary","%",["binary","+",["name","intPoint"],["num",1]],["dot",["name","points"],"length"]]]],["stat",["assign",true,["sub",["name","c"],["num",3]],["binary","%",["binary","+",["name","intPoint"],["num",2]],["dot",["name","points"],"length"]]]],["stat",["assign",true,["dot",["name","v"],"x"],["call",["dot",["dot",["dot",["name","THREE"],"Curve"],"Utils"],"interpolate"],[["dot",["sub",["name","points"],["sub",["name","c"],["num",0]]],"x"],["dot",["sub",["name","points"],["sub",["name","c"],["num",1]]],"x"],["dot",["sub",["name","points"],["sub",["name","c"],["num",2]]],"x"],["dot",["sub",["name","points"],["sub",["name","c"],["num",3]]],"x"],["name","weight"]]]]],["stat",["assign",true,["dot",["name","v"],"y"],["call",["dot",["dot",["dot",["name","THREE"],"Curve"],"Utils"],"interpolate"],[["dot",["sub",["name","points"],["sub",["name","c"],["num",0]]],"y"],["dot",["sub",["name","points"],["sub",["name","c"],["num",1]]],"y"],["dot",["sub",["name","points"],["sub",["name","c"],["num",2]]],"y"],["dot",["sub",["name","points"],["sub",["name","c"],["num",3]]],"y"],["name","weight"]]]]],["stat",["assign",true,["dot",["name","v"],"z"],["call",["dot",["dot",["dot",["name","THREE"],"Curve"],"Utils"],"interpolate"],[["dot",["sub",["name","points"],["sub",["name","c"],["num",0]]],"z"],["dot",["sub",["name","points"],["sub",["name","c"],["num",1]]],"z"],["dot",["sub",["name","points"],["sub",["name","c"],["num",2]]],"z"],["dot",["sub",["name","points"],["sub",["name","c"],["num",3]]],"z"],["name","weight"]]]]],["return",["name","v"]]]]]]]],["stat",["assign",true,["dot",["name","THREE"],"CurvePath"],["function",null,[],[["stat",["assign",true,["dot",["name","this"],"curves"],["array",[]]]],["stat",["assign",true,["dot",["name","this"],"bends"],["array",[]]]],["stat",["assign",true,["dot",["name","this"],"autoClose"],["name","false"]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"CurvePath"],"prototype"],["new",["dot",["name","THREE"],"Curve"],[]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"CurvePath"],"prototype"],"constructor"],["dot",["name","THREE"],"CurvePath"]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"CurvePath"],"prototype"],"add"],["function",null,["curve"],[["stat",["call",["dot",["dot",["name","this"],"curves"],"push"],[["name","curve"]]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"CurvePath"],"prototype"],"checkConnection"],["function",null,[],[]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"CurvePath"],"prototype"],"closePath"],["function",null,[],[["var",[["startPoint",["call",["dot",["sub",["dot",["name","this"],"curves"],["num",0]],"getPoint"],[["num",0]]]]]],["var",[["endPoint",["call",["dot",["sub",["dot",["name","this"],"curves"],["binary","-",["dot",["dot",["name","this"],"curves"],"length"],["num",1]]],"getPoint"],[["num",1]]]]]],["if",["unary-prefix","!",["call",["dot",["name","startPoint"],"equals"],[["name","endPoint"]]]],["block",[["stat",["call",["dot",["dot",["name","this"],"curves"],"push"],[["new",["dot",["name","THREE"],"LineCurve"],[["name","endPoint"],["name","startPoint"]]]]]]]],null]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"CurvePath"],"prototype"],"getPoint"],["function",null,["t"],[["var",[["d",["binary","*",["name","t"],["call",["dot",["name","this"],"getLength"],[]]]]]],["var",[["curveLengths",["call",["dot",["name","this"],"getCurveLengths"],[]]]]],["var",[["i",["num",0]],["diff"],["curve"]]],["while",["binary","<",["name","i"],["dot",["name","curveLengths"],"length"]],["block",[["if",["binary",">=",["sub",["name","curveLengths"],["name","i"]],["name","d"]],["block",[["stat",["assign",true,["name","diff"],["binary","-",["sub",["name","curveLengths"],["name","i"]],["name","d"]]]],["stat",["assign",true,["name","curve"],["sub",["dot",["name","this"],"curves"],["name","i"]]]],["var",[["u",["binary","-",["num",1],["binary","/",["name","diff"],["call",["dot",["name","curve"],"getLength"],[]]]]]]],["return",["call",["dot",["name","curve"],"getPointAt"],[["name","u"]]]],["break",null]]],null],["stat",["unary-postfix","++",["name","i"]]]]]],["return",["name","null"]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"CurvePath"],"prototype"],"getLength"],["function",null,[],[["var",[["lens",["call",["dot",["name","this"],"getCurveLengths"],[]]]]],["return",["sub",["name","lens"],["binary","-",["dot",["name","lens"],"length"],["num",1]]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"CurvePath"],"prototype"],"getCurveLengths"],["function",null,[],[["if",["binary","&&",["dot",["name","this"],"cacheLengths"],["binary","==",["dot",["dot",["name","this"],"cacheLengths"],"length"],["dot",["dot",["name","this"],"curves"],"length"]]],["block",[["return",["dot",["name","this"],"cacheLengths"]]]],null],["block"],["var",[["lengths",["array",[]]],["sums",["num",0]]]],["var",[["i"],["il",["dot",["dot",["name","this"],"curves"],"length"]]]],["for",["assign",true,["name","i"],["num",0]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign","+",["name","sums"],["call",["dot",["sub",["dot",["name","this"],"curves"],["name","i"]],"getLength"],[]]]],["stat",["call",["dot",["name","lengths"],"push"],[["name","sums"]]]]]]],["stat",["assign",true,["dot",["name","this"],"cacheLengths"],["name","lengths"]]],["return",["name","lengths"]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"CurvePath"],"prototype"],"getBoundingBox"],["function",null,[],[["var",[["points",["call",["dot",["name","this"],"getPoints"],[]]]]],["var",[["maxX"],["maxY"]]],["var",[["minX"],["minY"]]],["stat",["assign",true,["name","maxX"],["assign",true,["name","maxY"],["dot",["name","Number"],"NEGATIVE_INFINITY"]]]],["stat",["assign",true,["name","minX"],["assign",true,["name","minY"],["dot",["name","Number"],"POSITIVE_INFINITY"]]]],["var",[["p"],["i"],["il"],["sum"]]],["stat",["assign",true,["name","sum"],["new",["dot",["name","THREE"],"Vector2"],[]]]],["for",["seq",["assign",true,["name","i"],["num",0]],["assign",true,["name","il"],["dot",["name","points"],"length"]]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","p"],["sub",["name","points"],["name","i"]]]],["if",["binary",">",["dot",["name","p"],"x"],["name","maxX"]],["stat",["assign",true,["name","maxX"],["dot",["name","p"],"x"]]],["if",["binary","<",["dot",["name","p"],"x"],["name","minX"]],["stat",["assign",true,["name","minX"],["dot",["name","p"],"x"]]],null]],["if",["binary",">",["dot",["name","p"],"y"],["name","maxY"]],["stat",["assign",true,["name","maxY"],["dot",["name","p"],"y"]]],["if",["binary","<",["dot",["name","p"],"y"],["name","maxY"]],["stat",["assign",true,["name","minY"],["dot",["name","p"],"y"]]],null]],["stat",["call",["dot",["name","sum"],"addSelf"],[["dot",["name","p"],"x"],["dot",["name","p"],"y"]]]]]]],["return",["object",[["minX",["name","minX"]],["minY",["name","minY"]],["maxX",["name","maxX"]],["maxY",["name","maxY"]],["centroid",["call",["dot",["name","sum"],"divideScalar"],[["name","il"]]]]]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"CurvePath"],"prototype"],"createPointsGeometry"],["function",null,["divisions"],[["var",[["pts",["call",["dot",["name","this"],"getPoints"],[["name","divisions"],["name","true"]]]]]],["return",["call",["dot",["name","this"],"createGeometry"],[["name","pts"]]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"CurvePath"],"prototype"],"createSpacedPointsGeometry"],["function",null,["divisions"],[["var",[["pts",["call",["dot",["name","this"],"getSpacedPoints"],[["name","divisions"],["name","true"]]]]]],["return",["call",["dot",["name","this"],"createGeometry"],[["name","pts"]]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"CurvePath"],"prototype"],"createGeometry"],["function",null,["points"],[["var",[["geometry",["new",["dot",["name","THREE"],"Geometry"],[]]]]],["for",["var",[["i",["num",0]]]],["binary","<",["name","i"],["dot",["name","points"],"length"]],["unary-postfix","++",["name","i"]],["block",[["stat",["call",["dot",["dot",["name","geometry"],"vertices"],"push"],[["new",["dot",["name","THREE"],"Vector3"],[["dot",["sub",["name","points"],["name","i"]],"x"],["dot",["sub",["name","points"],["name","i"]],"y"],["num",0]]]]]]]]],["return",["name","geometry"]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"CurvePath"],"prototype"],"addWrapPath"],["function",null,["bendpath"],[["stat",["call",["dot",["dot",["name","this"],"bends"],"push"],[["name","bendpath"]]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"CurvePath"],"prototype"],"getTransformedPoints"],["function",null,["segments","bends"],[["var",[["oldPts",["call",["dot",["name","this"],"getPoints"],[["name","segments"]]]]]],["var",[["i"],["il"]]],["if",["unary-prefix","!",["name","bends"]],["block",[["stat",["assign",true,["name","bends"],["dot",["name","this"],"bends"]]]]],null],["for",["seq",["assign",true,["name","i"],["num",0]],["assign",true,["name","il"],["dot",["name","bends"],"length"]]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","oldPts"],["call",["dot",["name","this"],"getWrapPoints"],[["name","oldPts"],["sub",["name","bends"],["name","i"]]]]]]]]],["return",["name","oldPts"]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"CurvePath"],"prototype"],"getTransformedSpacedPoints"],["function",null,["segments","bends"],[["var",[["oldPts",["call",["dot",["name","this"],"getSpacedPoints"],[["name","segments"]]]]]],["var",[["i"],["il"]]],["if",["unary-prefix","!",["name","bends"]],["block",[["stat",["assign",true,["name","bends"],["dot",["name","this"],"bends"]]]]],null],["for",["seq",["assign",true,["name","i"],["num",0]],["assign",true,["name","il"],["dot",["name","bends"],"length"]]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","oldPts"],["call",["dot",["name","this"],"getWrapPoints"],[["name","oldPts"],["sub",["name","bends"],["name","i"]]]]]]]]],["return",["name","oldPts"]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"CurvePath"],"prototype"],"getWrapPoints"],["function",null,["oldPts","path"],[["var",[["bounds",["call",["dot",["name","this"],"getBoundingBox"],[]]]]],["var",[["i"],["il"],["p"],["oldX"],["oldY"],["xNorm"]]],["for",["seq",["assign",true,["name","i"],["num",0]],["assign",true,["name","il"],["dot",["name","oldPts"],"length"]]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","p"],["sub",["name","oldPts"],["name","i"]]]],["stat",["assign",true,["name","oldX"],["dot",["name","p"],"x"]]],["stat",["assign",true,["name","oldY"],["dot",["name","p"],"y"]]],["stat",["assign",true,["name","xNorm"],["binary","/",["name","oldX"],["dot",["name","bounds"],"maxX"]]]],["stat",["assign",true,["name","xNorm"],["call",["dot",["name","path"],"getUtoTmapping"],[["name","xNorm"],["name","oldX"]]]]],["var",[["pathPt",["call",["dot",["name","path"],"getPoint"],[["name","xNorm"]]]]]],["var",[["normal",["call",["dot",["call",["dot",["name","path"],"getNormalVector"],[["name","xNorm"]]],"multiplyScalar"],[["name","oldY"]]]]]],["stat",["assign",true,["dot",["name","p"],"x"],["binary","+",["dot",["name","pathPt"],"x"],["dot",["name","normal"],"x"]]]],["stat",["assign",true,["dot",["name","p"],"y"],["binary","+",["dot",["name","pathPt"],"y"],["dot",["name","normal"],"y"]]]]]]],["return",["name","oldPts"]]]]]],["stat",["assign",true,["dot",["name","THREE"],"EventTarget"],["function",null,[],[["var",[["listeners",["object",[]]]]],["stat",["assign",true,["dot",["name","this"],"addEventListener"],["function",null,["type","listener"],[["if",["binary","==",["sub",["name","listeners"],["name","type"]],["name","undefined"]],["block",[["stat",["assign",true,["sub",["name","listeners"],["name","type"]],["array",[]]]]]],null],["if",["binary","===",["call",["dot",["sub",["name","listeners"],["name","type"]],"indexOf"],[["name","listener"]]],["unary-prefix","-",["num",1]]],["block",[["stat",["call",["dot",["sub",["name","listeners"],["name","type"]],"push"],[["name","listener"]]]]]],null]]]]],["stat",["assign",true,["dot",["name","this"],"dispatchEvent"],["function",null,["event"],[["for-in",["var",[["listener"]]],["name",["listener"]],["sub",["name","listeners"],["dot",["name","event"],"type"]],["block",[["stat",["call",["sub",["sub",["name","listeners"],["dot",["name","event"],"type"]],["name","listener"]],[["name","event"]]]]]]]]]]],["stat",["assign",true,["dot",["name","this"],"removeEventListener"],["function",null,["type","listener"],[["var",[["index",["call",["dot",["sub",["name","listeners"],["name","type"]],"indexOf"],[["name","listener"]]]]]],["if",["binary","!==",["name","index"],["unary-prefix","-",["num",1]]],["block",[["stat",["call",["dot",["sub",["name","listeners"],["name","type"]],"splice"],[["name","index"],["num",1]]]]]],null]]]]]]]]],["stat",["assign",true,["dot",["name","THREE"],"Gyroscope"],["function",null,[],[["stat",["call",["dot",["dot",["name","THREE"],"Object3D"],"call"],[["name","this"]]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"Gyroscope"],"prototype"],["new",["dot",["name","THREE"],"Object3D"],[]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"Gyroscope"],"prototype"],"constructor"],["dot",["name","THREE"],"Gyroscope"]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"Gyroscope"],"prototype"],"updateMatrixWorld"],["function",null,["force"],[["stat",["binary","&&",["dot",["name","this"],"matrixAutoUpdate"],["call",["dot",["name","this"],"updateMatrix"],[]]]],["if",["binary","||",["dot",["name","this"],"matrixWorldNeedsUpdate"],["name","force"]],["block",[["if",["dot",["name","this"],"parent"],["block",[["stat",["call",["dot",["dot",["name","this"],"matrixWorld"],"multiply"],[["dot",["dot",["name","this"],"parent"],"matrixWorld"],["dot",["name","this"],"matrix"]]]],["stat",["call",["dot",["dot",["name","this"],"matrixWorld"],"decompose"],[["dot",["name","this"],"translationWorld"],["dot",["name","this"],"rotationWorld"],["dot",["name","this"],"scaleWorld"]]]],["stat",["call",["dot",["dot",["name","this"],"matrix"],"decompose"],[["dot",["name","this"],"translationObject"],["dot",["name","this"],"rotationObject"],["dot",["name","this"],"scaleObject"]]]],["stat",["call",["dot",["dot",["name","this"],"matrixWorld"],"compose"],[["dot",["name","this"],"translationWorld"],["dot",["name","this"],"rotationObject"],["dot",["name","this"],"scaleWorld"]]]]]],["block",[["stat",["call",["dot",["dot",["name","this"],"matrixWorld"],"copy"],[["dot",["name","this"],"matrix"]]]]]]],["stat",["assign",true,["dot",["name","this"],"matrixWorldNeedsUpdate"],["name","false"]]],["stat",["assign",true,["name","force"],["name","true"]]]]],null],["for",["var",[["i",["num",0]],["l",["dot",["dot",["name","this"],"children"],"length"]]]],["binary","<",["name","i"],["name","l"]],["unary-postfix","++",["name","i"]],["block",[["stat",["call",["dot",["sub",["dot",["name","this"],"children"],["name","i"]],"updateMatrixWorld"],[["name","force"]]]]]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"Gyroscope"],"prototype"],"translationWorld"],["new",["dot",["name","THREE"],"Vector3"],[]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"Gyroscope"],"prototype"],"translationObject"],["new",["dot",["name","THREE"],"Vector3"],[]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"Gyroscope"],"prototype"],"rotationWorld"],["new",["dot",["name","THREE"],"Quaternion"],[]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"Gyroscope"],"prototype"],"rotationObject"],["new",["dot",["name","THREE"],"Quaternion"],[]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"Gyroscope"],"prototype"],"scaleWorld"],["new",["dot",["name","THREE"],"Vector3"],[]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"Gyroscope"],"prototype"],"scaleObject"],["new",["dot",["name","THREE"],"Vector3"],[]]]],["stat",["assign",true,["dot",["name","THREE"],"Path"],["function",null,["points"],[["stat",["call",["dot",["dot",["name","THREE"],"CurvePath"],"call"],[["name","this"]]]],["stat",["assign",true,["dot",["name","this"],"actions"],["array",[]]]],["if",["name","points"],["block",[["stat",["call",["dot",["name","this"],"fromPoints"],[["name","points"]]]]]],null]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"Path"],"prototype"],["new",["dot",["name","THREE"],"CurvePath"],[]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"Path"],"prototype"],"constructor"],["dot",["name","THREE"],"Path"]]],["stat",["assign",true,["dot",["name","THREE"],"PathActions"],["object",[["MOVE_TO",["string","moveTo"]],["LINE_TO",["string","lineTo"]],["QUADRATIC_CURVE_TO",["string","quadraticCurveTo"]],["BEZIER_CURVE_TO",["string","bezierCurveTo"]],["CSPLINE_THRU",["string","splineThru"]],["ARC",["string","arc"]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"Path"],"prototype"],"fromPoints"],["function",null,["vectors"],[["stat",["call",["dot",["name","this"],"moveTo"],[["dot",["sub",["name","vectors"],["num",0]],"x"],["dot",["sub",["name","vectors"],["num",0]],"y"]]]],["for",["var",[["v",["num",1]],["vlen",["dot",["name","vectors"],"length"]]]],["binary","<",["name","v"],["name","vlen"]],["unary-postfix","++",["name","v"]],["block",[["stat",["call",["dot",["name","this"],"lineTo"],[["dot",["sub",["name","vectors"],["name","v"]],"x"],["dot",["sub",["name","vectors"],["name","v"]],"y"]]]]]]],["block"]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"Path"],"prototype"],"moveTo"],["function",null,["x","y"],[["var",[["args",["call",["dot",["dot",["dot",["name","Array"],"prototype"],"slice"],"call"],[["name","arguments"]]]]]],["stat",["call",["dot",["dot",["name","this"],"actions"],"push"],[["object",[["action",["dot",["dot",["name","THREE"],"PathActions"],"MOVE_TO"]],["args",["name","args"]]]]]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"Path"],"prototype"],"lineTo"],["function",null,["x","y"],[["var",[["args",["call",["dot",["dot",["dot",["name","Array"],"prototype"],"slice"],"call"],[["name","arguments"]]]]]],["var",[["lastargs",["dot",["sub",["dot",["name","this"],"actions"],["binary","-",["dot",["dot",["name","this"],"actions"],"length"],["num",1]]],"args"]]]],["var",[["x0",["sub",["name","lastargs"],["binary","-",["dot",["name","lastargs"],"length"],["num",2]]]]]],["var",[["y0",["sub",["name","lastargs"],["binary","-",["dot",["name","lastargs"],"length"],["num",1]]]]]],["var",[["curve",["new",["dot",["name","THREE"],"LineCurve"],[["new",["dot",["name","THREE"],"Vector2"],[["name","x0"],["name","y0"]]],["new",["dot",["name","THREE"],"Vector2"],[["name","x"],["name","y"]]]]]]]],["stat",["call",["dot",["dot",["name","this"],"curves"],"push"],[["name","curve"]]]],["stat",["call",["dot",["dot",["name","this"],"actions"],"push"],[["object",[["action",["dot",["dot",["name","THREE"],"PathActions"],"LINE_TO"]],["args",["name","args"]]]]]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"Path"],"prototype"],"quadraticCurveTo"],["function",null,["aCPx","aCPy","aX","aY"],[["var",[["args",["call",["dot",["dot",["dot",["name","Array"],"prototype"],"slice"],"call"],[["name","arguments"]]]]]],["var",[["lastargs",["dot",["sub",["dot",["name","this"],"actions"],["binary","-",["dot",["dot",["name","this"],"actions"],"length"],["num",1]]],"args"]]]],["var",[["x0",["sub",["name","lastargs"],["binary","-",["dot",["name","lastargs"],"length"],["num",2]]]]]],["var",[["y0",["sub",["name","lastargs"],["binary","-",["dot",["name","lastargs"],"length"],["num",1]]]]]],["var",[["curve",["new",["dot",["name","THREE"],"QuadraticBezierCurve"],[["new",["dot",["name","THREE"],"Vector2"],[["name","x0"],["name","y0"]]],["new",["dot",["name","THREE"],"Vector2"],[["name","aCPx"],["name","aCPy"]]],["new",["dot",["name","THREE"],"Vector2"],[["name","aX"],["name","aY"]]]]]]]],["stat",["call",["dot",["dot",["name","this"],"curves"],"push"],[["name","curve"]]]],["stat",["call",["dot",["dot",["name","this"],"actions"],"push"],[["object",[["action",["dot",["dot",["name","THREE"],"PathActions"],"QUADRATIC_CURVE_TO"]],["args",["name","args"]]]]]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"Path"],"prototype"],"bezierCurveTo"],["function",null,["aCP1x","aCP1y","aCP2x","aCP2y","aX","aY"],[["var",[["args",["call",["dot",["dot",["dot",["name","Array"],"prototype"],"slice"],"call"],[["name","arguments"]]]]]],["var",[["lastargs",["dot",["sub",["dot",["name","this"],"actions"],["binary","-",["dot",["dot",["name","this"],"actions"],"length"],["num",1]]],"args"]]]],["var",[["x0",["sub",["name","lastargs"],["binary","-",["dot",["name","lastargs"],"length"],["num",2]]]]]],["var",[["y0",["sub",["name","lastargs"],["binary","-",["dot",["name","lastargs"],"length"],["num",1]]]]]],["var",[["curve",["new",["dot",["name","THREE"],"CubicBezierCurve"],[["new",["dot",["name","THREE"],"Vector2"],[["name","x0"],["name","y0"]]],["new",["dot",["name","THREE"],"Vector2"],[["name","aCP1x"],["name","aCP1y"]]],["new",["dot",["name","THREE"],"Vector2"],[["name","aCP2x"],["name","aCP2y"]]],["new",["dot",["name","THREE"],"Vector2"],[["name","aX"],["name","aY"]]]]]]]],["stat",["call",["dot",["dot",["name","this"],"curves"],"push"],[["name","curve"]]]],["stat",["call",["dot",["dot",["name","this"],"actions"],"push"],[["object",[["action",["dot",["dot",["name","THREE"],"PathActions"],"BEZIER_CURVE_TO"]],["args",["name","args"]]]]]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"Path"],"prototype"],"splineThru"],["function",null,["pts"],[["var",[["args",["call",["dot",["dot",["dot",["name","Array"],"prototype"],"slice"],"call"],[["name","arguments"]]]]]],["var",[["lastargs",["dot",["sub",["dot",["name","this"],"actions"],["binary","-",["dot",["dot",["name","this"],"actions"],"length"],["num",1]]],"args"]]]],["var",[["x0",["sub",["name","lastargs"],["binary","-",["dot",["name","lastargs"],"length"],["num",2]]]]]],["var",[["y0",["sub",["name","lastargs"],["binary","-",["dot",["name","lastargs"],"length"],["num",1]]]]]],["var",[["npts",["array",[["new",["dot",["name","THREE"],"Vector2"],[["name","x0"],["name","y0"]]]]]]]],["stat",["call",["dot",["dot",["dot",["name","Array"],"prototype"],"push"],"apply"],[["name","npts"],["name","pts"]]]],["var",[["curve",["new",["dot",["name","THREE"],"SplineCurve"],[["name","npts"]]]]]],["stat",["call",["dot",["dot",["name","this"],"curves"],"push"],[["name","curve"]]]],["stat",["call",["dot",["dot",["name","this"],"actions"],"push"],[["object",[["action",["dot",["dot",["name","THREE"],"PathActions"],"CSPLINE_THRU"]],["args",["name","args"]]]]]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"Path"],"prototype"],"arc"],["function",null,["aX","aY","aRadius","aStartAngle","aEndAngle","aClockwise"],[["var",[["args",["call",["dot",["dot",["dot",["name","Array"],"prototype"],"slice"],"call"],[["name","arguments"]]]]]],["var",[["laste",["sub",["dot",["name","this"],"actions"],["binary","-",["dot",["dot",["name","this"],"actions"],"length"],["num",1]]]]]],["var",[["curve",["new",["dot",["name","THREE"],"ArcCurve"],[["binary","+",["dot",["name","laste"],"x"],["name","aX"]],["binary","+",["dot",["name","laste"],"y"],["name","aY"]],["name","aRadius"],["name","aStartAngle"],["name","aEndAngle"],["name","aClockwise"]]]]]],["stat",["call",["dot",["dot",["name","this"],"curves"],"push"],[["name","curve"]]]],["var",[["lastPoint",["call",["dot",["name","curve"],"getPoint"],[["conditional",["name","aClockwise"],["num",1],["num",0]]]]]]],["stat",["call",["dot",["name","args"],"push"],[["dot",["name","lastPoint"],"x"]]]],["stat",["call",["dot",["name","args"],"push"],[["dot",["name","lastPoint"],"y"]]]],["stat",["call",["dot",["dot",["name","this"],"actions"],"push"],[["object",[["action",["dot",["dot",["name","THREE"],"PathActions"],"ARC"]],["args",["name","args"]]]]]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"Path"],"prototype"],"absarc"],["function",null,["aX","aY","aRadius","aStartAngle","aEndAngle","aClockwise"],[["var",[["args",["call",["dot",["dot",["dot",["name","Array"],"prototype"],"slice"],"call"],[["name","arguments"]]]]]],["var",[["curve",["new",["dot",["name","THREE"],"ArcCurve"],[["name","aX"],["name","aY"],["name","aRadius"],["name","aStartAngle"],["name","aEndAngle"],["name","aClockwise"]]]]]],["stat",["call",["dot",["dot",["name","this"],"curves"],"push"],[["name","curve"]]]],["var",[["lastPoint",["call",["dot",["name","curve"],"getPoint"],[["conditional",["name","aClockwise"],["num",1],["num",0]]]]]]],["stat",["call",["dot",["name","args"],"push"],[["dot",["name","lastPoint"],"x"]]]],["stat",["call",["dot",["name","args"],"push"],[["dot",["name","lastPoint"],"y"]]]],["stat",["call",["dot",["dot",["name","this"],"actions"],"push"],[["object",[["action",["dot",["dot",["name","THREE"],"PathActions"],"ARC"]],["args",["name","args"]]]]]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"Path"],"prototype"],"getSpacedPoints"],["function",null,["divisions","closedPath"],[["if",["unary-prefix","!",["name","divisions"]],["stat",["assign",true,["name","divisions"],["num",40]]],null],["var",[["points",["array",[]]]]],["for",["var",[["i",["num",0]]]],["binary","<",["name","i"],["name","divisions"]],["unary-postfix","++",["name","i"]],["block",[["stat",["call",["dot",["name","points"],"push"],[["call",["dot",["name","this"],"getPoint"],[["binary","/",["name","i"],["name","divisions"]]]]]]]]]],["return",["name","points"]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"Path"],"prototype"],"getPoints"],["function",null,["divisions","closedPath"],[["if",["dot",["name","this"],"useSpacedPoints"],["block",[["stat",["call",["dot",["name","console"],"log"],[["string","tata"]]]],["return",["call",["dot",["name","this"],"getSpacedPoints"],[["name","divisions"],["name","closedPath"]]]]]],null],["stat",["assign",true,["name","divisions"],["binary","||",["name","divisions"],["num",12]]]],["var",[["points",["array",[]]]]],["var",[["i"],["il"],["item"],["action"],["args"]]],["var",[["cpx"],["cpy"],["cpx2"],["cpy2"],["cpx1"],["cpy1"],["cpx0"],["cpy0"],["laste"],["j"],["t"],["tx"],["ty"]]],["for",["seq",["assign",true,["name","i"],["num",0]],["assign",true,["name","il"],["dot",["dot",["name","this"],"actions"],"length"]]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","item"],["sub",["dot",["name","this"],"actions"],["name","i"]]]],["stat",["assign",true,["name","action"],["dot",["name","item"],"action"]]],["stat",["assign",true,["name","args"],["dot",["name","item"],"args"]]],["switch",["name","action"],[[["dot",["dot",["name","THREE"],"PathActions"],"MOVE_TO"],[["stat",["call",["dot",["name","points"],"push"],[["new",["dot",["name","THREE"],"Vector2"],[["sub",["name","args"],["num",0]],["sub",["name","args"],["num",1]]]]]]],["break",null]]],[["dot",["dot",["name","THREE"],"PathActions"],"LINE_TO"],[["stat",["call",["dot",["name","points"],"push"],[["new",["dot",["name","THREE"],"Vector2"],[["sub",["name","args"],["num",0]],["sub",["name","args"],["num",1]]]]]]],["break",null]]],[["dot",["dot",["name","THREE"],"PathActions"],"QUADRATIC_CURVE_TO"],[["stat",["assign",true,["name","cpx"],["sub",["name","args"],["num",2]]]],["stat",["assign",true,["name","cpy"],["sub",["name","args"],["num",3]]]],["stat",["assign",true,["name","cpx1"],["sub",["name","args"],["num",0]]]],["stat",["assign",true,["name","cpy1"],["sub",["name","args"],["num",1]]]],["if",["binary",">",["dot",["name","points"],"length"],["num",0]],["block",[["stat",["assign",true,["name","laste"],["sub",["name","points"],["binary","-",["dot",["name","points"],"length"],["num",1]]]]],["stat",["assign",true,["name","cpx0"],["dot",["name","laste"],"x"]]],["stat",["assign",true,["name","cpy0"],["dot",["name","laste"],"y"]]]]],["block",[["stat",["assign",true,["name","laste"],["dot",["sub",["dot",["name","this"],"actions"],["binary","-",["name","i"],["num",1]]],"args"]]],["stat",["assign",true,["name","cpx0"],["sub",["name","laste"],["binary","-",["dot",["name","laste"],"length"],["num",2]]]]],["stat",["assign",true,["name","cpy0"],["sub",["name","laste"],["binary","-",["dot",["name","laste"],"length"],["num",1]]]]]]]],["for",["assign",true,["name","j"],["num",1]],["binary","<=",["name","j"],["name","divisions"]],["unary-postfix","++",["name","j"]],["block",[["stat",["assign",true,["name","t"],["binary","/",["name","j"],["name","divisions"]]]],["stat",["assign",true,["name","tx"],["call",["dot",["dot",["dot",["name","THREE"],"Shape"],"Utils"],"b2"],[["name","t"],["name","cpx0"],["name","cpx1"],["name","cpx"]]]]],["stat",["assign",true,["name","ty"],["call",["dot",["dot",["dot",["name","THREE"],"Shape"],"Utils"],"b2"],[["name","t"],["name","cpy0"],["name","cpy1"],["name","cpy"]]]]],["stat",["call",["dot",["name","points"],"push"],[["new",["dot",["name","THREE"],"Vector2"],[["name","tx"],["name","ty"]]]]]]]]],["break",null]]],[["dot",["dot",["name","THREE"],"PathActions"],"BEZIER_CURVE_TO"],[["stat",["assign",true,["name","cpx"],["sub",["name","args"],["num",4]]]],["stat",["assign",true,["name","cpy"],["sub",["name","args"],["num",5]]]],["stat",["assign",true,["name","cpx1"],["sub",["name","args"],["num",0]]]],["stat",["assign",true,["name","cpy1"],["sub",["name","args"],["num",1]]]],["stat",["assign",true,["name","cpx2"],["sub",["name","args"],["num",2]]]],["stat",["assign",true,["name","cpy2"],["sub",["name","args"],["num",3]]]],["if",["binary",">",["dot",["name","points"],"length"],["num",0]],["block",[["stat",["assign",true,["name","laste"],["sub",["name","points"],["binary","-",["dot",["name","points"],"length"],["num",1]]]]],["stat",["assign",true,["name","cpx0"],["dot",["name","laste"],"x"]]],["stat",["assign",true,["name","cpy0"],["dot",["name","laste"],"y"]]]]],["block",[["stat",["assign",true,["name","laste"],["dot",["sub",["dot",["name","this"],"actions"],["binary","-",["name","i"],["num",1]]],"args"]]],["stat",["assign",true,["name","cpx0"],["sub",["name","laste"],["binary","-",["dot",["name","laste"],"length"],["num",2]]]]],["stat",["assign",true,["name","cpy0"],["sub",["name","laste"],["binary","-",["dot",["name","laste"],"length"],["num",1]]]]]]]],["for",["assign",true,["name","j"],["num",1]],["binary","<=",["name","j"],["name","divisions"]],["unary-postfix","++",["name","j"]],["block",[["stat",["assign",true,["name","t"],["binary","/",["name","j"],["name","divisions"]]]],["stat",["assign",true,["name","tx"],["call",["dot",["dot",["dot",["name","THREE"],"Shape"],"Utils"],"b3"],[["name","t"],["name","cpx0"],["name","cpx1"],["name","cpx2"],["name","cpx"]]]]],["stat",["assign",true,["name","ty"],["call",["dot",["dot",["dot",["name","THREE"],"Shape"],"Utils"],"b3"],[["name","t"],["name","cpy0"],["name","cpy1"],["name","cpy2"],["name","cpy"]]]]],["stat",["call",["dot",["name","points"],"push"],[["new",["dot",["name","THREE"],"Vector2"],[["name","tx"],["name","ty"]]]]]]]]],["break",null]]],[["dot",["dot",["name","THREE"],"PathActions"],"CSPLINE_THRU"],[["stat",["assign",true,["name","laste"],["dot",["sub",["dot",["name","this"],"actions"],["binary","-",["name","i"],["num",1]]],"args"]]],["var",[["last",["new",["dot",["name","THREE"],"Vector2"],[["sub",["name","laste"],["binary","-",["dot",["name","laste"],"length"],["num",2]]],["sub",["name","laste"],["binary","-",["dot",["name","laste"],"length"],["num",1]]]]]]]],["var",[["spts",["array",[["name","last"]]]]]],["var",[["n",["binary","*",["name","divisions"],["dot",["sub",["name","args"],["num",0]],"length"]]]]],["stat",["assign",true,["name","spts"],["call",["dot",["name","spts"],"concat"],[["sub",["name","args"],["num",0]]]]]],["var",[["spline",["new",["dot",["name","THREE"],"SplineCurve"],[["name","spts"]]]]]],["for",["assign",true,["name","j"],["num",1]],["binary","<=",["name","j"],["name","n"]],["unary-postfix","++",["name","j"]],["block",[["stat",["call",["dot",["name","points"],"push"],[["call",["dot",["name","spline"],"getPointAt"],[["binary","/",["name","j"],["name","n"]]]]]]]]]],["break",null]]],[["dot",["dot",["name","THREE"],"PathActions"],"ARC"],[["stat",["assign",true,["name","laste"],["dot",["sub",["dot",["name","this"],"actions"],["binary","-",["name","i"],["num",1]]],"args"]]],["var",[["aX",["sub",["name","args"],["num",0]]],["aY",["sub",["name","args"],["num",1]]],["aRadius",["sub",["name","args"],["num",2]]],["aStartAngle",["sub",["name","args"],["num",3]]],["aEndAngle",["sub",["name","args"],["num",4]]],["aClockwise",["unary-prefix","!",["unary-prefix","!",["sub",["name","args"],["num",5]]]]]]],["var",[["deltaAngle",["binary","-",["name","aEndAngle"],["name","aStartAngle"]]]]],["var",[["angle"]]],["var",[["tdivisions",["binary","*",["name","divisions"],["num",2]]]]],["for",["assign",true,["name","j"],["num",1]],["binary","<=",["name","j"],["name","tdivisions"]],["unary-postfix","++",["name","j"]],["block",[["stat",["assign",true,["name","t"],["binary","/",["name","j"],["name","tdivisions"]]]],["if",["unary-prefix","!",["name","aClockwise"]],["block",[["stat",["assign",true,["name","t"],["binary","-",["num",1],["name","t"]]]]]],null],["stat",["assign",true,["name","angle"],["binary","+",["name","aStartAngle"],["binary","*",["name","t"],["name","deltaAngle"]]]]],["stat",["assign",true,["name","tx"],["binary","+",["name","aX"],["binary","*",["name","aRadius"],["call",["dot",["name","Math"],"cos"],[["name","angle"]]]]]]],["stat",["assign",true,["name","ty"],["binary","+",["name","aY"],["binary","*",["name","aRadius"],["call",["dot",["name","Math"],"sin"],[["name","angle"]]]]]]],["stat",["call",["dot",["name","points"],"push"],[["new",["dot",["name","THREE"],"Vector2"],[["name","tx"],["name","ty"]]]]]]]]],["break",null]]]]]]]],["var",[["lastPoint",["sub",["name","points"],["binary","-",["dot",["name","points"],"length"],["num",1]]]]]],["var",[["EPSILON",["num",1e-10]]]],["if",["binary","&&",["binary","<",["call",["dot",["name","Math"],"abs"],[["binary","-",["dot",["name","lastPoint"],"x"],["dot",["sub",["name","points"],["num",0]],"x"]]]],["name","EPSILON"]],["binary","<",["call",["dot",["name","Math"],"abs"],[["binary","-",["dot",["name","lastPoint"],"y"],["dot",["sub",["name","points"],["num",0]],"y"]]]],["name","EPSILON"]]],["stat",["call",["dot",["name","points"],"splice"],[["binary","-",["dot",["name","points"],"length"],["num",1]],["num",1]]]],null],["if",["name","closedPath"],["block",[["stat",["call",["dot",["name","points"],"push"],[["sub",["name","points"],["num",0]]]]]]],null],["return",["name","points"]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"Path"],"prototype"],"transform"],["function",null,["path","segments"],[["var",[["bounds",["call",["dot",["name","this"],"getBoundingBox"],[]]]]],["var",[["oldPts",["call",["dot",["name","this"],"getPoints"],[["name","segments"]]]]]],["return",["call",["dot",["name","this"],"getWrapPoints"],[["name","oldPts"],["name","path"]]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"Path"],"prototype"],"nltransform"],["function",null,["a","b","c","d","e","f"],[["var",[["oldPts",["call",["dot",["name","this"],"getPoints"],[]]]]],["var",[["i"],["il"],["p"],["oldX"],["oldY"]]],["for",["seq",["assign",true,["name","i"],["num",0]],["assign",true,["name","il"],["dot",["name","oldPts"],"length"]]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","p"],["sub",["name","oldPts"],["name","i"]]]],["stat",["assign",true,["name","oldX"],["dot",["name","p"],"x"]]],["stat",["assign",true,["name","oldY"],["dot",["name","p"],"y"]]],["stat",["assign",true,["dot",["name","p"],"x"],["binary","+",["binary","+",["binary","*",["name","a"],["name","oldX"]],["binary","*",["name","b"],["name","oldY"]]],["name","c"]]]],["stat",["assign",true,["dot",["name","p"],"y"],["binary","+",["binary","+",["binary","*",["name","d"],["name","oldY"]],["binary","*",["name","e"],["name","oldX"]]],["name","f"]]]]]]],["return",["name","oldPts"]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"Path"],"prototype"],"debug"],["function",null,["canvas"],[["var",[["bounds",["call",["dot",["name","this"],"getBoundingBox"],[]]]]],["if",["unary-prefix","!",["name","canvas"]],["block",[["stat",["assign",true,["name","canvas"],["call",["dot",["name","document"],"createElement"],[["string","canvas"]]]]],["stat",["call",["dot",["name","canvas"],"setAttribute"],[["string","width"],["binary","+",["dot",["name","bounds"],"maxX"],["num",100]]]]],["stat",["call",["dot",["name","canvas"],"setAttribute"],[["string","height"],["binary","+",["dot",["name","bounds"],"maxY"],["num",100]]]]],["stat",["call",["dot",["dot",["name","document"],"body"],"appendChild"],[["name","canvas"]]]]]],null],["var",[["ctx",["call",["dot",["name","canvas"],"getContext"],[["string","2d"]]]]]],["stat",["assign",true,["dot",["name","ctx"],"fillStyle"],["string","white"]]],["stat",["call",["dot",["name","ctx"],"fillRect"],[["num",0],["num",0],["dot",["name","canvas"],"width"],["dot",["name","canvas"],"height"]]]],["stat",["assign",true,["dot",["name","ctx"],"strokeStyle"],["string","black"]]],["stat",["call",["dot",["name","ctx"],"beginPath"],[]]],["var",[["i"],["il"],["item"],["action"],["args"]]],["for",["seq",["assign",true,["name","i"],["num",0]],["assign",true,["name","il"],["dot",["dot",["name","this"],"actions"],"length"]]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","item"],["sub",["dot",["name","this"],"actions"],["name","i"]]]],["stat",["assign",true,["name","args"],["dot",["name","item"],"args"]]],["stat",["assign",true,["name","action"],["dot",["name","item"],"action"]]],["if",["binary","!=",["name","action"],["dot",["dot",["name","THREE"],"PathActions"],"CSPLINE_THRU"]],["block",[["stat",["call",["dot",["sub",["name","ctx"],["name","action"]],"apply"],[["name","ctx"],["name","args"]]]]]],null]]]],["stat",["call",["dot",["name","ctx"],"stroke"],[]]],["stat",["call",["dot",["name","ctx"],"closePath"],[]]],["stat",["assign",true,["dot",["name","ctx"],"strokeStyle"],["string","red"]]],["var",[["p"],["points",["call",["dot",["name","this"],"getPoints"],[]]]]],["for",["seq",["assign",true,["name","i"],["num",0]],["assign",true,["name","il"],["dot",["name","points"],"length"]]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","p"],["sub",["name","points"],["name","i"]]]],["stat",["call",["dot",["name","ctx"],"beginPath"],[]]],["stat",["call",["dot",["name","ctx"],"arc"],[["dot",["name","p"],"x"],["dot",["name","p"],"y"],["num",1.5],["num",0],["binary","*",["dot",["name","Math"],"PI"],["num",2]],["name","false"]]]],["stat",["call",["dot",["name","ctx"],"stroke"],[]]],["stat",["call",["dot",["name","ctx"],"closePath"],[]]]]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"Path"],"prototype"],"toShapes"],["function",null,[],[["var",[["i"],["il"],["item"],["action"],["args"]]],["var",[["subPaths",["array",[]]],["lastPath",["new",["dot",["name","THREE"],"Path"],[]]]]],["for",["seq",["assign",true,["name","i"],["num",0]],["assign",true,["name","il"],["dot",["dot",["name","this"],"actions"],"length"]]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","item"],["sub",["dot",["name","this"],"actions"],["name","i"]]]],["stat",["assign",true,["name","args"],["dot",["name","item"],"args"]]],["stat",["assign",true,["name","action"],["dot",["name","item"],"action"]]],["if",["binary","==",["name","action"],["dot",["dot",["name","THREE"],"PathActions"],"MOVE_TO"]],["block",[["if",["binary","!=",["dot",["dot",["name","lastPath"],"actions"],"length"],["num",0]],["block",[["stat",["call",["dot",["name","subPaths"],"push"],[["name","lastPath"]]]],["stat",["assign",true,["name","lastPath"],["new",["dot",["name","THREE"],"Path"],[]]]]]],null]]],null],["stat",["call",["dot",["sub",["name","lastPath"],["name","action"]],"apply"],[["name","lastPath"],["name","args"]]]]]]],["if",["binary","!=",["dot",["dot",["name","lastPath"],"actions"],"length"],["num",0]],["block",[["stat",["call",["dot",["name","subPaths"],"push"],[["name","lastPath"]]]]]],null],["if",["binary","==",["dot",["name","subPaths"],"length"],["num",0]],["return",["array",[]]],null],["var",[["tmpPath"],["tmpShape"],["shapes",["array",[]]]]],["var",[["holesFirst",["unary-prefix","!",["call",["dot",["dot",["dot",["name","THREE"],"Shape"],"Utils"],"isClockWise"],[["call",["dot",["sub",["name","subPaths"],["num",0]],"getPoints"],[]]]]]]]],["if",["binary","==",["dot",["name","subPaths"],"length"],["num",1]],["block",[["stat",["assign",true,["name","tmpPath"],["sub",["name","subPaths"],["num",0]]]],["stat",["assign",true,["name","tmpShape"],["new",["dot",["name","THREE"],"Shape"],[]]]],["stat",["assign",true,["dot",["name","tmpShape"],"actions"],["dot",["name","tmpPath"],"actions"]]],["stat",["assign",true,["dot",["name","tmpShape"],"curves"],["dot",["name","tmpPath"],"curves"]]],["stat",["call",["dot",["name","shapes"],"push"],[["name","tmpShape"]]]],["return",["name","shapes"]]]],null],["block"],["if",["name","holesFirst"],["block",[["stat",["assign",true,["name","tmpShape"],["new",["dot",["name","THREE"],"Shape"],[]]]],["for",["seq",["assign",true,["name","i"],["num",0]],["assign",true,["name","il"],["dot",["name","subPaths"],"length"]]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","tmpPath"],["sub",["name","subPaths"],["name","i"]]]],["if",["call",["dot",["dot",["dot",["name","THREE"],"Shape"],"Utils"],"isClockWise"],[["call",["dot",["name","tmpPath"],"getPoints"],[]]]],["block",[["stat",["assign",true,["dot",["name","tmpShape"],"actions"],["dot",["name","tmpPath"],"actions"]]],["stat",["assign",true,["dot",["name","tmpShape"],"curves"],["dot",["name","tmpPath"],"curves"]]],["stat",["call",["dot",["name","shapes"],"push"],[["name","tmpShape"]]]],["stat",["assign",true,["name","tmpShape"],["new",["dot",["name","THREE"],"Shape"],[]]]]]],["block",[["stat",["call",["dot",["dot",["name","tmpShape"],"holes"],"push"],[["name","tmpPath"]]]]]]]]]]]],["block",[["for",["seq",["assign",true,["name","i"],["num",0]],["assign",true,["name","il"],["dot",["name","subPaths"],"length"]]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","tmpPath"],["sub",["name","subPaths"],["name","i"]]]],["if",["call",["dot",["dot",["dot",["name","THREE"],"Shape"],"Utils"],"isClockWise"],[["call",["dot",["name","tmpPath"],"getPoints"],[]]]],["block",[["if",["name","tmpShape"],["stat",["call",["dot",["name","shapes"],"push"],[["name","tmpShape"]]]],null],["stat",["assign",true,["name","tmpShape"],["new",["dot",["name","THREE"],"Shape"],[]]]],["stat",["assign",true,["dot",["name","tmpShape"],"actions"],["dot",["name","tmpPath"],"actions"]]],["stat",["assign",true,["dot",["name","tmpShape"],"curves"],["dot",["name","tmpPath"],"curves"]]]]],["block",[["stat",["call",["dot",["dot",["name","tmpShape"],"holes"],"push"],[["name","tmpPath"]]]]]]]]]],["stat",["call",["dot",["name","shapes"],"push"],[["name","tmpShape"]]]]]]],["return",["name","shapes"]]]]]],["stat",["assign",true,["dot",["name","THREE"],"Shape"],["function",null,[],[["stat",["call",["dot",["dot",["name","THREE"],"Path"],"apply"],[["name","this"],["name","arguments"]]]],["stat",["assign",true,["dot",["name","this"],"holes"],["array",[]]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"Shape"],"prototype"],["new",["dot",["name","THREE"],"Path"],[]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"Shape"],"prototype"],"constructor"],["dot",["name","THREE"],"Path"]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"Shape"],"prototype"],"extrude"],["function",null,["options"],[["var",[["extruded",["new",["dot",["name","THREE"],"ExtrudeGeometry"],[["name","this"],["name","options"]]]]]],["return",["name","extruded"]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"Shape"],"prototype"],"getPointsHoles"],["function",null,["divisions"],[["var",[["i"],["il",["dot",["dot",["name","this"],"holes"],"length"]],["holesPts",["array",[]]]]],["for",["assign",true,["name","i"],["num",0]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["sub",["name","holesPts"],["name","i"]],["call",["dot",["sub",["dot",["name","this"],"holes"],["name","i"]],"getTransformedPoints"],[["name","divisions"],["dot",["name","this"],"bends"]]]]]]]],["return",["name","holesPts"]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"Shape"],"prototype"],"getSpacedPointsHoles"],["function",null,["divisions"],[["var",[["i"],["il",["dot",["dot",["name","this"],"holes"],"length"]],["holesPts",["array",[]]]]],["for",["assign",true,["name","i"],["num",0]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["sub",["name","holesPts"],["name","i"]],["call",["dot",["sub",["dot",["name","this"],"holes"],["name","i"]],"getTransformedSpacedPoints"],[["name","divisions"],["dot",["name","this"],"bends"]]]]]]]],["return",["name","holesPts"]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"Shape"],"prototype"],"extractAllPoints"],["function",null,["divisions"],[["return",["object",[["shape",["call",["dot",["name","this"],"getTransformedPoints"],[["name","divisions"]]]],["holes",["call",["dot",["name","this"],"getPointsHoles"],[["name","divisions"]]]]]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"Shape"],"prototype"],"extractPoints"],["function",null,["divisions"],[["if",["dot",["name","this"],"useSpacedPoints"],["block",[["return",["call",["dot",["name","this"],"extractAllSpacedPoints"],[["name","divisions"]]]]]],null],["return",["call",["dot",["name","this"],"extractAllPoints"],[["name","divisions"]]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"Shape"],"prototype"],"extractAllSpacedPoints"],["function",null,["divisions"],[["return",["object",[["shape",["call",["dot",["name","this"],"getTransformedSpacedPoints"],[["name","divisions"]]]],["holes",["call",["dot",["name","this"],"getSpacedPointsHoles"],[["name","divisions"]]]]]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"Shape"],"Utils"],["object",[["removeHoles",["function",null,["contour","holes"],[["var",[["shape",["call",["dot",["name","contour"],"concat"],[]]]]],["var",[["allpoints",["call",["dot",["name","shape"],"concat"],[]]]]],["var",[["prevShapeVert"],["nextShapeVert"],["prevHoleVert"],["nextHoleVert"],["holeIndex"],["shapeIndex"],["shapeId"],["shapeGroup"],["h"],["h2"],["hole"],["shortest"],["d"],["p"],["pts1"],["pts2"],["tmpShape1"],["tmpShape2"],["tmpHole1"],["tmpHole2"],["verts",["array",[]]]]],["for",["assign",true,["name","h"],["num",0]],["binary","<",["name","h"],["dot",["name","holes"],"length"]],["unary-postfix","++",["name","h"]],["block",[["stat",["assign",true,["name","hole"],["sub",["name","holes"],["name","h"]]]],["stat",["call",["dot",["dot",["dot",["name","Array"],"prototype"],"push"],"apply"],[["name","allpoints"],["name","hole"]]]],["stat",["assign",true,["name","shortest"],["dot",["name","Number"],"POSITIVE_INFINITY"]]],["for",["assign",true,["name","h2"],["num",0]],["binary","<",["name","h2"],["dot",["name","hole"],"length"]],["unary-postfix","++",["name","h2"]],["block",[["stat",["assign",true,["name","pts1"],["sub",["name","hole"],["name","h2"]]]],["var",[["dist",["array",[]]]]],["for",["assign",true,["name","p"],["num",0]],["binary","<",["name","p"],["dot",["name","shape"],"length"]],["unary-postfix","++",["name","p"]],["block",[["stat",["assign",true,["name","pts2"],["sub",["name","shape"],["name","p"]]]],["stat",["assign",true,["name","d"],["call",["dot",["name","pts1"],"distanceToSquared"],[["name","pts2"]]]]],["stat",["call",["dot",["name","dist"],"push"],[["name","d"]]]],["if",["binary","<",["name","d"],["name","shortest"]],["block",[["stat",["assign",true,["name","shortest"],["name","d"]]],["stat",["assign",true,["name","holeIndex"],["name","h2"]]],["stat",["assign",true,["name","shapeIndex"],["name","p"]]]]],null]]]]]]],["stat",["assign",true,["name","prevShapeVert"],["conditional",["binary",">=",["binary","-",["name","shapeIndex"],["num",1]],["num",0]],["binary","-",["name","shapeIndex"],["num",1]],["binary","-",["dot",["name","shape"],"length"],["num",1]]]]],["stat",["assign",true,["name","prevHoleVert"],["conditional",["binary",">=",["binary","-",["name","holeIndex"],["num",1]],["num",0]],["binary","-",["name","holeIndex"],["num",1]],["binary","-",["dot",["name","hole"],"length"],["num",1]]]]],["var",[["areaapts",["array",[["sub",["name","hole"],["name","holeIndex"]],["sub",["name","shape"],["name","shapeIndex"]],["sub",["name","shape"],["name","prevShapeVert"]]]]]]],["var",[["areaa",["call",["dot",["dot",["dot",["name","THREE"],"FontUtils"],"Triangulate"],"area"],[["name","areaapts"]]]]]],["var",[["areabpts",["array",[["sub",["name","hole"],["name","holeIndex"]],["sub",["name","hole"],["name","prevHoleVert"]],["sub",["name","shape"],["name","shapeIndex"]]]]]]],["var",[["areab",["call",["dot",["dot",["dot",["name","THREE"],"FontUtils"],"Triangulate"],"area"],[["name","areabpts"]]]]]],["var",[["shapeOffset",["num",1]]]],["var",[["holeOffset",["unary-prefix","-",["num",1]]]]],["var",[["oldShapeIndex",["name","shapeIndex"]],["oldHoleIndex",["name","holeIndex"]]]],["stat",["assign","+",["name","shapeIndex"],["name","shapeOffset"]]],["stat",["assign","+",["name","holeIndex"],["name","holeOffset"]]],["if",["binary","<",["name","shapeIndex"],["num",0]],["block",[["stat",["assign","+",["name","shapeIndex"],["dot",["name","shape"],"length"]]]]],null],["stat",["assign","%",["name","shapeIndex"],["dot",["name","shape"],"length"]]],["if",["binary","<",["name","holeIndex"],["num",0]],["block",[["stat",["assign","+",["name","holeIndex"],["dot",["name","hole"],"length"]]]]],null],["stat",["assign","%",["name","holeIndex"],["dot",["name","hole"],"length"]]],["stat",["assign",true,["name","prevShapeVert"],["conditional",["binary",">=",["binary","-",["name","shapeIndex"],["num",1]],["num",0]],["binary","-",["name","shapeIndex"],["num",1]],["binary","-",["dot",["name","shape"],"length"],["num",1]]]]],["stat",["assign",true,["name","prevHoleVert"],["conditional",["binary",">=",["binary","-",["name","holeIndex"],["num",1]],["num",0]],["binary","-",["name","holeIndex"],["num",1]],["binary","-",["dot",["name","hole"],"length"],["num",1]]]]],["stat",["assign",true,["name","areaapts"],["array",[["sub",["name","hole"],["name","holeIndex"]],["sub",["name","shape"],["name","shapeIndex"]],["sub",["name","shape"],["name","prevShapeVert"]]]]]],["var",[["areaa2",["call",["dot",["dot",["dot",["name","THREE"],"FontUtils"],"Triangulate"],"area"],[["name","areaapts"]]]]]],["stat",["assign",true,["name","areabpts"],["array",[["sub",["name","hole"],["name","holeIndex"]],["sub",["name","hole"],["name","prevHoleVert"]],["sub",["name","shape"],["name","shapeIndex"]]]]]],["var",[["areab2",["call",["dot",["dot",["dot",["name","THREE"],"FontUtils"],"Triangulate"],"area"],[["name","areabpts"]]]]]],["if",["binary",">",["binary","+",["name","areaa"],["name","areab"]],["binary","+",["name","areaa2"],["name","areab2"]]],["block",[["stat",["assign",true,["name","shapeIndex"],["name","oldShapeIndex"]]],["stat",["assign",true,["name","holeIndex"],["name","oldHoleIndex"]]],["if",["binary","<",["name","shapeIndex"],["num",0]],["block",[["stat",["assign","+",["name","shapeIndex"],["dot",["name","shape"],"length"]]]]],null],["stat",["assign","%",["name","shapeIndex"],["dot",["name","shape"],"length"]]],["if",["binary","<",["name","holeIndex"],["num",0]],["block",[["stat",["assign","+",["name","holeIndex"],["dot",["name","hole"],"length"]]]]],null],["stat",["assign","%",["name","holeIndex"],["dot",["name","hole"],"length"]]],["stat",["assign",true,["name","prevShapeVert"],["conditional",["binary",">=",["binary","-",["name","shapeIndex"],["num",1]],["num",0]],["binary","-",["name","shapeIndex"],["num",1]],["binary","-",["dot",["name","shape"],"length"],["num",1]]]]],["stat",["assign",true,["name","prevHoleVert"],["conditional",["binary",">=",["binary","-",["name","holeIndex"],["num",1]],["num",0]],["binary","-",["name","holeIndex"],["num",1]],["binary","-",["dot",["name","hole"],"length"],["num",1]]]]]]],["block",[]]],["stat",["assign",true,["name","tmpShape1"],["call",["dot",["name","shape"],"slice"],[["num",0],["name","shapeIndex"]]]]],["stat",["assign",true,["name","tmpShape2"],["call",["dot",["name","shape"],"slice"],[["name","shapeIndex"]]]]],["stat",["assign",true,["name","tmpHole1"],["call",["dot",["name","hole"],"slice"],[["name","holeIndex"]]]]],["stat",["assign",true,["name","tmpHole2"],["call",["dot",["name","hole"],"slice"],[["num",0],["name","holeIndex"]]]]],["var",[["trianglea",["array",[["sub",["name","hole"],["name","holeIndex"]],["sub",["name","shape"],["name","shapeIndex"]],["sub",["name","shape"],["name","prevShapeVert"]]]]]]],["var",[["triangleb",["array",[["sub",["name","hole"],["name","holeIndex"]],["sub",["name","hole"],["name","prevHoleVert"]],["sub",["name","shape"],["name","shapeIndex"]]]]]]],["stat",["call",["dot",["name","verts"],"push"],[["name","trianglea"]]]],["stat",["call",["dot",["name","verts"],"push"],[["name","triangleb"]]]],["stat",["assign",true,["name","shape"],["call",["dot",["call",["dot",["call",["dot",["name","tmpShape1"],"concat"],[["name","tmpHole1"]]],"concat"],[["name","tmpHole2"]]],"concat"],[["name","tmpShape2"]]]]]]]],["return",["object",[["shape",["name","shape"]],["isolatedPts",["name","verts"]],["allpoints",["name","allpoints"]]]]]]]],["triangulateShape",["function",null,["contour","holes"],[["var",[["shapeWithoutHoles",["call",["dot",["dot",["dot",["name","THREE"],"Shape"],"Utils"],"removeHoles"],[["name","contour"],["name","holes"]]]]]],["var",[["shape",["dot",["name","shapeWithoutHoles"],"shape"]],["allpoints",["dot",["name","shapeWithoutHoles"],"allpoints"]],["isolatedPts",["dot",["name","shapeWithoutHoles"],"isolatedPts"]]]],["var",[["triangles",["call",["dot",["dot",["name","THREE"],"FontUtils"],"Triangulate"],[["name","shape"],["name","false"]]]]]],["var",[["i"],["il"],["f"],["face"],["key"],["index"],["allPointsMap",["object",[]]],["isolatedPointsMap",["object",[]]]]],["for",["seq",["assign",true,["name","i"],["num",0]],["assign",true,["name","il"],["dot",["name","allpoints"],"length"]]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","key"],["binary","+",["binary","+",["dot",["sub",["name","allpoints"],["name","i"]],"x"],["string",":"]],["dot",["sub",["name","allpoints"],["name","i"]],"y"]]]],["if",["binary","!==",["sub",["name","allPointsMap"],["name","key"]],["name","undefined"]],["block",[["stat",["call",["dot",["name","console"],"log"],[["string","Duplicate point"],["name","key"]]]]]],null],["stat",["assign",true,["sub",["name","allPointsMap"],["name","key"]],["name","i"]]]]]],["for",["seq",["assign",true,["name","i"],["num",0]],["assign",true,["name","il"],["dot",["name","triangles"],"length"]]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","face"],["sub",["name","triangles"],["name","i"]]]],["for",["assign",true,["name","f"],["num",0]],["binary","<",["name","f"],["num",3]],["unary-postfix","++",["name","f"]],["block",[["stat",["assign",true,["name","key"],["binary","+",["binary","+",["dot",["sub",["name","face"],["name","f"]],"x"],["string",":"]],["dot",["sub",["name","face"],["name","f"]],"y"]]]],["stat",["assign",true,["name","index"],["sub",["name","allPointsMap"],["name","key"]]]],["if",["binary","!==",["name","index"],["name","undefined"]],["block",[["stat",["assign",true,["sub",["name","face"],["name","f"]],["name","index"]]]]],null]]]]]]],["for",["seq",["assign",true,["name","i"],["num",0]],["assign",true,["name","il"],["dot",["name","isolatedPts"],"length"]]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","face"],["sub",["name","isolatedPts"],["name","i"]]]],["for",["assign",true,["name","f"],["num",0]],["binary","<",["name","f"],["num",3]],["unary-postfix","++",["name","f"]],["block",[["stat",["assign",true,["name","key"],["binary","+",["binary","+",["dot",["sub",["name","face"],["name","f"]],"x"],["string",":"]],["dot",["sub",["name","face"],["name","f"]],"y"]]]],["stat",["assign",true,["name","index"],["sub",["name","allPointsMap"],["name","key"]]]],["if",["binary","!==",["name","index"],["name","undefined"]],["block",[["stat",["assign",true,["sub",["name","face"],["name","f"]],["name","index"]]]]],null]]]]]]],["return",["call",["dot",["name","triangles"],"concat"],[["name","isolatedPts"]]]]]]],["isClockWise",["function",null,["pts"],[["return",["binary","<",["call",["dot",["dot",["dot",["name","THREE"],"FontUtils"],"Triangulate"],"area"],[["name","pts"]]],["num",0]]]]]],["b2p0",["function",null,["t","p"],[["var",[["k",["binary","-",["num",1],["name","t"]]]]],["return",["binary","*",["binary","*",["name","k"],["name","k"]],["name","p"]]]]]],["b2p1",["function",null,["t","p"],[["return",["binary","*",["binary","*",["binary","*",["num",2],["binary","-",["num",1],["name","t"]]],["name","t"]],["name","p"]]]]]],["b2p2",["function",null,["t","p"],[["return",["binary","*",["binary","*",["name","t"],["name","t"]],["name","p"]]]]]],["b2",["function",null,["t","p0","p1","p2"],[["return",["binary","+",["binary","+",["call",["dot",["name","this"],"b2p0"],[["name","t"],["name","p0"]]],["call",["dot",["name","this"],"b2p1"],[["name","t"],["name","p1"]]]],["call",["dot",["name","this"],"b2p2"],[["name","t"],["name","p2"]]]]]]]],["b3p0",["function",null,["t","p"],[["var",[["k",["binary","-",["num",1],["name","t"]]]]],["return",["binary","*",["binary","*",["binary","*",["name","k"],["name","k"]],["name","k"]],["name","p"]]]]]],["b3p1",["function",null,["t","p"],[["var",[["k",["binary","-",["num",1],["name","t"]]]]],["return",["binary","*",["binary","*",["binary","*",["binary","*",["num",3],["name","k"]],["name","k"]],["name","t"]],["name","p"]]]]]],["b3p2",["function",null,["t","p"],[["var",[["k",["binary","-",["num",1],["name","t"]]]]],["return",["binary","*",["binary","*",["binary","*",["binary","*",["num",3],["name","k"]],["name","t"]],["name","t"]],["name","p"]]]]]],["b3p3",["function",null,["t","p"],[["return",["binary","*",["binary","*",["binary","*",["name","t"],["name","t"]],["name","t"]],["name","p"]]]]]],["b3",["function",null,["t","p0","p1","p2","p3"],[["return",["binary","+",["binary","+",["binary","+",["call",["dot",["name","this"],"b3p0"],[["name","t"],["name","p0"]]],["call",["dot",["name","this"],"b3p1"],[["name","t"],["name","p1"]]]],["call",["dot",["name","this"],"b3p2"],[["name","t"],["name","p2"]]]],["call",["dot",["name","this"],"b3p3"],[["name","t"],["name","p3"]]]]]]]]]]]],["stat",["assign",true,["dot",["name","THREE"],"TextPath"],["function",null,["text","parameters"],[["stat",["call",["dot",["dot",["name","THREE"],"Path"],"call"],[["name","this"]]]],["stat",["assign",true,["dot",["name","this"],"parameters"],["binary","||",["name","parameters"],["object",[]]]]],["stat",["call",["dot",["name","this"],"set"],[["name","text"]]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"TextPath"],"prototype"],"set"],["function",null,["text","parameters"],[["stat",["assign",true,["name","parameters"],["binary","||",["name","parameters"],["dot",["name","this"],"parameters"]]]],["stat",["assign",true,["dot",["name","this"],"text"],["name","text"]]],["var",[["size",["conditional",["binary","!==",["dot",["name","parameters"],"size"],["name","undefined"]],["dot",["name","parameters"],"size"],["num",100]]]]],["var",[["curveSegments",["conditional",["binary","!==",["dot",["name","parameters"],"curveSegments"],["name","undefined"]],["dot",["name","parameters"],"curveSegments"],["num",4]]]]],["var",[["font",["conditional",["binary","!==",["dot",["name","parameters"],"font"],["name","undefined"]],["dot",["name","parameters"],"font"],["string","helvetiker"]]]]],["var",[["weight",["conditional",["binary","!==",["dot",["name","parameters"],"weight"],["name","undefined"]],["dot",["name","parameters"],"weight"],["string","normal"]]]]],["var",[["style",["conditional",["binary","!==",["dot",["name","parameters"],"style"],["name","undefined"]],["dot",["name","parameters"],"style"],["string","normal"]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"FontUtils"],"size"],["name","size"]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"FontUtils"],"divisions"],["name","curveSegments"]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"FontUtils"],"face"],["name","font"]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"FontUtils"],"weight"],["name","weight"]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"FontUtils"],"style"],["name","style"]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"TextPath"],"prototype"],"toShapes"],["function",null,[],[["var",[["data",["call",["dot",["dot",["name","THREE"],"FontUtils"],"drawText"],[["dot",["name","this"],"text"]]]]]],["var",[["paths",["dot",["name","data"],"paths"]]]],["var",[["shapes",["array",[]]]]],["for",["var",[["p",["num",0]],["pl",["dot",["name","paths"],"length"]]]],["binary","<",["name","p"],["name","pl"]],["unary-postfix","++",["name","p"]],["block",[["stat",["call",["dot",["dot",["dot",["name","Array"],"prototype"],"push"],"apply"],[["name","shapes"],["call",["dot",["sub",["name","paths"],["name","p"]],"toShapes"],[]]]]]]]],["return",["name","shapes"]]]]]],["stat",["assign",true,["dot",["name","THREE"],"AnimationHandler"],["call",["function",null,[],[["var",[["playing",["array",[]]]]],["var",[["library",["object",[]]]]],["var",[["that",["object",[]]]]],["stat",["assign",true,["dot",["name","that"],"update"],["function",null,["deltaTimeMS"],[["for",["var",[["i",["num",0]]]],["binary","<",["name","i"],["dot",["name","playing"],"length"]],["unary-postfix","++",["name","i"]],["stat",["call",["dot",["sub",["name","playing"],["name","i"]],"update"],[["name","deltaTimeMS"]]]]]]]]],["stat",["assign",true,["dot",["name","that"],"addToUpdate"],["function",null,["animation"],[["if",["binary","===",["call",["dot",["name","playing"],"indexOf"],[["name","animation"]]],["unary-prefix","-",["num",1]]],["stat",["call",["dot",["name","playing"],"push"],[["name","animation"]]]],null]]]]],["stat",["assign",true,["dot",["name","that"],"removeFromUpdate"],["function",null,["animation"],[["var",[["index",["call",["dot",["name","playing"],"indexOf"],[["name","animation"]]]]]],["if",["binary","!==",["name","index"],["unary-prefix","-",["num",1]]],["stat",["call",["dot",["name","playing"],"splice"],[["name","index"],["num",1]]]],null]]]]],["stat",["assign",true,["dot",["name","that"],"add"],["function",null,["data"],[["if",["binary","!==",["sub",["name","library"],["dot",["name","data"],"name"]],["name","undefined"]],["stat",["call",["dot",["name","console"],"log"],[["binary","+",["binary","+",["string","THREE.AnimationHandler.add: Warning! "],["dot",["name","data"],"name"]],["string"," already exists in library. Overwriting."]]]]],null],["stat",["assign",true,["sub",["name","library"],["dot",["name","data"],"name"]],["name","data"]]],["stat",["call",["name","initData"],[["name","data"]]]]]]]],["stat",["assign",true,["dot",["name","that"],"get"],["function",null,["name"],[["if",["binary","===",["unary-prefix","typeof",["name","name"]],["string","string"]],["block",[["if",["sub",["name","library"],["name","name"]],["block",[["return",["sub",["name","library"],["name","name"]]]]],["block",[["stat",["call",["dot",["name","console"],"log"],[["binary","+",["string","THREE.AnimationHandler.get: Couldn't find animation "],["name","name"]]]]],["return",["name","null"]]]]]]],["block",[]]]]]]],["stat",["assign",true,["dot",["name","that"],"parse"],["function",null,["root"],[["var",[["hierarchy",["array",[]]]]],["if",["binary","instanceof",["name","root"],["dot",["name","THREE"],"SkinnedMesh"]],["block",[["for",["var",[["b",["num",0]]]],["binary","<",["name","b"],["dot",["dot",["name","root"],"bones"],"length"]],["unary-postfix","++",["name","b"]],["block",[["stat",["call",["dot",["name","hierarchy"],"push"],[["sub",["dot",["name","root"],"bones"],["name","b"]]]]]]]]]],["block",[["stat",["call",["name","parseRecurseHierarchy"],[["name","root"],["name","hierarchy"]]]]]]],["return",["name","hierarchy"]]]]]],["var",[["parseRecurseHierarchy",["function",null,["root","hierarchy"],[["stat",["call",["dot",["name","hierarchy"],"push"],[["name","root"]]]],["for",["var",[["c",["num",0]]]],["binary","<",["name","c"],["dot",["dot",["name","root"],"children"],"length"]],["unary-postfix","++",["name","c"]],["stat",["call",["name","parseRecurseHierarchy"],[["sub",["dot",["name","root"],"children"],["name","c"]],["name","hierarchy"]]]]]]]]]],["var",[["initData",["function",null,["data"],[["if",["binary","===",["dot",["name","data"],"initialized"],["name","true"]],["return",null],null],["for",["var",[["h",["num",0]]]],["binary","<",["name","h"],["dot",["dot",["name","data"],"hierarchy"],"length"]],["unary-postfix","++",["name","h"]],["block",[["for",["var",[["k",["num",0]]]],["binary","<",["name","k"],["dot",["dot",["sub",["dot",["name","data"],"hierarchy"],["name","h"]],"keys"],"length"]],["unary-postfix","++",["name","k"]],["block",[["if",["binary","<",["dot",["sub",["dot",["sub",["dot",["name","data"],"hierarchy"],["name","h"]],"keys"],["name","k"]],"time"],["num",0]],["stat",["assign",true,["dot",["sub",["dot",["sub",["dot",["name","data"],"hierarchy"],["name","h"]],"keys"],["name","k"]],"time"],["num",0]]],null],["if",["binary","&&",["binary","!==",["dot",["sub",["dot",["sub",["dot",["name","data"],"hierarchy"],["name","h"]],"keys"],["name","k"]],"rot"],["name","undefined"]],["unary-prefix","!",["binary","instanceof",["dot",["sub",["dot",["sub",["dot",["name","data"],"hierarchy"],["name","h"]],"keys"],["name","k"]],"rot"],["dot",["name","THREE"],"Quaternion"]]]],["block",[["var",[["quat",["dot",["sub",["dot",["sub",["dot",["name","data"],"hierarchy"],["name","h"]],"keys"],["name","k"]],"rot"]]]],["stat",["assign",true,["dot",["sub",["dot",["sub",["dot",["name","data"],"hierarchy"],["name","h"]],"keys"],["name","k"]],"rot"],["new",["dot",["name","THREE"],"Quaternion"],[["sub",["name","quat"],["num",0]],["sub",["name","quat"],["num",1]],["sub",["name","quat"],["num",2]],["sub",["name","quat"],["num",3]]]]]]]],null]]]],["if",["binary","&&",["dot",["dot",["sub",["dot",["name","data"],"hierarchy"],["name","h"]],"keys"],"length"],["binary","!==",["dot",["sub",["dot",["sub",["dot",["name","data"],"hierarchy"],["name","h"]],"keys"],["num",0]],"morphTargets"],["name","undefined"]]],["block",[["var",[["usedMorphTargets",["object",[]]]]],["for",["var",[["k",["num",0]]]],["binary","<",["name","k"],["dot",["dot",["sub",["dot",["name","data"],"hierarchy"],["name","h"]],"keys"],"length"]],["unary-postfix","++",["name","k"]],["block",[["for",["var",[["m",["num",0]]]],["binary","<",["name","m"],["dot",["dot",["sub",["dot",["sub",["dot",["name","data"],"hierarchy"],["name","h"]],"keys"],["name","k"]],"morphTargets"],"length"]],["unary-postfix","++",["name","m"]],["block",[["var",[["morphTargetName",["sub",["dot",["sub",["dot",["sub",["dot",["name","data"],"hierarchy"],["name","h"]],"keys"],["name","k"]],"morphTargets"],["name","m"]]]]],["stat",["assign",true,["sub",["name","usedMorphTargets"],["name","morphTargetName"]],["unary-prefix","-",["num",1]]]]]]]]]],["stat",["assign",true,["dot",["sub",["dot",["name","data"],"hierarchy"],["name","h"]],"usedMorphTargets"],["name","usedMorphTargets"]]],["for",["var",[["k",["num",0]]]],["binary","<",["name","k"],["dot",["dot",["sub",["dot",["name","data"],"hierarchy"],["name","h"]],"keys"],"length"]],["unary-postfix","++",["name","k"]],["block",[["var",[["influences",["object",[]]]]],["for-in",["var",[["morphTargetName"]]],["name",["morphTargetName"]],["name","usedMorphTargets"],["block",[["for",["var",[["m",["num",0]]]],["binary","<",["name","m"],["dot",["dot",["sub",["dot",["sub",["dot",["name","data"],"hierarchy"],["name","h"]],"keys"],["name","k"]],"morphTargets"],"length"]],["unary-postfix","++",["name","m"]],["block",[["if",["binary","===",["sub",["dot",["sub",["dot",["sub",["dot",["name","data"],"hierarchy"],["name","h"]],"keys"],["name","k"]],"morphTargets"],["name","m"]],["name","morphTargetName"]],["block",[["stat",["assign",true,["sub",["name","influences"],["name","morphTargetName"]],["sub",["dot",["sub",["dot",["sub",["dot",["name","data"],"hierarchy"],["name","h"]],"keys"],["name","k"]],"morphTargetsInfluences"],["name","m"]]]],["break",null]]],null]]]],["if",["binary","===",["name","m"],["dot",["dot",["sub",["dot",["sub",["dot",["name","data"],"hierarchy"],["name","h"]],"keys"],["name","k"]],"morphTargets"],"length"]],["block",[["stat",["assign",true,["sub",["name","influences"],["name","morphTargetName"]],["num",0]]]]],null]]]],["stat",["assign",true,["dot",["sub",["dot",["sub",["dot",["name","data"],"hierarchy"],["name","h"]],"keys"],["name","k"]],"morphTargetsInfluences"],["name","influences"]]]]]]]],null],["for",["var",[["k",["num",1]]]],["binary","<",["name","k"],["dot",["dot",["sub",["dot",["name","data"],"hierarchy"],["name","h"]],"keys"],"length"]],["unary-postfix","++",["name","k"]],["block",[["if",["binary","===",["dot",["sub",["dot",["sub",["dot",["name","data"],"hierarchy"],["name","h"]],"keys"],["name","k"]],"time"],["dot",["sub",["dot",["sub",["dot",["name","data"],"hierarchy"],["name","h"]],"keys"],["binary","-",["name","k"],["num",1]]],"time"]],["block",[["stat",["call",["dot",["dot",["sub",["dot",["name","data"],"hierarchy"],["name","h"]],"keys"],"splice"],[["name","k"],["num",1]]]],["stat",["unary-postfix","--",["name","k"]]]]],null]]]],["for",["var",[["k",["num",0]]]],["binary","<",["name","k"],["dot",["dot",["sub",["dot",["name","data"],"hierarchy"],["name","h"]],"keys"],"length"]],["unary-postfix","++",["name","k"]],["block",[["stat",["assign",true,["dot",["sub",["dot",["sub",["dot",["name","data"],"hierarchy"],["name","h"]],"keys"],["name","k"]],"index"],["name","k"]]]]]]]]],["var",[["lengthInFrames",["call",["name","parseInt"],[["binary","*",["dot",["name","data"],"length"],["dot",["name","data"],"fps"]],["num",10]]]]]],["stat",["assign",true,["dot",["name","data"],"JIT"],["object",[]]]],["stat",["assign",true,["dot",["dot",["name","data"],"JIT"],"hierarchy"],["array",[]]]],["for",["var",[["h",["num",0]]]],["binary","<",["name","h"],["dot",["dot",["name","data"],"hierarchy"],"length"]],["unary-postfix","++",["name","h"]],["stat",["call",["dot",["dot",["dot",["name","data"],"JIT"],"hierarchy"],"push"],[["new",["name","Array"],[["name","lengthInFrames"]]]]]]],["stat",["assign",true,["dot",["name","data"],"initialized"],["name","true"]]]]]]]],["stat",["assign",true,["dot",["name","that"],"LINEAR"],["num",0]]],["stat",["assign",true,["dot",["name","that"],"CATMULLROM"],["num",1]]],["stat",["assign",true,["dot",["name","that"],"CATMULLROM_FORWARD"],["num",2]]],["return",["name","that"]]]],[]]]],["stat",["assign",true,["dot",["name","THREE"],"Animation"],["function",null,["root","data","interpolationType","JITCompile"],[["stat",["assign",true,["dot",["name","this"],"root"],["name","root"]]],["stat",["assign",true,["dot",["name","this"],"data"],["call",["dot",["dot",["name","THREE"],"AnimationHandler"],"get"],[["name","data"]]]]],["stat",["assign",true,["dot",["name","this"],"hierarchy"],["call",["dot",["dot",["name","THREE"],"AnimationHandler"],"parse"],[["name","root"]]]]],["stat",["assign",true,["dot",["name","this"],"currentTime"],["num",0]]],["stat",["assign",true,["dot",["name","this"],"timeScale"],["num",1]]],["stat",["assign",true,["dot",["name","this"],"isPlaying"],["name","false"]]],["stat",["assign",true,["dot",["name","this"],"isPaused"],["name","true"]]],["stat",["assign",true,["dot",["name","this"],"loop"],["name","true"]]],["stat",["assign",true,["dot",["name","this"],"interpolationType"],["conditional",["binary","!==",["name","interpolationType"],["name","undefined"]],["name","interpolationType"],["dot",["dot",["name","THREE"],"AnimationHandler"],"LINEAR"]]]],["stat",["assign",true,["dot",["name","this"],"JITCompile"],["conditional",["binary","!==",["name","JITCompile"],["name","undefined"]],["name","JITCompile"],["name","true"]]]],["stat",["assign",true,["dot",["name","this"],"points"],["array",[]]]],["stat",["assign",true,["dot",["name","this"],"target"],["new",["dot",["name","THREE"],"Vector3"],[]]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"Animation"],"prototype"],"play"],["function",null,["loop","startTimeMS"],[["if",["unary-prefix","!",["dot",["name","this"],"isPlaying"]],["block",[["stat",["assign",true,["dot",["name","this"],"isPlaying"],["name","true"]]],["stat",["assign",true,["dot",["name","this"],"loop"],["conditional",["binary","!==",["name","loop"],["name","undefined"]],["name","loop"],["name","true"]]]],["stat",["assign",true,["dot",["name","this"],"currentTime"],["conditional",["binary","!==",["name","startTimeMS"],["name","undefined"]],["name","startTimeMS"],["num",0]]]],["var",[["h"],["hl",["dot",["dot",["name","this"],"hierarchy"],"length"]],["object"]]],["for",["assign",true,["name","h"],["num",0]],["binary","<",["name","h"],["name","hl"]],["unary-postfix","++",["name","h"]],["block",[["stat",["assign",true,["name","object"],["sub",["dot",["name","this"],"hierarchy"],["name","h"]]]],["if",["binary","!==",["dot",["name","this"],"interpolationType"],["dot",["dot",["name","THREE"],"AnimationHandler"],"CATMULLROM_FORWARD"]],["block",[["stat",["assign",true,["dot",["name","object"],"useQuaternion"],["name","true"]]]]],null],["stat",["assign",true,["dot",["name","object"],"matrixAutoUpdate"],["name","true"]]],["if",["binary","===",["dot",["name","object"],"animationCache"],["name","undefined"]],["block",[["stat",["assign",true,["dot",["name","object"],"animationCache"],["object",[]]]],["stat",["assign",true,["dot",["dot",["name","object"],"animationCache"],"prevKey"],["object",[["pos",["num",0]],["rot",["num",0]],["scl",["num",0]]]]]],["stat",["assign",true,["dot",["dot",["name","object"],"animationCache"],"nextKey"],["object",[["pos",["num",0]],["rot",["num",0]],["scl",["num",0]]]]]],["stat",["assign",true,["dot",["dot",["name","object"],"animationCache"],"originalMatrix"],["conditional",["binary","instanceof",["name","object"],["dot",["name","THREE"],"Bone"]],["dot",["name","object"],"skinMatrix"],["dot",["name","object"],"matrix"]]]]]],null],["var",[["prevKey",["dot",["dot",["name","object"],"animationCache"],"prevKey"]]]],["var",[["nextKey",["dot",["dot",["name","object"],"animationCache"],"nextKey"]]]],["stat",["assign",true,["dot",["name","prevKey"],"pos"],["sub",["dot",["sub",["dot",["dot",["name","this"],"data"],"hierarchy"],["name","h"]],"keys"],["num",0]]]],["stat",["assign",true,["dot",["name","prevKey"],"rot"],["sub",["dot",["sub",["dot",["dot",["name","this"],"data"],"hierarchy"],["name","h"]],"keys"],["num",0]]]],["stat",["assign",true,["dot",["name","prevKey"],"scl"],["sub",["dot",["sub",["dot",["dot",["name","this"],"data"],"hierarchy"],["name","h"]],"keys"],["num",0]]]],["stat",["assign",true,["dot",["name","nextKey"],"pos"],["call",["dot",["name","this"],"getNextKeyWith"],[["string","pos"],["name","h"],["num",1]]]]],["stat",["assign",true,["dot",["name","nextKey"],"rot"],["call",["dot",["name","this"],"getNextKeyWith"],[["string","rot"],["name","h"],["num",1]]]]],["stat",["assign",true,["dot",["name","nextKey"],"scl"],["call",["dot",["name","this"],"getNextKeyWith"],[["string","scl"],["name","h"],["num",1]]]]]]]],["stat",["call",["dot",["name","this"],"update"],[["num",0]]]]]],null],["stat",["assign",true,["dot",["name","this"],"isPaused"],["name","false"]]],["stat",["call",["dot",["dot",["name","THREE"],"AnimationHandler"],"addToUpdate"],[["name","this"]]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"Animation"],"prototype"],"pause"],["function",null,[],[["if",["dot",["name","this"],"isPaused"],["block",[["stat",["call",["dot",["dot",["name","THREE"],"AnimationHandler"],"addToUpdate"],[["name","this"]]]]]],["block",[["stat",["call",["dot",["dot",["name","THREE"],"AnimationHandler"],"removeFromUpdate"],[["name","this"]]]]]]],["stat",["assign",true,["dot",["name","this"],"isPaused"],["unary-prefix","!",["dot",["name","this"],"isPaused"]]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"Animation"],"prototype"],"stop"],["function",null,[],[["stat",["assign",true,["dot",["name","this"],"isPlaying"],["name","false"]]],["stat",["assign",true,["dot",["name","this"],"isPaused"],["name","false"]]],["stat",["call",["dot",["dot",["name","THREE"],"AnimationHandler"],"removeFromUpdate"],[["name","this"]]]],["for",["var",[["h",["num",0]]]],["binary","<",["name","h"],["dot",["dot",["name","this"],"hierarchy"],"length"]],["unary-postfix","++",["name","h"]],["block",[["if",["binary","!==",["dot",["sub",["dot",["name","this"],"hierarchy"],["name","h"]],"animationCache"],["name","undefined"]],["block",[["if",["binary","instanceof",["sub",["dot",["name","this"],"hierarchy"],["name","h"]],["dot",["name","THREE"],"Bone"]],["block",[["stat",["assign",true,["dot",["sub",["dot",["name","this"],"hierarchy"],["name","h"]],"skinMatrix"],["dot",["dot",["sub",["dot",["name","this"],"hierarchy"],["name","h"]],"animationCache"],"originalMatrix"]]]]],["block",[["stat",["assign",true,["dot",["sub",["dot",["name","this"],"hierarchy"],["name","h"]],"matrix"],["dot",["dot",["sub",["dot",["name","this"],"hierarchy"],["name","h"]],"animationCache"],"originalMatrix"]]]]]],["stat",["unary-prefix","delete",["dot",["sub",["dot",["name","this"],"hierarchy"],["name","h"]],"animationCache"]]]]],null]]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"Animation"],"prototype"],"update"],["function",null,["deltaTimeMS"],[["if",["unary-prefix","!",["dot",["name","this"],"isPlaying"]],["return",null],null],["var",[["types",["array",[["string","pos"],["string","rot"],["string","scl"]]]]]],["var",[["type"]]],["var",[["scale"]]],["var",[["vector"]]],["var",[["prevXYZ"],["nextXYZ"]]],["var",[["prevKey"],["nextKey"]]],["var",[["object"]]],["var",[["animationCache"]]],["var",[["frame"]]],["var",[["JIThierarchy",["dot",["dot",["dot",["name","this"],"data"],"JIT"],"hierarchy"]]]],["var",[["currentTime"],["unloopedCurrentTime"]]],["var",[["currentPoint"],["forwardPoint"],["angle"]]],["stat",["assign","+",["dot",["name","this"],"currentTime"],["binary","*",["name","deltaTimeMS"],["dot",["name","this"],"timeScale"]]]],["stat",["assign",true,["name","unloopedCurrentTime"],["dot",["name","this"],"currentTime"]]],["stat",["assign",true,["name","currentTime"],["assign",true,["dot",["name","this"],"currentTime"],["binary","%",["dot",["name","this"],"currentTime"],["dot",["dot",["name","this"],"data"],"length"]]]]],["stat",["assign",true,["name","frame"],["call",["name","parseInt"],[["call",["dot",["name","Math"],"min"],[["binary","*",["name","currentTime"],["dot",["dot",["name","this"],"data"],"fps"]],["binary","*",["dot",["dot",["name","this"],"data"],"length"],["dot",["dot",["name","this"],"data"],"fps"]]]],["num",10]]]]],["for",["var",[["h",["num",0]],["hl",["dot",["dot",["name","this"],"hierarchy"],"length"]]]],["binary","<",["name","h"],["name","hl"]],["unary-postfix","++",["name","h"]],["block",[["stat",["assign",true,["name","object"],["sub",["dot",["name","this"],"hierarchy"],["name","h"]]]],["stat",["assign",true,["name","animationCache"],["dot",["name","object"],"animationCache"]]],["if",["binary","&&",["dot",["name","this"],"JITCompile"],["binary","!==",["sub",["sub",["name","JIThierarchy"],["name","h"]],["name","frame"]],["name","undefined"]]],["block",[["if",["binary","instanceof",["name","object"],["dot",["name","THREE"],"Bone"]],["block",[["stat",["assign",true,["dot",["name","object"],"skinMatrix"],["sub",["sub",["name","JIThierarchy"],["name","h"]],["name","frame"]]]],["stat",["assign",true,["dot",["name","object"],"matrixAutoUpdate"],["name","false"]]],["stat",["assign",true,["dot",["name","object"],"matrixWorldNeedsUpdate"],["name","false"]]]]],["block",[["stat",["assign",true,["dot",["name","object"],"matrix"],["sub",["sub",["name","JIThierarchy"],["name","h"]],["name","frame"]]]],["stat",["assign",true,["dot",["name","object"],"matrixAutoUpdate"],["name","false"]]],["stat",["assign",true,["dot",["name","object"],"matrixWorldNeedsUpdate"],["name","true"]]]]]]]],["block",[["if",["dot",["name","this"],"JITCompile"],["block",[["if",["binary","instanceof",["name","object"],["dot",["name","THREE"],"Bone"]],["block",[["stat",["assign",true,["dot",["name","object"],"skinMatrix"],["dot",["dot",["name","object"],"animationCache"],"originalMatrix"]]]]],["block",[["stat",["assign",true,["dot",["name","object"],"matrix"],["dot",["dot",["name","object"],"animationCache"],"originalMatrix"]]]]]]]],null],["for",["var",[["t",["num",0]]]],["binary","<",["name","t"],["num",3]],["unary-postfix","++",["name","t"]],["block",[["stat",["assign",true,["name","type"],["sub",["name","types"],["name","t"]]]],["stat",["assign",true,["name","prevKey"],["sub",["dot",["name","animationCache"],"prevKey"],["name","type"]]]],["stat",["assign",true,["name","nextKey"],["sub",["dot",["name","animationCache"],"nextKey"],["name","type"]]]],["if",["binary","<=",["dot",["name","nextKey"],"time"],["name","unloopedCurrentTime"]],["block",[["if",["binary","<",["name","currentTime"],["name","unloopedCurrentTime"]],["block",[["if",["dot",["name","this"],"loop"],["block",[["stat",["assign",true,["name","prevKey"],["sub",["dot",["sub",["dot",["dot",["name","this"],"data"],"hierarchy"],["name","h"]],"keys"],["num",0]]]],["stat",["assign",true,["name","nextKey"],["call",["dot",["name","this"],"getNextKeyWith"],[["name","type"],["name","h"],["num",1]]]]],["while",["binary","<",["dot",["name","nextKey"],"time"],["name","currentTime"]],["block",[["stat",["assign",true,["name","prevKey"],["name","nextKey"]]],["stat",["assign",true,["name","nextKey"],["call",["dot",["name","this"],"getNextKeyWith"],[["name","type"],["name","h"],["binary","+",["dot",["name","nextKey"],"index"],["num",1]]]]]]]]]]],["block",[["stat",["call",["dot",["name","this"],"stop"],[]]],["return",null]]]]]],["block",[["do",["binary","<",["dot",["name","nextKey"],"time"],["name","currentTime"]],["block",[["stat",["assign",true,["name","prevKey"],["name","nextKey"]]],["stat",["assign",true,["name","nextKey"],["call",["dot",["name","this"],"getNextKeyWith"],[["name","type"],["name","h"],["binary","+",["dot",["name","nextKey"],"index"],["num",1]]]]]]]]]]]],["stat",["assign",true,["sub",["dot",["name","animationCache"],"prevKey"],["name","type"]],["name","prevKey"]]],["stat",["assign",true,["sub",["dot",["name","animationCache"],"nextKey"],["name","type"]],["name","nextKey"]]]]],null],["stat",["assign",true,["dot",["name","object"],"matrixAutoUpdate"],["name","true"]]],["stat",["assign",true,["dot",["name","object"],"matrixWorldNeedsUpdate"],["name","true"]]],["stat",["assign",true,["name","scale"],["binary","/",["binary","-",["name","currentTime"],["dot",["name","prevKey"],"time"]],["binary","-",["dot",["name","nextKey"],"time"],["dot",["name","prevKey"],"time"]]]]],["stat",["assign",true,["name","prevXYZ"],["sub",["name","prevKey"],["name","type"]]]],["stat",["assign",true,["name","nextXYZ"],["sub",["name","nextKey"],["name","type"]]]],["if",["binary","||",["binary","<",["name","scale"],["num",0]],["binary",">",["name","scale"],["num",1]]],["block",[["stat",["call",["dot",["name","console"],"log"],[["binary","+",["binary","+",["binary","+",["string","THREE.Animation.update: Warning! Scale out of bounds:"],["name","scale"]],["string"," on bone "]],["name","h"]]]]],["stat",["assign",true,["name","scale"],["conditional",["binary","<",["name","scale"],["num",0]],["num",0],["num",1]]]]]],null],["if",["binary","===",["name","type"],["string","pos"]],["block",[["stat",["assign",true,["name","vector"],["dot",["name","object"],"position"]]],["if",["binary","===",["dot",["name","this"],"interpolationType"],["dot",["dot",["name","THREE"],"AnimationHandler"],"LINEAR"]],["block",[["stat",["assign",true,["dot",["name","vector"],"x"],["binary","+",["sub",["name","prevXYZ"],["num",0]],["binary","*",["binary","-",["sub",["name","nextXYZ"],["num",0]],["sub",["name","prevXYZ"],["num",0]]],["name","scale"]]]]],["stat",["assign",true,["dot",["name","vector"],"y"],["binary","+",["sub",["name","prevXYZ"],["num",1]],["binary","*",["binary","-",["sub",["name","nextXYZ"],["num",1]],["sub",["name","prevXYZ"],["num",1]]],["name","scale"]]]]],["stat",["assign",true,["dot",["name","vector"],"z"],["binary","+",["sub",["name","prevXYZ"],["num",2]],["binary","*",["binary","-",["sub",["name","nextXYZ"],["num",2]],["sub",["name","prevXYZ"],["num",2]]],["name","scale"]]]]]]],["if",["binary","||",["binary","===",["dot",["name","this"],"interpolationType"],["dot",["dot",["name","THREE"],"AnimationHandler"],"CATMULLROM"]],["binary","===",["dot",["name","this"],"interpolationType"],["dot",["dot",["name","THREE"],"AnimationHandler"],"CATMULLROM_FORWARD"]]],["block",[["stat",["assign",true,["sub",["dot",["name","this"],"points"],["num",0]],["sub",["call",["dot",["name","this"],"getPrevKeyWith"],[["string","pos"],["name","h"],["binary","-",["dot",["name","prevKey"],"index"],["num",1]]]],["string","pos"]]]],["stat",["assign",true,["sub",["dot",["name","this"],"points"],["num",1]],["name","prevXYZ"]]],["stat",["assign",true,["sub",["dot",["name","this"],"points"],["num",2]],["name","nextXYZ"]]],["stat",["assign",true,["sub",["dot",["name","this"],"points"],["num",3]],["sub",["call",["dot",["name","this"],"getNextKeyWith"],[["string","pos"],["name","h"],["binary","+",["dot",["name","nextKey"],"index"],["num",1]]]],["string","pos"]]]],["stat",["assign",true,["name","scale"],["binary","+",["binary","*",["name","scale"],["num",0.33]],["num",0.33]]]],["stat",["assign",true,["name","currentPoint"],["call",["dot",["name","this"],"interpolateCatmullRom"],[["dot",["name","this"],"points"],["name","scale"]]]]],["stat",["assign",true,["dot",["name","vector"],"x"],["sub",["name","currentPoint"],["num",0]]]],["stat",["assign",true,["dot",["name","vector"],"y"],["sub",["name","currentPoint"],["num",1]]]],["stat",["assign",true,["dot",["name","vector"],"z"],["sub",["name","currentPoint"],["num",2]]]],["if",["binary","===",["dot",["name","this"],"interpolationType"],["dot",["dot",["name","THREE"],"AnimationHandler"],"CATMULLROM_FORWARD"]],["block",[["stat",["assign",true,["name","forwardPoint"],["call",["dot",["name","this"],"interpolateCatmullRom"],[["dot",["name","this"],"points"],["binary","*",["name","scale"],["num",1.01]]]]]],["stat",["call",["dot",["dot",["name","this"],"target"],"set"],[["sub",["name","forwardPoint"],["num",0]],["sub",["name","forwardPoint"],["num",1]],["sub",["name","forwardPoint"],["num",2]]]]],["stat",["call",["dot",["dot",["name","this"],"target"],"subSelf"],[["name","vector"]]]],["stat",["assign",true,["dot",["dot",["name","this"],"target"],"y"],["num",0]]],["stat",["call",["dot",["dot",["name","this"],"target"],"normalize"],[]]],["stat",["assign",true,["name","angle"],["call",["dot",["name","Math"],"atan2"],[["dot",["dot",["name","this"],"target"],"x"],["dot",["dot",["name","this"],"target"],"z"]]]]],["stat",["call",["dot",["dot",["name","object"],"rotation"],"set"],[["num",0],["name","angle"],["num",0]]]]]],null]]],null]]]],["if",["binary","===",["name","type"],["string","rot"]],["block",[["stat",["call",["dot",["dot",["name","THREE"],"Quaternion"],"slerp"],[["name","prevXYZ"],["name","nextXYZ"],["dot",["name","object"],"quaternion"],["name","scale"]]]]]],["if",["binary","===",["name","type"],["string","scl"]],["block",[["stat",["assign",true,["name","vector"],["dot",["name","object"],"scale"]]],["stat",["assign",true,["dot",["name","vector"],"x"],["binary","+",["sub",["name","prevXYZ"],["num",0]],["binary","*",["binary","-",["sub",["name","nextXYZ"],["num",0]],["sub",["name","prevXYZ"],["num",0]]],["name","scale"]]]]],["stat",["assign",true,["dot",["name","vector"],"y"],["binary","+",["sub",["name","prevXYZ"],["num",1]],["binary","*",["binary","-",["sub",["name","nextXYZ"],["num",1]],["sub",["name","prevXYZ"],["num",1]]],["name","scale"]]]]],["stat",["assign",true,["dot",["name","vector"],"z"],["binary","+",["sub",["name","prevXYZ"],["num",2]],["binary","*",["binary","-",["sub",["name","nextXYZ"],["num",2]],["sub",["name","prevXYZ"],["num",2]]],["name","scale"]]]]]]],null]]]]]]]]]]]],["if",["dot",["name","this"],"JITCompile"],["block",[["if",["binary","===",["sub",["sub",["name","JIThierarchy"],["num",0]],["name","frame"]],["name","undefined"]],["block",[["stat",["call",["dot",["sub",["dot",["name","this"],"hierarchy"],["num",0]],"updateMatrixWorld"],[["name","true"]]]],["for",["var",[["h",["num",0]]]],["binary","<",["name","h"],["dot",["dot",["name","this"],"hierarchy"],"length"]],["unary-postfix","++",["name","h"]],["block",[["if",["binary","instanceof",["sub",["dot",["name","this"],"hierarchy"],["name","h"]],["dot",["name","THREE"],"Bone"]],["block",[["stat",["assign",true,["sub",["sub",["name","JIThierarchy"],["name","h"]],["name","frame"]],["call",["dot",["dot",["sub",["dot",["name","this"],"hierarchy"],["name","h"]],"skinMatrix"],"clone"],[]]]]]],["block",[["stat",["assign",true,["sub",["sub",["name","JIThierarchy"],["name","h"]],["name","frame"]],["call",["dot",["dot",["sub",["dot",["name","this"],"hierarchy"],["name","h"]],"matrix"],"clone"],[]]]]]]]]]]]],null]]],null]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"Animation"],"prototype"],"interpolateCatmullRom"],["function",null,["points","scale"],[["var",[["c",["array",[]]],["v3",["array",[]]],["point"],["intPoint"],["weight"],["w2"],["w3"],["pa"],["pb"],["pc"],["pd"]]],["stat",["assign",true,["name","point"],["binary","*",["binary","-",["dot",["name","points"],"length"],["num",1]],["name","scale"]]]],["stat",["assign",true,["name","intPoint"],["call",["dot",["name","Math"],"floor"],[["name","point"]]]]],["stat",["assign",true,["name","weight"],["binary","-",["name","point"],["name","intPoint"]]]],["stat",["assign",true,["sub",["name","c"],["num",0]],["conditional",["binary","===",["name","intPoint"],["num",0]],["name","intPoint"],["binary","-",["name","intPoint"],["num",1]]]]],["stat",["assign",true,["sub",["name","c"],["num",1]],["name","intPoint"]]],["stat",["assign",true,["sub",["name","c"],["num",2]],["conditional",["binary",">",["name","intPoint"],["binary","-",["dot",["name","points"],"length"],["num",2]]],["name","intPoint"],["binary","+",["name","intPoint"],["num",1]]]]],["stat",["assign",true,["sub",["name","c"],["num",3]],["conditional",["binary",">",["name","intPoint"],["binary","-",["dot",["name","points"],"length"],["num",3]]],["name","intPoint"],["binary","+",["name","intPoint"],["num",2]]]]],["stat",["assign",true,["name","pa"],["sub",["name","points"],["sub",["name","c"],["num",0]]]]],["stat",["assign",true,["name","pb"],["sub",["name","points"],["sub",["name","c"],["num",1]]]]],["stat",["assign",true,["name","pc"],["sub",["name","points"],["sub",["name","c"],["num",2]]]]],["stat",["assign",true,["name","pd"],["sub",["name","points"],["sub",["name","c"],["num",3]]]]],["stat",["assign",true,["name","w2"],["binary","*",["name","weight"],["name","weight"]]]],["stat",["assign",true,["name","w3"],["binary","*",["name","weight"],["name","w2"]]]],["stat",["assign",true,["sub",["name","v3"],["num",0]],["call",["dot",["name","this"],"interpolate"],[["sub",["name","pa"],["num",0]],["sub",["name","pb"],["num",0]],["sub",["name","pc"],["num",0]],["sub",["name","pd"],["num",0]],["name","weight"],["name","w2"],["name","w3"]]]]],["stat",["assign",true,["sub",["name","v3"],["num",1]],["call",["dot",["name","this"],"interpolate"],[["sub",["name","pa"],["num",1]],["sub",["name","pb"],["num",1]],["sub",["name","pc"],["num",1]],["sub",["name","pd"],["num",1]],["name","weight"],["name","w2"],["name","w3"]]]]],["stat",["assign",true,["sub",["name","v3"],["num",2]],["call",["dot",["name","this"],"interpolate"],[["sub",["name","pa"],["num",2]],["sub",["name","pb"],["num",2]],["sub",["name","pc"],["num",2]],["sub",["name","pd"],["num",2]],["name","weight"],["name","w2"],["name","w3"]]]]],["return",["name","v3"]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"Animation"],"prototype"],"interpolate"],["function",null,["p0","p1","p2","p3","t","t2","t3"],[["var",[["v0",["binary","*",["binary","-",["name","p2"],["name","p0"]],["num",0.5]]],["v1",["binary","*",["binary","-",["name","p3"],["name","p1"]],["num",0.5]]]]],["return",["binary","+",["binary","+",["binary","+",["binary","*",["binary","+",["binary","+",["binary","*",["num",2],["binary","-",["name","p1"],["name","p2"]]],["name","v0"]],["name","v1"]],["name","t3"]],["binary","*",["binary","-",["binary","-",["binary","*",["unary-prefix","-",["num",3]],["binary","-",["name","p1"],["name","p2"]]],["binary","*",["num",2],["name","v0"]]],["name","v1"]],["name","t2"]]],["binary","*",["name","v0"],["name","t"]]],["name","p1"]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"Animation"],"prototype"],"getNextKeyWith"],["function",null,["type","h","key"],[["var",[["keys",["dot",["sub",["dot",["dot",["name","this"],"data"],"hierarchy"],["name","h"]],"keys"]]]],["if",["binary","||",["binary","===",["dot",["name","this"],"interpolationType"],["dot",["dot",["name","THREE"],"AnimationHandler"],"CATMULLROM"]],["binary","===",["dot",["name","this"],"interpolationType"],["dot",["dot",["name","THREE"],"AnimationHandler"],"CATMULLROM_FORWARD"]]],["block",[["stat",["assign",true,["name","key"],["conditional",["binary","<",["name","key"],["binary","-",["dot",["name","keys"],"length"],["num",1]]],["name","key"],["binary","-",["dot",["name","keys"],"length"],["num",1]]]]]]],["block",[["stat",["assign",true,["name","key"],["binary","%",["name","key"],["dot",["name","keys"],"length"]]]]]]],["for",null,["binary","<",["name","key"],["dot",["name","keys"],"length"]],["unary-postfix","++",["name","key"]],["block",[["if",["binary","!==",["sub",["sub",["name","keys"],["name","key"]],["name","type"]],["name","undefined"]],["block",[["return",["sub",["name","keys"],["name","key"]]]]],null]]]],["return",["sub",["dot",["sub",["dot",["dot",["name","this"],"data"],"hierarchy"],["name","h"]],"keys"],["num",0]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"Animation"],"prototype"],"getPrevKeyWith"],["function",null,["type","h","key"],[["var",[["keys",["dot",["sub",["dot",["dot",["name","this"],"data"],"hierarchy"],["name","h"]],"keys"]]]],["if",["binary","||",["binary","===",["dot",["name","this"],"interpolationType"],["dot",["dot",["name","THREE"],"AnimationHandler"],"CATMULLROM"]],["binary","===",["dot",["name","this"],"interpolationType"],["dot",["dot",["name","THREE"],"AnimationHandler"],"CATMULLROM_FORWARD"]]],["block",[["stat",["assign",true,["name","key"],["conditional",["binary",">",["name","key"],["num",0]],["name","key"],["num",0]]]]]],["block",[["stat",["assign",true,["name","key"],["conditional",["binary",">=",["name","key"],["num",0]],["name","key"],["binary","+",["name","key"],["dot",["name","keys"],"length"]]]]]]]],["for",null,["binary",">=",["name","key"],["num",0]],["unary-postfix","--",["name","key"]],["block",[["if",["binary","!==",["sub",["sub",["name","keys"],["name","key"]],["name","type"]],["name","undefined"]],["block",[["return",["sub",["name","keys"],["name","key"]]]]],null]]]],["return",["sub",["dot",["sub",["dot",["dot",["name","this"],"data"],"hierarchy"],["name","h"]],"keys"],["binary","-",["dot",["name","keys"],"length"],["num",1]]]]]]]],["stat",["assign",true,["dot",["name","THREE"],"KeyFrameAnimation"],["function",null,["root","data","JITCompile"],[["stat",["assign",true,["dot",["name","this"],"root"],["name","root"]]],["stat",["assign",true,["dot",["name","this"],"data"],["call",["dot",["dot",["name","THREE"],"AnimationHandler"],"get"],[["name","data"]]]]],["stat",["assign",true,["dot",["name","this"],"hierarchy"],["call",["dot",["dot",["name","THREE"],"AnimationHandler"],"parse"],[["name","root"]]]]],["stat",["assign",true,["dot",["name","this"],"currentTime"],["num",0]]],["stat",["assign",true,["dot",["name","this"],"timeScale"],["num",0.001]]],["stat",["assign",true,["dot",["name","this"],"isPlaying"],["name","false"]]],["stat",["assign",true,["dot",["name","this"],"isPaused"],["name","true"]]],["stat",["assign",true,["dot",["name","this"],"loop"],["name","true"]]],["stat",["assign",true,["dot",["name","this"],"JITCompile"],["conditional",["binary","!==",["name","JITCompile"],["name","undefined"]],["name","JITCompile"],["name","true"]]]],["for",["var",[["h",["num",0]],["hl",["dot",["dot",["name","this"],"hierarchy"],"length"]]]],["binary","<",["name","h"],["name","hl"]],["unary-postfix","++",["name","h"]],["block",[["var",[["keys",["dot",["sub",["dot",["dot",["name","this"],"data"],"hierarchy"],["name","h"]],"keys"]],["sids",["dot",["sub",["dot",["dot",["name","this"],"data"],"hierarchy"],["name","h"]],"sids"]],["obj",["sub",["dot",["name","this"],"hierarchy"],["name","h"]]]]],["if",["binary","&&",["dot",["name","keys"],"length"],["name","sids"]],["block",[["for",["var",[["s",["num",0]]]],["binary","<",["name","s"],["dot",["name","sids"],"length"]],["unary-postfix","++",["name","s"]],["block",[["var",[["sid",["sub",["name","sids"],["name","s"]]],["next",["call",["dot",["name","this"],"getNextKeyWith"],[["name","sid"],["name","h"],["num",0]]]]]],["if",["name","next"],["block",[["stat",["call",["dot",["name","next"],"apply"],[["name","sid"]]]]]],null]]]],["stat",["assign",true,["dot",["name","obj"],"matrixAutoUpdate"],["name","false"]]],["stat",["call",["dot",["dot",["sub",["dot",["dot",["name","this"],"data"],"hierarchy"],["name","h"]],"node"],"updateMatrix"],[]]],["stat",["assign",true,["dot",["name","obj"],"matrixWorldNeedsUpdate"],["name","true"]]]]],null]]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"KeyFrameAnimation"],"prototype"],"play"],["function",null,["loop","startTimeMS"],[["if",["unary-prefix","!",["dot",["name","this"],"isPlaying"]],["block",[["stat",["assign",true,["dot",["name","this"],"isPlaying"],["name","true"]]],["stat",["assign",true,["dot",["name","this"],"loop"],["conditional",["binary","!==",["name","loop"],["name","undefined"]],["name","loop"],["name","true"]]]],["stat",["assign",true,["dot",["name","this"],"currentTime"],["conditional",["binary","!==",["name","startTimeMS"],["name","undefined"]],["name","startTimeMS"],["num",0]]]],["stat",["assign",true,["dot",["name","this"],"startTimeMs"],["name","startTimeMS"]]],["stat",["assign",true,["dot",["name","this"],"startTime"],["num",10000000]]],["stat",["assign",true,["dot",["name","this"],"endTime"],["unary-prefix","-",["dot",["name","this"],"startTime"]]]],["var",[["h"],["hl",["dot",["dot",["name","this"],"hierarchy"],"length"]],["object"],["node"]]],["for",["assign",true,["name","h"],["num",0]],["binary","<",["name","h"],["name","hl"]],["unary-postfix","++",["name","h"]],["block",[["stat",["assign",true,["name","object"],["sub",["dot",["name","this"],"hierarchy"],["name","h"]]]],["stat",["assign",true,["name","node"],["sub",["dot",["dot",["name","this"],"data"],"hierarchy"],["name","h"]]]],["stat",["assign",true,["dot",["name","object"],"useQuaternion"],["name","true"]]],["if",["binary","===",["dot",["name","node"],"animationCache"],["name","undefined"]],["block",[["stat",["assign",true,["dot",["name","node"],"animationCache"],["object",[]]]],["stat",["assign",true,["dot",["dot",["name","node"],"animationCache"],"prevKey"],["name","null"]]],["stat",["assign",true,["dot",["dot",["name","node"],"animationCache"],"nextKey"],["name","null"]]],["stat",["assign",true,["dot",["dot",["name","node"],"animationCache"],"originalMatrix"],["conditional",["binary","instanceof",["name","object"],["dot",["name","THREE"],"Bone"]],["dot",["name","object"],"skinMatrix"],["dot",["name","object"],"matrix"]]]]]],null],["var",[["keys",["dot",["sub",["dot",["dot",["name","this"],"data"],"hierarchy"],["name","h"]],"keys"]]]],["if",["dot",["name","keys"],"length"],["block",[["stat",["assign",true,["dot",["dot",["name","node"],"animationCache"],"prevKey"],["sub",["name","keys"],["num",0]]]],["stat",["assign",true,["dot",["dot",["name","node"],"animationCache"],"nextKey"],["sub",["name","keys"],["num",1]]]],["stat",["assign",true,["dot",["name","this"],"startTime"],["call",["dot",["name","Math"],"min"],[["dot",["sub",["name","keys"],["num",0]],"time"],["dot",["name","this"],"startTime"]]]]],["stat",["assign",true,["dot",["name","this"],"endTime"],["call",["dot",["name","Math"],"max"],[["dot",["sub",["name","keys"],["binary","-",["dot",["name","keys"],"length"],["num",1]]],"time"],["dot",["name","this"],"endTime"]]]]]]],null]]]],["stat",["call",["dot",["name","this"],"update"],[["num",0]]]]]],null],["stat",["assign",true,["dot",["name","this"],"isPaused"],["name","false"]]],["stat",["call",["dot",["dot",["name","THREE"],"AnimationHandler"],"addToUpdate"],[["name","this"]]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"KeyFrameAnimation"],"prototype"],"pause"],["function",null,[],[["if",["dot",["name","this"],"isPaused"],["block",[["stat",["call",["dot",["dot",["name","THREE"],"AnimationHandler"],"addToUpdate"],[["name","this"]]]]]],["block",[["stat",["call",["dot",["dot",["name","THREE"],"AnimationHandler"],"removeFromUpdate"],[["name","this"]]]]]]],["stat",["assign",true,["dot",["name","this"],"isPaused"],["unary-prefix","!",["dot",["name","this"],"isPaused"]]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"KeyFrameAnimation"],"prototype"],"stop"],["function",null,[],[["stat",["assign",true,["dot",["name","this"],"isPlaying"],["name","false"]]],["stat",["assign",true,["dot",["name","this"],"isPaused"],["name","false"]]],["stat",["call",["dot",["dot",["name","THREE"],"AnimationHandler"],"removeFromUpdate"],[["name","this"]]]],["for",["var",[["h",["num",0]]]],["binary","<",["name","h"],["dot",["dot",["dot",["name","this"],"data"],"hierarchy"],"length"]],["unary-postfix","++",["name","h"]],["block",[["var",[["obj",["sub",["dot",["name","this"],"hierarchy"],["name","h"]]]]],["var",[["node",["sub",["dot",["dot",["name","this"],"data"],"hierarchy"],["name","h"]]]]],["if",["binary","!==",["dot",["name","node"],"animationCache"],["name","undefined"]],["block",[["var",[["original",["dot",["dot",["name","node"],"animationCache"],"originalMatrix"]]]],["if",["binary","instanceof",["name","obj"],["dot",["name","THREE"],"Bone"]],["block",[["stat",["call",["dot",["name","original"],"copy"],[["dot",["name","obj"],"skinMatrix"]]]],["stat",["assign",true,["dot",["name","obj"],"skinMatrix"],["name","original"]]]]],["block",[["stat",["call",["dot",["name","original"],"copy"],[["dot",["name","obj"],"matrix"]]]],["stat",["assign",true,["dot",["name","obj"],"matrix"],["name","original"]]]]]],["stat",["unary-prefix","delete",["dot",["name","node"],"animationCache"]]]]],null]]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"KeyFrameAnimation"],"prototype"],"update"],["function",null,["deltaTimeMS"],[["if",["unary-prefix","!",["dot",["name","this"],"isPlaying"]],["return",null],null],["var",[["prevKey"],["nextKey"]]],["var",[["object"]]],["var",[["node"]]],["var",[["frame"]]],["var",[["JIThierarchy",["dot",["dot",["dot",["name","this"],"data"],"JIT"],"hierarchy"]]]],["var",[["currentTime"],["unloopedCurrentTime"]]],["var",[["looped"]]],["stat",["assign","+",["dot",["name","this"],"currentTime"],["binary","*",["name","deltaTimeMS"],["dot",["name","this"],"timeScale"]]]],["stat",["assign",true,["name","unloopedCurrentTime"],["dot",["name","this"],"currentTime"]]],["stat",["assign",true,["name","currentTime"],["assign",true,["dot",["name","this"],"currentTime"],["binary","%",["dot",["name","this"],"currentTime"],["dot",["dot",["name","this"],"data"],"length"]]]]],["if",["binary","<",["name","currentTime"],["dot",["name","this"],"startTimeMs"]],["block",[["stat",["assign",true,["name","currentTime"],["assign",true,["dot",["name","this"],"currentTime"],["binary","+",["dot",["name","this"],"startTimeMs"],["name","currentTime"]]]]]]],null],["stat",["assign",true,["name","frame"],["call",["name","parseInt"],[["call",["dot",["name","Math"],"min"],[["binary","*",["name","currentTime"],["dot",["dot",["name","this"],"data"],"fps"]],["binary","*",["dot",["dot",["name","this"],"data"],"length"],["dot",["dot",["name","this"],"data"],"fps"]]]],["num",10]]]]],["stat",["assign",true,["name","looped"],["binary","<",["name","currentTime"],["name","unloopedCurrentTime"]]]],["if",["binary","&&",["name","looped"],["unary-prefix","!",["dot",["name","this"],"loop"]]],["block",[["for",["var",[["h",["num",0]],["hl",["dot",["dot",["name","this"],"hierarchy"],"length"]]]],["binary","<",["name","h"],["name","hl"]],["unary-postfix","++",["name","h"]],["block",[["var",[["keys",["dot",["sub",["dot",["dot",["name","this"],"data"],"hierarchy"],["name","h"]],"keys"]],["sids",["dot",["sub",["dot",["dot",["name","this"],"data"],"hierarchy"],["name","h"]],"sids"]],["end",["binary","-",["dot",["name","keys"],"length"],["num",1]]],["obj",["sub",["dot",["name","this"],"hierarchy"],["name","h"]]]]],["if",["dot",["name","keys"],"length"],["block",[["for",["var",[["s",["num",0]]]],["binary","<",["name","s"],["dot",["name","sids"],"length"]],["unary-postfix","++",["name","s"]],["block",[["var",[["sid",["sub",["name","sids"],["name","s"]]],["prev",["call",["dot",["name","this"],"getPrevKeyWith"],[["name","sid"],["name","h"],["name","end"]]]]]],["if",["name","prev"],["block",[["stat",["call",["dot",["name","prev"],"apply"],[["name","sid"]]]]]],null]]]],["stat",["call",["dot",["dot",["sub",["dot",["dot",["name","this"],"data"],"hierarchy"],["name","h"]],"node"],"updateMatrix"],[]]],["stat",["assign",true,["dot",["name","obj"],"matrixWorldNeedsUpdate"],["name","true"]]]]],null]]]],["stat",["call",["dot",["name","this"],"stop"],[]]],["return",null]]],null],["if",["binary","<",["name","currentTime"],["dot",["name","this"],"startTime"]],["block",[["return",null]]],null],["for",["var",[["h",["num",0]],["hl",["dot",["dot",["name","this"],"hierarchy"],"length"]]]],["binary","<",["name","h"],["name","hl"]],["unary-postfix","++",["name","h"]],["block",[["stat",["assign",true,["name","object"],["sub",["dot",["name","this"],"hierarchy"],["name","h"]]]],["stat",["assign",true,["name","node"],["sub",["dot",["dot",["name","this"],"data"],"hierarchy"],["name","h"]]]],["var",[["keys",["dot",["name","node"],"keys"]],["animationCache",["dot",["name","node"],"animationCache"]]]],["if",["binary","&&",["dot",["name","this"],"JITCompile"],["binary","!==",["sub",["sub",["name","JIThierarchy"],["name","h"]],["name","frame"]],["name","undefined"]]],["block",[["if",["binary","instanceof",["name","object"],["dot",["name","THREE"],"Bone"]],["block",[["stat",["assign",true,["dot",["name","object"],"skinMatrix"],["sub",["sub",["name","JIThierarchy"],["name","h"]],["name","frame"]]]],["stat",["assign",true,["dot",["name","object"],"matrixWorldNeedsUpdate"],["name","false"]]]]],["block",[["stat",["assign",true,["dot",["name","object"],"matrix"],["sub",["sub",["name","JIThierarchy"],["name","h"]],["name","frame"]]]],["stat",["assign",true,["dot",["name","object"],"matrixWorldNeedsUpdate"],["name","true"]]]]]]]],["if",["dot",["name","keys"],"length"],["block",[["if",["binary","&&",["dot",["name","this"],"JITCompile"],["name","animationCache"]],["block",[["if",["binary","instanceof",["name","object"],["dot",["name","THREE"],"Bone"]],["block",[["stat",["assign",true,["dot",["name","object"],"skinMatrix"],["dot",["name","animationCache"],"originalMatrix"]]]]],["block",[["stat",["assign",true,["dot",["name","object"],"matrix"],["dot",["name","animationCache"],"originalMatrix"]]]]]]]],null],["stat",["assign",true,["name","prevKey"],["dot",["name","animationCache"],"prevKey"]]],["stat",["assign",true,["name","nextKey"],["dot",["name","animationCache"],"nextKey"]]],["if",["binary","&&",["name","prevKey"],["name","nextKey"]],["block",[["if",["binary","<=",["dot",["name","nextKey"],"time"],["name","unloopedCurrentTime"]],["block",[["if",["binary","&&",["name","looped"],["dot",["name","this"],"loop"]],["block",[["stat",["assign",true,["name","prevKey"],["sub",["name","keys"],["num",0]]]],["stat",["assign",true,["name","nextKey"],["sub",["name","keys"],["num",1]]]],["while",["binary","<",["dot",["name","nextKey"],"time"],["name","currentTime"]],["block",[["stat",["assign",true,["name","prevKey"],["name","nextKey"]]],["stat",["assign",true,["name","nextKey"],["sub",["name","keys"],["binary","+",["dot",["name","prevKey"],"index"],["num",1]]]]]]]]]],["if",["unary-prefix","!",["name","looped"]],["block",[["var",[["lastIndex",["binary","-",["dot",["name","keys"],"length"],["num",1]]]]],["while",["binary","&&",["binary","<",["dot",["name","nextKey"],"time"],["name","currentTime"]],["binary","!==",["dot",["name","nextKey"],"index"],["name","lastIndex"]]],["block",[["stat",["assign",true,["name","prevKey"],["name","nextKey"]]],["stat",["assign",true,["name","nextKey"],["sub",["name","keys"],["binary","+",["dot",["name","prevKey"],"index"],["num",1]]]]]]]]]],null]],["stat",["assign",true,["dot",["name","animationCache"],"prevKey"],["name","prevKey"]]],["stat",["assign",true,["dot",["name","animationCache"],"nextKey"],["name","nextKey"]]]]],null],["if",["binary",">=",["dot",["name","nextKey"],"time"],["name","currentTime"]],["stat",["call",["dot",["name","prevKey"],"interpolate"],[["name","nextKey"],["name","currentTime"]]]],["stat",["call",["dot",["name","prevKey"],"interpolate"],[["name","nextKey"],["dot",["name","nextKey"],"time"]]]]]]],null],["stat",["call",["dot",["dot",["sub",["dot",["dot",["name","this"],"data"],"hierarchy"],["name","h"]],"node"],"updateMatrix"],[]]],["stat",["assign",true,["dot",["name","object"],"matrixWorldNeedsUpdate"],["name","true"]]]]],null]]]]],["if",["dot",["name","this"],"JITCompile"],["block",[["if",["binary","===",["sub",["sub",["name","JIThierarchy"],["num",0]],["name","frame"]],["name","undefined"]],["block",[["stat",["call",["dot",["sub",["dot",["name","this"],"hierarchy"],["num",0]],"updateMatrixWorld"],[["name","true"]]]],["for",["var",[["h",["num",0]]]],["binary","<",["name","h"],["dot",["dot",["name","this"],"hierarchy"],"length"]],["unary-postfix","++",["name","h"]],["block",[["if",["binary","instanceof",["sub",["dot",["name","this"],"hierarchy"],["name","h"]],["dot",["name","THREE"],"Bone"]],["block",[["stat",["assign",true,["sub",["sub",["name","JIThierarchy"],["name","h"]],["name","frame"]],["call",["dot",["dot",["sub",["dot",["name","this"],"hierarchy"],["name","h"]],"skinMatrix"],"clone"],[]]]]]],["block",[["stat",["assign",true,["sub",["sub",["name","JIThierarchy"],["name","h"]],["name","frame"]],["call",["dot",["dot",["sub",["dot",["name","this"],"hierarchy"],["name","h"]],"matrix"],"clone"],[]]]]]]]]]]]],null]]],null]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"KeyFrameAnimation"],"prototype"],"getNextKeyWith"],["function",null,["sid","h","key"],[["var",[["keys",["dot",["sub",["dot",["dot",["name","this"],"data"],"hierarchy"],["name","h"]],"keys"]]]],["stat",["assign",true,["name","key"],["binary","%",["name","key"],["dot",["name","keys"],"length"]]]],["for",null,["binary","<",["name","key"],["dot",["name","keys"],"length"]],["unary-postfix","++",["name","key"]],["block",[["if",["call",["dot",["sub",["name","keys"],["name","key"]],"hasTarget"],[["name","sid"]]],["block",[["return",["sub",["name","keys"],["name","key"]]]]],null]]]],["return",["sub",["name","keys"],["num",0]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"KeyFrameAnimation"],"prototype"],"getPrevKeyWith"],["function",null,["sid","h","key"],[["var",[["keys",["dot",["sub",["dot",["dot",["name","this"],"data"],"hierarchy"],["name","h"]],"keys"]]]],["stat",["assign",true,["name","key"],["conditional",["binary",">=",["name","key"],["num",0]],["name","key"],["binary","+",["name","key"],["dot",["name","keys"],"length"]]]]],["for",null,["binary",">=",["name","key"],["num",0]],["unary-postfix","--",["name","key"]],["block",[["if",["call",["dot",["sub",["name","keys"],["name","key"]],"hasTarget"],[["name","sid"]]],["block",[["return",["sub",["name","keys"],["name","key"]]]]],null]]]],["return",["sub",["name","keys"],["binary","-",["dot",["name","keys"],"length"],["num",1]]]]]]]],["stat",["assign",true,["dot",["name","THREE"],"CubeCamera"],["function",null,["near","far","cubeResolution"],[["stat",["call",["dot",["dot",["name","THREE"],"Object3D"],"call"],[["name","this"]]]],["var",[["fov",["num",90]],["aspect",["num",1]]]],["var",[["cameraPX",["new",["dot",["name","THREE"],"PerspectiveCamera"],[["name","fov"],["name","aspect"],["name","near"],["name","far"]]]]]],["stat",["call",["dot",["dot",["name","cameraPX"],"up"],"set"],[["num",0],["unary-prefix","-",["num",1]],["num",0]]]],["stat",["call",["dot",["name","cameraPX"],"lookAt"],[["new",["dot",["name","THREE"],"Vector3"],[["num",1],["num",0],["num",0]]]]]],["stat",["call",["dot",["name","this"],"add"],[["name","cameraPX"]]]],["var",[["cameraNX",["new",["dot",["name","THREE"],"PerspectiveCamera"],[["name","fov"],["name","aspect"],["name","near"],["name","far"]]]]]],["stat",["call",["dot",["dot",["name","cameraNX"],"up"],"set"],[["num",0],["unary-prefix","-",["num",1]],["num",0]]]],["stat",["call",["dot",["name","cameraNX"],"lookAt"],[["new",["dot",["name","THREE"],"Vector3"],[["unary-prefix","-",["num",1]],["num",0],["num",0]]]]]],["stat",["call",["dot",["name","this"],"add"],[["name","cameraNX"]]]],["var",[["cameraPY",["new",["dot",["name","THREE"],"PerspectiveCamera"],[["name","fov"],["name","aspect"],["name","near"],["name","far"]]]]]],["stat",["call",["dot",["dot",["name","cameraPY"],"up"],"set"],[["num",0],["num",0],["num",1]]]],["stat",["call",["dot",["name","cameraPY"],"lookAt"],[["new",["dot",["name","THREE"],"Vector3"],[["num",0],["num",1],["num",0]]]]]],["stat",["call",["dot",["name","this"],"add"],[["name","cameraPY"]]]],["var",[["cameraNY",["new",["dot",["name","THREE"],"PerspectiveCamera"],[["name","fov"],["name","aspect"],["name","near"],["name","far"]]]]]],["stat",["call",["dot",["dot",["name","cameraNY"],"up"],"set"],[["num",0],["num",0],["unary-prefix","-",["num",1]]]]],["stat",["call",["dot",["name","cameraNY"],"lookAt"],[["new",["dot",["name","THREE"],"Vector3"],[["num",0],["unary-prefix","-",["num",1]],["num",0]]]]]],["stat",["call",["dot",["name","this"],"add"],[["name","cameraNY"]]]],["var",[["cameraPZ",["new",["dot",["name","THREE"],"PerspectiveCamera"],[["name","fov"],["name","aspect"],["name","near"],["name","far"]]]]]],["stat",["call",["dot",["dot",["name","cameraPZ"],"up"],"set"],[["num",0],["unary-prefix","-",["num",1]],["num",0]]]],["stat",["call",["dot",["name","cameraPZ"],"lookAt"],[["new",["dot",["name","THREE"],"Vector3"],[["num",0],["num",0],["num",1]]]]]],["stat",["call",["dot",["name","this"],"add"],[["name","cameraPZ"]]]],["var",[["cameraNZ",["new",["dot",["name","THREE"],"PerspectiveCamera"],[["name","fov"],["name","aspect"],["name","near"],["name","far"]]]]]],["stat",["call",["dot",["dot",["name","cameraNZ"],"up"],"set"],[["num",0],["unary-prefix","-",["num",1]],["num",0]]]],["stat",["call",["dot",["name","cameraNZ"],"lookAt"],[["new",["dot",["name","THREE"],"Vector3"],[["num",0],["num",0],["unary-prefix","-",["num",1]]]]]]],["stat",["call",["dot",["name","this"],"add"],[["name","cameraNZ"]]]],["stat",["assign",true,["dot",["name","this"],"renderTarget"],["new",["dot",["name","THREE"],"WebGLRenderTargetCube"],[["name","cubeResolution"],["name","cubeResolution"],["object",[["format",["dot",["name","THREE"],"RGBFormat"]],["magFilter",["dot",["name","THREE"],"LinearFilter"]],["minFilter",["dot",["name","THREE"],"LinearFilter"]]]]]]]],["stat",["assign",true,["dot",["name","this"],"updateCubeMap"],["function",null,["renderer","scene"],[["var",[["renderTarget",["dot",["name","this"],"renderTarget"]]]],["var",[["generateMipmaps",["dot",["name","renderTarget"],"generateMipmaps"]]]],["stat",["assign",true,["dot",["name","renderTarget"],"generateMipmaps"],["name","false"]]],["stat",["assign",true,["dot",["name","renderTarget"],"activeCubeFace"],["num",0]]],["stat",["call",["dot",["name","renderer"],"render"],[["name","scene"],["name","cameraPX"],["name","renderTarget"]]]],["stat",["assign",true,["dot",["name","renderTarget"],"activeCubeFace"],["num",1]]],["stat",["call",["dot",["name","renderer"],"render"],[["name","scene"],["name","cameraNX"],["name","renderTarget"]]]],["stat",["assign",true,["dot",["name","renderTarget"],"activeCubeFace"],["num",2]]],["stat",["call",["dot",["name","renderer"],"render"],[["name","scene"],["name","cameraPY"],["name","renderTarget"]]]],["stat",["assign",true,["dot",["name","renderTarget"],"activeCubeFace"],["num",3]]],["stat",["call",["dot",["name","renderer"],"render"],[["name","scene"],["name","cameraNY"],["name","renderTarget"]]]],["stat",["assign",true,["dot",["name","renderTarget"],"activeCubeFace"],["num",4]]],["stat",["call",["dot",["name","renderer"],"render"],[["name","scene"],["name","cameraPZ"],["name","renderTarget"]]]],["stat",["assign",true,["dot",["name","renderTarget"],"generateMipmaps"],["name","generateMipmaps"]]],["stat",["assign",true,["dot",["name","renderTarget"],"activeCubeFace"],["num",5]]],["stat",["call",["dot",["name","renderer"],"render"],[["name","scene"],["name","cameraNZ"],["name","renderTarget"]]]]]]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"CubeCamera"],"prototype"],["new",["dot",["name","THREE"],"Object3D"],[]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"CubeCamera"],"prototype"],"constructor"],["dot",["name","THREE"],"CubeCamera"]]],["stat",["assign",true,["dot",["name","THREE"],"CombinedCamera"],["function",null,["width","height","fov","near","far","orthonear","orthofar"],[["stat",["call",["dot",["dot",["name","THREE"],"Camera"],"call"],[["name","this"]]]],["stat",["assign",true,["dot",["name","this"],"fov"],["name","fov"]]],["stat",["assign",true,["dot",["name","this"],"left"],["binary","/",["unary-prefix","-",["name","width"]],["num",2]]]],["stat",["assign",true,["dot",["name","this"],"right"],["binary","/",["name","width"],["num",2]]]],["stat",["assign",true,["dot",["name","this"],"top"],["binary","/",["name","height"],["num",2]]]],["stat",["assign",true,["dot",["name","this"],"bottom"],["binary","/",["unary-prefix","-",["name","height"]],["num",2]]]],["stat",["assign",true,["dot",["name","this"],"cameraO"],["new",["dot",["name","THREE"],"OrthographicCamera"],[["binary","/",["name","width"],["unary-prefix","-",["num",2]]],["binary","/",["name","width"],["num",2]],["binary","/",["name","height"],["num",2]],["binary","/",["name","height"],["unary-prefix","-",["num",2]]],["name","orthonear"],["name","orthofar"]]]]],["stat",["assign",true,["dot",["name","this"],"cameraP"],["new",["dot",["name","THREE"],"PerspectiveCamera"],[["name","fov"],["binary","/",["name","width"],["name","height"]],["name","near"],["name","far"]]]]],["stat",["assign",true,["dot",["name","this"],"zoom"],["num",1]]],["stat",["call",["dot",["name","this"],"toPerspective"],[]]],["var",[["aspect",["binary","/",["name","width"],["name","height"]]]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"CombinedCamera"],"prototype"],["new",["dot",["name","THREE"],"Camera"],[]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"CombinedCamera"],"prototype"],"constructor"],["dot",["name","THREE"],"CombinedCamera"]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"CombinedCamera"],"prototype"],"toPerspective"],["function",null,[],[["stat",["assign",true,["dot",["name","this"],"near"],["dot",["dot",["name","this"],"cameraP"],"near"]]],["stat",["assign",true,["dot",["name","this"],"far"],["dot",["dot",["name","this"],"cameraP"],"far"]]],["stat",["assign",true,["dot",["dot",["name","this"],"cameraP"],"fov"],["binary","/",["dot",["name","this"],"fov"],["dot",["name","this"],"zoom"]]]],["stat",["call",["dot",["dot",["name","this"],"cameraP"],"updateProjectionMatrix"],[]]],["stat",["assign",true,["dot",["name","this"],"projectionMatrix"],["dot",["dot",["name","this"],"cameraP"],"projectionMatrix"]]],["stat",["assign",true,["dot",["name","this"],"inPersepectiveMode"],["name","true"]]],["stat",["assign",true,["dot",["name","this"],"inOrthographicMode"],["name","false"]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"CombinedCamera"],"prototype"],"toOrthographic"],["function",null,[],[["var",[["fov",["dot",["name","this"],"fov"]]]],["var",[["aspect",["dot",["dot",["name","this"],"cameraP"],"aspect"]]]],["var",[["near",["dot",["dot",["name","this"],"cameraP"],"near"]]]],["var",[["far",["dot",["dot",["name","this"],"cameraP"],"far"]]]],["var",[["hyperfocus",["binary","/",["binary","+",["name","near"],["name","far"]],["num",2]]]]],["var",[["halfHeight",["binary","*",["call",["dot",["name","Math"],"tan"],[["binary","/",["name","fov"],["num",2]]]],["name","hyperfocus"]]]]],["var",[["planeHeight",["binary","*",["num",2],["name","halfHeight"]]]]],["var",[["planeWidth",["binary","*",["name","planeHeight"],["name","aspect"]]]]],["var",[["halfWidth",["binary","/",["name","planeWidth"],["num",2]]]]],["stat",["assign","/",["name","halfHeight"],["dot",["name","this"],"zoom"]]],["stat",["assign","/",["name","halfWidth"],["dot",["name","this"],"zoom"]]],["stat",["assign",true,["dot",["dot",["name","this"],"cameraO"],"left"],["unary-prefix","-",["name","halfWidth"]]]],["stat",["assign",true,["dot",["dot",["name","this"],"cameraO"],"right"],["name","halfWidth"]]],["stat",["assign",true,["dot",["dot",["name","this"],"cameraO"],"top"],["name","halfHeight"]]],["stat",["assign",true,["dot",["dot",["name","this"],"cameraO"],"bottom"],["unary-prefix","-",["name","halfHeight"]]]],["stat",["call",["dot",["dot",["name","this"],"cameraO"],"updateProjectionMatrix"],[]]],["stat",["assign",true,["dot",["name","this"],"near"],["dot",["dot",["name","this"],"cameraO"],"near"]]],["stat",["assign",true,["dot",["name","this"],"far"],["dot",["dot",["name","this"],"cameraO"],"far"]]],["stat",["assign",true,["dot",["name","this"],"projectionMatrix"],["dot",["dot",["name","this"],"cameraO"],"projectionMatrix"]]],["stat",["assign",true,["dot",["name","this"],"inPersepectiveMode"],["name","false"]]],["stat",["assign",true,["dot",["name","this"],"inOrthographicMode"],["name","true"]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"CombinedCamera"],"prototype"],"setSize"],["function",null,["width","height"],[["stat",["assign",true,["dot",["dot",["name","this"],"cameraP"],"aspect"],["binary","/",["name","width"],["name","height"]]]],["stat",["assign",true,["dot",["name","this"],"left"],["binary","/",["unary-prefix","-",["name","width"]],["num",2]]]],["stat",["assign",true,["dot",["name","this"],"right"],["binary","/",["name","width"],["num",2]]]],["stat",["assign",true,["dot",["name","this"],"top"],["binary","/",["name","height"],["num",2]]]],["stat",["assign",true,["dot",["name","this"],"bottom"],["binary","/",["unary-prefix","-",["name","height"]],["num",2]]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"CombinedCamera"],"prototype"],"setFov"],["function",null,["fov"],[["stat",["assign",true,["dot",["name","this"],"fov"],["name","fov"]]],["if",["dot",["name","this"],"inPersepectiveMode"],["block",[["stat",["call",["dot",["name","this"],"toPerspective"],[]]]]],["block",[["stat",["call",["dot",["name","this"],"toOrthographic"],[]]]]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"CombinedCamera"],"prototype"],"updateProjectionMatrix"],["function",null,[],[["if",["dot",["name","this"],"inPersepectiveMode"],["block",[["stat",["call",["dot",["name","this"],"toPerspective"],[]]]]],["block",[["stat",["call",["dot",["name","this"],"toPerspective"],[]]],["stat",["call",["dot",["name","this"],"toOrthographic"],[]]]]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"CombinedCamera"],"prototype"],"setLens"],["function",null,["focalLength","frameHeight"],[["stat",["assign",true,["name","frameHeight"],["conditional",["binary","!==",["name","frameHeight"],["name","undefined"]],["name","frameHeight"],["num",24]]]],["var",[["fov",["binary","*",["binary","*",["num",2],["call",["dot",["name","Math"],"atan"],[["binary","/",["name","frameHeight"],["binary","*",["name","focalLength"],["num",2]]]]]],["binary","/",["num",180],["dot",["name","Math"],"PI"]]]]]],["stat",["call",["dot",["name","this"],"setFov"],[["name","fov"]]]],["return",["name","fov"]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"CombinedCamera"],"prototype"],"setZoom"],["function",null,["zoom"],[["stat",["assign",true,["dot",["name","this"],"zoom"],["name","zoom"]]],["if",["dot",["name","this"],"inPersepectiveMode"],["block",[["stat",["call",["dot",["name","this"],"toPerspective"],[]]]]],["block",[["stat",["call",["dot",["name","this"],"toOrthographic"],[]]]]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"CombinedCamera"],"prototype"],"toFrontView"],["function",null,[],[["stat",["assign",true,["dot",["dot",["name","this"],"rotation"],"x"],["num",0]]],["stat",["assign",true,["dot",["dot",["name","this"],"rotation"],"y"],["num",0]]],["stat",["assign",true,["dot",["dot",["name","this"],"rotation"],"z"],["num",0]]],["stat",["assign",true,["dot",["name","this"],"rotationAutoUpdate"],["name","false"]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"CombinedCamera"],"prototype"],"toBackView"],["function",null,[],[["stat",["assign",true,["dot",["dot",["name","this"],"rotation"],"x"],["num",0]]],["stat",["assign",true,["dot",["dot",["name","this"],"rotation"],"y"],["dot",["name","Math"],"PI"]]],["stat",["assign",true,["dot",["dot",["name","this"],"rotation"],"z"],["num",0]]],["stat",["assign",true,["dot",["name","this"],"rotationAutoUpdate"],["name","false"]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"CombinedCamera"],"prototype"],"toLeftView"],["function",null,[],[["stat",["assign",true,["dot",["dot",["name","this"],"rotation"],"x"],["num",0]]],["stat",["assign",true,["dot",["dot",["name","this"],"rotation"],"y"],["binary","/",["unary-prefix","-",["dot",["name","Math"],"PI"]],["num",2]]]],["stat",["assign",true,["dot",["dot",["name","this"],"rotation"],"z"],["num",0]]],["stat",["assign",true,["dot",["name","this"],"rotationAutoUpdate"],["name","false"]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"CombinedCamera"],"prototype"],"toRightView"],["function",null,[],[["stat",["assign",true,["dot",["dot",["name","this"],"rotation"],"x"],["num",0]]],["stat",["assign",true,["dot",["dot",["name","this"],"rotation"],"y"],["binary","/",["dot",["name","Math"],"PI"],["num",2]]]],["stat",["assign",true,["dot",["dot",["name","this"],"rotation"],"z"],["num",0]]],["stat",["assign",true,["dot",["name","this"],"rotationAutoUpdate"],["name","false"]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"CombinedCamera"],"prototype"],"toTopView"],["function",null,[],[["stat",["assign",true,["dot",["dot",["name","this"],"rotation"],"x"],["binary","/",["unary-prefix","-",["dot",["name","Math"],"PI"]],["num",2]]]],["stat",["assign",true,["dot",["dot",["name","this"],"rotation"],"y"],["num",0]]],["stat",["assign",true,["dot",["dot",["name","this"],"rotation"],"z"],["num",0]]],["stat",["assign",true,["dot",["name","this"],"rotationAutoUpdate"],["name","false"]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"CombinedCamera"],"prototype"],"toBottomView"],["function",null,[],[["stat",["assign",true,["dot",["dot",["name","this"],"rotation"],"x"],["binary","/",["dot",["name","Math"],"PI"],["num",2]]]],["stat",["assign",true,["dot",["dot",["name","this"],"rotation"],"y"],["num",0]]],["stat",["assign",true,["dot",["dot",["name","this"],"rotation"],"z"],["num",0]]],["stat",["assign",true,["dot",["name","this"],"rotationAutoUpdate"],["name","false"]]]]]]],["stat",["assign",true,["dot",["name","THREE"],"FirstPersonControls"],["function",null,["object","domElement"],[["stat",["assign",true,["dot",["name","this"],"object"],["name","object"]]],["stat",["assign",true,["dot",["name","this"],"target"],["new",["dot",["name","THREE"],"Vector3"],[["num",0],["num",0],["num",0]]]]],["stat",["assign",true,["dot",["name","this"],"domElement"],["conditional",["binary","!==",["name","domElement"],["name","undefined"]],["name","domElement"],["name","document"]]]],["stat",["assign",true,["dot",["name","this"],"movementSpeed"],["num",1]]],["stat",["assign",true,["dot",["name","this"],"lookSpeed"],["num",0.005]]],["stat",["assign",true,["dot",["name","this"],"noFly"],["name","false"]]],["stat",["assign",true,["dot",["name","this"],"lookVertical"],["name","true"]]],["stat",["assign",true,["dot",["name","this"],"autoForward"],["name","false"]]],["stat",["assign",true,["dot",["name","this"],"activeLook"],["name","true"]]],["stat",["assign",true,["dot",["name","this"],"heightSpeed"],["name","false"]]],["stat",["assign",true,["dot",["name","this"],"heightCoef"],["num",1]]],["stat",["assign",true,["dot",["name","this"],"heightMin"],["num",0]]],["stat",["assign",true,["dot",["name","this"],"constrainVertical"],["name","false"]]],["stat",["assign",true,["dot",["name","this"],"verticalMin"],["num",0]]],["stat",["assign",true,["dot",["name","this"],"verticalMax"],["dot",["name","Math"],"PI"]]],["stat",["assign",true,["dot",["name","this"],"autoSpeedFactor"],["num",0]]],["stat",["assign",true,["dot",["name","this"],"mouseX"],["num",0]]],["stat",["assign",true,["dot",["name","this"],"mouseY"],["num",0]]],["stat",["assign",true,["dot",["name","this"],"lat"],["num",0]]],["stat",["assign",true,["dot",["name","this"],"lon"],["num",0]]],["stat",["assign",true,["dot",["name","this"],"phi"],["num",0]]],["stat",["assign",true,["dot",["name","this"],"theta"],["num",0]]],["stat",["assign",true,["dot",["name","this"],"moveForward"],["name","false"]]],["stat",["assign",true,["dot",["name","this"],"moveBackward"],["name","false"]]],["stat",["assign",true,["dot",["name","this"],"moveLeft"],["name","false"]]],["stat",["assign",true,["dot",["name","this"],"moveRight"],["name","false"]]],["stat",["assign",true,["dot",["name","this"],"freeze"],["name","false"]]],["stat",["assign",true,["dot",["name","this"],"mouseDragOn"],["name","false"]]],["if",["binary","===",["dot",["name","this"],"domElement"],["name","document"]],["block",[["stat",["assign",true,["dot",["name","this"],"viewHalfX"],["binary","/",["dot",["name","window"],"innerWidth"],["num",2]]]],["stat",["assign",true,["dot",["name","this"],"viewHalfY"],["binary","/",["dot",["name","window"],"innerHeight"],["num",2]]]]]],["block",[["stat",["assign",true,["dot",["name","this"],"viewHalfX"],["binary","/",["dot",["dot",["name","this"],"domElement"],"offsetWidth"],["num",2]]]],["stat",["assign",true,["dot",["name","this"],"viewHalfY"],["binary","/",["dot",["dot",["name","this"],"domElement"],"offsetHeight"],["num",2]]]],["stat",["call",["dot",["dot",["name","this"],"domElement"],"setAttribute"],[["string","tabindex"],["unary-prefix","-",["num",1]]]]]]]],["stat",["assign",true,["dot",["name","this"],"onMouseDown"],["function",null,["event"],[["if",["binary","!==",["dot",["name","this"],"domElement"],["name","document"]],["block",[["stat",["call",["dot",["dot",["name","this"],"domElement"],"focus"],[]]]]],null],["stat",["call",["dot",["name","event"],"preventDefault"],[]]],["stat",["call",["dot",["name","event"],"stopPropagation"],[]]],["if",["dot",["name","this"],"activeLook"],["block",[["switch",["dot",["name","event"],"button"],[[["num",0],[["stat",["assign",true,["dot",["name","this"],"moveForward"],["name","true"]]],["break",null]]],[["num",2],[["stat",["assign",true,["dot",["name","this"],"moveBackward"],["name","true"]]],["break",null]]]]]]],null],["stat",["assign",true,["dot",["name","this"],"mouseDragOn"],["name","true"]]]]]]],["stat",["assign",true,["dot",["name","this"],"onMouseUp"],["function",null,["event"],[["stat",["call",["dot",["name","event"],"preventDefault"],[]]],["stat",["call",["dot",["name","event"],"stopPropagation"],[]]],["if",["dot",["name","this"],"activeLook"],["block",[["switch",["dot",["name","event"],"button"],[[["num",0],[["stat",["assign",true,["dot",["name","this"],"moveForward"],["name","false"]]],["break",null]]],[["num",2],[["stat",["assign",true,["dot",["name","this"],"moveBackward"],["name","false"]]],["break",null]]]]]]],null],["stat",["assign",true,["dot",["name","this"],"mouseDragOn"],["name","false"]]]]]]],["stat",["assign",true,["dot",["name","this"],"onMouseMove"],["function",null,["event"],[["if",["binary","===",["dot",["name","this"],"domElement"],["name","document"]],["block",[["stat",["assign",true,["dot",["name","this"],"mouseX"],["binary","-",["dot",["name","event"],"pageX"],["dot",["name","this"],"viewHalfX"]]]],["stat",["assign",true,["dot",["name","this"],"mouseY"],["binary","-",["dot",["name","event"],"pageY"],["dot",["name","this"],"viewHalfY"]]]]]],["block",[["stat",["assign",true,["dot",["name","this"],"mouseX"],["binary","-",["binary","-",["dot",["name","event"],"pageX"],["dot",["dot",["name","this"],"domElement"],"offsetLeft"]],["dot",["name","this"],"viewHalfX"]]]],["stat",["assign",true,["dot",["name","this"],"mouseY"],["binary","-",["binary","-",["dot",["name","event"],"pageY"],["dot",["dot",["name","this"],"domElement"],"offsetTop"]],["dot",["name","this"],"viewHalfY"]]]]]]]]]]],["stat",["assign",true,["dot",["name","this"],"onKeyDown"],["function",null,["event"],[["switch",["dot",["name","event"],"keyCode"],[[["num",38],[]],[["num",87],[["stat",["assign",true,["dot",["name","this"],"moveForward"],["name","true"]]],["break",null]]],[["num",37],[]],[["num",65],[["stat",["assign",true,["dot",["name","this"],"moveLeft"],["name","true"]]],["break",null]]],[["num",40],[]],[["num",83],[["stat",["assign",true,["dot",["name","this"],"moveBackward"],["name","true"]]],["break",null]]],[["num",39],[]],[["num",68],[["stat",["assign",true,["dot",["name","this"],"moveRight"],["name","true"]]],["break",null]]],[["num",82],[["stat",["assign",true,["dot",["name","this"],"moveUp"],["name","true"]]],["break",null]]],[["num",70],[["stat",["assign",true,["dot",["name","this"],"moveDown"],["name","true"]]],["break",null]]],[["num",81],[["stat",["assign",true,["dot",["name","this"],"freeze"],["unary-prefix","!",["dot",["name","this"],"freeze"]]]],["break",null]]]]]]]]],["stat",["assign",true,["dot",["name","this"],"onKeyUp"],["function",null,["event"],[["switch",["dot",["name","event"],"keyCode"],[[["num",38],[]],[["num",87],[["stat",["assign",true,["dot",["name","this"],"moveForward"],["name","false"]]],["break",null]]],[["num",37],[]],[["num",65],[["stat",["assign",true,["dot",["name","this"],"moveLeft"],["name","false"]]],["break",null]]],[["num",40],[]],[["num",83],[["stat",["assign",true,["dot",["name","this"],"moveBackward"],["name","false"]]],["break",null]]],[["num",39],[]],[["num",68],[["stat",["assign",true,["dot",["name","this"],"moveRight"],["name","false"]]],["break",null]]],[["num",82],[["stat",["assign",true,["dot",["name","this"],"moveUp"],["name","false"]]],["break",null]]],[["num",70],[["stat",["assign",true,["dot",["name","this"],"moveDown"],["name","false"]]],["break",null]]]]]]]]],["stat",["assign",true,["dot",["name","this"],"update"],["function",null,["delta"],[["var",[["actualMoveSpeed",["num",0]]]],["if",["dot",["name","this"],"freeze"],["block",[["return",null]]],["block",[["if",["dot",["name","this"],"heightSpeed"],["block",[["var",[["y",["call",["dot",["dot",["name","THREE"],"Math"],"clamp"],[["dot",["dot",["dot",["name","this"],"object"],"position"],"y"],["dot",["name","this"],"heightMin"],["dot",["name","this"],"heightMax"]]]]]],["var",[["heightDelta",["binary","-",["name","y"],["dot",["name","this"],"heightMin"]]]]],["stat",["assign",true,["dot",["name","this"],"autoSpeedFactor"],["binary","*",["name","delta"],["binary","*",["name","heightDelta"],["dot",["name","this"],"heightCoef"]]]]]]],["block",[["stat",["assign",true,["dot",["name","this"],"autoSpeedFactor"],["num",0]]]]]],["stat",["assign",true,["name","actualMoveSpeed"],["binary","*",["name","delta"],["dot",["name","this"],"movementSpeed"]]]],["if",["binary","||",["dot",["name","this"],"moveForward"],["binary","&&",["dot",["name","this"],"autoForward"],["unary-prefix","!",["dot",["name","this"],"moveBackward"]]]],["stat",["call",["dot",["dot",["name","this"],"object"],"translateZ"],[["unary-prefix","-",["binary","+",["name","actualMoveSpeed"],["dot",["name","this"],"autoSpeedFactor"]]]]]],null],["if",["dot",["name","this"],"moveBackward"],["stat",["call",["dot",["dot",["name","this"],"object"],"translateZ"],[["name","actualMoveSpeed"]]]],null],["if",["dot",["name","this"],"moveLeft"],["stat",["call",["dot",["dot",["name","this"],"object"],"translateX"],[["unary-prefix","-",["name","actualMoveSpeed"]]]]],null],["if",["dot",["name","this"],"moveRight"],["stat",["call",["dot",["dot",["name","this"],"object"],"translateX"],[["name","actualMoveSpeed"]]]],null],["if",["dot",["name","this"],"moveUp"],["stat",["call",["dot",["dot",["name","this"],"object"],"translateY"],[["name","actualMoveSpeed"]]]],null],["if",["dot",["name","this"],"moveDown"],["stat",["call",["dot",["dot",["name","this"],"object"],"translateY"],[["unary-prefix","-",["name","actualMoveSpeed"]]]]],null],["var",[["actualLookSpeed",["binary","*",["name","delta"],["dot",["name","this"],"lookSpeed"]]]]],["if",["unary-prefix","!",["dot",["name","this"],"activeLook"]],["block",[["stat",["assign",true,["name","actualLookSpeed"],["num",0]]]]],null],["stat",["assign","+",["dot",["name","this"],"lon"],["binary","*",["dot",["name","this"],"mouseX"],["name","actualLookSpeed"]]]],["if",["dot",["name","this"],"lookVertical"],["stat",["assign","-",["dot",["name","this"],"lat"],["binary","*",["dot",["name","this"],"mouseY"],["name","actualLookSpeed"]]]],null],["stat",["assign",true,["dot",["name","this"],"lat"],["call",["dot",["name","Math"],"max"],[["unary-prefix","-",["num",85]],["call",["dot",["name","Math"],"min"],[["num",85],["dot",["name","this"],"lat"]]]]]]],["stat",["assign",true,["dot",["name","this"],"phi"],["binary","/",["binary","*",["binary","-",["num",90],["dot",["name","this"],"lat"]],["dot",["name","Math"],"PI"]],["num",180]]]],["stat",["assign",true,["dot",["name","this"],"theta"],["binary","/",["binary","*",["dot",["name","this"],"lon"],["dot",["name","Math"],"PI"]],["num",180]]]],["var",[["targetPosition",["dot",["name","this"],"target"]],["position",["dot",["dot",["name","this"],"object"],"position"]]]],["stat",["assign",true,["dot",["name","targetPosition"],"x"],["binary","+",["dot",["name","position"],"x"],["binary","*",["binary","*",["num",100],["call",["dot",["name","Math"],"sin"],[["dot",["name","this"],"phi"]]]],["call",["dot",["name","Math"],"cos"],[["dot",["name","this"],"theta"]]]]]]],["stat",["assign",true,["dot",["name","targetPosition"],"y"],["binary","+",["dot",["name","position"],"y"],["binary","*",["num",100],["call",["dot",["name","Math"],"cos"],[["dot",["name","this"],"phi"]]]]]]],["stat",["assign",true,["dot",["name","targetPosition"],"z"],["binary","+",["dot",["name","position"],"z"],["binary","*",["binary","*",["num",100],["call",["dot",["name","Math"],"sin"],[["dot",["name","this"],"phi"]]]],["call",["dot",["name","Math"],"sin"],[["dot",["name","this"],"theta"]]]]]]]]]],["var",[["verticalLookRatio",["num",1]]]],["if",["dot",["name","this"],"constrainVertical"],["block",[["stat",["assign",true,["name","verticalLookRatio"],["binary","/",["dot",["name","Math"],"PI"],["binary","-",["dot",["name","this"],"verticalMax"],["dot",["name","this"],"verticalMin"]]]]]]],null],["stat",["assign","+",["dot",["name","this"],"lon"],["binary","*",["dot",["name","this"],"mouseX"],["name","actualLookSpeed"]]]],["if",["dot",["name","this"],"lookVertical"],["stat",["assign","-",["dot",["name","this"],"lat"],["binary","*",["binary","*",["dot",["name","this"],"mouseY"],["name","actualLookSpeed"]],["name","verticalLookRatio"]]]],null],["stat",["assign",true,["dot",["name","this"],"lat"],["call",["dot",["name","Math"],"max"],[["unary-prefix","-",["num",85]],["call",["dot",["name","Math"],"min"],[["num",85],["dot",["name","this"],"lat"]]]]]]],["stat",["assign",true,["dot",["name","this"],"phi"],["binary","/",["binary","*",["binary","-",["num",90],["dot",["name","this"],"lat"]],["dot",["name","Math"],"PI"]],["num",180]]]],["stat",["assign",true,["dot",["name","this"],"theta"],["binary","/",["binary","*",["dot",["name","this"],"lon"],["dot",["name","Math"],"PI"]],["num",180]]]],["if",["dot",["name","this"],"constrainVertical"],["block",[["stat",["assign",true,["dot",["name","this"],"phi"],["call",["dot",["dot",["name","THREE"],"Math"],"mapLinear"],[["dot",["name","this"],"phi"],["num",0],["dot",["name","Math"],"PI"],["dot",["name","this"],"verticalMin"],["dot",["name","this"],"verticalMax"]]]]]]],null],["var",[["targetPosition",["dot",["name","this"],"target"]],["position",["dot",["dot",["name","this"],"object"],"position"]]]],["stat",["assign",true,["dot",["name","targetPosition"],"x"],["binary","+",["dot",["name","position"],"x"],["binary","*",["binary","*",["num",100],["call",["dot",["name","Math"],"sin"],[["dot",["name","this"],"phi"]]]],["call",["dot",["name","Math"],"cos"],[["dot",["name","this"],"theta"]]]]]]],["stat",["assign",true,["dot",["name","targetPosition"],"y"],["binary","+",["dot",["name","position"],"y"],["binary","*",["num",100],["call",["dot",["name","Math"],"cos"],[["dot",["name","this"],"phi"]]]]]]],["stat",["assign",true,["dot",["name","targetPosition"],"z"],["binary","+",["dot",["name","position"],"z"],["binary","*",["binary","*",["num",100],["call",["dot",["name","Math"],"sin"],[["dot",["name","this"],"phi"]]]],["call",["dot",["name","Math"],"sin"],[["dot",["name","this"],"theta"]]]]]]],["stat",["call",["dot",["dot",["name","this"],"object"],"lookAt"],[["name","targetPosition"]]]]]]]],["stat",["call",["dot",["dot",["name","this"],"domElement"],"addEventListener"],[["string","contextmenu"],["function",null,["event"],[["stat",["call",["dot",["name","event"],"preventDefault"],[]]]]],["name","false"]]]],["stat",["call",["dot",["dot",["name","this"],"domElement"],"addEventListener"],[["string","mousemove"],["call",["name","bind"],[["name","this"],["dot",["name","this"],"onMouseMove"]]],["name","false"]]]],["stat",["call",["dot",["dot",["name","this"],"domElement"],"addEventListener"],[["string","mousedown"],["call",["name","bind"],[["name","this"],["dot",["name","this"],"onMouseDown"]]],["name","false"]]]],["stat",["call",["dot",["dot",["name","this"],"domElement"],"addEventListener"],[["string","mouseup"],["call",["name","bind"],[["name","this"],["dot",["name","this"],"onMouseUp"]]],["name","false"]]]],["stat",["call",["dot",["dot",["name","this"],"domElement"],"addEventListener"],[["string","keydown"],["call",["name","bind"],[["name","this"],["dot",["name","this"],"onKeyDown"]]],["name","false"]]]],["stat",["call",["dot",["dot",["name","this"],"domElement"],"addEventListener"],[["string","keyup"],["call",["name","bind"],[["name","this"],["dot",["name","this"],"onKeyUp"]]],["name","false"]]]],["defun","bind",["scope","fn"],[["return",["function",null,[],[["stat",["call",["dot",["name","fn"],"apply"],[["name","scope"],["name","arguments"]]]]]]]]],["block"]]]]],["stat",["assign",true,["dot",["name","THREE"],"PathControls"],["function",null,["object","domElement"],[["stat",["assign",true,["dot",["name","this"],"object"],["name","object"]]],["stat",["assign",true,["dot",["name","this"],"domElement"],["conditional",["binary","!==",["name","domElement"],["name","undefined"]],["name","domElement"],["name","document"]]]],["stat",["assign",true,["dot",["name","this"],"id"],["binary","+",["string","PathControls"],["unary-postfix","++",["dot",["name","THREE"],"PathControlsIdCounter"]]]]],["stat",["assign",true,["dot",["name","this"],"duration"],["binary","*",["num",10],["num",1000]]]],["stat",["assign",true,["dot",["name","this"],"waypoints"],["array",[]]]],["stat",["assign",true,["dot",["name","this"],"useConstantSpeed"],["name","true"]]],["stat",["assign",true,["dot",["name","this"],"resamplingCoef"],["num",50]]],["stat",["assign",true,["dot",["name","this"],"debugPath"],["new",["dot",["name","THREE"],"Object3D"],[]]]],["stat",["assign",true,["dot",["name","this"],"debugDummy"],["new",["dot",["name","THREE"],"Object3D"],[]]]],["stat",["assign",true,["dot",["name","this"],"animationParent"],["new",["dot",["name","THREE"],"Object3D"],[]]]],["stat",["assign",true,["dot",["name","this"],"lookSpeed"],["num",0.005]]],["stat",["assign",true,["dot",["name","this"],"lookVertical"],["name","true"]]],["stat",["assign",true,["dot",["name","this"],"lookHorizontal"],["name","true"]]],["stat",["assign",true,["dot",["name","this"],"verticalAngleMap"],["object",[["srcRange",["array",[["num",0],["binary","*",["num",2],["dot",["name","Math"],"PI"]]]]],["dstRange",["array",[["num",0],["binary","*",["num",2],["dot",["name","Math"],"PI"]]]]]]]]],["stat",["assign",true,["dot",["name","this"],"horizontalAngleMap"],["object",[["srcRange",["array",[["num",0],["binary","*",["num",2],["dot",["name","Math"],"PI"]]]]],["dstRange",["array",[["num",0],["binary","*",["num",2],["dot",["name","Math"],"PI"]]]]]]]]],["stat",["assign",true,["dot",["name","this"],"target"],["new",["dot",["name","THREE"],"Object3D"],[]]]],["stat",["assign",true,["dot",["name","this"],"mouseX"],["num",0]]],["stat",["assign",true,["dot",["name","this"],"mouseY"],["num",0]]],["stat",["assign",true,["dot",["name","this"],"lat"],["num",0]]],["stat",["assign",true,["dot",["name","this"],"lon"],["num",0]]],["stat",["assign",true,["dot",["name","this"],"phi"],["num",0]]],["stat",["assign",true,["dot",["name","this"],"theta"],["num",0]]],["if",["binary","===",["dot",["name","this"],"domElement"],["name","document"]],["block",[["stat",["assign",true,["dot",["name","this"],"viewHalfX"],["binary","/",["dot",["name","window"],"innerWidth"],["num",2]]]],["stat",["assign",true,["dot",["name","this"],"viewHalfY"],["binary","/",["dot",["name","window"],"innerHeight"],["num",2]]]]]],["block",[["stat",["assign",true,["dot",["name","this"],"viewHalfX"],["binary","/",["dot",["dot",["name","this"],"domElement"],"offsetWidth"],["num",2]]]],["stat",["assign",true,["dot",["name","this"],"viewHalfY"],["binary","/",["dot",["dot",["name","this"],"domElement"],"offsetHeight"],["num",2]]]],["stat",["call",["dot",["dot",["name","this"],"domElement"],"setAttribute"],[["string","tabindex"],["unary-prefix","-",["num",1]]]]]]]],["var",[["PI2",["binary","*",["dot",["name","Math"],"PI"],["num",2]]],["PI180",["binary","/",["dot",["name","Math"],"PI"],["num",180]]]]],["stat",["assign",true,["dot",["name","this"],"update"],["function",null,["delta"],[["var",[["srcRange"],["dstRange"]]],["if",["dot",["name","this"],"lookHorizontal"],["stat",["assign","+",["dot",["name","this"],"lon"],["binary","*",["binary","*",["dot",["name","this"],"mouseX"],["dot",["name","this"],"lookSpeed"]],["name","delta"]]]],null],["if",["dot",["name","this"],"lookVertical"],["stat",["assign","-",["dot",["name","this"],"lat"],["binary","*",["binary","*",["dot",["name","this"],"mouseY"],["dot",["name","this"],"lookSpeed"]],["name","delta"]]]],null],["stat",["assign",true,["dot",["name","this"],"lon"],["call",["dot",["name","Math"],"max"],[["num",0],["call",["dot",["name","Math"],"min"],[["num",360],["dot",["name","this"],"lon"]]]]]]],["stat",["assign",true,["dot",["name","this"],"lat"],["call",["dot",["name","Math"],"max"],[["unary-prefix","-",["num",85]],["call",["dot",["name","Math"],"min"],[["num",85],["dot",["name","this"],"lat"]]]]]]],["stat",["assign",true,["dot",["name","this"],"phi"],["binary","*",["binary","-",["num",90],["dot",["name","this"],"lat"]],["name","PI180"]]]],["stat",["assign",true,["dot",["name","this"],"theta"],["binary","*",["dot",["name","this"],"lon"],["name","PI180"]]]],["stat",["assign",true,["dot",["name","this"],"phi"],["call",["name","normalize_angle_rad"],[["dot",["name","this"],"phi"]]]]],["stat",["assign",true,["name","srcRange"],["dot",["dot",["name","this"],"verticalAngleMap"],"srcRange"]]],["stat",["assign",true,["name","dstRange"],["dot",["dot",["name","this"],"verticalAngleMap"],"dstRange"]]],["var",[["tmpPhi",["call",["dot",["dot",["name","THREE"],"Math"],"mapLinear"],[["dot",["name","this"],"phi"],["sub",["name","srcRange"],["num",0]],["sub",["name","srcRange"],["num",1]],["sub",["name","dstRange"],["num",0]],["sub",["name","dstRange"],["num",1]]]]]]],["var",[["tmpPhiFullRange",["binary","-",["sub",["name","dstRange"],["num",1]],["sub",["name","dstRange"],["num",0]]]]]],["var",[["tmpPhiNormalized",["binary","/",["binary","-",["name","tmpPhi"],["sub",["name","dstRange"],["num",0]]],["name","tmpPhiFullRange"]]]]],["stat",["assign",true,["dot",["name","this"],"phi"],["binary","+",["binary","*",["call",["name","QuadraticEaseInOut"],[["name","tmpPhiNormalized"]]],["name","tmpPhiFullRange"]],["sub",["name","dstRange"],["num",0]]]]],["stat",["assign",true,["name","srcRange"],["dot",["dot",["name","this"],"horizontalAngleMap"],"srcRange"]]],["stat",["assign",true,["name","dstRange"],["dot",["dot",["name","this"],"horizontalAngleMap"],"dstRange"]]],["var",[["tmpTheta",["call",["dot",["dot",["name","THREE"],"Math"],"mapLinear"],[["dot",["name","this"],"theta"],["sub",["name","srcRange"],["num",0]],["sub",["name","srcRange"],["num",1]],["sub",["name","dstRange"],["num",0]],["sub",["name","dstRange"],["num",1]]]]]]],["var",[["tmpThetaFullRange",["binary","-",["sub",["name","dstRange"],["num",1]],["sub",["name","dstRange"],["num",0]]]]]],["var",[["tmpThetaNormalized",["binary","/",["binary","-",["name","tmpTheta"],["sub",["name","dstRange"],["num",0]]],["name","tmpThetaFullRange"]]]]],["stat",["assign",true,["dot",["name","this"],"theta"],["binary","+",["binary","*",["call",["name","QuadraticEaseInOut"],[["name","tmpThetaNormalized"]]],["name","tmpThetaFullRange"]],["sub",["name","dstRange"],["num",0]]]]],["var",[["targetPosition",["dot",["dot",["name","this"],"target"],"position"]],["position",["dot",["dot",["name","this"],"object"],"position"]]]],["stat",["assign",true,["dot",["name","targetPosition"],"x"],["binary","*",["binary","*",["num",100],["call",["dot",["name","Math"],"sin"],[["dot",["name","this"],"phi"]]]],["call",["dot",["name","Math"],"cos"],[["dot",["name","this"],"theta"]]]]]],["stat",["assign",true,["dot",["name","targetPosition"],"y"],["binary","*",["num",100],["call",["dot",["name","Math"],"cos"],[["dot",["name","this"],"phi"]]]]]],["stat",["assign",true,["dot",["name","targetPosition"],"z"],["binary","*",["binary","*",["num",100],["call",["dot",["name","Math"],"sin"],[["dot",["name","this"],"phi"]]]],["call",["dot",["name","Math"],"sin"],[["dot",["name","this"],"theta"]]]]]],["stat",["call",["dot",["dot",["name","this"],"object"],"lookAt"],[["dot",["dot",["name","this"],"target"],"position"]]]]]]]],["stat",["assign",true,["dot",["name","this"],"onMouseMove"],["function",null,["event"],[["if",["binary","===",["dot",["name","this"],"domElement"],["name","document"]],["block",[["stat",["assign",true,["dot",["name","this"],"mouseX"],["binary","-",["dot",["name","event"],"pageX"],["dot",["name","this"],"viewHalfX"]]]],["stat",["assign",true,["dot",["name","this"],"mouseY"],["binary","-",["dot",["name","event"],"pageY"],["dot",["name","this"],"viewHalfY"]]]]]],["block",[["stat",["assign",true,["dot",["name","this"],"mouseX"],["binary","-",["binary","-",["dot",["name","event"],"pageX"],["dot",["dot",["name","this"],"domElement"],"offsetLeft"]],["dot",["name","this"],"viewHalfX"]]]],["stat",["assign",true,["dot",["name","this"],"mouseY"],["binary","-",["binary","-",["dot",["name","event"],"pageY"],["dot",["dot",["name","this"],"domElement"],"offsetTop"]],["dot",["name","this"],"viewHalfY"]]]]]]]]]]],["defun","normalize_angle_rad",["a"],[["var",[["b",["binary","%",["name","a"],["name","PI2"]]]]],["return",["conditional",["binary",">=",["name","b"],["num",0]],["name","b"],["binary","+",["name","b"],["name","PI2"]]]]]],["block"],["defun","distance",["a","b"],[["var",[["dx",["binary","-",["sub",["name","a"],["num",0]],["sub",["name","b"],["num",0]]]],["dy",["binary","-",["sub",["name","a"],["num",1]],["sub",["name","b"],["num",1]]]],["dz",["binary","-",["sub",["name","a"],["num",2]],["sub",["name","b"],["num",2]]]]]],["return",["call",["dot",["name","Math"],"sqrt"],[["binary","+",["binary","+",["binary","*",["name","dx"],["name","dx"]],["binary","*",["name","dy"],["name","dy"]]],["binary","*",["name","dz"],["name","dz"]]]]]]]],["block"],["defun","QuadraticEaseInOut",["k"],[["if",["binary","<",["assign","*",["name","k"],["num",2]],["num",1]],["return",["binary","*",["binary","*",["num",0.5],["name","k"]],["name","k"]]],null],["return",["binary","*",["unary-prefix","-",["num",0.5]],["binary","-",["binary","*",["unary-prefix","--",["name","k"]],["binary","-",["name","k"],["num",2]]],["num",1]]]]]],["block"],["defun","bind",["scope","fn"],[["return",["function",null,[],[["stat",["call",["dot",["name","fn"],"apply"],[["name","scope"],["name","arguments"]]]]]]]]],["block"],["defun","initAnimationPath",["parent","spline","name","duration"],[["var",[["animationData",["object",[["name",["name","name"]],["fps",["num",0.6]],["length",["name","duration"]],["hierarchy",["array",[]]]]]]]],["var",[["i"],["parentAnimation"],["childAnimation"],["path",["call",["dot",["name","spline"],"getControlPointsArray"],[]]],["sl",["call",["dot",["name","spline"],"getLength"],[]]],["pl",["dot",["name","path"],"length"]],["t",["num",0]],["first",["num",0]],["last",["binary","-",["name","pl"],["num",1]]]]],["stat",["assign",true,["name","parentAnimation"],["object",[["parent",["unary-prefix","-",["num",1]]],["keys",["array",[]]]]]]],["stat",["assign",true,["sub",["dot",["name","parentAnimation"],"keys"],["name","first"]],["object",[["time",["num",0]],["pos",["sub",["name","path"],["name","first"]]],["rot",["array",[["num",0],["num",0],["num",0],["num",1]]]],["scl",["array",[["num",1],["num",1],["num",1]]]]]]]],["stat",["assign",true,["sub",["dot",["name","parentAnimation"],"keys"],["name","last"]],["object",[["time",["name","duration"]],["pos",["sub",["name","path"],["name","last"]]],["rot",["array",[["num",0],["num",0],["num",0],["num",1]]]],["scl",["array",[["num",1],["num",1],["num",1]]]]]]]],["for",["assign",true,["name","i"],["num",1]],["binary","<",["name","i"],["binary","-",["name","pl"],["num",1]]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","t"],["binary","/",["binary","*",["name","duration"],["sub",["dot",["name","sl"],"chunks"],["name","i"]]],["dot",["name","sl"],"total"]]]],["stat",["assign",true,["sub",["dot",["name","parentAnimation"],"keys"],["name","i"]],["object",[["time",["name","t"]],["pos",["sub",["name","path"],["name","i"]]]]]]]]]],["stat",["assign",true,["sub",["dot",["name","animationData"],"hierarchy"],["num",0]],["name","parentAnimation"]]],["stat",["call",["dot",["dot",["name","THREE"],"AnimationHandler"],"add"],[["name","animationData"]]]],["return",["new",["dot",["name","THREE"],"Animation"],[["name","parent"],["name","name"],["dot",["dot",["name","THREE"],"AnimationHandler"],"CATMULLROM_FORWARD"],["name","false"]]]]]],["block"],["defun","createSplineGeometry",["spline","n_sub"],[["var",[["i"],["index"],["position"],["geometry",["new",["dot",["name","THREE"],"Geometry"],[]]]]],["for",["assign",true,["name","i"],["num",0]],["binary","<",["name","i"],["binary","*",["dot",["dot",["name","spline"],"points"],"length"],["name","n_sub"]]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","index"],["binary","/",["name","i"],["binary","*",["dot",["dot",["name","spline"],"points"],"length"],["name","n_sub"]]]]],["stat",["assign",true,["name","position"],["call",["dot",["name","spline"],"getPoint"],[["name","index"]]]]],["stat",["assign",true,["sub",["dot",["name","geometry"],"vertices"],["name","i"]],["new",["dot",["name","THREE"],"Vector3"],[["dot",["name","position"],"x"],["dot",["name","position"],"y"],["dot",["name","position"],"z"]]]]]]]],["return",["name","geometry"]]]],["block"],["defun","createPath",["parent","spline"],[["var",[["lineGeo",["call",["name","createSplineGeometry"],[["name","spline"],["num",10]]]],["particleGeo",["call",["name","createSplineGeometry"],[["name","spline"],["num",10]]]],["lineMat",["new",["dot",["name","THREE"],"LineBasicMaterial"],[["object",[["color",["num",16711680]],["linewidth",["num",3]]]]]]],["lineObj",["new",["dot",["name","THREE"],"Line"],[["name","lineGeo"],["name","lineMat"]]]],["particleObj",["new",["dot",["name","THREE"],"ParticleSystem"],[["name","particleGeo"],["new",["dot",["name","THREE"],"ParticleBasicMaterial"],[["object",[["color",["num",16755200]],["size",["num",3]]]]]]]]]]],["stat",["call",["dot",["dot",["name","lineObj"],"scale"],"set"],[["num",1],["num",1],["num",1]]]],["stat",["call",["dot",["name","parent"],"add"],[["name","lineObj"]]]],["stat",["call",["dot",["dot",["name","particleObj"],"scale"],"set"],[["num",1],["num",1],["num",1]]]],["stat",["call",["dot",["name","parent"],"add"],[["name","particleObj"]]]],["var",[["waypoint"],["geo",["new",["dot",["name","THREE"],"SphereGeometry"],[["num",1],["num",16],["num",8]]]],["mat",["new",["dot",["name","THREE"],"MeshBasicMaterial"],[["object",[["color",["num",65280]]]]]]]]],["for",["var",[["i",["num",0]]]],["binary","<",["name","i"],["dot",["dot",["name","spline"],"points"],"length"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","waypoint"],["new",["dot",["name","THREE"],"Mesh"],[["name","geo"],["name","mat"]]]]],["stat",["call",["dot",["dot",["name","waypoint"],"position"],"copy"],[["sub",["dot",["name","spline"],"points"],["name","i"]]]]],["stat",["call",["dot",["name","parent"],"add"],[["name","waypoint"]]]]]]]]],["block"],["stat",["assign",true,["dot",["name","this"],"init"],["function",null,[],[["stat",["assign",true,["dot",["name","this"],"spline"],["new",["dot",["name","THREE"],"Spline"],[]]]],["stat",["call",["dot",["dot",["name","this"],"spline"],"initFromArray"],[["dot",["name","this"],"waypoints"]]]],["if",["dot",["name","this"],"useConstantSpeed"],["block",[["stat",["call",["dot",["dot",["name","this"],"spline"],"reparametrizeByArcLength"],[["dot",["name","this"],"resamplingCoef"]]]]]],null],["if",["dot",["name","this"],"createDebugDummy"],["block",[["var",[["dummyParentMaterial",["new",["dot",["name","THREE"],"MeshLambertMaterial"],[["object",[["color",["num",30719]]]]]]],["dummyChildMaterial",["new",["dot",["name","THREE"],"MeshLambertMaterial"],[["object",[["color",["num",65280]]]]]]],["dummyParentGeo",["new",["dot",["name","THREE"],"CubeGeometry"],[["num",10],["num",10],["num",20]]]],["dummyChildGeo",["new",["dot",["name","THREE"],"CubeGeometry"],[["num",2],["num",2],["num",10]]]]]],["stat",["assign",true,["dot",["name","this"],"animationParent"],["new",["dot",["name","THREE"],"Mesh"],[["name","dummyParentGeo"],["name","dummyParentMaterial"]]]]],["var",[["dummyChild",["new",["dot",["name","THREE"],"Mesh"],[["name","dummyChildGeo"],["name","dummyChildMaterial"]]]]]],["stat",["call",["dot",["dot",["name","dummyChild"],"position"],"set"],[["num",0],["num",10],["num",0]]]],["stat",["assign",true,["dot",["name","this"],"animation"],["call",["name","initAnimationPath"],[["dot",["name","this"],"animationParent"],["dot",["name","this"],"spline"],["dot",["name","this"],"id"],["dot",["name","this"],"duration"]]]]],["stat",["call",["dot",["dot",["name","this"],"animationParent"],"add"],[["dot",["name","this"],"object"]]]],["stat",["call",["dot",["dot",["name","this"],"animationParent"],"add"],[["dot",["name","this"],"target"]]]],["stat",["call",["dot",["dot",["name","this"],"animationParent"],"add"],[["name","dummyChild"]]]]]],["block",[["stat",["assign",true,["dot",["name","this"],"animation"],["call",["name","initAnimationPath"],[["dot",["name","this"],"animationParent"],["dot",["name","this"],"spline"],["dot",["name","this"],"id"],["dot",["name","this"],"duration"]]]]],["stat",["call",["dot",["dot",["name","this"],"animationParent"],"add"],[["dot",["name","this"],"target"]]]],["stat",["call",["dot",["dot",["name","this"],"animationParent"],"add"],[["dot",["name","this"],"object"]]]]]]],["if",["dot",["name","this"],"createDebugPath"],["block",[["stat",["call",["name","createPath"],[["dot",["name","this"],"debugPath"],["dot",["name","this"],"spline"]]]]]],null],["stat",["call",["dot",["dot",["name","this"],"domElement"],"addEventListener"],[["string","mousemove"],["call",["name","bind"],[["name","this"],["dot",["name","this"],"onMouseMove"]]],["name","false"]]]]]]]]]]]],["stat",["assign",true,["dot",["name","THREE"],"PathControlsIdCounter"],["num",0]]],["stat",["assign",true,["dot",["name","THREE"],"FlyControls"],["function",null,["object","domElement"],[["stat",["assign",true,["dot",["name","this"],"object"],["name","object"]]],["stat",["assign",true,["dot",["name","this"],"domElement"],["conditional",["binary","!==",["name","domElement"],["name","undefined"]],["name","domElement"],["name","document"]]]],["if",["name","domElement"],["stat",["call",["dot",["dot",["name","this"],"domElement"],"setAttribute"],[["string","tabindex"],["unary-prefix","-",["num",1]]]]],null],["stat",["assign",true,["dot",["name","this"],"movementSpeed"],["num",1]]],["stat",["assign",true,["dot",["name","this"],"rollSpeed"],["num",0.005]]],["stat",["assign",true,["dot",["name","this"],"dragToLook"],["name","false"]]],["stat",["assign",true,["dot",["name","this"],"autoForward"],["name","false"]]],["stat",["assign",true,["dot",["dot",["name","this"],"object"],"useQuaternion"],["name","true"]]],["stat",["assign",true,["dot",["name","this"],"tmpQuaternion"],["new",["dot",["name","THREE"],"Quaternion"],[]]]],["stat",["assign",true,["dot",["name","this"],"mouseStatus"],["num",0]]],["stat",["assign",true,["dot",["name","this"],"moveState"],["object",[["up",["num",0]],["down",["num",0]],["left",["num",0]],["right",["num",0]],["forward",["num",0]],["back",["num",0]],["pitchUp",["num",0]],["pitchDown",["num",0]],["yawLeft",["num",0]],["yawRight",["num",0]],["rollLeft",["num",0]],["rollRight",["num",0]]]]]],["stat",["assign",true,["dot",["name","this"],"moveVector"],["new",["dot",["name","THREE"],"Vector3"],[["num",0],["num",0],["num",0]]]]],["stat",["assign",true,["dot",["name","this"],"rotationVector"],["new",["dot",["name","THREE"],"Vector3"],[["num",0],["num",0],["num",0]]]]],["stat",["assign",true,["dot",["name","this"],"handleEvent"],["function",null,["event"],[["if",["binary","==",["unary-prefix","typeof",["sub",["name","this"],["dot",["name","event"],"type"]]],["string","function"]],["block",[["stat",["call",["sub",["name","this"],["dot",["name","event"],"type"]],[["name","event"]]]]]],null]]]]],["stat",["assign",true,["dot",["name","this"],"keydown"],["function",null,["event"],[["if",["dot",["name","event"],"altKey"],["block",[["return",null]]],null],["switch",["dot",["name","event"],"keyCode"],[[["num",16],[["stat",["assign",true,["dot",["name","this"],"movementSpeedMultiplier"],["num",0.1]]],["break",null]]],[["num",87],[["stat",["assign",true,["dot",["dot",["name","this"],"moveState"],"forward"],["num",1]]],["break",null]]],[["num",83],[["stat",["assign",true,["dot",["dot",["name","this"],"moveState"],"back"],["num",1]]],["break",null]]],[["num",65],[["stat",["assign",true,["dot",["dot",["name","this"],"moveState"],"left"],["num",1]]],["break",null]]],[["num",68],[["stat",["assign",true,["dot",["dot",["name","this"],"moveState"],"right"],["num",1]]],["break",null]]],[["num",82],[["stat",["assign",true,["dot",["dot",["name","this"],"moveState"],"up"],["num",1]]],["break",null]]],[["num",70],[["stat",["assign",true,["dot",["dot",["name","this"],"moveState"],"down"],["num",1]]],["break",null]]],[["num",38],[["stat",["assign",true,["dot",["dot",["name","this"],"moveState"],"pitchUp"],["num",1]]],["break",null]]],[["num",40],[["stat",["assign",true,["dot",["dot",["name","this"],"moveState"],"pitchDown"],["num",1]]],["break",null]]],[["num",37],[["stat",["assign",true,["dot",["dot",["name","this"],"moveState"],"yawLeft"],["num",1]]],["break",null]]],[["num",39],[["stat",["assign",true,["dot",["dot",["name","this"],"moveState"],"yawRight"],["num",1]]],["break",null]]],[["num",81],[["stat",["assign",true,["dot",["dot",["name","this"],"moveState"],"rollLeft"],["num",1]]],["break",null]]],[["num",69],[["stat",["assign",true,["dot",["dot",["name","this"],"moveState"],"rollRight"],["num",1]]],["break",null]]]]],["stat",["call",["dot",["name","this"],"updateMovementVector"],[]]],["stat",["call",["dot",["name","this"],"updateRotationVector"],[]]]]]]],["stat",["assign",true,["dot",["name","this"],"keyup"],["function",null,["event"],[["switch",["dot",["name","event"],"keyCode"],[[["num",16],[["stat",["assign",true,["dot",["name","this"],"movementSpeedMultiplier"],["num",1]]],["break",null]]],[["num",87],[["stat",["assign",true,["dot",["dot",["name","this"],"moveState"],"forward"],["num",0]]],["break",null]]],[["num",83],[["stat",["assign",true,["dot",["dot",["name","this"],"moveState"],"back"],["num",0]]],["break",null]]],[["num",65],[["stat",["assign",true,["dot",["dot",["name","this"],"moveState"],"left"],["num",0]]],["break",null]]],[["num",68],[["stat",["assign",true,["dot",["dot",["name","this"],"moveState"],"right"],["num",0]]],["break",null]]],[["num",82],[["stat",["assign",true,["dot",["dot",["name","this"],"moveState"],"up"],["num",0]]],["break",null]]],[["num",70],[["stat",["assign",true,["dot",["dot",["name","this"],"moveState"],"down"],["num",0]]],["break",null]]],[["num",38],[["stat",["assign",true,["dot",["dot",["name","this"],"moveState"],"pitchUp"],["num",0]]],["break",null]]],[["num",40],[["stat",["assign",true,["dot",["dot",["name","this"],"moveState"],"pitchDown"],["num",0]]],["break",null]]],[["num",37],[["stat",["assign",true,["dot",["dot",["name","this"],"moveState"],"yawLeft"],["num",0]]],["break",null]]],[["num",39],[["stat",["assign",true,["dot",["dot",["name","this"],"moveState"],"yawRight"],["num",0]]],["break",null]]],[["num",81],[["stat",["assign",true,["dot",["dot",["name","this"],"moveState"],"rollLeft"],["num",0]]],["break",null]]],[["num",69],[["stat",["assign",true,["dot",["dot",["name","this"],"moveState"],"rollRight"],["num",0]]],["break",null]]]]],["stat",["call",["dot",["name","this"],"updateMovementVector"],[]]],["stat",["call",["dot",["name","this"],"updateRotationVector"],[]]]]]]],["stat",["assign",true,["dot",["name","this"],"mousedown"],["function",null,["event"],[["if",["binary","!==",["dot",["name","this"],"domElement"],["name","document"]],["block",[["stat",["call",["dot",["dot",["name","this"],"domElement"],"focus"],[]]]]],null],["stat",["call",["dot",["name","event"],"preventDefault"],[]]],["stat",["call",["dot",["name","event"],"stopPropagation"],[]]],["if",["dot",["name","this"],"dragToLook"],["block",[["stat",["unary-postfix","++",["dot",["name","this"],"mouseStatus"]]]]],["block",[["switch",["dot",["name","event"],"button"],[[["num",0],[["stat",["assign",true,["dot",["dot",["name","this"],"object"],"moveForward"],["name","true"]]],["break",null]]],[["num",2],[["stat",["assign",true,["dot",["dot",["name","this"],"object"],"moveBackward"],["name","true"]]],["break",null]]]]]]]]]]]],["stat",["assign",true,["dot",["name","this"],"mousemove"],["function",null,["event"],[["if",["binary","||",["unary-prefix","!",["dot",["name","this"],"dragToLook"]],["binary",">",["dot",["name","this"],"mouseStatus"],["num",0]]],["block",[["var",[["container",["call",["dot",["name","this"],"getContainerDimensions"],[]]]]],["var",[["halfWidth",["binary","/",["sub",["dot",["name","container"],"size"],["num",0]],["num",2]]]]],["var",[["halfHeight",["binary","/",["sub",["dot",["name","container"],"size"],["num",1]],["num",2]]]]],["stat",["assign",true,["dot",["dot",["name","this"],"moveState"],"yawLeft"],["binary","/",["unary-prefix","-",["binary","-",["binary","-",["dot",["name","event"],"pageX"],["sub",["dot",["name","container"],"offset"],["num",0]]],["name","halfWidth"]]],["name","halfWidth"]]]],["stat",["assign",true,["dot",["dot",["name","this"],"moveState"],"pitchDown"],["binary","/",["binary","-",["binary","-",["dot",["name","event"],"pageY"],["sub",["dot",["name","container"],"offset"],["num",1]]],["name","halfHeight"]],["name","halfHeight"]]]],["stat",["call",["dot",["name","this"],"updateRotationVector"],[]]]]],null]]]]],["stat",["assign",true,["dot",["name","this"],"mouseup"],["function",null,["event"],[["stat",["call",["dot",["name","event"],"preventDefault"],[]]],["stat",["call",["dot",["name","event"],"stopPropagation"],[]]],["if",["dot",["name","this"],"dragToLook"],["block",[["stat",["unary-postfix","--",["dot",["name","this"],"mouseStatus"]]],["stat",["assign",true,["dot",["dot",["name","this"],"moveState"],"yawLeft"],["assign",true,["dot",["dot",["name","this"],"moveState"],"pitchDown"],["num",0]]]]]],["block",[["switch",["dot",["name","event"],"button"],[[["num",0],[["stat",["assign",true,["dot",["name","this"],"moveForward"],["name","false"]]],["break",null]]],[["num",2],[["stat",["assign",true,["dot",["name","this"],"moveBackward"],["name","false"]]],["break",null]]]]]]]],["stat",["call",["dot",["name","this"],"updateRotationVector"],[]]]]]]],["stat",["assign",true,["dot",["name","this"],"update"],["function",null,["delta"],[["var",[["moveMult",["binary","*",["name","delta"],["dot",["name","this"],"movementSpeed"]]]]],["var",[["rotMult",["binary","*",["name","delta"],["dot",["name","this"],"rollSpeed"]]]]],["stat",["call",["dot",["dot",["name","this"],"object"],"translateX"],[["binary","*",["dot",["dot",["name","this"],"moveVector"],"x"],["name","moveMult"]]]]],["stat",["call",["dot",["dot",["name","this"],"object"],"translateY"],[["binary","*",["dot",["dot",["name","this"],"moveVector"],"y"],["name","moveMult"]]]]],["stat",["call",["dot",["dot",["name","this"],"object"],"translateZ"],[["binary","*",["dot",["dot",["name","this"],"moveVector"],"z"],["name","moveMult"]]]]],["stat",["call",["dot",["call",["dot",["dot",["name","this"],"tmpQuaternion"],"set"],[["binary","*",["dot",["dot",["name","this"],"rotationVector"],"x"],["name","rotMult"]],["binary","*",["dot",["dot",["name","this"],"rotationVector"],"y"],["name","rotMult"]],["binary","*",["dot",["dot",["name","this"],"rotationVector"],"z"],["name","rotMult"]],["num",1]]],"normalize"],[]]],["stat",["call",["dot",["dot",["dot",["name","this"],"object"],"quaternion"],"multiplySelf"],[["dot",["name","this"],"tmpQuaternion"]]]],["stat",["call",["dot",["dot",["dot",["name","this"],"object"],"matrix"],"setPosition"],[["dot",["dot",["name","this"],"object"],"position"]]]],["stat",["call",["dot",["dot",["dot",["name","this"],"object"],"matrix"],"setRotationFromQuaternion"],[["dot",["dot",["name","this"],"object"],"quaternion"]]]],["stat",["assign",true,["dot",["dot",["name","this"],"object"],"matrixWorldNeedsUpdate"],["name","true"]]]]]]],["stat",["assign",true,["dot",["name","this"],"updateMovementVector"],["function",null,[],[["var",[["forward",["conditional",["binary","||",["dot",["dot",["name","this"],"moveState"],"forward"],["binary","&&",["dot",["name","this"],"autoForward"],["unary-prefix","!",["dot",["dot",["name","this"],"moveState"],"back"]]]],["num",1],["num",0]]]]],["stat",["assign",true,["dot",["dot",["name","this"],"moveVector"],"x"],["binary","+",["unary-prefix","-",["dot",["dot",["name","this"],"moveState"],"left"]],["dot",["dot",["name","this"],"moveState"],"right"]]]],["stat",["assign",true,["dot",["dot",["name","this"],"moveVector"],"y"],["binary","+",["unary-prefix","-",["dot",["dot",["name","this"],"moveState"],"down"]],["dot",["dot",["name","this"],"moveState"],"up"]]]],["stat",["assign",true,["dot",["dot",["name","this"],"moveVector"],"z"],["binary","+",["unary-prefix","-",["name","forward"]],["dot",["dot",["name","this"],"moveState"],"back"]]]]]]]],["stat",["assign",true,["dot",["name","this"],"updateRotationVector"],["function",null,[],[["stat",["assign",true,["dot",["dot",["name","this"],"rotationVector"],"x"],["binary","+",["unary-prefix","-",["dot",["dot",["name","this"],"moveState"],"pitchDown"]],["dot",["dot",["name","this"],"moveState"],"pitchUp"]]]],["stat",["assign",true,["dot",["dot",["name","this"],"rotationVector"],"y"],["binary","+",["unary-prefix","-",["dot",["dot",["name","this"],"moveState"],"yawRight"]],["dot",["dot",["name","this"],"moveState"],"yawLeft"]]]],["stat",["assign",true,["dot",["dot",["name","this"],"rotationVector"],"z"],["binary","+",["unary-prefix","-",["dot",["dot",["name","this"],"moveState"],"rollRight"]],["dot",["dot",["name","this"],"moveState"],"rollLeft"]]]]]]]],["stat",["assign",true,["dot",["name","this"],"getContainerDimensions"],["function",null,[],[["if",["binary","!=",["dot",["name","this"],"domElement"],["name","document"]],["block",[["return",["object",[["size",["array",[["dot",["dot",["name","this"],"domElement"],"offsetWidth"],["dot",["dot",["name","this"],"domElement"],"offsetHeight"]]]],["offset",["array",[["dot",["dot",["name","this"],"domElement"],"offsetLeft"],["dot",["dot",["name","this"],"domElement"],"offsetTop"]]]]]]]]],["block",[["return",["object",[["size",["array",[["dot",["name","window"],"innerWidth"],["dot",["name","window"],"innerHeight"]]]],["offset",["array",[["num",0],["num",0]]]]]]]]]]]]]],["defun","bind",["scope","fn"],[["return",["function",null,[],[["stat",["call",["dot",["name","fn"],"apply"],[["name","scope"],["name","arguments"]]]]]]]]],["block"],["stat",["call",["dot",["dot",["name","this"],"domElement"],"addEventListener"],[["string","mousemove"],["call",["name","bind"],[["name","this"],["dot",["name","this"],"mousemove"]]],["name","false"]]]],["stat",["call",["dot",["dot",["name","this"],"domElement"],"addEventListener"],[["string","mousedown"],["call",["name","bind"],[["name","this"],["dot",["name","this"],"mousedown"]]],["name","false"]]]],["stat",["call",["dot",["dot",["name","this"],"domElement"],"addEventListener"],[["string","mouseup"],["call",["name","bind"],[["name","this"],["dot",["name","this"],"mouseup"]]],["name","false"]]]],["stat",["call",["dot",["dot",["name","this"],"domElement"],"addEventListener"],[["string","keydown"],["call",["name","bind"],[["name","this"],["dot",["name","this"],"keydown"]]],["name","false"]]]],["stat",["call",["dot",["dot",["name","this"],"domElement"],"addEventListener"],[["string","keyup"],["call",["name","bind"],[["name","this"],["dot",["name","this"],"keyup"]]],["name","false"]]]],["stat",["call",["dot",["name","this"],"updateMovementVector"],[]]],["stat",["call",["dot",["name","this"],"updateRotationVector"],[]]]]]]],["stat",["assign",true,["dot",["name","THREE"],"RollControls"],["function",null,["object","domElement"],[["stat",["assign",true,["dot",["name","this"],"object"],["name","object"]]],["stat",["assign",true,["dot",["name","this"],"domElement"],["conditional",["binary","!==",["name","domElement"],["name","undefined"]],["name","domElement"],["name","document"]]]],["stat",["assign",true,["dot",["name","this"],"mouseLook"],["name","true"]]],["stat",["assign",true,["dot",["name","this"],"autoForward"],["name","false"]]],["stat",["assign",true,["dot",["name","this"],"lookSpeed"],["num",1]]],["stat",["assign",true,["dot",["name","this"],"movementSpeed"],["num",1]]],["stat",["assign",true,["dot",["name","this"],"rollSpeed"],["num",1]]],["stat",["assign",true,["dot",["name","this"],"constrainVertical"],["array",[["unary-prefix","-",["num",0.9]],["num",0.9]]]]],["stat",["assign",true,["dot",["dot",["name","this"],"object"],"matrixAutoUpdate"],["name","false"]]],["stat",["assign",true,["dot",["name","this"],"forward"],["new",["dot",["name","THREE"],"Vector3"],[["num",0],["num",0],["num",1]]]]],["stat",["assign",true,["dot",["name","this"],"roll"],["num",0]]],["var",[["xTemp",["new",["dot",["name","THREE"],"Vector3"],[]]]]],["var",[["yTemp",["new",["dot",["name","THREE"],"Vector3"],[]]]]],["var",[["zTemp",["new",["dot",["name","THREE"],"Vector3"],[]]]]],["var",[["rollMatrix",["new",["dot",["name","THREE"],"Matrix4"],[]]]]],["var",[["doRoll",["name","false"]],["rollDirection",["num",1]],["forwardSpeed",["num",0]],["sideSpeed",["num",0]],["upSpeed",["num",0]]]],["var",[["mouseX",["num",0]],["mouseY",["num",0]]]],["var",[["windowHalfX",["binary","/",["dot",["name","window"],"innerWidth"],["num",2]]]]],["var",[["windowHalfY",["binary","/",["dot",["name","window"],"innerHeight"],["num",2]]]]],["stat",["assign",true,["dot",["name","this"],"update"],["function",null,["delta"],[["if",["dot",["name","this"],"mouseLook"],["block",[["var",[["actualLookSpeed",["binary","*",["name","delta"],["dot",["name","this"],"lookSpeed"]]]]],["stat",["call",["dot",["name","this"],"rotateHorizontally"],[["binary","*",["name","actualLookSpeed"],["name","mouseX"]]]]],["stat",["call",["dot",["name","this"],"rotateVertically"],[["binary","*",["name","actualLookSpeed"],["name","mouseY"]]]]]]],null],["var",[["actualSpeed",["binary","*",["name","delta"],["dot",["name","this"],"movementSpeed"]]]]],["var",[["forwardOrAuto",["conditional",["binary","||",["binary",">",["name","forwardSpeed"],["num",0]],["binary","&&",["dot",["name","this"],"autoForward"],["unary-prefix","!",["binary","<",["name","forwardSpeed"],["num",0]]]]],["num",1],["name","forwardSpeed"]]]]],["stat",["call",["dot",["dot",["name","this"],"object"],"translateZ"],[["binary","*",["unary-prefix","-",["name","actualSpeed"]],["name","forwardOrAuto"]]]]],["stat",["call",["dot",["dot",["name","this"],"object"],"translateX"],[["binary","*",["name","actualSpeed"],["name","sideSpeed"]]]]],["stat",["call",["dot",["dot",["name","this"],"object"],"translateY"],[["binary","*",["name","actualSpeed"],["name","upSpeed"]]]]],["if",["name","doRoll"],["block",[["stat",["assign","+",["dot",["name","this"],"roll"],["binary","*",["binary","*",["dot",["name","this"],"rollSpeed"],["name","delta"]],["name","rollDirection"]]]]]],null],["if",["binary",">",["dot",["dot",["name","this"],"forward"],"y"],["sub",["dot",["name","this"],"constrainVertical"],["num",1]]],["block",[["stat",["assign",true,["dot",["dot",["name","this"],"forward"],"y"],["sub",["dot",["name","this"],"constrainVertical"],["num",1]]]],["stat",["call",["dot",["dot",["name","this"],"forward"],"normalize"],[]]]]],["if",["binary","<",["dot",["dot",["name","this"],"forward"],"y"],["sub",["dot",["name","this"],"constrainVertical"],["num",0]]],["block",[["stat",["assign",true,["dot",["dot",["name","this"],"forward"],"y"],["sub",["dot",["name","this"],"constrainVertical"],["num",0]]]],["stat",["call",["dot",["dot",["name","this"],"forward"],"normalize"],[]]]]],null]],["stat",["call",["dot",["name","zTemp"],"copy"],[["dot",["name","this"],"forward"]]]],["stat",["call",["dot",["name","yTemp"],"set"],[["num",0],["num",1],["num",0]]]],["stat",["call",["dot",["call",["dot",["name","xTemp"],"cross"],[["name","yTemp"],["name","zTemp"]]],"normalize"],[]]],["stat",["call",["dot",["call",["dot",["name","yTemp"],"cross"],[["name","zTemp"],["name","xTemp"]]],"normalize"],[]]],["stat",["assign",true,["sub",["dot",["dot",["dot",["name","this"],"object"],"matrix"],"elements"],["num",0]],["dot",["name","xTemp"],"x"]]],["stat",["assign",true,["sub",["dot",["dot",["dot",["name","this"],"object"],"matrix"],"elements"],["num",4]],["dot",["name","yTemp"],"x"]]],["stat",["assign",true,["sub",["dot",["dot",["dot",["name","this"],"object"],"matrix"],"elements"],["num",8]],["dot",["name","zTemp"],"x"]]],["stat",["assign",true,["sub",["dot",["dot",["dot",["name","this"],"object"],"matrix"],"elements"],["num",1]],["dot",["name","xTemp"],"y"]]],["stat",["assign",true,["sub",["dot",["dot",["dot",["name","this"],"object"],"matrix"],"elements"],["num",5]],["dot",["name","yTemp"],"y"]]],["stat",["assign",true,["sub",["dot",["dot",["dot",["name","this"],"object"],"matrix"],"elements"],["num",9]],["dot",["name","zTemp"],"y"]]],["stat",["assign",true,["sub",["dot",["dot",["dot",["name","this"],"object"],"matrix"],"elements"],["num",2]],["dot",["name","xTemp"],"z"]]],["stat",["assign",true,["sub",["dot",["dot",["dot",["name","this"],"object"],"matrix"],"elements"],["num",6]],["dot",["name","yTemp"],"z"]]],["stat",["assign",true,["sub",["dot",["dot",["dot",["name","this"],"object"],"matrix"],"elements"],["num",10]],["dot",["name","zTemp"],"z"]]],["stat",["call",["dot",["name","rollMatrix"],"identity"],[]]],["stat",["assign",true,["sub",["dot",["name","rollMatrix"],"elements"],["num",0]],["call",["dot",["name","Math"],"cos"],[["dot",["name","this"],"roll"]]]]],["stat",["assign",true,["sub",["dot",["name","rollMatrix"],"elements"],["num",4]],["unary-prefix","-",["call",["dot",["name","Math"],"sin"],[["dot",["name","this"],"roll"]]]]]],["stat",["assign",true,["sub",["dot",["name","rollMatrix"],"elements"],["num",1]],["call",["dot",["name","Math"],"sin"],[["dot",["name","this"],"roll"]]]]],["stat",["assign",true,["sub",["dot",["name","rollMatrix"],"elements"],["num",5]],["call",["dot",["name","Math"],"cos"],[["dot",["name","this"],"roll"]]]]],["stat",["call",["dot",["dot",["dot",["name","this"],"object"],"matrix"],"multiplySelf"],[["name","rollMatrix"]]]],["stat",["assign",true,["dot",["dot",["name","this"],"object"],"matrixWorldNeedsUpdate"],["name","true"]]],["stat",["assign",true,["sub",["dot",["dot",["dot",["name","this"],"object"],"matrix"],"elements"],["num",12]],["dot",["dot",["dot",["name","this"],"object"],"position"],"x"]]],["stat",["assign",true,["sub",["dot",["dot",["dot",["name","this"],"object"],"matrix"],"elements"],["num",13]],["dot",["dot",["dot",["name","this"],"object"],"position"],"y"]]],["stat",["assign",true,["sub",["dot",["dot",["dot",["name","this"],"object"],"matrix"],"elements"],["num",14]],["dot",["dot",["dot",["name","this"],"object"],"position"],"z"]]]]]]],["stat",["assign",true,["dot",["name","this"],"translateX"],["function",null,["distance"],[["stat",["assign","+",["dot",["dot",["dot",["name","this"],"object"],"position"],"x"],["binary","*",["sub",["dot",["dot",["dot",["name","this"],"object"],"matrix"],"elements"],["num",0]],["name","distance"]]]],["stat",["assign","+",["dot",["dot",["dot",["name","this"],"object"],"position"],"y"],["binary","*",["sub",["dot",["dot",["dot",["name","this"],"object"],"matrix"],"elements"],["num",1]],["name","distance"]]]],["stat",["assign","+",["dot",["dot",["dot",["name","this"],"object"],"position"],"z"],["binary","*",["sub",["dot",["dot",["dot",["name","this"],"object"],"matrix"],"elements"],["num",2]],["name","distance"]]]]]]]],["stat",["assign",true,["dot",["name","this"],"translateY"],["function",null,["distance"],[["stat",["assign","+",["dot",["dot",["dot",["name","this"],"object"],"position"],"x"],["binary","*",["sub",["dot",["dot",["dot",["name","this"],"object"],"matrix"],"elements"],["num",4]],["name","distance"]]]],["stat",["assign","+",["dot",["dot",["dot",["name","this"],"object"],"position"],"y"],["binary","*",["sub",["dot",["dot",["dot",["name","this"],"object"],"matrix"],"elements"],["num",5]],["name","distance"]]]],["stat",["assign","+",["dot",["dot",["dot",["name","this"],"object"],"position"],"z"],["binary","*",["sub",["dot",["dot",["dot",["name","this"],"object"],"matrix"],"elements"],["num",6]],["name","distance"]]]]]]]],["stat",["assign",true,["dot",["name","this"],"translateZ"],["function",null,["distance"],[["stat",["assign","-",["dot",["dot",["dot",["name","this"],"object"],"position"],"x"],["binary","*",["sub",["dot",["dot",["dot",["name","this"],"object"],"matrix"],"elements"],["num",8]],["name","distance"]]]],["stat",["assign","-",["dot",["dot",["dot",["name","this"],"object"],"position"],"y"],["binary","*",["sub",["dot",["dot",["dot",["name","this"],"object"],"matrix"],"elements"],["num",9]],["name","distance"]]]],["stat",["assign","-",["dot",["dot",["dot",["name","this"],"object"],"position"],"z"],["binary","*",["sub",["dot",["dot",["dot",["name","this"],"object"],"matrix"],"elements"],["num",10]],["name","distance"]]]]]]]],["stat",["assign",true,["dot",["name","this"],"rotateHorizontally"],["function",null,["amount"],[["stat",["call",["dot",["name","xTemp"],"set"],[["sub",["dot",["dot",["dot",["name","this"],"object"],"matrix"],"elements"],["num",0]],["sub",["dot",["dot",["dot",["name","this"],"object"],"matrix"],"elements"],["num",1]],["sub",["dot",["dot",["dot",["name","this"],"object"],"matrix"],"elements"],["num",2]]]]],["stat",["call",["dot",["name","xTemp"],"multiplyScalar"],[["name","amount"]]]],["stat",["call",["dot",["dot",["name","this"],"forward"],"subSelf"],[["name","xTemp"]]]],["stat",["call",["dot",["dot",["name","this"],"forward"],"normalize"],[]]]]]]],["stat",["assign",true,["dot",["name","this"],"rotateVertically"],["function",null,["amount"],[["stat",["call",["dot",["name","yTemp"],"set"],[["sub",["dot",["dot",["dot",["name","this"],"object"],"matrix"],"elements"],["num",4]],["sub",["dot",["dot",["dot",["name","this"],"object"],"matrix"],"elements"],["num",5]],["sub",["dot",["dot",["dot",["name","this"],"object"],"matrix"],"elements"],["num",6]]]]],["stat",["call",["dot",["name","yTemp"],"multiplyScalar"],[["name","amount"]]]],["stat",["call",["dot",["dot",["name","this"],"forward"],"addSelf"],[["name","yTemp"]]]],["stat",["call",["dot",["dot",["name","this"],"forward"],"normalize"],[]]]]]]],["defun","onKeyDown",["event"],[["switch",["dot",["name","event"],"keyCode"],[[["num",38],[]],[["num",87],[["stat",["assign",true,["name","forwardSpeed"],["num",1]]],["break",null]]],[["num",37],[]],[["num",65],[["stat",["assign",true,["name","sideSpeed"],["unary-prefix","-",["num",1]]]],["break",null]]],[["num",40],[]],[["num",83],[["stat",["assign",true,["name","forwardSpeed"],["unary-prefix","-",["num",1]]]],["break",null]]],[["num",39],[]],[["num",68],[["stat",["assign",true,["name","sideSpeed"],["num",1]]],["break",null]]],[["num",81],[["stat",["assign",true,["name","doRoll"],["name","true"]]],["stat",["assign",true,["name","rollDirection"],["num",1]]],["break",null]]],[["num",69],[["stat",["assign",true,["name","doRoll"],["name","true"]]],["stat",["assign",true,["name","rollDirection"],["unary-prefix","-",["num",1]]]],["break",null]]],[["num",82],[["stat",["assign",true,["name","upSpeed"],["num",1]]],["break",null]]],[["num",70],[["stat",["assign",true,["name","upSpeed"],["unary-prefix","-",["num",1]]]],["break",null]]]]]]],["block"],["defun","onKeyUp",["event"],[["switch",["dot",["name","event"],"keyCode"],[[["num",38],[]],[["num",87],[["stat",["assign",true,["name","forwardSpeed"],["num",0]]],["break",null]]],[["num",37],[]],[["num",65],[["stat",["assign",true,["name","sideSpeed"],["num",0]]],["break",null]]],[["num",40],[]],[["num",83],[["stat",["assign",true,["name","forwardSpeed"],["num",0]]],["break",null]]],[["num",39],[]],[["num",68],[["stat",["assign",true,["name","sideSpeed"],["num",0]]],["break",null]]],[["num",81],[["stat",["assign",true,["name","doRoll"],["name","false"]]],["break",null]]],[["num",69],[["stat",["assign",true,["name","doRoll"],["name","false"]]],["break",null]]],[["num",82],[["stat",["assign",true,["name","upSpeed"],["num",0]]],["break",null]]],[["num",70],[["stat",["assign",true,["name","upSpeed"],["num",0]]],["break",null]]]]]]],["block"],["defun","onMouseMove",["event"],[["stat",["assign",true,["name","mouseX"],["binary","/",["binary","-",["dot",["name","event"],"clientX"],["name","windowHalfX"]],["dot",["name","window"],"innerWidth"]]]],["stat",["assign",true,["name","mouseY"],["binary","/",["binary","-",["dot",["name","event"],"clientY"],["name","windowHalfY"]],["dot",["name","window"],"innerHeight"]]]]]],["block"],["defun","onMouseDown",["event"],[["stat",["call",["dot",["name","event"],"preventDefault"],[]]],["stat",["call",["dot",["name","event"],"stopPropagation"],[]]],["switch",["dot",["name","event"],"button"],[[["num",0],[["stat",["assign",true,["name","forwardSpeed"],["num",1]]],["break",null]]],[["num",2],[["stat",["assign",true,["name","forwardSpeed"],["unary-prefix","-",["num",1]]]],["break",null]]]]]]],["block"],["defun","onMouseUp",["event"],[["stat",["call",["dot",["name","event"],"preventDefault"],[]]],["stat",["call",["dot",["name","event"],"stopPropagation"],[]]],["switch",["dot",["name","event"],"button"],[[["num",0],[["stat",["assign",true,["name","forwardSpeed"],["num",0]]],["break",null]]],[["num",2],[["stat",["assign",true,["name","forwardSpeed"],["num",0]]],["break",null]]]]]]],["block"],["stat",["call",["dot",["dot",["name","this"],"domElement"],"addEventListener"],[["string","contextmenu"],["function",null,["event"],[["stat",["call",["dot",["name","event"],"preventDefault"],[]]]]],["name","false"]]]],["stat",["call",["dot",["dot",["name","this"],"domElement"],"addEventListener"],[["string","mousemove"],["name","onMouseMove"],["name","false"]]]],["stat",["call",["dot",["dot",["name","this"],"domElement"],"addEventListener"],[["string","mousedown"],["name","onMouseDown"],["name","false"]]]],["stat",["call",["dot",["dot",["name","this"],"domElement"],"addEventListener"],[["string","mouseup"],["name","onMouseUp"],["name","false"]]]],["stat",["call",["dot",["dot",["name","this"],"domElement"],"addEventListener"],[["string","keydown"],["name","onKeyDown"],["name","false"]]]],["stat",["call",["dot",["dot",["name","this"],"domElement"],"addEventListener"],[["string","keyup"],["name","onKeyUp"],["name","false"]]]]]]]],["stat",["assign",true,["dot",["name","THREE"],"TrackballControls"],["function",null,["object","domElement"],[["stat",["call",["dot",["dot",["name","THREE"],"EventTarget"],"call"],[["name","this"]]]],["var",[["_this",["name","this"]],["STATE",["object",[["NONE",["unary-prefix","-",["num",1]]],["ROTATE",["num",0]],["ZOOM",["num",1]],["PAN",["num",2]]]]]]],["stat",["assign",true,["dot",["name","this"],"object"],["name","object"]]],["stat",["assign",true,["dot",["name","this"],"domElement"],["conditional",["binary","!==",["name","domElement"],["name","undefined"]],["name","domElement"],["name","document"]]]],["stat",["assign",true,["dot",["name","this"],"enabled"],["name","true"]]],["stat",["assign",true,["dot",["name","this"],"screen"],["object",[["width",["dot",["name","window"],"innerWidth"]],["height",["dot",["name","window"],"innerHeight"]],["offsetLeft",["num",0]],["offsetTop",["num",0]]]]]],["stat",["assign",true,["dot",["name","this"],"radius"],["binary","/",["binary","+",["dot",["dot",["name","this"],"screen"],"width"],["dot",["dot",["name","this"],"screen"],"height"]],["num",4]]]],["stat",["assign",true,["dot",["name","this"],"rotateSpeed"],["num",1]]],["stat",["assign",true,["dot",["name","this"],"zoomSpeed"],["num",1.2]]],["stat",["assign",true,["dot",["name","this"],"panSpeed"],["num",0.3]]],["stat",["assign",true,["dot",["name","this"],"noRotate"],["name","false"]]],["stat",["assign",true,["dot",["name","this"],"noZoom"],["name","false"]]],["stat",["assign",true,["dot",["name","this"],"noPan"],["name","false"]]],["stat",["assign",true,["dot",["name","this"],"staticMoving"],["name","false"]]],["stat",["assign",true,["dot",["name","this"],"dynamicDampingFactor"],["num",0.2]]],["stat",["assign",true,["dot",["name","this"],"minDistance"],["num",0]]],["stat",["assign",true,["dot",["name","this"],"maxDistance"],["name","Infinity"]]],["stat",["assign",true,["dot",["name","this"],"keys"],["array",[["num",65],["num",83],["num",68]]]]],["stat",["assign",true,["dot",["name","this"],"target"],["new",["dot",["name","THREE"],"Vector3"],[]]]],["var",[["lastPosition",["new",["dot",["name","THREE"],"Vector3"],[]]]]],["var",[["_keyPressed",["name","false"]],["_state",["dot",["name","STATE"],"NONE"]],["_eye",["new",["dot",["name","THREE"],"Vector3"],[]]],["_rotateStart",["new",["dot",["name","THREE"],"Vector3"],[]]],["_rotateEnd",["new",["dot",["name","THREE"],"Vector3"],[]]],["_zoomStart",["new",["dot",["name","THREE"],"Vector2"],[]]],["_zoomEnd",["new",["dot",["name","THREE"],"Vector2"],[]]],["_panStart",["new",["dot",["name","THREE"],"Vector2"],[]]],["_panEnd",["new",["dot",["name","THREE"],"Vector2"],[]]]]],["var",[["changeEvent",["object",[["type",["string","change"]]]]]]],["stat",["assign",true,["dot",["name","this"],"handleEvent"],["function",null,["event"],[["if",["binary","==",["unary-prefix","typeof",["sub",["name","this"],["dot",["name","event"],"type"]]],["string","function"]],["block",[["stat",["call",["sub",["name","this"],["dot",["name","event"],"type"]],[["name","event"]]]]]],null]]]]],["stat",["assign",true,["dot",["name","this"],"getMouseOnScreen"],["function",null,["clientX","clientY"],[["return",["new",["dot",["name","THREE"],"Vector2"],[["binary","*",["binary","/",["binary","-",["name","clientX"],["dot",["dot",["name","_this"],"screen"],"offsetLeft"]],["dot",["name","_this"],"radius"]],["num",0.5]],["binary","*",["binary","/",["binary","-",["name","clientY"],["dot",["dot",["name","_this"],"screen"],"offsetTop"]],["dot",["name","_this"],"radius"]],["num",0.5]]]]]]]]],["stat",["assign",true,["dot",["name","this"],"getMouseProjectionOnBall"],["function",null,["clientX","clientY"],[["var",[["mouseOnBall",["new",["dot",["name","THREE"],"Vector3"],[["binary","/",["binary","-",["binary","-",["name","clientX"],["binary","*",["dot",["dot",["name","_this"],"screen"],"width"],["num",0.5]]],["dot",["dot",["name","_this"],"screen"],"offsetLeft"]],["dot",["name","_this"],"radius"]],["binary","/",["binary","-",["binary","+",["binary","*",["dot",["dot",["name","_this"],"screen"],"height"],["num",0.5]],["dot",["dot",["name","_this"],"screen"],"offsetTop"]],["name","clientY"]],["dot",["name","_this"],"radius"]],["num",0]]]]]],["var",[["length",["call",["dot",["name","mouseOnBall"],"length"],[]]]]],["if",["binary",">",["name","length"],["num",1]],["block",[["stat",["call",["dot",["name","mouseOnBall"],"normalize"],[]]]]],["block",[["stat",["assign",true,["dot",["name","mouseOnBall"],"z"],["call",["dot",["name","Math"],"sqrt"],[["binary","-",["num",1],["binary","*",["name","length"],["name","length"]]]]]]]]]],["stat",["call",["dot",["call",["dot",["name","_eye"],"copy"],[["dot",["dot",["name","_this"],"object"],"position"]]],"subSelf"],[["dot",["name","_this"],"target"]]]],["var",[["projection",["call",["dot",["call",["dot",["dot",["dot",["name","_this"],"object"],"up"],"clone"],[]],"setLength"],[["dot",["name","mouseOnBall"],"y"]]]]]],["stat",["call",["dot",["name","projection"],"addSelf"],[["call",["dot",["call",["dot",["call",["dot",["dot",["dot",["name","_this"],"object"],"up"],"clone"],[]],"crossSelf"],[["name","_eye"]]],"setLength"],[["dot",["name","mouseOnBall"],"x"]]]]]],["stat",["call",["dot",["name","projection"],"addSelf"],[["call",["dot",["name","_eye"],"setLength"],[["dot",["name","mouseOnBall"],"z"]]]]]],["return",["name","projection"]]]]]],["stat",["assign",true,["dot",["name","this"],"rotateCamera"],["function",null,[],[["var",[["angle",["call",["dot",["name","Math"],"acos"],[["binary","/",["binary","/",["call",["dot",["name","_rotateStart"],"dot"],[["name","_rotateEnd"]]],["call",["dot",["name","_rotateStart"],"length"],[]]],["call",["dot",["name","_rotateEnd"],"length"],[]]]]]]]],["if",["name","angle"],["block",[["var",[["axis",["call",["dot",["call",["dot",["new",["dot",["name","THREE"],"Vector3"],[]],"cross"],[["name","_rotateStart"],["name","_rotateEnd"]]],"normalize"],[]]],["quaternion",["new",["dot",["name","THREE"],"Quaternion"],[]]]]],["stat",["assign","*",["name","angle"],["dot",["name","_this"],"rotateSpeed"]]],["stat",["call",["dot",["name","quaternion"],"setFromAxisAngle"],[["name","axis"],["unary-prefix","-",["name","angle"]]]]],["stat",["call",["dot",["name","quaternion"],"multiplyVector3"],[["name","_eye"]]]],["stat",["call",["dot",["name","quaternion"],"multiplyVector3"],[["dot",["dot",["name","_this"],"object"],"up"]]]],["stat",["call",["dot",["name","quaternion"],"multiplyVector3"],[["name","_rotateEnd"]]]],["if",["dot",["name","_this"],"staticMoving"],["block",[["stat",["assign",true,["name","_rotateStart"],["name","_rotateEnd"]]]]],["block",[["stat",["call",["dot",["name","quaternion"],"setFromAxisAngle"],[["name","axis"],["binary","*",["name","angle"],["binary","-",["dot",["name","_this"],"dynamicDampingFactor"],["num",1]]]]]],["stat",["call",["dot",["name","quaternion"],"multiplyVector3"],[["name","_rotateStart"]]]]]]]]],null]]]]],["stat",["assign",true,["dot",["name","this"],"zoomCamera"],["function",null,[],[["var",[["factor",["binary","+",["num",1],["binary","*",["binary","-",["dot",["name","_zoomEnd"],"y"],["dot",["name","_zoomStart"],"y"]],["dot",["name","_this"],"zoomSpeed"]]]]]],["if",["binary","&&",["binary","!==",["name","factor"],["num",1]],["binary",">",["name","factor"],["num",0]]],["block",[["stat",["call",["dot",["name","_eye"],"multiplyScalar"],[["name","factor"]]]],["if",["dot",["name","_this"],"staticMoving"],["block",[["stat",["assign",true,["name","_zoomStart"],["name","_zoomEnd"]]]]],["block",[["stat",["assign","+",["dot",["name","_zoomStart"],"y"],["binary","*",["binary","-",["dot",["name","_zoomEnd"],"y"],["dot",["name","_zoomStart"],"y"]],["dot",["name","this"],"dynamicDampingFactor"]]]]]]]]],null]]]]],["stat",["assign",true,["dot",["name","this"],"panCamera"],["function",null,[],[["var",[["mouseChange",["call",["dot",["call",["dot",["name","_panEnd"],"clone"],[]],"subSelf"],[["name","_panStart"]]]]]],["if",["call",["dot",["name","mouseChange"],"lengthSq"],[]],["block",[["stat",["call",["dot",["name","mouseChange"],"multiplyScalar"],[["binary","*",["call",["dot",["name","_eye"],"length"],[]],["dot",["name","_this"],"panSpeed"]]]]],["var",[["pan",["call",["dot",["call",["dot",["call",["dot",["name","_eye"],"clone"],[]],"crossSelf"],[["dot",["dot",["name","_this"],"object"],"up"]]],"setLength"],[["dot",["name","mouseChange"],"x"]]]]]],["stat",["call",["dot",["name","pan"],"addSelf"],[["call",["dot",["call",["dot",["dot",["dot",["name","_this"],"object"],"up"],"clone"],[]],"setLength"],[["dot",["name","mouseChange"],"y"]]]]]],["stat",["call",["dot",["dot",["dot",["name","_this"],"object"],"position"],"addSelf"],[["name","pan"]]]],["stat",["call",["dot",["dot",["name","_this"],"target"],"addSelf"],[["name","pan"]]]],["if",["dot",["name","_this"],"staticMoving"],["block",[["stat",["assign",true,["name","_panStart"],["name","_panEnd"]]]]],["block",[["stat",["call",["dot",["name","_panStart"],"addSelf"],[["call",["dot",["call",["dot",["name","mouseChange"],"sub"],[["name","_panEnd"],["name","_panStart"]]],"multiplyScalar"],[["dot",["name","_this"],"dynamicDampingFactor"]]]]]]]]]]],null]]]]],["stat",["assign",true,["dot",["name","this"],"checkDistances"],["function",null,[],[["if",["binary","||",["unary-prefix","!",["dot",["name","_this"],"noZoom"]],["unary-prefix","!",["dot",["name","_this"],"noPan"]]],["block",[["if",["binary",">",["call",["dot",["dot",["dot",["name","_this"],"object"],"position"],"lengthSq"],[]],["binary","*",["dot",["name","_this"],"maxDistance"],["dot",["name","_this"],"maxDistance"]]],["block",[["stat",["call",["dot",["dot",["dot",["name","_this"],"object"],"position"],"setLength"],[["dot",["name","_this"],"maxDistance"]]]]]],null],["if",["binary","<",["call",["dot",["name","_eye"],"lengthSq"],[]],["binary","*",["dot",["name","_this"],"minDistance"],["dot",["name","_this"],"minDistance"]]],["block",[["stat",["call",["dot",["dot",["dot",["name","_this"],"object"],"position"],"add"],[["dot",["name","_this"],"target"],["call",["dot",["name","_eye"],"setLength"],[["dot",["name","_this"],"minDistance"]]]]]]]],null]]],null]]]]],["stat",["assign",true,["dot",["name","this"],"update"],["function",null,[],[["stat",["call",["dot",["call",["dot",["name","_eye"],"copy"],[["dot",["dot",["name","_this"],"object"],"position"]]],"subSelf"],[["dot",["name","_this"],"target"]]]],["if",["unary-prefix","!",["dot",["name","_this"],"noRotate"]],["block",[["stat",["call",["dot",["name","_this"],"rotateCamera"],[]]]]],null],["if",["unary-prefix","!",["dot",["name","_this"],"noZoom"]],["block",[["stat",["call",["dot",["name","_this"],"zoomCamera"],[]]]]],null],["if",["unary-prefix","!",["dot",["name","_this"],"noPan"]],["block",[["stat",["call",["dot",["name","_this"],"panCamera"],[]]]]],null],["stat",["call",["dot",["dot",["dot",["name","_this"],"object"],"position"],"add"],[["dot",["name","_this"],"target"],["name","_eye"]]]],["stat",["call",["dot",["name","_this"],"checkDistances"],[]]],["stat",["call",["dot",["dot",["name","_this"],"object"],"lookAt"],[["dot",["name","_this"],"target"]]]],["if",["binary",">",["call",["dot",["name","lastPosition"],"distanceTo"],[["dot",["dot",["name","_this"],"object"],"position"]]],["num",0]],["block",[["stat",["call",["dot",["name","_this"],"dispatchEvent"],[["name","changeEvent"]]]],["stat",["call",["dot",["name","lastPosition"],"copy"],[["dot",["dot",["name","_this"],"object"],"position"]]]]]],null]]]]],["defun","keydown",["event"],[["if",["unary-prefix","!",["dot",["name","_this"],"enabled"]],["return",null],null],["if",["binary","!==",["name","_state"],["dot",["name","STATE"],"NONE"]],["block",[["return",null]]],["if",["binary","&&",["binary","===",["dot",["name","event"],"keyCode"],["sub",["dot",["name","_this"],"keys"],["dot",["name","STATE"],"ROTATE"]]],["unary-prefix","!",["dot",["name","_this"],"noRotate"]]],["block",[["stat",["assign",true,["name","_state"],["dot",["name","STATE"],"ROTATE"]]]]],["if",["binary","&&",["binary","===",["dot",["name","event"],"keyCode"],["sub",["dot",["name","_this"],"keys"],["dot",["name","STATE"],"ZOOM"]]],["unary-prefix","!",["dot",["name","_this"],"noZoom"]]],["block",[["stat",["assign",true,["name","_state"],["dot",["name","STATE"],"ZOOM"]]]]],["if",["binary","&&",["binary","===",["dot",["name","event"],"keyCode"],["sub",["dot",["name","_this"],"keys"],["dot",["name","STATE"],"PAN"]]],["unary-prefix","!",["dot",["name","_this"],"noPan"]]],["block",[["stat",["assign",true,["name","_state"],["dot",["name","STATE"],"PAN"]]]]],null]]]],["if",["binary","!==",["name","_state"],["dot",["name","STATE"],"NONE"]],["block",[["stat",["assign",true,["name","_keyPressed"],["name","true"]]]]],null]]],["block"],["defun","keyup",["event"],[["if",["unary-prefix","!",["dot",["name","_this"],"enabled"]],["return",null],null],["if",["binary","!==",["name","_state"],["dot",["name","STATE"],"NONE"]],["block",[["stat",["assign",true,["name","_state"],["dot",["name","STATE"],"NONE"]]]]],null]]],["block"],["defun","mousedown",["event"],[["if",["unary-prefix","!",["dot",["name","_this"],"enabled"]],["return",null],null],["stat",["call",["dot",["name","event"],"preventDefault"],[]]],["stat",["call",["dot",["name","event"],"stopPropagation"],[]]],["if",["binary","===",["name","_state"],["dot",["name","STATE"],"NONE"]],["block",[["stat",["assign",true,["name","_state"],["dot",["name","event"],"button"]]],["if",["binary","&&",["binary","===",["name","_state"],["dot",["name","STATE"],"ROTATE"]],["unary-prefix","!",["dot",["name","_this"],"noRotate"]]],["block",[["stat",["assign",true,["name","_rotateStart"],["assign",true,["name","_rotateEnd"],["call",["dot",["name","_this"],"getMouseProjectionOnBall"],[["dot",["name","event"],"clientX"],["dot",["name","event"],"clientY"]]]]]]]],["if",["binary","&&",["binary","===",["name","_state"],["dot",["name","STATE"],"ZOOM"]],["unary-prefix","!",["dot",["name","_this"],"noZoom"]]],["block",[["stat",["assign",true,["name","_zoomStart"],["assign",true,["name","_zoomEnd"],["call",["dot",["name","_this"],"getMouseOnScreen"],[["dot",["name","event"],"clientX"],["dot",["name","event"],"clientY"]]]]]]]],["if",["unary-prefix","!",["dot",["name","this"],"noPan"]],["block",[["stat",["assign",true,["name","_panStart"],["assign",true,["name","_panEnd"],["call",["dot",["name","_this"],"getMouseOnScreen"],[["dot",["name","event"],"clientX"],["dot",["name","event"],"clientY"]]]]]]]],null]]]]],null]]],["block"],["defun","mousemove",["event"],[["if",["unary-prefix","!",["dot",["name","_this"],"enabled"]],["return",null],null],["if",["name","_keyPressed"],["block",[["stat",["assign",true,["name","_rotateStart"],["assign",true,["name","_rotateEnd"],["call",["dot",["name","_this"],"getMouseProjectionOnBall"],[["dot",["name","event"],"clientX"],["dot",["name","event"],"clientY"]]]]]],["stat",["assign",true,["name","_zoomStart"],["assign",true,["name","_zoomEnd"],["call",["dot",["name","_this"],"getMouseOnScreen"],[["dot",["name","event"],"clientX"],["dot",["name","event"],"clientY"]]]]]],["stat",["assign",true,["name","_panStart"],["assign",true,["name","_panEnd"],["call",["dot",["name","_this"],"getMouseOnScreen"],[["dot",["name","event"],"clientX"],["dot",["name","event"],"clientY"]]]]]],["stat",["assign",true,["name","_keyPressed"],["name","false"]]]]],null],["if",["binary","===",["name","_state"],["dot",["name","STATE"],"NONE"]],["block",[["return",null]]],["if",["binary","&&",["binary","===",["name","_state"],["dot",["name","STATE"],"ROTATE"]],["unary-prefix","!",["dot",["name","_this"],"noRotate"]]],["block",[["stat",["assign",true,["name","_rotateEnd"],["call",["dot",["name","_this"],"getMouseProjectionOnBall"],[["dot",["name","event"],"clientX"],["dot",["name","event"],"clientY"]]]]]]],["if",["binary","&&",["binary","===",["name","_state"],["dot",["name","STATE"],"ZOOM"]],["unary-prefix","!",["dot",["name","_this"],"noZoom"]]],["block",[["stat",["assign",true,["name","_zoomEnd"],["call",["dot",["name","_this"],"getMouseOnScreen"],[["dot",["name","event"],"clientX"],["dot",["name","event"],"clientY"]]]]]]],["if",["binary","&&",["binary","===",["name","_state"],["dot",["name","STATE"],"PAN"]],["unary-prefix","!",["dot",["name","_this"],"noPan"]]],["block",[["stat",["assign",true,["name","_panEnd"],["call",["dot",["name","_this"],"getMouseOnScreen"],[["dot",["name","event"],"clientX"],["dot",["name","event"],"clientY"]]]]]]],null]]]]]],["block"],["defun","mouseup",["event"],[["if",["unary-prefix","!",["dot",["name","_this"],"enabled"]],["return",null],null],["stat",["call",["dot",["name","event"],"preventDefault"],[]]],["stat",["call",["dot",["name","event"],"stopPropagation"],[]]],["stat",["assign",true,["name","_state"],["dot",["name","STATE"],"NONE"]]]]],["block"],["stat",["call",["dot",["dot",["name","this"],"domElement"],"addEventListener"],[["string","contextmenu"],["function",null,["event"],[["stat",["call",["dot",["name","event"],"preventDefault"],[]]]]],["name","false"]]]],["stat",["call",["dot",["dot",["name","this"],"domElement"],"addEventListener"],[["string","mousemove"],["name","mousemove"],["name","false"]]]],["stat",["call",["dot",["dot",["name","this"],"domElement"],"addEventListener"],[["string","mousedown"],["name","mousedown"],["name","false"]]]],["stat",["call",["dot",["dot",["name","this"],"domElement"],"addEventListener"],[["string","mouseup"],["name","mouseup"],["name","false"]]]],["stat",["call",["dot",["name","window"],"addEventListener"],[["string","keydown"],["name","keydown"],["name","false"]]]],["stat",["call",["dot",["name","window"],"addEventListener"],[["string","keyup"],["name","keyup"],["name","false"]]]]]]]],["stat",["assign",true,["dot",["name","THREE"],"CubeGeometry"],["function",null,["width","height","depth","segmentsWidth","segmentsHeight","segmentsDepth","materials","sides"],[["stat",["call",["dot",["dot",["name","THREE"],"Geometry"],"call"],[["name","this"]]]],["var",[["scope",["name","this"]],["width_half",["binary","/",["name","width"],["num",2]]],["height_half",["binary","/",["name","height"],["num",2]]],["depth_half",["binary","/",["name","depth"],["num",2]]]]],["var",[["mpx"],["mpy"],["mpz"],["mnx"],["mny"],["mnz"]]],["if",["binary","!==",["name","materials"],["name","undefined"]],["block",[["if",["binary","instanceof",["name","materials"],["name","Array"]],["block",[["stat",["assign",true,["dot",["name","this"],"materials"],["name","materials"]]]]],["block",[["stat",["assign",true,["dot",["name","this"],"materials"],["array",[]]]],["for",["var",[["i",["num",0]]]],["binary","<",["name","i"],["num",6]],["unary-postfix","++",["name","i"]],["block",[["stat",["call",["dot",["dot",["name","this"],"materials"],"push"],[["name","materials"]]]]]]]]]],["stat",["assign",true,["name","mpx"],["num",0]]],["stat",["assign",true,["name","mnx"],["num",1]]],["stat",["assign",true,["name","mpy"],["num",2]]],["stat",["assign",true,["name","mny"],["num",3]]],["stat",["assign",true,["name","mpz"],["num",4]]],["stat",["assign",true,["name","mnz"],["num",5]]]]],["block",[["stat",["assign",true,["dot",["name","this"],"materials"],["array",[]]]]]]],["stat",["assign",true,["dot",["name","this"],"sides"],["object",[["px",["name","true"]],["nx",["name","true"]],["py",["name","true"]],["ny",["name","true"]],["pz",["name","true"]],["nz",["name","true"]]]]]],["if",["binary","!=",["name","sides"],["name","undefined"]],["block",[["for-in",["var",[["s"]]],["name",["s"]],["name","sides"],["block",[["if",["binary","!==",["sub",["dot",["name","this"],"sides"],["name","s"]],["name","undefined"]],["block",[["stat",["assign",true,["sub",["dot",["name","this"],"sides"],["name","s"]],["sub",["name","sides"],["name","s"]]]]]],null]]]]]],null],["stat",["binary","&&",["dot",["dot",["name","this"],"sides"],"px"],["call",["name","buildPlane"],[["string","z"],["string","y"],["unary-prefix","-",["num",1]],["unary-prefix","-",["num",1]],["name","depth"],["name","height"],["name","width_half"],["name","mpx"]]]]],["stat",["binary","&&",["dot",["dot",["name","this"],"sides"],"nx"],["call",["name","buildPlane"],[["string","z"],["string","y"],["num",1],["unary-prefix","-",["num",1]],["name","depth"],["name","height"],["unary-prefix","-",["name","width_half"]],["name","mnx"]]]]],["stat",["binary","&&",["dot",["dot",["name","this"],"sides"],"py"],["call",["name","buildPlane"],[["string","x"],["string","z"],["num",1],["num",1],["name","width"],["name","depth"],["name","height_half"],["name","mpy"]]]]],["stat",["binary","&&",["dot",["dot",["name","this"],"sides"],"ny"],["call",["name","buildPlane"],[["string","x"],["string","z"],["num",1],["unary-prefix","-",["num",1]],["name","width"],["name","depth"],["unary-prefix","-",["name","height_half"]],["name","mny"]]]]],["stat",["binary","&&",["dot",["dot",["name","this"],"sides"],"pz"],["call",["name","buildPlane"],[["string","x"],["string","y"],["num",1],["unary-prefix","-",["num",1]],["name","width"],["name","height"],["name","depth_half"],["name","mpz"]]]]],["stat",["binary","&&",["dot",["dot",["name","this"],"sides"],"nz"],["call",["name","buildPlane"],[["string","x"],["string","y"],["unary-prefix","-",["num",1]],["unary-prefix","-",["num",1]],["name","width"],["name","height"],["unary-prefix","-",["name","depth_half"]],["name","mnz"]]]]],["defun","buildPlane",["u","v","udir","vdir","width","height","depth","material"],[["var",[["w"],["ix"],["iy"],["gridX",["binary","||",["name","segmentsWidth"],["num",1]]],["gridY",["binary","||",["name","segmentsHeight"],["num",1]]],["width_half",["binary","/",["name","width"],["num",2]]],["height_half",["binary","/",["name","height"],["num",2]]],["offset",["dot",["dot",["name","scope"],"vertices"],"length"]]]],["if",["binary","||",["binary","&&",["binary","===",["name","u"],["string","x"]],["binary","===",["name","v"],["string","y"]]],["binary","&&",["binary","===",["name","u"],["string","y"]],["binary","===",["name","v"],["string","x"]]]],["block",[["stat",["assign",true,["name","w"],["string","z"]]]]],["if",["binary","||",["binary","&&",["binary","===",["name","u"],["string","x"]],["binary","===",["name","v"],["string","z"]]],["binary","&&",["binary","===",["name","u"],["string","z"]],["binary","===",["name","v"],["string","x"]]]],["block",[["stat",["assign",true,["name","w"],["string","y"]]],["stat",["assign",true,["name","gridY"],["binary","||",["name","segmentsDepth"],["num",1]]]]]],["if",["binary","||",["binary","&&",["binary","===",["name","u"],["string","z"]],["binary","===",["name","v"],["string","y"]]],["binary","&&",["binary","===",["name","u"],["string","y"]],["binary","===",["name","v"],["string","z"]]]],["block",[["stat",["assign",true,["name","w"],["string","x"]]],["stat",["assign",true,["name","gridX"],["binary","||",["name","segmentsDepth"],["num",1]]]]]],null]]],["var",[["gridX1",["binary","+",["name","gridX"],["num",1]]],["gridY1",["binary","+",["name","gridY"],["num",1]]],["segment_width",["binary","/",["name","width"],["name","gridX"]]],["segment_height",["binary","/",["name","height"],["name","gridY"]]],["normal",["new",["dot",["name","THREE"],"Vector3"],[]]]]],["stat",["assign",true,["sub",["name","normal"],["name","w"]],["conditional",["binary",">",["name","depth"],["num",0]],["num",1],["unary-prefix","-",["num",1]]]]],["for",["assign",true,["name","iy"],["num",0]],["binary","<",["name","iy"],["name","gridY1"]],["unary-postfix","++",["name","iy"]],["block",[["for",["assign",true,["name","ix"],["num",0]],["binary","<",["name","ix"],["name","gridX1"]],["unary-postfix","++",["name","ix"]],["block",[["var",[["vector",["new",["dot",["name","THREE"],"Vector3"],[]]]]],["stat",["assign",true,["sub",["name","vector"],["name","u"]],["binary","*",["binary","-",["binary","*",["name","ix"],["name","segment_width"]],["name","width_half"]],["name","udir"]]]],["stat",["assign",true,["sub",["name","vector"],["name","v"]],["binary","*",["binary","-",["binary","*",["name","iy"],["name","segment_height"]],["name","height_half"]],["name","vdir"]]]],["stat",["assign",true,["sub",["name","vector"],["name","w"]],["name","depth"]]],["stat",["call",["dot",["dot",["name","scope"],"vertices"],"push"],[["name","vector"]]]]]]]]]],["for",["assign",true,["name","iy"],["num",0]],["binary","<",["name","iy"],["name","gridY"]],["unary-postfix","++",["name","iy"]],["block",[["for",["assign",true,["name","ix"],["num",0]],["binary","<",["name","ix"],["name","gridX"]],["unary-postfix","++",["name","ix"]],["block",[["var",[["a",["binary","+",["name","ix"],["binary","*",["name","gridX1"],["name","iy"]]]]]],["var",[["b",["binary","+",["name","ix"],["binary","*",["name","gridX1"],["binary","+",["name","iy"],["num",1]]]]]]],["var",[["c",["binary","+",["binary","+",["name","ix"],["num",1]],["binary","*",["name","gridX1"],["binary","+",["name","iy"],["num",1]]]]]]],["var",[["d",["binary","+",["binary","+",["name","ix"],["num",1]],["binary","*",["name","gridX1"],["name","iy"]]]]]],["var",[["face",["new",["dot",["name","THREE"],"Face4"],[["binary","+",["name","a"],["name","offset"]],["binary","+",["name","b"],["name","offset"]],["binary","+",["name","c"],["name","offset"]],["binary","+",["name","d"],["name","offset"]]]]]]],["stat",["call",["dot",["dot",["name","face"],"normal"],"copy"],[["name","normal"]]]],["stat",["call",["dot",["dot",["name","face"],"vertexNormals"],"push"],[["call",["dot",["name","normal"],"clone"],[]],["call",["dot",["name","normal"],"clone"],[]],["call",["dot",["name","normal"],"clone"],[]],["call",["dot",["name","normal"],"clone"],[]]]]],["stat",["assign",true,["dot",["name","face"],"materialIndex"],["name","material"]]],["stat",["call",["dot",["dot",["name","scope"],"faces"],"push"],[["name","face"]]]],["stat",["call",["dot",["sub",["dot",["name","scope"],"faceVertexUvs"],["num",0]],"push"],[["array",[["new",["dot",["name","THREE"],"UV"],[["binary","/",["name","ix"],["name","gridX"]],["binary","/",["name","iy"],["name","gridY"]]]],["new",["dot",["name","THREE"],"UV"],[["binary","/",["name","ix"],["name","gridX"]],["binary","/",["binary","+",["name","iy"],["num",1]],["name","gridY"]]]],["new",["dot",["name","THREE"],"UV"],[["binary","/",["binary","+",["name","ix"],["num",1]],["name","gridX"]],["binary","/",["binary","+",["name","iy"],["num",1]],["name","gridY"]]]],["new",["dot",["name","THREE"],"UV"],[["binary","/",["binary","+",["name","ix"],["num",1]],["name","gridX"]],["binary","/",["name","iy"],["name","gridY"]]]]]]]]]]]]]]]]],["stat",["call",["dot",["name","this"],"computeCentroids"],[]]],["stat",["call",["dot",["name","this"],"mergeVertices"],[]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"CubeGeometry"],"prototype"],["new",["dot",["name","THREE"],"Geometry"],[]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"CubeGeometry"],"prototype"],"constructor"],["dot",["name","THREE"],"CubeGeometry"]]],["stat",["assign",true,["dot",["name","THREE"],"CylinderGeometry"],["function",null,["radiusTop","radiusBottom","height","segmentsRadius","segmentsHeight","openEnded"],[["stat",["call",["dot",["dot",["name","THREE"],"Geometry"],"call"],[["name","this"]]]],["stat",["assign",true,["name","radiusTop"],["conditional",["binary","!==",["name","radiusTop"],["name","undefined"]],["name","radiusTop"],["num",20]]]],["stat",["assign",true,["name","radiusBottom"],["conditional",["binary","!==",["name","radiusBottom"],["name","undefined"]],["name","radiusBottom"],["num",20]]]],["stat",["assign",true,["name","height"],["conditional",["binary","!==",["name","height"],["name","undefined"]],["name","height"],["num",100]]]],["var",[["heightHalf",["binary","/",["name","height"],["num",2]]]]],["var",[["segmentsX",["binary","||",["name","segmentsRadius"],["num",8]]]]],["var",[["segmentsY",["binary","||",["name","segmentsHeight"],["num",1]]]]],["var",[["x"],["y"],["vertices",["array",[]]],["uvs",["array",[]]]]],["for",["assign",true,["name","y"],["num",0]],["binary","<=",["name","y"],["name","segmentsY"]],["unary-postfix","++",["name","y"]],["block",[["var",[["verticesRow",["array",[]]]]],["var",[["uvsRow",["array",[]]]]],["var",[["v",["binary","/",["name","y"],["name","segmentsY"]]]]],["var",[["radius",["binary","+",["binary","*",["name","v"],["binary","-",["name","radiusBottom"],["name","radiusTop"]]],["name","radiusTop"]]]]],["for",["assign",true,["name","x"],["num",0]],["binary","<=",["name","x"],["name","segmentsX"]],["unary-postfix","++",["name","x"]],["block",[["var",[["u",["binary","/",["name","x"],["name","segmentsX"]]]]],["var",[["vertex",["new",["dot",["name","THREE"],"Vector3"],[]]]]],["stat",["assign",true,["dot",["name","vertex"],"x"],["binary","*",["name","radius"],["call",["dot",["name","Math"],"sin"],[["binary","*",["binary","*",["name","u"],["dot",["name","Math"],"PI"]],["num",2]]]]]]],["stat",["assign",true,["dot",["name","vertex"],"y"],["binary","+",["binary","*",["unary-prefix","-",["name","v"]],["name","height"]],["name","heightHalf"]]]],["stat",["assign",true,["dot",["name","vertex"],"z"],["binary","*",["name","radius"],["call",["dot",["name","Math"],"cos"],[["binary","*",["binary","*",["name","u"],["dot",["name","Math"],"PI"]],["num",2]]]]]]],["stat",["call",["dot",["dot",["name","this"],"vertices"],"push"],[["name","vertex"]]]],["stat",["call",["dot",["name","verticesRow"],"push"],[["binary","-",["dot",["dot",["name","this"],"vertices"],"length"],["num",1]]]]],["stat",["call",["dot",["name","uvsRow"],"push"],[["new",["dot",["name","THREE"],"UV"],[["name","u"],["name","v"]]]]]]]]],["stat",["call",["dot",["name","vertices"],"push"],[["name","verticesRow"]]]],["stat",["call",["dot",["name","uvs"],"push"],[["name","uvsRow"]]]]]]],["var",[["tanTheta",["binary","/",["binary","-",["name","radiusBottom"],["name","radiusTop"]],["name","height"]]]]],["var",[["na"],["nb"]]],["for",["assign",true,["name","x"],["num",0]],["binary","<",["name","x"],["name","segmentsX"]],["unary-postfix","++",["name","x"]],["block",[["if",["binary","!==",["name","radiusTop"],["num",0]],["block",[["stat",["assign",true,["name","na"],["call",["dot",["sub",["dot",["name","this"],"vertices"],["sub",["sub",["name","vertices"],["num",0]],["name","x"]]],"clone"],[]]]],["stat",["assign",true,["name","nb"],["call",["dot",["sub",["dot",["name","this"],"vertices"],["sub",["sub",["name","vertices"],["num",0]],["binary","+",["name","x"],["num",1]]]],"clone"],[]]]]]],["block",[["stat",["assign",true,["name","na"],["call",["dot",["sub",["dot",["name","this"],"vertices"],["sub",["sub",["name","vertices"],["num",1]],["name","x"]]],"clone"],[]]]],["stat",["assign",true,["name","nb"],["call",["dot",["sub",["dot",["name","this"],"vertices"],["sub",["sub",["name","vertices"],["num",1]],["binary","+",["name","x"],["num",1]]]],"clone"],[]]]]]]],["stat",["call",["dot",["call",["dot",["name","na"],"setY"],[["binary","*",["call",["dot",["name","Math"],"sqrt"],[["binary","+",["binary","*",["dot",["name","na"],"x"],["dot",["name","na"],"x"]],["binary","*",["dot",["name","na"],"z"],["dot",["name","na"],"z"]]]]],["name","tanTheta"]]]],"normalize"],[]]],["stat",["call",["dot",["call",["dot",["name","nb"],"setY"],[["binary","*",["call",["dot",["name","Math"],"sqrt"],[["binary","+",["binary","*",["dot",["name","nb"],"x"],["dot",["name","nb"],"x"]],["binary","*",["dot",["name","nb"],"z"],["dot",["name","nb"],"z"]]]]],["name","tanTheta"]]]],"normalize"],[]]],["for",["assign",true,["name","y"],["num",0]],["binary","<",["name","y"],["name","segmentsY"]],["unary-postfix","++",["name","y"]],["block",[["var",[["v1",["sub",["sub",["name","vertices"],["name","y"]],["name","x"]]]]],["var",[["v2",["sub",["sub",["name","vertices"],["binary","+",["name","y"],["num",1]]],["name","x"]]]]],["var",[["v3",["sub",["sub",["name","vertices"],["binary","+",["name","y"],["num",1]]],["binary","+",["name","x"],["num",1]]]]]],["var",[["v4",["sub",["sub",["name","vertices"],["name","y"]],["binary","+",["name","x"],["num",1]]]]]],["var",[["n1",["call",["dot",["name","na"],"clone"],[]]]]],["var",[["n2",["call",["dot",["name","na"],"clone"],[]]]]],["var",[["n3",["call",["dot",["name","nb"],"clone"],[]]]]],["var",[["n4",["call",["dot",["name","nb"],"clone"],[]]]]],["var",[["uv1",["call",["dot",["sub",["sub",["name","uvs"],["name","y"]],["name","x"]],"clone"],[]]]]],["var",[["uv2",["call",["dot",["sub",["sub",["name","uvs"],["binary","+",["name","y"],["num",1]]],["name","x"]],"clone"],[]]]]],["var",[["uv3",["call",["dot",["sub",["sub",["name","uvs"],["binary","+",["name","y"],["num",1]]],["binary","+",["name","x"],["num",1]]],"clone"],[]]]]],["var",[["uv4",["call",["dot",["sub",["sub",["name","uvs"],["name","y"]],["binary","+",["name","x"],["num",1]]],"clone"],[]]]]],["stat",["call",["dot",["dot",["name","this"],"faces"],"push"],[["new",["dot",["name","THREE"],"Face4"],[["name","v1"],["name","v2"],["name","v3"],["name","v4"],["array",[["name","n1"],["name","n2"],["name","n3"],["name","n4"]]]]]]]],["stat",["call",["dot",["sub",["dot",["name","this"],"faceVertexUvs"],["num",0]],"push"],[["array",[["name","uv1"],["name","uv2"],["name","uv3"],["name","uv4"]]]]]]]]]]]],["if",["binary","&&",["unary-prefix","!",["name","openEnded"]],["binary",">",["name","radiusTop"],["num",0]]],["block",[["stat",["call",["dot",["dot",["name","this"],"vertices"],"push"],[["new",["dot",["name","THREE"],"Vector3"],[["num",0],["name","heightHalf"],["num",0]]]]]],["for",["assign",true,["name","x"],["num",0]],["binary","<",["name","x"],["name","segmentsX"]],["unary-postfix","++",["name","x"]],["block",[["var",[["v1",["sub",["sub",["name","vertices"],["num",0]],["name","x"]]]]],["var",[["v2",["sub",["sub",["name","vertices"],["num",0]],["binary","+",["name","x"],["num",1]]]]]],["var",[["v3",["binary","-",["dot",["dot",["name","this"],"vertices"],"length"],["num",1]]]]],["var",[["n1",["new",["dot",["name","THREE"],"Vector3"],[["num",0],["num",1],["num",0]]]]]],["var",[["n2",["new",["dot",["name","THREE"],"Vector3"],[["num",0],["num",1],["num",0]]]]]],["var",[["n3",["new",["dot",["name","THREE"],"Vector3"],[["num",0],["num",1],["num",0]]]]]],["var",[["uv1",["call",["dot",["sub",["sub",["name","uvs"],["num",0]],["name","x"]],"clone"],[]]]]],["var",[["uv2",["call",["dot",["sub",["sub",["name","uvs"],["num",0]],["binary","+",["name","x"],["num",1]]],"clone"],[]]]]],["var",[["uv3",["new",["dot",["name","THREE"],"UV"],[["dot",["name","uv2"],"u"],["num",0]]]]]],["stat",["call",["dot",["dot",["name","this"],"faces"],"push"],[["new",["dot",["name","THREE"],"Face3"],[["name","v1"],["name","v2"],["name","v3"],["array",[["name","n1"],["name","n2"],["name","n3"]]]]]]]],["stat",["call",["dot",["sub",["dot",["name","this"],"faceVertexUvs"],["num",0]],"push"],[["array",[["name","uv1"],["name","uv2"],["name","uv3"]]]]]]]]]]],null],["if",["binary","&&",["unary-prefix","!",["name","openEnded"]],["binary",">",["name","radiusBottom"],["num",0]]],["block",[["stat",["call",["dot",["dot",["name","this"],"vertices"],"push"],[["new",["dot",["name","THREE"],"Vector3"],[["num",0],["unary-prefix","-",["name","heightHalf"]],["num",0]]]]]],["for",["assign",true,["name","x"],["num",0]],["binary","<",["name","x"],["name","segmentsX"]],["unary-postfix","++",["name","x"]],["block",[["var",[["v1",["sub",["sub",["name","vertices"],["name","y"]],["binary","+",["name","x"],["num",1]]]]]],["var",[["v2",["sub",["sub",["name","vertices"],["name","y"]],["name","x"]]]]],["var",[["v3",["binary","-",["dot",["dot",["name","this"],"vertices"],"length"],["num",1]]]]],["var",[["n1",["new",["dot",["name","THREE"],"Vector3"],[["num",0],["unary-prefix","-",["num",1]],["num",0]]]]]],["var",[["n2",["new",["dot",["name","THREE"],"Vector3"],[["num",0],["unary-prefix","-",["num",1]],["num",0]]]]]],["var",[["n3",["new",["dot",["name","THREE"],"Vector3"],[["num",0],["unary-prefix","-",["num",1]],["num",0]]]]]],["var",[["uv1",["call",["dot",["sub",["sub",["name","uvs"],["name","y"]],["binary","+",["name","x"],["num",1]]],"clone"],[]]]]],["var",[["uv2",["call",["dot",["sub",["sub",["name","uvs"],["name","y"]],["name","x"]],"clone"],[]]]]],["var",[["uv3",["new",["dot",["name","THREE"],"UV"],[["dot",["name","uv2"],"u"],["num",1]]]]]],["stat",["call",["dot",["dot",["name","this"],"faces"],"push"],[["new",["dot",["name","THREE"],"Face3"],[["name","v1"],["name","v2"],["name","v3"],["array",[["name","n1"],["name","n2"],["name","n3"]]]]]]]],["stat",["call",["dot",["sub",["dot",["name","this"],"faceVertexUvs"],["num",0]],"push"],[["array",[["name","uv1"],["name","uv2"],["name","uv3"]]]]]]]]]]],null],["stat",["call",["dot",["name","this"],"computeCentroids"],[]]],["stat",["call",["dot",["name","this"],"computeFaceNormals"],[]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"CylinderGeometry"],"prototype"],["new",["dot",["name","THREE"],"Geometry"],[]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"CylinderGeometry"],"prototype"],"constructor"],["dot",["name","THREE"],"CylinderGeometry"]]],["stat",["assign",true,["dot",["name","THREE"],"ExtrudeGeometry"],["function",null,["shapes","options"],[["if",["binary","===",["unary-prefix","typeof",["name","shapes"]],["string","undefined"]],["block",[["stat",["assign",true,["name","shapes"],["array",[]]]],["return",null]]],null],["stat",["call",["dot",["dot",["name","THREE"],"Geometry"],"call"],[["name","this"]]]],["stat",["assign",true,["name","shapes"],["conditional",["binary","instanceof",["name","shapes"],["name","Array"]],["name","shapes"],["array",[["name","shapes"]]]]]],["stat",["assign",true,["dot",["name","this"],"shapebb"],["call",["dot",["sub",["name","shapes"],["binary","-",["dot",["name","shapes"],"length"],["num",1]]],"getBoundingBox"],[]]]],["stat",["call",["dot",["name","this"],"addShapeList"],[["name","shapes"],["name","options"]]]],["stat",["call",["dot",["name","this"],"computeCentroids"],[]]],["stat",["call",["dot",["name","this"],"computeFaceNormals"],[]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"ExtrudeGeometry"],"prototype"],["new",["dot",["name","THREE"],"Geometry"],[]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"ExtrudeGeometry"],"prototype"],"constructor"],["dot",["name","THREE"],"ExtrudeGeometry"]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"ExtrudeGeometry"],"prototype"],"addShapeList"],["function",null,["shapes","options"],[["var",[["sl",["dot",["name","shapes"],"length"]]]],["for",["var",[["s",["num",0]]]],["binary","<",["name","s"],["name","sl"]],["unary-postfix","++",["name","s"]],["block",[["var",[["shape",["sub",["name","shapes"],["name","s"]]]]],["stat",["call",["dot",["name","this"],"addShape"],[["name","shape"],["name","options"]]]]]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"ExtrudeGeometry"],"prototype"],"addShape"],["function",null,["shape","options"],[["var",[["amount",["conditional",["binary","!==",["dot",["name","options"],"amount"],["name","undefined"]],["dot",["name","options"],"amount"],["num",100]]]]],["var",[["bevelThickness",["conditional",["binary","!==",["dot",["name","options"],"bevelThickness"],["name","undefined"]],["dot",["name","options"],"bevelThickness"],["num",6]]]]],["var",[["bevelSize",["conditional",["binary","!==",["dot",["name","options"],"bevelSize"],["name","undefined"]],["dot",["name","options"],"bevelSize"],["binary","-",["name","bevelThickness"],["num",2]]]]]],["var",[["bevelSegments",["conditional",["binary","!==",["dot",["name","options"],"bevelSegments"],["name","undefined"]],["dot",["name","options"],"bevelSegments"],["num",3]]]]],["var",[["bevelEnabled",["conditional",["binary","!==",["dot",["name","options"],"bevelEnabled"],["name","undefined"]],["dot",["name","options"],"bevelEnabled"],["name","true"]]]]],["var",[["curveSegments",["conditional",["binary","!==",["dot",["name","options"],"curveSegments"],["name","undefined"]],["dot",["name","options"],"curveSegments"],["num",12]]]]],["var",[["steps",["conditional",["binary","!==",["dot",["name","options"],"steps"],["name","undefined"]],["dot",["name","options"],"steps"],["num",1]]]]],["var",[["bendPath",["dot",["name","options"],"bendPath"]]]],["var",[["extrudePath",["dot",["name","options"],"extrudePath"]]]],["var",[["extrudePts"],["extrudeByPath",["name","false"]]]],["var",[["material",["dot",["name","options"],"material"]]]],["var",[["extrudeMaterial",["dot",["name","options"],"extrudeMaterial"]]]],["var",[["shapebb",["dot",["name","this"],"shapebb"]]]],["var",[["splineTube"],["binormal"],["normal"],["position2"]]],["if",["name","extrudePath"],["block",[["stat",["assign",true,["name","extrudePts"],["call",["dot",["name","extrudePath"],"getSpacedPoints"],[["name","steps"]]]]],["stat",["assign",true,["name","extrudeByPath"],["name","true"]]],["stat",["assign",true,["name","bevelEnabled"],["name","false"]]],["stat",["assign",true,["name","splineTube"],["new",["dot",["dot",["name","THREE"],"TubeGeometry"],"FrenetFrames"],[["name","extrudePath"],["name","steps"],["name","false"]]]]],["stat",["assign",true,["name","binormal"],["new",["dot",["name","THREE"],"Vector3"],[]]]],["stat",["assign",true,["name","normal"],["new",["dot",["name","THREE"],"Vector3"],[]]]],["stat",["assign",true,["name","position2"],["new",["dot",["name","THREE"],"Vector3"],[]]]]]],null],["if",["unary-prefix","!",["name","bevelEnabled"]],["block",[["stat",["assign",true,["name","bevelSegments"],["num",0]]],["stat",["assign",true,["name","bevelThickness"],["num",0]]],["stat",["assign",true,["name","bevelSize"],["num",0]]]]],null],["var",[["ahole"],["h"],["hl"]]],["var",[["scope",["name","this"]]]],["var",[["bevelPoints",["array",[]]]]],["var",[["shapesOffset",["dot",["dot",["name","this"],"vertices"],"length"]]]],["if",["name","bendPath"],["block",[["stat",["call",["dot",["name","shape"],"addWrapPath"],[["name","bendPath"]]]]]],null],["var",[["shapePoints",["call",["dot",["name","shape"],"extractPoints"],[]]]]],["var",[["vertices",["dot",["name","shapePoints"],"shape"]]]],["var",[["holes",["dot",["name","shapePoints"],"holes"]]]],["var",[["reverse",["unary-prefix","!",["call",["dot",["dot",["dot",["name","THREE"],"Shape"],"Utils"],"isClockWise"],[["name","vertices"]]]]]]],["if",["name","reverse"],["block",[["stat",["assign",true,["name","vertices"],["call",["dot",["name","vertices"],"reverse"],[]]]],["for",["seq",["assign",true,["name","h"],["num",0]],["assign",true,["name","hl"],["dot",["name","holes"],"length"]]],["binary","<",["name","h"],["name","hl"]],["unary-postfix","++",["name","h"]],["block",[["stat",["assign",true,["name","ahole"],["sub",["name","holes"],["name","h"]]]],["if",["call",["dot",["dot",["dot",["name","THREE"],"Shape"],"Utils"],"isClockWise"],[["name","ahole"]]],["block",[["stat",["assign",true,["sub",["name","holes"],["name","h"]],["call",["dot",["name","ahole"],"reverse"],[]]]]]],null]]]],["stat",["assign",true,["name","reverse"],["name","false"]]]]],null],["var",[["faces",["call",["dot",["dot",["dot",["name","THREE"],"Shape"],"Utils"],"triangulateShape"],[["name","vertices"],["name","holes"]]]]]],["var",[["contour",["name","vertices"]]]],["for",["seq",["assign",true,["name","h"],["num",0]],["assign",true,["name","hl"],["dot",["name","holes"],"length"]]],["binary","<",["name","h"],["name","hl"]],["unary-postfix","++",["name","h"]],["block",[["stat",["assign",true,["name","ahole"],["sub",["name","holes"],["name","h"]]]],["stat",["assign",true,["name","vertices"],["call",["dot",["name","vertices"],"concat"],[["name","ahole"]]]]]]]],["defun","scalePt2",["pt","vec","size"],[["if",["unary-prefix","!",["name","vec"]],["stat",["call",["dot",["name","console"],"log"],[["string","die"]]]],null],["return",["call",["dot",["call",["dot",["call",["dot",["name","vec"],"clone"],[]],"multiplyScalar"],[["name","size"]]],"addSelf"],[["name","pt"]]]]]],["var",[["b"],["bs"],["t"],["z"],["vert"],["vlen",["dot",["name","vertices"],"length"]],["face"],["flen",["dot",["name","faces"],"length"]],["cont"],["clen",["dot",["name","contour"],"length"]]]],["var",[["RAD_TO_DEGREES",["binary","/",["num",180],["dot",["name","Math"],"PI"]]]]],["defun","getBevelVec",["pt_i","pt_j","pt_k"],[["return",["call",["name","getBevelVec2"],[["name","pt_i"],["name","pt_j"],["name","pt_k"]]]]]],["defun","getBevelVec1",["pt_i","pt_j","pt_k"],[["var",[["anglea",["call",["dot",["name","Math"],"atan2"],[["binary","-",["dot",["name","pt_j"],"y"],["dot",["name","pt_i"],"y"]],["binary","-",["dot",["name","pt_j"],"x"],["dot",["name","pt_i"],"x"]]]]]]],["var",[["angleb",["call",["dot",["name","Math"],"atan2"],[["binary","-",["dot",["name","pt_k"],"y"],["dot",["name","pt_i"],"y"]],["binary","-",["dot",["name","pt_k"],"x"],["dot",["name","pt_i"],"x"]]]]]]],["if",["binary",">",["name","anglea"],["name","angleb"]],["block",[["stat",["assign","+",["name","angleb"],["binary","*",["dot",["name","Math"],"PI"],["num",2]]]]]],null],["var",[["anglec",["binary","/",["binary","+",["name","anglea"],["name","angleb"]],["num",2]]]]],["var",[["x",["unary-prefix","-",["call",["dot",["name","Math"],"cos"],[["name","anglec"]]]]]]],["var",[["y",["unary-prefix","-",["call",["dot",["name","Math"],"sin"],[["name","anglec"]]]]]]],["var",[["vec",["new",["dot",["name","THREE"],"Vector2"],[["name","x"],["name","y"]]]]]],["return",["name","vec"]]]],["defun","getBevelVec2",["pt_i","pt_j","pt_k"],[["var",[["a",["dot",["dot",["name","THREE"],"ExtrudeGeometry"],"__v1"]],["b",["dot",["dot",["name","THREE"],"ExtrudeGeometry"],"__v2"]],["v_hat",["dot",["dot",["name","THREE"],"ExtrudeGeometry"],"__v3"]],["w_hat",["dot",["dot",["name","THREE"],"ExtrudeGeometry"],"__v4"]],["p",["dot",["dot",["name","THREE"],"ExtrudeGeometry"],"__v5"]],["q",["dot",["dot",["name","THREE"],"ExtrudeGeometry"],"__v6"]],["v"],["w"],["v_dot_w_hat"],["q_sub_p_dot_w_hat"],["s"],["intersection"]]],["stat",["call",["dot",["name","a"],"set"],[["binary","-",["dot",["name","pt_i"],"x"],["dot",["name","pt_j"],"x"]],["binary","-",["dot",["name","pt_i"],"y"],["dot",["name","pt_j"],"y"]]]]],["stat",["call",["dot",["name","b"],"set"],[["binary","-",["dot",["name","pt_i"],"x"],["dot",["name","pt_k"],"x"]],["binary","-",["dot",["name","pt_i"],"y"],["dot",["name","pt_k"],"y"]]]]],["stat",["assign",true,["name","v"],["call",["dot",["name","a"],"normalize"],[]]]],["stat",["assign",true,["name","w"],["call",["dot",["name","b"],"normalize"],[]]]],["stat",["call",["dot",["name","v_hat"],"set"],[["unary-prefix","-",["dot",["name","v"],"y"]],["dot",["name","v"],"x"]]]],["stat",["call",["dot",["name","w_hat"],"set"],[["dot",["name","w"],"y"],["unary-prefix","-",["dot",["name","w"],"x"]]]]],["stat",["call",["dot",["call",["dot",["name","p"],"copy"],[["name","pt_i"]]],"addSelf"],[["name","v_hat"]]]],["stat",["call",["dot",["call",["dot",["name","q"],"copy"],[["name","pt_i"]]],"addSelf"],[["name","w_hat"]]]],["if",["call",["dot",["name","p"],"equals"],[["name","q"]]],["block",[["return",["call",["dot",["name","w_hat"],"clone"],[]]]]],null],["stat",["call",["dot",["call",["dot",["name","p"],"copy"],[["name","pt_j"]]],"addSelf"],[["name","v_hat"]]]],["stat",["call",["dot",["call",["dot",["name","q"],"copy"],[["name","pt_k"]]],"addSelf"],[["name","w_hat"]]]],["stat",["assign",true,["name","v_dot_w_hat"],["call",["dot",["name","v"],"dot"],[["name","w_hat"]]]]],["stat",["assign",true,["name","q_sub_p_dot_w_hat"],["call",["dot",["call",["dot",["name","q"],"subSelf"],[["name","p"]]],"dot"],[["name","w_hat"]]]]],["if",["binary","===",["name","v_dot_w_hat"],["num",0]],["block",[["stat",["call",["dot",["name","console"],"log"],[["string","Either infinite or no solutions!"]]]],["if",["binary","===",["name","q_sub_p_dot_w_hat"],["num",0]],["block",[["stat",["call",["dot",["name","console"],"log"],[["string","Its finite solutions."]]]]]],["block",[["stat",["call",["dot",["name","console"],"log"],[["string","Too bad, no solutions."]]]]]]]]],null],["stat",["assign",true,["name","s"],["binary","/",["name","q_sub_p_dot_w_hat"],["name","v_dot_w_hat"]]]],["if",["binary","<",["name","s"],["num",0]],["block",[["return",["call",["name","getBevelVec1"],[["name","pt_i"],["name","pt_j"],["name","pt_k"]]]]]],null],["stat",["assign",true,["name","intersection"],["call",["dot",["call",["dot",["name","v"],"multiplyScalar"],[["name","s"]]],"addSelf"],[["name","p"]]]]],["return",["call",["dot",["call",["dot",["name","intersection"],"subSelf"],[["name","pt_i"]]],"clone"],[]]]]],["var",[["contourMovements",["array",[]]]]],["for",["var",[["i",["num",0]],["il",["dot",["name","contour"],"length"]],["j",["binary","-",["name","il"],["num",1]]],["k",["binary","+",["name","i"],["num",1]]]]],["binary","<",["name","i"],["name","il"]],["seq",["unary-postfix","++",["name","i"]],["seq",["unary-postfix","++",["name","j"]],["unary-postfix","++",["name","k"]]]],["block",[["if",["binary","===",["name","j"],["name","il"]],["stat",["assign",true,["name","j"],["num",0]]],null],["if",["binary","===",["name","k"],["name","il"]],["stat",["assign",true,["name","k"],["num",0]]],null],["var",[["pt_i",["sub",["name","contour"],["name","i"]]]]],["var",[["pt_j",["sub",["name","contour"],["name","j"]]]]],["var",[["pt_k",["sub",["name","contour"],["name","k"]]]]],["stat",["assign",true,["sub",["name","contourMovements"],["name","i"]],["call",["name","getBevelVec"],[["sub",["name","contour"],["name","i"]],["sub",["name","contour"],["name","j"]],["sub",["name","contour"],["name","k"]]]]]]]]],["var",[["holesMovements",["array",[]]],["oneHoleMovements"],["verticesMovements",["call",["dot",["name","contourMovements"],"concat"],[]]]]],["for",["seq",["assign",true,["name","h"],["num",0]],["assign",true,["name","hl"],["dot",["name","holes"],"length"]]],["binary","<",["name","h"],["name","hl"]],["unary-postfix","++",["name","h"]],["block",[["stat",["assign",true,["name","ahole"],["sub",["name","holes"],["name","h"]]]],["stat",["assign",true,["name","oneHoleMovements"],["array",[]]]],["for",["seq",["assign",true,["name","i"],["num",0]],["seq",["assign",true,["name","il"],["dot",["name","ahole"],"length"]],["seq",["assign",true,["name","j"],["binary","-",["name","il"],["num",1]]],["assign",true,["name","k"],["binary","+",["name","i"],["num",1]]]]]],["binary","<",["name","i"],["name","il"]],["seq",["unary-postfix","++",["name","i"]],["seq",["unary-postfix","++",["name","j"]],["unary-postfix","++",["name","k"]]]],["block",[["if",["binary","===",["name","j"],["name","il"]],["stat",["assign",true,["name","j"],["num",0]]],null],["if",["binary","===",["name","k"],["name","il"]],["stat",["assign",true,["name","k"],["num",0]]],null],["stat",["assign",true,["sub",["name","oneHoleMovements"],["name","i"]],["call",["name","getBevelVec"],[["sub",["name","ahole"],["name","i"]],["sub",["name","ahole"],["name","j"]],["sub",["name","ahole"],["name","k"]]]]]]]]],["stat",["call",["dot",["name","holesMovements"],"push"],[["name","oneHoleMovements"]]]],["stat",["assign",true,["name","verticesMovements"],["call",["dot",["name","verticesMovements"],"concat"],[["name","oneHoleMovements"]]]]]]]],["for",["assign",true,["name","b"],["num",0]],["binary","<",["name","b"],["name","bevelSegments"]],["unary-postfix","++",["name","b"]],["block",[["stat",["assign",true,["name","t"],["binary","/",["name","b"],["name","bevelSegments"]]]],["stat",["assign",true,["name","z"],["binary","*",["name","bevelThickness"],["binary","-",["num",1],["name","t"]]]]],["stat",["assign",true,["name","bs"],["binary","*",["name","bevelSize"],["call",["dot",["name","Math"],"sin"],[["binary","/",["binary","*",["name","t"],["dot",["name","Math"],"PI"]],["num",2]]]]]]],["for",["seq",["assign",true,["name","i"],["num",0]],["assign",true,["name","il"],["dot",["name","contour"],"length"]]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","vert"],["call",["name","scalePt2"],[["sub",["name","contour"],["name","i"]],["sub",["name","contourMovements"],["name","i"]],["name","bs"]]]]],["stat",["call",["name","v"],[["dot",["name","vert"],"x"],["dot",["name","vert"],"y"],["unary-prefix","-",["name","z"]]]]]]]],["for",["seq",["assign",true,["name","h"],["num",0]],["assign",true,["name","hl"],["dot",["name","holes"],"length"]]],["binary","<",["name","h"],["name","hl"]],["unary-postfix","++",["name","h"]],["block",[["stat",["assign",true,["name","ahole"],["sub",["name","holes"],["name","h"]]]],["stat",["assign",true,["name","oneHoleMovements"],["sub",["name","holesMovements"],["name","h"]]]],["for",["seq",["assign",true,["name","i"],["num",0]],["assign",true,["name","il"],["dot",["name","ahole"],"length"]]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","vert"],["call",["name","scalePt2"],[["sub",["name","ahole"],["name","i"]],["sub",["name","oneHoleMovements"],["name","i"]],["name","bs"]]]]],["stat",["call",["name","v"],[["dot",["name","vert"],"x"],["dot",["name","vert"],"y"],["unary-prefix","-",["name","z"]]]]]]]]]]]]]],["stat",["assign",true,["name","bs"],["name","bevelSize"]]],["for",["assign",true,["name","i"],["num",0]],["binary","<",["name","i"],["name","vlen"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","vert"],["conditional",["name","bevelEnabled"],["call",["name","scalePt2"],[["sub",["name","vertices"],["name","i"]],["sub",["name","verticesMovements"],["name","i"]],["name","bs"]]],["sub",["name","vertices"],["name","i"]]]]],["if",["unary-prefix","!",["name","extrudeByPath"]],["block",[["stat",["call",["name","v"],[["dot",["name","vert"],"x"],["dot",["name","vert"],"y"],["num",0]]]]]],["block",[["stat",["call",["dot",["call",["dot",["name","normal"],"copy"],[["sub",["dot",["name","splineTube"],"normals"],["num",0]]]],"multiplyScalar"],[["dot",["name","vert"],"x"]]]],["stat",["call",["dot",["call",["dot",["name","binormal"],"copy"],[["sub",["dot",["name","splineTube"],"binormals"],["num",0]]]],"multiplyScalar"],[["dot",["name","vert"],"y"]]]],["stat",["call",["dot",["call",["dot",["call",["dot",["name","position2"],"copy"],[["sub",["name","extrudePts"],["num",0]]]],"addSelf"],[["name","normal"]]],"addSelf"],[["name","binormal"]]]],["stat",["call",["name","v"],[["dot",["name","position2"],"x"],["dot",["name","position2"],"y"],["dot",["name","position2"],"z"]]]]]]]]]],["var",[["s"]]],["for",["assign",true,["name","s"],["num",1]],["binary","<=",["name","s"],["name","steps"]],["unary-postfix","++",["name","s"]],["block",[["for",["assign",true,["name","i"],["num",0]],["binary","<",["name","i"],["name","vlen"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","vert"],["conditional",["name","bevelEnabled"],["call",["name","scalePt2"],[["sub",["name","vertices"],["name","i"]],["sub",["name","verticesMovements"],["name","i"]],["name","bs"]]],["sub",["name","vertices"],["name","i"]]]]],["if",["unary-prefix","!",["name","extrudeByPath"]],["block",[["stat",["call",["name","v"],[["dot",["name","vert"],"x"],["dot",["name","vert"],"y"],["binary","*",["binary","/",["name","amount"],["name","steps"]],["name","s"]]]]]]],["block",[["stat",["call",["dot",["call",["dot",["name","normal"],"copy"],[["sub",["dot",["name","splineTube"],"normals"],["name","s"]]]],"multiplyScalar"],[["dot",["name","vert"],"x"]]]],["stat",["call",["dot",["call",["dot",["name","binormal"],"copy"],[["sub",["dot",["name","splineTube"],"binormals"],["name","s"]]]],"multiplyScalar"],[["dot",["name","vert"],"y"]]]],["stat",["call",["dot",["call",["dot",["call",["dot",["name","position2"],"copy"],[["sub",["name","extrudePts"],["name","s"]]]],"addSelf"],[["name","normal"]]],"addSelf"],[["name","binormal"]]]],["stat",["call",["name","v"],[["dot",["name","position2"],"x"],["dot",["name","position2"],"y"],["dot",["name","position2"],"z"]]]]]]]]]]]]],["for",["assign",true,["name","b"],["binary","-",["name","bevelSegments"],["num",1]]],["binary",">=",["name","b"],["num",0]],["unary-postfix","--",["name","b"]],["block",[["stat",["assign",true,["name","t"],["binary","/",["name","b"],["name","bevelSegments"]]]],["stat",["assign",true,["name","z"],["binary","*",["name","bevelThickness"],["binary","-",["num",1],["name","t"]]]]],["stat",["assign",true,["name","bs"],["binary","*",["name","bevelSize"],["call",["dot",["name","Math"],"sin"],[["binary","/",["binary","*",["name","t"],["dot",["name","Math"],"PI"]],["num",2]]]]]]],["for",["seq",["assign",true,["name","i"],["num",0]],["assign",true,["name","il"],["dot",["name","contour"],"length"]]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","vert"],["call",["name","scalePt2"],[["sub",["name","contour"],["name","i"]],["sub",["name","contourMovements"],["name","i"]],["name","bs"]]]]],["stat",["call",["name","v"],[["dot",["name","vert"],"x"],["dot",["name","vert"],"y"],["binary","+",["name","amount"],["name","z"]]]]]]]],["for",["seq",["assign",true,["name","h"],["num",0]],["assign",true,["name","hl"],["dot",["name","holes"],"length"]]],["binary","<",["name","h"],["name","hl"]],["unary-postfix","++",["name","h"]],["block",[["stat",["assign",true,["name","ahole"],["sub",["name","holes"],["name","h"]]]],["stat",["assign",true,["name","oneHoleMovements"],["sub",["name","holesMovements"],["name","h"]]]],["for",["seq",["assign",true,["name","i"],["num",0]],["assign",true,["name","il"],["dot",["name","ahole"],"length"]]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","vert"],["call",["name","scalePt2"],[["sub",["name","ahole"],["name","i"]],["sub",["name","oneHoleMovements"],["name","i"]],["name","bs"]]]]],["if",["unary-prefix","!",["name","extrudeByPath"]],["block",[["stat",["call",["name","v"],[["dot",["name","vert"],"x"],["dot",["name","vert"],"y"],["binary","+",["name","amount"],["name","z"]]]]]]],["block",[["stat",["call",["name","v"],[["dot",["name","vert"],"x"],["binary","+",["dot",["name","vert"],"y"],["dot",["sub",["name","extrudePts"],["binary","-",["name","steps"],["num",1]]],"y"]],["binary","+",["dot",["sub",["name","extrudePts"],["binary","-",["name","steps"],["num",1]]],"x"],["name","z"]]]]]]]]]]]]]]]]],["var",[["uvgen",["dot",["dot",["name","THREE"],"ExtrudeGeometry"],"WorldUVGenerator"]]]],["stat",["call",["name","buildLidFaces"],[]]],["stat",["call",["name","buildSideFaces"],[]]],["defun","buildLidFaces",[],[["if",["name","bevelEnabled"],["block",[["var",[["layer",["num",0]]]],["var",[["offset",["binary","*",["name","vlen"],["name","layer"]]]]],["for",["assign",true,["name","i"],["num",0]],["binary","<",["name","i"],["name","flen"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","face"],["sub",["name","faces"],["name","i"]]]],["stat",["call",["name","f3"],[["binary","+",["sub",["name","face"],["num",2]],["name","offset"]],["binary","+",["sub",["name","face"],["num",1]],["name","offset"]],["binary","+",["sub",["name","face"],["num",0]],["name","offset"]],["name","true"]]]]]]],["stat",["assign",true,["name","layer"],["binary","+",["name","steps"],["binary","*",["name","bevelSegments"],["num",2]]]]],["stat",["assign",true,["name","offset"],["binary","*",["name","vlen"],["name","layer"]]]],["for",["assign",true,["name","i"],["num",0]],["binary","<",["name","i"],["name","flen"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","face"],["sub",["name","faces"],["name","i"]]]],["stat",["call",["name","f3"],[["binary","+",["sub",["name","face"],["num",0]],["name","offset"]],["binary","+",["sub",["name","face"],["num",1]],["name","offset"]],["binary","+",["sub",["name","face"],["num",2]],["name","offset"]],["name","false"]]]]]]]]],["block",[["for",["assign",true,["name","i"],["num",0]],["binary","<",["name","i"],["name","flen"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","face"],["sub",["name","faces"],["name","i"]]]],["stat",["call",["name","f3"],[["sub",["name","face"],["num",2]],["sub",["name","face"],["num",1]],["sub",["name","face"],["num",0]],["name","true"]]]]]]],["for",["assign",true,["name","i"],["num",0]],["binary","<",["name","i"],["name","flen"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","face"],["sub",["name","faces"],["name","i"]]]],["stat",["call",["name","f3"],[["binary","+",["sub",["name","face"],["num",0]],["binary","*",["name","vlen"],["name","steps"]]],["binary","+",["sub",["name","face"],["num",1]],["binary","*",["name","vlen"],["name","steps"]]],["binary","+",["sub",["name","face"],["num",2]],["binary","*",["name","vlen"],["name","steps"]]],["name","false"]]]]]]]]]]]],["defun","buildSideFaces",[],[["var",[["layeroffset",["num",0]]]],["stat",["call",["name","sidewalls"],[["name","contour"],["name","layeroffset"]]]],["stat",["assign","+",["name","layeroffset"],["dot",["name","contour"],"length"]]],["for",["seq",["assign",true,["name","h"],["num",0]],["assign",true,["name","hl"],["dot",["name","holes"],"length"]]],["binary","<",["name","h"],["name","hl"]],["unary-postfix","++",["name","h"]],["block",[["stat",["assign",true,["name","ahole"],["sub",["name","holes"],["name","h"]]]],["stat",["call",["name","sidewalls"],[["name","ahole"],["name","layeroffset"]]]],["stat",["assign","+",["name","layeroffset"],["dot",["name","ahole"],"length"]]]]]]]],["defun","sidewalls",["contour","layeroffset"],[["var",[["j"],["k"]]],["stat",["assign",true,["name","i"],["dot",["name","contour"],"length"]]],["while",["binary",">=",["unary-prefix","--",["name","i"]],["num",0]],["block",[["stat",["assign",true,["name","j"],["name","i"]]],["stat",["assign",true,["name","k"],["binary","-",["name","i"],["num",1]]]],["if",["binary","<",["name","k"],["num",0]],["stat",["assign",true,["name","k"],["binary","-",["dot",["name","contour"],"length"],["num",1]]]],null],["var",[["s",["num",0]],["sl",["binary","+",["name","steps"],["binary","*",["name","bevelSegments"],["num",2]]]]]],["for",["assign",true,["name","s"],["num",0]],["binary","<",["name","s"],["name","sl"]],["unary-postfix","++",["name","s"]],["block",[["var",[["slen1",["binary","*",["name","vlen"],["name","s"]]]]],["var",[["slen2",["binary","*",["name","vlen"],["binary","+",["name","s"],["num",1]]]]]],["var",[["a",["binary","+",["binary","+",["name","layeroffset"],["name","j"]],["name","slen1"]]],["b",["binary","+",["binary","+",["name","layeroffset"],["name","k"]],["name","slen1"]]],["c",["binary","+",["binary","+",["name","layeroffset"],["name","k"]],["name","slen2"]]],["d",["binary","+",["binary","+",["name","layeroffset"],["name","j"]],["name","slen2"]]]]],["stat",["call",["name","f4"],[["name","a"],["name","b"],["name","c"],["name","d"],["name","contour"],["name","s"],["name","sl"]]]]]]]]]]]],["defun","v",["x","y","z"],[["stat",["call",["dot",["dot",["name","scope"],"vertices"],"push"],[["new",["dot",["name","THREE"],"Vector3"],[["name","x"],["name","y"],["name","z"]]]]]]]],["defun","f3",["a","b","c","isBottom"],[["stat",["assign","+",["name","a"],["name","shapesOffset"]]],["stat",["assign","+",["name","b"],["name","shapesOffset"]]],["stat",["assign","+",["name","c"],["name","shapesOffset"]]],["stat",["call",["dot",["dot",["name","scope"],"faces"],"push"],[["new",["dot",["name","THREE"],"Face3"],[["name","a"],["name","b"],["name","c"],["name","null"],["name","null"],["name","material"]]]]]],["var",[["uvs",["conditional",["name","isBottom"],["call",["dot",["name","uvgen"],"generateBottomUV"],[["name","scope"],["name","shape"],["name","options"],["name","a"],["name","b"],["name","c"]]],["call",["dot",["name","uvgen"],"generateTopUV"],[["name","scope"],["name","shape"],["name","options"],["name","a"],["name","b"],["name","c"]]]]]]],["stat",["call",["dot",["sub",["dot",["name","scope"],"faceVertexUvs"],["num",0]],"push"],[["name","uvs"]]]]]],["defun","f4",["a","b","c","d","wallContour","stepIndex","stepsLength"],[["stat",["assign","+",["name","a"],["name","shapesOffset"]]],["stat",["assign","+",["name","b"],["name","shapesOffset"]]],["stat",["assign","+",["name","c"],["name","shapesOffset"]]],["stat",["assign","+",["name","d"],["name","shapesOffset"]]],["stat",["call",["dot",["dot",["name","scope"],"faces"],"push"],[["new",["dot",["name","THREE"],"Face4"],[["name","a"],["name","b"],["name","c"],["name","d"],["name","null"],["name","null"],["name","extrudeMaterial"]]]]]],["var",[["uvs",["call",["dot",["name","uvgen"],"generateSideWallUV"],[["name","scope"],["name","shape"],["name","wallContour"],["name","options"],["name","a"],["name","b"],["name","c"],["name","d"],["name","stepIndex"],["name","stepsLength"]]]]]],["stat",["call",["dot",["sub",["dot",["name","scope"],"faceVertexUvs"],["num",0]],"push"],[["name","uvs"]]]]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"ExtrudeGeometry"],"WorldUVGenerator"],["object",[["generateTopUV",["function",null,["geometry","extrudedShape","extrudeOptions","indexA","indexB","indexC"],[["var",[["ax",["dot",["sub",["dot",["name","geometry"],"vertices"],["name","indexA"]],"x"]],["ay",["dot",["sub",["dot",["name","geometry"],"vertices"],["name","indexA"]],"y"]],["bx",["dot",["sub",["dot",["name","geometry"],"vertices"],["name","indexB"]],"x"]],["by",["dot",["sub",["dot",["name","geometry"],"vertices"],["name","indexB"]],"y"]],["cx",["dot",["sub",["dot",["name","geometry"],"vertices"],["name","indexC"]],"x"]],["cy",["dot",["sub",["dot",["name","geometry"],"vertices"],["name","indexC"]],"y"]]]],["return",["array",[["new",["dot",["name","THREE"],"UV"],[["name","ax"],["binary","-",["num",1],["name","ay"]]]],["new",["dot",["name","THREE"],"UV"],[["name","bx"],["binary","-",["num",1],["name","by"]]]],["new",["dot",["name","THREE"],"UV"],[["name","cx"],["binary","-",["num",1],["name","cy"]]]]]]]]]],["generateBottomUV",["function",null,["geometry","extrudedShape","extrudeOptions","indexA","indexB","indexC"],[["return",["call",["dot",["name","this"],"generateTopUV"],[["name","geometry"],["name","extrudedShape"],["name","extrudeOptions"],["name","indexA"],["name","indexB"],["name","indexC"]]]]]]],["generateSideWallUV",["function",null,["geometry","extrudedShape","wallContour","extrudeOptions","indexA","indexB","indexC","indexD","stepIndex","stepsLength"],[["var",[["ax",["dot",["sub",["dot",["name","geometry"],"vertices"],["name","indexA"]],"x"]],["ay",["dot",["sub",["dot",["name","geometry"],"vertices"],["name","indexA"]],"y"]],["az",["dot",["sub",["dot",["name","geometry"],"vertices"],["name","indexA"]],"z"]],["bx",["dot",["sub",["dot",["name","geometry"],"vertices"],["name","indexB"]],"x"]],["by",["dot",["sub",["dot",["name","geometry"],"vertices"],["name","indexB"]],"y"]],["bz",["dot",["sub",["dot",["name","geometry"],"vertices"],["name","indexB"]],"z"]],["cx",["dot",["sub",["dot",["name","geometry"],"vertices"],["name","indexC"]],"x"]],["cy",["dot",["sub",["dot",["name","geometry"],"vertices"],["name","indexC"]],"y"]],["cz",["dot",["sub",["dot",["name","geometry"],"vertices"],["name","indexC"]],"z"]],["dx",["dot",["sub",["dot",["name","geometry"],"vertices"],["name","indexD"]],"x"]],["dy",["dot",["sub",["dot",["name","geometry"],"vertices"],["name","indexD"]],"y"]],["dz",["dot",["sub",["dot",["name","geometry"],"vertices"],["name","indexD"]],"z"]]]],["if",["binary","<",["call",["dot",["name","Math"],"abs"],[["binary","-",["name","ay"],["name","by"]]]],["num",0.01]],["block",[["return",["array",[["new",["dot",["name","THREE"],"UV"],[["name","ax"],["name","az"]]],["new",["dot",["name","THREE"],"UV"],[["name","bx"],["name","bz"]]],["new",["dot",["name","THREE"],"UV"],[["name","cx"],["name","cz"]]],["new",["dot",["name","THREE"],"UV"],[["name","dx"],["name","dz"]]]]]]]],["block",[["return",["array",[["new",["dot",["name","THREE"],"UV"],[["name","ay"],["name","az"]]],["new",["dot",["name","THREE"],"UV"],[["name","by"],["name","bz"]]],["new",["dot",["name","THREE"],"UV"],[["name","cy"],["name","cz"]]],["new",["dot",["name","THREE"],"UV"],[["name","dy"],["name","dz"]]]]]]]]]]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"ExtrudeGeometry"],"__v1"],["new",["dot",["name","THREE"],"Vector2"],[]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"ExtrudeGeometry"],"__v2"],["new",["dot",["name","THREE"],"Vector2"],[]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"ExtrudeGeometry"],"__v3"],["new",["dot",["name","THREE"],"Vector2"],[]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"ExtrudeGeometry"],"__v4"],["new",["dot",["name","THREE"],"Vector2"],[]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"ExtrudeGeometry"],"__v5"],["new",["dot",["name","THREE"],"Vector2"],[]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"ExtrudeGeometry"],"__v6"],["new",["dot",["name","THREE"],"Vector2"],[]]]],["stat",["assign",true,["dot",["name","THREE"],"LatheGeometry"],["function",null,["points","steps","angle"],[["stat",["call",["dot",["dot",["name","THREE"],"Geometry"],"call"],[["name","this"]]]],["var",[["_steps",["binary","||",["name","steps"],["num",12]]]]],["var",[["_angle",["binary","||",["name","angle"],["binary","*",["num",2],["dot",["name","Math"],"PI"]]]]]],["var",[["_newV",["array",[]]]]],["var",[["_matrix",["call",["dot",["new",["dot",["name","THREE"],"Matrix4"],[]],"makeRotationZ"],[["binary","/",["name","_angle"],["name","_steps"]]]]]]],["for",["var",[["j",["num",0]]]],["binary","<",["name","j"],["dot",["name","points"],"length"]],["unary-postfix","++",["name","j"]],["block",[["stat",["assign",true,["sub",["name","_newV"],["name","j"]],["call",["dot",["sub",["name","points"],["name","j"]],"clone"],[]]]],["stat",["call",["dot",["dot",["name","this"],"vertices"],"push"],[["sub",["name","_newV"],["name","j"]]]]]]]],["var",[["i"],["il",["binary","+",["name","_steps"],["num",1]]]]],["for",["assign",true,["name","i"],["num",0]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["block",[["for",["var",[["j",["num",0]]]],["binary","<",["name","j"],["dot",["name","_newV"],"length"]],["unary-postfix","++",["name","j"]],["block",[["stat",["assign",true,["sub",["name","_newV"],["name","j"]],["call",["dot",["name","_matrix"],"multiplyVector3"],[["call",["dot",["sub",["name","_newV"],["name","j"]],"clone"],[]]]]]],["stat",["call",["dot",["dot",["name","this"],"vertices"],"push"],[["sub",["name","_newV"],["name","j"]]]]]]]]]]],["for",["assign",true,["name","i"],["num",0]],["binary","<",["name","i"],["name","_steps"]],["unary-postfix","++",["name","i"]],["block",[["for",["var",[["k",["num",0]],["kl",["dot",["name","points"],"length"]]]],["binary","<",["name","k"],["binary","-",["name","kl"],["num",1]]],["unary-postfix","++",["name","k"]],["block",[["var",[["a",["binary","+",["binary","*",["name","i"],["name","kl"]],["name","k"]]]]],["var",[["b",["binary","+",["binary","*",["binary","%",["binary","+",["name","i"],["num",1]],["name","il"]],["name","kl"]],["name","k"]]]]],["var",[["c",["binary","+",["binary","*",["binary","%",["binary","+",["name","i"],["num",1]],["name","il"]],["name","kl"]],["binary","%",["binary","+",["name","k"],["num",1]],["name","kl"]]]]]],["var",[["d",["binary","+",["binary","*",["name","i"],["name","kl"]],["binary","%",["binary","+",["name","k"],["num",1]],["name","kl"]]]]]],["stat",["call",["dot",["dot",["name","this"],"faces"],"push"],[["new",["dot",["name","THREE"],"Face4"],[["name","a"],["name","b"],["name","c"],["name","d"]]]]]],["stat",["call",["dot",["sub",["dot",["name","this"],"faceVertexUvs"],["num",0]],"push"],[["array",[["new",["dot",["name","THREE"],"UV"],[["binary","-",["num",1],["binary","/",["name","i"],["name","_steps"]]],["binary","/",["name","k"],["name","kl"]]]],["new",["dot",["name","THREE"],"UV"],[["binary","-",["num",1],["binary","/",["binary","+",["name","i"],["num",1]],["name","_steps"]]],["binary","/",["name","k"],["name","kl"]]]],["new",["dot",["name","THREE"],"UV"],[["binary","-",["num",1],["binary","/",["binary","+",["name","i"],["num",1]],["name","_steps"]]],["binary","/",["binary","+",["name","k"],["num",1]],["name","kl"]]]],["new",["dot",["name","THREE"],"UV"],[["binary","-",["num",1],["binary","/",["name","i"],["name","_steps"]]],["binary","/",["binary","+",["name","k"],["num",1]],["name","kl"]]]]]]]]]]]]]]],["stat",["call",["dot",["name","this"],"computeCentroids"],[]]],["stat",["call",["dot",["name","this"],"computeFaceNormals"],[]]],["stat",["call",["dot",["name","this"],"computeVertexNormals"],[]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"LatheGeometry"],"prototype"],["new",["dot",["name","THREE"],"Geometry"],[]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"LatheGeometry"],"prototype"],"constructor"],["dot",["name","THREE"],"LatheGeometry"]]],["stat",["assign",true,["dot",["name","THREE"],"PlaneGeometry"],["function",null,["width","depth","segmentsWidth","segmentsDepth"],[["stat",["call",["dot",["dot",["name","THREE"],"Geometry"],"call"],[["name","this"]]]],["var",[["ix"],["iz"],["width_half",["binary","/",["name","width"],["num",2]]],["depth_half",["binary","/",["name","depth"],["num",2]]],["gridX",["binary","||",["name","segmentsWidth"],["num",1]]],["gridZ",["binary","||",["name","segmentsDepth"],["num",1]]],["gridX1",["binary","+",["name","gridX"],["num",1]]],["gridZ1",["binary","+",["name","gridZ"],["num",1]]],["segment_width",["binary","/",["name","width"],["name","gridX"]]],["segment_depth",["binary","/",["name","depth"],["name","gridZ"]]],["normal",["new",["dot",["name","THREE"],"Vector3"],[["num",0],["num",1],["num",0]]]]]],["for",["assign",true,["name","iz"],["num",0]],["binary","<",["name","iz"],["name","gridZ1"]],["unary-postfix","++",["name","iz"]],["block",[["for",["assign",true,["name","ix"],["num",0]],["binary","<",["name","ix"],["name","gridX1"]],["unary-postfix","++",["name","ix"]],["block",[["var",[["x",["binary","-",["binary","*",["name","ix"],["name","segment_width"]],["name","width_half"]]]]],["var",[["z",["binary","-",["binary","*",["name","iz"],["name","segment_depth"]],["name","depth_half"]]]]],["stat",["call",["dot",["dot",["name","this"],"vertices"],"push"],[["new",["dot",["name","THREE"],"Vector3"],[["name","x"],["num",0],["name","z"]]]]]]]]]]]],["for",["assign",true,["name","iz"],["num",0]],["binary","<",["name","iz"],["name","gridZ"]],["unary-postfix","++",["name","iz"]],["block",[["for",["assign",true,["name","ix"],["num",0]],["binary","<",["name","ix"],["name","gridX"]],["unary-postfix","++",["name","ix"]],["block",[["var",[["a",["binary","+",["name","ix"],["binary","*",["name","gridX1"],["name","iz"]]]]]],["var",[["b",["binary","+",["name","ix"],["binary","*",["name","gridX1"],["binary","+",["name","iz"],["num",1]]]]]]],["var",[["c",["binary","+",["binary","+",["name","ix"],["num",1]],["binary","*",["name","gridX1"],["binary","+",["name","iz"],["num",1]]]]]]],["var",[["d",["binary","+",["binary","+",["name","ix"],["num",1]],["binary","*",["name","gridX1"],["name","iz"]]]]]],["var",[["face",["new",["dot",["name","THREE"],"Face4"],[["name","a"],["name","b"],["name","c"],["name","d"]]]]]],["stat",["call",["dot",["dot",["name","face"],"normal"],"copy"],[["name","normal"]]]],["stat",["call",["dot",["dot",["name","face"],"vertexNormals"],"push"],[["call",["dot",["name","normal"],"clone"],[]],["call",["dot",["name","normal"],"clone"],[]],["call",["dot",["name","normal"],"clone"],[]],["call",["dot",["name","normal"],"clone"],[]]]]],["stat",["call",["dot",["dot",["name","this"],"faces"],"push"],[["name","face"]]]],["stat",["call",["dot",["sub",["dot",["name","this"],"faceVertexUvs"],["num",0]],"push"],[["array",[["new",["dot",["name","THREE"],"UV"],[["binary","/",["name","ix"],["name","gridX"]],["binary","/",["name","iz"],["name","gridZ"]]]],["new",["dot",["name","THREE"],"UV"],[["binary","/",["name","ix"],["name","gridX"]],["binary","/",["binary","+",["name","iz"],["num",1]],["name","gridZ"]]]],["new",["dot",["name","THREE"],"UV"],[["binary","/",["binary","+",["name","ix"],["num",1]],["name","gridX"]],["binary","/",["binary","+",["name","iz"],["num",1]],["name","gridZ"]]]],["new",["dot",["name","THREE"],"UV"],[["binary","/",["binary","+",["name","ix"],["num",1]],["name","gridX"]],["binary","/",["name","iz"],["name","gridZ"]]]]]]]]]]]]]]],["stat",["call",["dot",["name","this"],"computeCentroids"],[]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"PlaneGeometry"],"prototype"],["new",["dot",["name","THREE"],"Geometry"],[]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"PlaneGeometry"],"prototype"],"constructor"],["dot",["name","THREE"],"PlaneGeometry"]]],["stat",["assign",true,["dot",["name","THREE"],"SphereGeometry"],["function",null,["radius","segmentsWidth","segmentsHeight","phiStart","phiLength","thetaStart","thetaLength"],[["stat",["call",["dot",["dot",["name","THREE"],"Geometry"],"call"],[["name","this"]]]],["stat",["assign",true,["name","radius"],["binary","||",["name","radius"],["num",50]]]],["stat",["assign",true,["name","phiStart"],["conditional",["binary","!==",["name","phiStart"],["name","undefined"]],["name","phiStart"],["num",0]]]],["stat",["assign",true,["name","phiLength"],["conditional",["binary","!==",["name","phiLength"],["name","undefined"]],["name","phiLength"],["binary","*",["dot",["name","Math"],"PI"],["num",2]]]]],["stat",["assign",true,["name","thetaStart"],["conditional",["binary","!==",["name","thetaStart"],["name","undefined"]],["name","thetaStart"],["num",0]]]],["stat",["assign",true,["name","thetaLength"],["conditional",["binary","!==",["name","thetaLength"],["name","undefined"]],["name","thetaLength"],["dot",["name","Math"],"PI"]]]],["var",[["segmentsX",["call",["dot",["name","Math"],"max"],[["num",3],["binary","||",["call",["dot",["name","Math"],"floor"],[["name","segmentsWidth"]]],["num",8]]]]]]],["var",[["segmentsY",["call",["dot",["name","Math"],"max"],[["num",2],["binary","||",["call",["dot",["name","Math"],"floor"],[["name","segmentsHeight"]]],["num",6]]]]]]],["var",[["x"],["y"],["vertices",["array",[]]],["uvs",["array",[]]]]],["for",["assign",true,["name","y"],["num",0]],["binary","<=",["name","y"],["name","segmentsY"]],["unary-postfix","++",["name","y"]],["block",[["var",[["verticesRow",["array",[]]]]],["var",[["uvsRow",["array",[]]]]],["for",["assign",true,["name","x"],["num",0]],["binary","<=",["name","x"],["name","segmentsX"]],["unary-postfix","++",["name","x"]],["block",[["var",[["u",["binary","/",["name","x"],["name","segmentsX"]]]]],["var",[["v",["binary","/",["name","y"],["name","segmentsY"]]]]],["var",[["vertex",["new",["dot",["name","THREE"],"Vector3"],[]]]]],["stat",["assign",true,["dot",["name","vertex"],"x"],["binary","*",["binary","*",["unary-prefix","-",["name","radius"]],["call",["dot",["name","Math"],"cos"],[["binary","+",["name","phiStart"],["binary","*",["name","u"],["name","phiLength"]]]]]],["call",["dot",["name","Math"],"sin"],[["binary","+",["name","thetaStart"],["binary","*",["name","v"],["name","thetaLength"]]]]]]]],["stat",["assign",true,["dot",["name","vertex"],"y"],["binary","*",["name","radius"],["call",["dot",["name","Math"],"cos"],[["binary","+",["name","thetaStart"],["binary","*",["name","v"],["name","thetaLength"]]]]]]]],["stat",["assign",true,["dot",["name","vertex"],"z"],["binary","*",["binary","*",["name","radius"],["call",["dot",["name","Math"],"sin"],[["binary","+",["name","phiStart"],["binary","*",["name","u"],["name","phiLength"]]]]]],["call",["dot",["name","Math"],"sin"],[["binary","+",["name","thetaStart"],["binary","*",["name","v"],["name","thetaLength"]]]]]]]],["stat",["call",["dot",["dot",["name","this"],"vertices"],"push"],[["name","vertex"]]]],["stat",["call",["dot",["name","verticesRow"],"push"],[["binary","-",["dot",["dot",["name","this"],"vertices"],"length"],["num",1]]]]],["stat",["call",["dot",["name","uvsRow"],"push"],[["new",["dot",["name","THREE"],"UV"],[["name","u"],["name","v"]]]]]]]]],["stat",["call",["dot",["name","vertices"],"push"],[["name","verticesRow"]]]],["stat",["call",["dot",["name","uvs"],"push"],[["name","uvsRow"]]]]]]],["for",["assign",true,["name","y"],["num",0]],["binary","<",["name","y"],["name","segmentsY"]],["unary-postfix","++",["name","y"]],["block",[["for",["assign",true,["name","x"],["num",0]],["binary","<",["name","x"],["name","segmentsX"]],["unary-postfix","++",["name","x"]],["block",[["var",[["v1",["sub",["sub",["name","vertices"],["name","y"]],["binary","+",["name","x"],["num",1]]]]]],["var",[["v2",["sub",["sub",["name","vertices"],["name","y"]],["name","x"]]]]],["var",[["v3",["sub",["sub",["name","vertices"],["binary","+",["name","y"],["num",1]]],["name","x"]]]]],["var",[["v4",["sub",["sub",["name","vertices"],["binary","+",["name","y"],["num",1]]],["binary","+",["name","x"],["num",1]]]]]],["var",[["n1",["call",["dot",["call",["dot",["sub",["dot",["name","this"],"vertices"],["name","v1"]],"clone"],[]],"normalize"],[]]]]],["var",[["n2",["call",["dot",["call",["dot",["sub",["dot",["name","this"],"vertices"],["name","v2"]],"clone"],[]],"normalize"],[]]]]],["var",[["n3",["call",["dot",["call",["dot",["sub",["dot",["name","this"],"vertices"],["name","v3"]],"clone"],[]],"normalize"],[]]]]],["var",[["n4",["call",["dot",["call",["dot",["sub",["dot",["name","this"],"vertices"],["name","v4"]],"clone"],[]],"normalize"],[]]]]],["var",[["uv1",["call",["dot",["sub",["sub",["name","uvs"],["name","y"]],["binary","+",["name","x"],["num",1]]],"clone"],[]]]]],["var",[["uv2",["call",["dot",["sub",["sub",["name","uvs"],["name","y"]],["name","x"]],"clone"],[]]]]],["var",[["uv3",["call",["dot",["sub",["sub",["name","uvs"],["binary","+",["name","y"],["num",1]]],["name","x"]],"clone"],[]]]]],["var",[["uv4",["call",["dot",["sub",["sub",["name","uvs"],["binary","+",["name","y"],["num",1]]],["binary","+",["name","x"],["num",1]]],"clone"],[]]]]],["if",["binary","==",["call",["dot",["name","Math"],"abs"],[["dot",["sub",["dot",["name","this"],"vertices"],["name","v1"]],"y"]]],["name","radius"]],["block",[["stat",["call",["dot",["dot",["name","this"],"faces"],"push"],[["new",["dot",["name","THREE"],"Face3"],[["name","v1"],["name","v3"],["name","v4"],["array",[["name","n1"],["name","n3"],["name","n4"]]]]]]]],["stat",["call",["dot",["sub",["dot",["name","this"],"faceVertexUvs"],["num",0]],"push"],[["array",[["name","uv1"],["name","uv3"],["name","uv4"]]]]]]]],["if",["binary","==",["call",["dot",["name","Math"],"abs"],[["dot",["sub",["dot",["name","this"],"vertices"],["name","v3"]],"y"]]],["name","radius"]],["block",[["stat",["call",["dot",["dot",["name","this"],"faces"],"push"],[["new",["dot",["name","THREE"],"Face3"],[["name","v1"],["name","v2"],["name","v3"],["array",[["name","n1"],["name","n2"],["name","n3"]]]]]]]],["stat",["call",["dot",["sub",["dot",["name","this"],"faceVertexUvs"],["num",0]],"push"],[["array",[["name","uv1"],["name","uv2"],["name","uv3"]]]]]]]],["block",[["stat",["call",["dot",["dot",["name","this"],"faces"],"push"],[["new",["dot",["name","THREE"],"Face4"],[["name","v1"],["name","v2"],["name","v3"],["name","v4"],["array",[["name","n1"],["name","n2"],["name","n3"],["name","n4"]]]]]]]],["stat",["call",["dot",["sub",["dot",["name","this"],"faceVertexUvs"],["num",0]],"push"],[["array",[["name","uv1"],["name","uv2"],["name","uv3"],["name","uv4"]]]]]]]]]]]]]]]],["stat",["call",["dot",["name","this"],"computeCentroids"],[]]],["stat",["call",["dot",["name","this"],"computeFaceNormals"],[]]],["stat",["assign",true,["dot",["name","this"],"boundingSphere"],["object",[["radius",["name","radius"]]]]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"SphereGeometry"],"prototype"],["new",["dot",["name","THREE"],"Geometry"],[]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"SphereGeometry"],"prototype"],"constructor"],["dot",["name","THREE"],"SphereGeometry"]]],["stat",["assign",true,["dot",["name","THREE"],"TextGeometry"],["function",null,["text","parameters"],[["var",[["textPath",["new",["dot",["name","THREE"],"TextPath"],[["name","text"],["name","parameters"]]]]]],["var",[["textShapes",["call",["dot",["name","textPath"],"toShapes"],[]]]]],["stat",["assign",true,["dot",["name","parameters"],"amount"],["conditional",["binary","!==",["dot",["name","parameters"],"height"],["name","undefined"]],["dot",["name","parameters"],"height"],["num",50]]]],["if",["binary","===",["dot",["name","parameters"],"bevelThickness"],["name","undefined"]],["stat",["assign",true,["dot",["name","parameters"],"bevelThickness"],["num",10]]],null],["if",["binary","===",["dot",["name","parameters"],"bevelSize"],["name","undefined"]],["stat",["assign",true,["dot",["name","parameters"],"bevelSize"],["num",8]]],null],["if",["binary","===",["dot",["name","parameters"],"bevelEnabled"],["name","undefined"]],["stat",["assign",true,["dot",["name","parameters"],"bevelEnabled"],["name","false"]]],null],["if",["dot",["name","parameters"],"bend"],["block",[["var",[["b",["call",["dot",["sub",["name","textShapes"],["binary","-",["dot",["name","textShapes"],"length"],["num",1]]],"getBoundingBox"],[]]]]],["var",[["max",["dot",["name","b"],"maxX"]]]],["stat",["assign",true,["dot",["name","parameters"],"bendPath"],["new",["dot",["name","THREE"],"QuadraticBezierCurve"],[["new",["dot",["name","THREE"],"Vector2"],[["num",0],["num",0]]],["new",["dot",["name","THREE"],"Vector2"],[["binary","/",["name","max"],["num",2]],["num",120]]],["new",["dot",["name","THREE"],"Vector2"],[["name","max"],["num",0]]]]]]]]],null],["stat",["call",["dot",["dot",["name","THREE"],"ExtrudeGeometry"],"call"],[["name","this"],["name","textShapes"],["name","parameters"]]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"TextGeometry"],"prototype"],["new",["dot",["name","THREE"],"ExtrudeGeometry"],[]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"TextGeometry"],"prototype"],"constructor"],["dot",["name","THREE"],"TextGeometry"]]],["stat",["assign",true,["dot",["name","THREE"],"FontUtils"],["object",[["faces",["object",[]]],["face",["string","helvetiker"]],["weight",["string","normal"]],["style",["string","normal"]],["size",["num",150]],["divisions",["num",10]],["getFace",["function",null,[],[["return",["sub",["sub",["sub",["dot",["name","this"],"faces"],["dot",["name","this"],"face"]],["dot",["name","this"],"weight"]],["dot",["name","this"],"style"]]]]]],["loadFace",["function",null,["data"],[["var",[["family",["call",["dot",["dot",["name","data"],"familyName"],"toLowerCase"],[]]]]],["var",[["ThreeFont",["name","this"]]]],["stat",["assign",true,["sub",["dot",["name","ThreeFont"],"faces"],["name","family"]],["binary","||",["sub",["dot",["name","ThreeFont"],"faces"],["name","family"]],["object",[]]]]],["stat",["assign",true,["sub",["sub",["dot",["name","ThreeFont"],"faces"],["name","family"]],["dot",["name","data"],"cssFontWeight"]],["binary","||",["sub",["sub",["dot",["name","ThreeFont"],"faces"],["name","family"]],["dot",["name","data"],"cssFontWeight"]],["object",[]]]]],["stat",["assign",true,["sub",["sub",["sub",["dot",["name","ThreeFont"],"faces"],["name","family"]],["dot",["name","data"],"cssFontWeight"]],["dot",["name","data"],"cssFontStyle"]],["name","data"]]],["var",[["face",["assign",true,["sub",["sub",["sub",["dot",["name","ThreeFont"],"faces"],["name","family"]],["dot",["name","data"],"cssFontWeight"]],["dot",["name","data"],"cssFontStyle"]],["name","data"]]]]],["return",["name","data"]]]]],["drawText",["function",null,["text"],[["var",[["characterPts",["array",[]]],["allPts",["array",[]]]]],["var",[["i"],["p"],["face",["call",["dot",["name","this"],"getFace"],[]]],["scale",["binary","/",["dot",["name","this"],"size"],["dot",["name","face"],"resolution"]]],["offset",["num",0]],["chars",["call",["dot",["call",["name","String"],[["name","text"]]],"split"],[["string",""]]]],["length",["dot",["name","chars"],"length"]]]],["var",[["fontPaths",["array",[]]]]],["for",["assign",true,["name","i"],["num",0]],["binary","<",["name","i"],["name","length"]],["unary-postfix","++",["name","i"]],["block",[["var",[["path",["new",["dot",["name","THREE"],"Path"],[]]]]],["var",[["ret",["call",["dot",["name","this"],"extractGlyphPoints"],[["sub",["name","chars"],["name","i"]],["name","face"],["name","scale"],["name","offset"],["name","path"]]]]]],["stat",["assign","+",["name","offset"],["dot",["name","ret"],"offset"]]],["stat",["call",["dot",["name","fontPaths"],"push"],[["dot",["name","ret"],"path"]]]]]]],["var",[["width",["binary","/",["name","offset"],["num",2]]]]],["return",["object",[["paths",["name","fontPaths"]],["offset",["name","width"]]]]]]]],["extractGlyphPoints",["function",null,["c","face","scale","offset","path"],[["var",[["pts",["array",[]]]]],["var",[["i"],["i2"],["divisions"],["outline"],["action"],["length"],["scaleX"],["scaleY"],["x"],["y"],["cpx"],["cpy"],["cpx0"],["cpy0"],["cpx1"],["cpy1"],["cpx2"],["cpy2"],["laste"],["glyph",["binary","||",["sub",["dot",["name","face"],"glyphs"],["name","c"]],["sub",["dot",["name","face"],"glyphs"],["string","?"]]]]]],["if",["unary-prefix","!",["name","glyph"]],["return",null],null],["if",["dot",["name","glyph"],"o"],["block",[["stat",["assign",true,["name","outline"],["binary","||",["dot",["name","glyph"],"_cachedOutline"],["assign",true,["dot",["name","glyph"],"_cachedOutline"],["call",["dot",["dot",["name","glyph"],"o"],"split"],[["string"," "]]]]]]],["stat",["assign",true,["name","length"],["dot",["name","outline"],"length"]]],["stat",["assign",true,["name","scaleX"],["name","scale"]]],["stat",["assign",true,["name","scaleY"],["name","scale"]]],["for",["assign",true,["name","i"],["num",0]],["binary","<",["name","i"],["name","length"]],null,["block",[["stat",["assign",true,["name","action"],["sub",["name","outline"],["unary-postfix","++",["name","i"]]]]],["switch",["name","action"],[[["string","m"],[["stat",["assign",true,["name","x"],["binary","+",["binary","*",["sub",["name","outline"],["unary-postfix","++",["name","i"]]],["name","scaleX"]],["name","offset"]]]],["stat",["assign",true,["name","y"],["binary","*",["sub",["name","outline"],["unary-postfix","++",["name","i"]]],["name","scaleY"]]]],["stat",["call",["dot",["name","pts"],"push"],[["new",["dot",["name","THREE"],"Vector2"],[["name","x"],["name","y"]]]]]],["stat",["call",["dot",["name","path"],"moveTo"],[["name","x"],["name","y"]]]],["break",null]]],[["string","l"],[["stat",["assign",true,["name","x"],["binary","+",["binary","*",["sub",["name","outline"],["unary-postfix","++",["name","i"]]],["name","scaleX"]],["name","offset"]]]],["stat",["assign",true,["name","y"],["binary","*",["sub",["name","outline"],["unary-postfix","++",["name","i"]]],["name","scaleY"]]]],["stat",["call",["dot",["name","pts"],"push"],[["new",["dot",["name","THREE"],"Vector2"],[["name","x"],["name","y"]]]]]],["stat",["call",["dot",["name","path"],"lineTo"],[["name","x"],["name","y"]]]],["break",null]]],[["string","q"],[["stat",["assign",true,["name","cpx"],["binary","+",["binary","*",["sub",["name","outline"],["unary-postfix","++",["name","i"]]],["name","scaleX"]],["name","offset"]]]],["stat",["assign",true,["name","cpy"],["binary","*",["sub",["name","outline"],["unary-postfix","++",["name","i"]]],["name","scaleY"]]]],["stat",["assign",true,["name","cpx1"],["binary","+",["binary","*",["sub",["name","outline"],["unary-postfix","++",["name","i"]]],["name","scaleX"]],["name","offset"]]]],["stat",["assign",true,["name","cpy1"],["binary","*",["sub",["name","outline"],["unary-postfix","++",["name","i"]]],["name","scaleY"]]]],["stat",["call",["dot",["name","path"],"quadraticCurveTo"],[["name","cpx1"],["name","cpy1"],["name","cpx"],["name","cpy"]]]],["stat",["assign",true,["name","laste"],["sub",["name","pts"],["binary","-",["dot",["name","pts"],"length"],["num",1]]]]],["if",["name","laste"],["block",[["stat",["assign",true,["name","cpx0"],["dot",["name","laste"],"x"]]],["stat",["assign",true,["name","cpy0"],["dot",["name","laste"],"y"]]],["for",["seq",["assign",true,["name","i2"],["num",1]],["assign",true,["name","divisions"],["dot",["name","this"],"divisions"]]],["binary","<=",["name","i2"],["name","divisions"]],["unary-postfix","++",["name","i2"]],["block",[["var",[["t",["binary","/",["name","i2"],["name","divisions"]]]]],["var",[["tx",["call",["dot",["dot",["dot",["name","THREE"],"Shape"],"Utils"],"b2"],[["name","t"],["name","cpx0"],["name","cpx1"],["name","cpx"]]]]]],["var",[["ty",["call",["dot",["dot",["dot",["name","THREE"],"Shape"],"Utils"],"b2"],[["name","t"],["name","cpy0"],["name","cpy1"],["name","cpy"]]]]]],["stat",["call",["dot",["name","pts"],"push"],[["new",["dot",["name","THREE"],"Vector2"],[["name","tx"],["name","ty"]]]]]]]]]]],null],["break",null]]],[["string","b"],[["stat",["assign",true,["name","cpx"],["binary","+",["binary","*",["sub",["name","outline"],["unary-postfix","++",["name","i"]]],["name","scaleX"]],["name","offset"]]]],["stat",["assign",true,["name","cpy"],["binary","*",["sub",["name","outline"],["unary-postfix","++",["name","i"]]],["name","scaleY"]]]],["stat",["assign",true,["name","cpx1"],["binary","+",["binary","*",["sub",["name","outline"],["unary-postfix","++",["name","i"]]],["name","scaleX"]],["name","offset"]]]],["stat",["assign",true,["name","cpy1"],["binary","*",["sub",["name","outline"],["unary-postfix","++",["name","i"]]],["unary-prefix","-",["name","scaleY"]]]]],["stat",["assign",true,["name","cpx2"],["binary","+",["binary","*",["sub",["name","outline"],["unary-postfix","++",["name","i"]]],["name","scaleX"]],["name","offset"]]]],["stat",["assign",true,["name","cpy2"],["binary","*",["sub",["name","outline"],["unary-postfix","++",["name","i"]]],["unary-prefix","-",["name","scaleY"]]]]],["stat",["call",["dot",["name","path"],"bezierCurveTo"],[["name","cpx"],["name","cpy"],["name","cpx1"],["name","cpy1"],["name","cpx2"],["name","cpy2"]]]],["stat",["assign",true,["name","laste"],["sub",["name","pts"],["binary","-",["dot",["name","pts"],"length"],["num",1]]]]],["if",["name","laste"],["block",[["stat",["assign",true,["name","cpx0"],["dot",["name","laste"],"x"]]],["stat",["assign",true,["name","cpy0"],["dot",["name","laste"],"y"]]],["for",["seq",["assign",true,["name","i2"],["num",1]],["assign",true,["name","divisions"],["dot",["name","this"],"divisions"]]],["binary","<=",["name","i2"],["name","divisions"]],["unary-postfix","++",["name","i2"]],["block",[["var",[["t",["binary","/",["name","i2"],["name","divisions"]]]]],["var",[["tx",["call",["dot",["dot",["dot",["name","THREE"],"Shape"],"Utils"],"b3"],[["name","t"],["name","cpx0"],["name","cpx1"],["name","cpx2"],["name","cpx"]]]]]],["var",[["ty",["call",["dot",["dot",["dot",["name","THREE"],"Shape"],"Utils"],"b3"],[["name","t"],["name","cpy0"],["name","cpy1"],["name","cpy2"],["name","cpy"]]]]]],["stat",["call",["dot",["name","pts"],"push"],[["new",["dot",["name","THREE"],"Vector2"],[["name","tx"],["name","ty"]]]]]]]]]]],null],["break",null]]]]]]]]]],null],["return",["object",[["offset",["binary","*",["dot",["name","glyph"],"ha"],["name","scale"]]],["points",["name","pts"]],["path",["name","path"]]]]]]]]]]]],["stat",["call",["function",null,["namespace"],[["var",[["EPSILON",["num",1e-10]]]],["var",[["process",["function",null,["contour","indices"],[["var",[["n",["dot",["name","contour"],"length"]]]],["if",["binary","<",["name","n"],["num",3]],["return",["name","null"]],null],["var",[["result",["array",[]]],["verts",["array",[]]],["vertIndices",["array",[]]]]],["var",[["u"],["v"],["w"]]],["if",["binary",">",["call",["name","area"],[["name","contour"]]],["num",0]],["block",[["for",["assign",true,["name","v"],["num",0]],["binary","<",["name","v"],["name","n"]],["unary-postfix","++",["name","v"]],["stat",["assign",true,["sub",["name","verts"],["name","v"]],["name","v"]]]]]],["block",[["for",["assign",true,["name","v"],["num",0]],["binary","<",["name","v"],["name","n"]],["unary-postfix","++",["name","v"]],["stat",["assign",true,["sub",["name","verts"],["name","v"]],["binary","-",["binary","-",["name","n"],["num",1]],["name","v"]]]]]]]],["var",[["nv",["name","n"]]]],["var",[["count",["binary","*",["num",2],["name","nv"]]]]],["for",["assign",true,["name","v"],["binary","-",["name","nv"],["num",1]]],["binary",">",["name","nv"],["num",2]],null,["block",[["if",["binary","<=",["unary-postfix","--",["name","count"]],["num",0]],["block",[["stat",["call",["dot",["name","console"],"log"],[["string","Warning, unable to triangulate polygon!"]]]],["if",["name","indices"],["return",["name","vertIndices"]],null],["return",["name","result"]]]],null],["stat",["assign",true,["name","u"],["name","v"]]],["if",["binary","<=",["name","nv"],["name","u"]],["stat",["assign",true,["name","u"],["num",0]]],null],["stat",["assign",true,["name","v"],["binary","+",["name","u"],["num",1]]]],["if",["binary","<=",["name","nv"],["name","v"]],["stat",["assign",true,["name","v"],["num",0]]],null],["stat",["assign",true,["name","w"],["binary","+",["name","v"],["num",1]]]],["if",["binary","<=",["name","nv"],["name","w"]],["stat",["assign",true,["name","w"],["num",0]]],null],["if",["call",["name","snip"],[["name","contour"],["name","u"],["name","v"],["name","w"],["name","nv"],["name","verts"]]],["block",[["var",[["a"],["b"],["c"],["s"],["t"]]],["stat",["assign",true,["name","a"],["sub",["name","verts"],["name","u"]]]],["stat",["assign",true,["name","b"],["sub",["name","verts"],["name","v"]]]],["stat",["assign",true,["name","c"],["sub",["name","verts"],["name","w"]]]],["stat",["call",["dot",["name","result"],"push"],[["array",[["sub",["name","contour"],["name","a"]],["sub",["name","contour"],["name","b"]],["sub",["name","contour"],["name","c"]]]]]]],["stat",["call",["dot",["name","vertIndices"],"push"],[["array",[["sub",["name","verts"],["name","u"]],["sub",["name","verts"],["name","v"]],["sub",["name","verts"],["name","w"]]]]]]],["for",["seq",["assign",true,["name","s"],["name","v"]],["assign",true,["name","t"],["binary","+",["name","v"],["num",1]]]],["binary","<",["name","t"],["name","nv"]],["seq",["unary-postfix","++",["name","s"]],["unary-postfix","++",["name","t"]]],["block",[["stat",["assign",true,["sub",["name","verts"],["name","s"]],["sub",["name","verts"],["name","t"]]]]]]],["stat",["unary-postfix","--",["name","nv"]]],["stat",["assign",true,["name","count"],["binary","*",["num",2],["name","nv"]]]]]],null]]]],["if",["name","indices"],["return",["name","vertIndices"]],null],["return",["name","result"]]]]]]],["var",[["area",["function",null,["contour"],[["var",[["n",["dot",["name","contour"],"length"]]]],["var",[["a",["num",0]]]],["for",["var",[["p",["binary","-",["name","n"],["num",1]]],["q",["num",0]]]],["binary","<",["name","q"],["name","n"]],["assign",true,["name","p"],["unary-postfix","++",["name","q"]]],["block",[["stat",["assign","+",["name","a"],["binary","-",["binary","*",["dot",["sub",["name","contour"],["name","p"]],"x"],["dot",["sub",["name","contour"],["name","q"]],"y"]],["binary","*",["dot",["sub",["name","contour"],["name","q"]],"x"],["dot",["sub",["name","contour"],["name","p"]],"y"]]]]]]]],["return",["binary","*",["name","a"],["num",0.5]]]]]]]],["var",[["insideTriangle",["function",null,["ax","ay","bx","by","cx","cy","px","py"],[["var",[["aX"],["aY"],["bX"],["bY"]]],["var",[["cX"],["cY"],["apx"],["apy"]]],["var",[["bpx"],["bpy"],["cpx"],["cpy"]]],["var",[["cCROSSap"],["bCROSScp"],["aCROSSbp"]]],["stat",["assign",true,["name","aX"],["binary","-",["name","cx"],["name","bx"]]]],["stat",["assign",true,["name","aY"],["binary","-",["name","cy"],["name","by"]]]],["stat",["assign",true,["name","bX"],["binary","-",["name","ax"],["name","cx"]]]],["stat",["assign",true,["name","bY"],["binary","-",["name","ay"],["name","cy"]]]],["stat",["assign",true,["name","cX"],["binary","-",["name","bx"],["name","ax"]]]],["stat",["assign",true,["name","cY"],["binary","-",["name","by"],["name","ay"]]]],["stat",["assign",true,["name","apx"],["binary","-",["name","px"],["name","ax"]]]],["stat",["assign",true,["name","apy"],["binary","-",["name","py"],["name","ay"]]]],["stat",["assign",true,["name","bpx"],["binary","-",["name","px"],["name","bx"]]]],["stat",["assign",true,["name","bpy"],["binary","-",["name","py"],["name","by"]]]],["stat",["assign",true,["name","cpx"],["binary","-",["name","px"],["name","cx"]]]],["stat",["assign",true,["name","cpy"],["binary","-",["name","py"],["name","cy"]]]],["stat",["assign",true,["name","aCROSSbp"],["binary","-",["binary","*",["name","aX"],["name","bpy"]],["binary","*",["name","aY"],["name","bpx"]]]]],["stat",["assign",true,["name","cCROSSap"],["binary","-",["binary","*",["name","cX"],["name","apy"]],["binary","*",["name","cY"],["name","apx"]]]]],["stat",["assign",true,["name","bCROSScp"],["binary","-",["binary","*",["name","bX"],["name","cpy"]],["binary","*",["name","bY"],["name","cpx"]]]]],["return",["binary","&&",["binary","&&",["binary",">=",["name","aCROSSbp"],["num",0]],["binary",">=",["name","bCROSScp"],["num",0]]],["binary",">=",["name","cCROSSap"],["num",0]]]]]]]]],["var",[["snip",["function",null,["contour","u","v","w","n","verts"],[["var",[["p"]]],["var",[["ax"],["ay"],["bx"],["by"]]],["var",[["cx"],["cy"],["px"],["py"]]],["stat",["assign",true,["name","ax"],["dot",["sub",["name","contour"],["sub",["name","verts"],["name","u"]]],"x"]]],["stat",["assign",true,["name","ay"],["dot",["sub",["name","contour"],["sub",["name","verts"],["name","u"]]],"y"]]],["stat",["assign",true,["name","bx"],["dot",["sub",["name","contour"],["sub",["name","verts"],["name","v"]]],"x"]]],["stat",["assign",true,["name","by"],["dot",["sub",["name","contour"],["sub",["name","verts"],["name","v"]]],"y"]]],["stat",["assign",true,["name","cx"],["dot",["sub",["name","contour"],["sub",["name","verts"],["name","w"]]],"x"]]],["stat",["assign",true,["name","cy"],["dot",["sub",["name","contour"],["sub",["name","verts"],["name","w"]]],"y"]]],["if",["binary",">",["name","EPSILON"],["binary","-",["binary","*",["binary","-",["name","bx"],["name","ax"]],["binary","-",["name","cy"],["name","ay"]]],["binary","*",["binary","-",["name","by"],["name","ay"]],["binary","-",["name","cx"],["name","ax"]]]]],["return",["name","false"]],null],["for",["assign",true,["name","p"],["num",0]],["binary","<",["name","p"],["name","n"]],["unary-postfix","++",["name","p"]],["block",[["if",["binary","||",["binary","||",["binary","==",["name","p"],["name","u"]],["binary","==",["name","p"],["name","v"]]],["binary","==",["name","p"],["name","w"]]],["continue",null],null],["stat",["assign",true,["name","px"],["dot",["sub",["name","contour"],["sub",["name","verts"],["name","p"]]],"x"]]],["stat",["assign",true,["name","py"],["dot",["sub",["name","contour"],["sub",["name","verts"],["name","p"]]],"y"]]],["if",["call",["name","insideTriangle"],[["name","ax"],["name","ay"],["name","bx"],["name","by"],["name","cx"],["name","cy"],["name","px"],["name","py"]]],["return",["name","false"]],null]]]],["return",["name","true"]]]]]]],["stat",["assign",true,["dot",["name","namespace"],"Triangulate"],["name","process"]]],["stat",["assign",true,["dot",["dot",["name","namespace"],"Triangulate"],"area"],["name","area"]]],["return",["name","namespace"]]]],[["dot",["name","THREE"],"FontUtils"]]]],["stat",["assign",true,["dot",["name","self"],"_typeface_js"],["object",[["faces",["dot",["dot",["name","THREE"],"FontUtils"],"faces"]],["loadFace",["dot",["dot",["name","THREE"],"FontUtils"],"loadFace"]]]]]],["stat",["assign",true,["dot",["name","THREE"],"TorusGeometry"],["function",null,["radius","tube","segmentsR","segmentsT","arc"],[["stat",["call",["dot",["dot",["name","THREE"],"Geometry"],"call"],[["name","this"]]]],["var",[["scope",["name","this"]]]],["stat",["assign",true,["dot",["name","this"],"radius"],["binary","||",["name","radius"],["num",100]]]],["stat",["assign",true,["dot",["name","this"],"tube"],["binary","||",["name","tube"],["num",40]]]],["stat",["assign",true,["dot",["name","this"],"segmentsR"],["binary","||",["name","segmentsR"],["num",8]]]],["stat",["assign",true,["dot",["name","this"],"segmentsT"],["binary","||",["name","segmentsT"],["num",6]]]],["stat",["assign",true,["dot",["name","this"],"arc"],["binary","||",["name","arc"],["binary","*",["dot",["name","Math"],"PI"],["num",2]]]]],["var",[["center",["new",["dot",["name","THREE"],"Vector3"],[]]],["uvs",["array",[]]],["normals",["array",[]]]]],["for",["var",[["j",["num",0]]]],["binary","<=",["name","j"],["dot",["name","this"],"segmentsR"]],["unary-postfix","++",["name","j"]],["block",[["for",["var",[["i",["num",0]]]],["binary","<=",["name","i"],["dot",["name","this"],"segmentsT"]],["unary-postfix","++",["name","i"]],["block",[["var",[["u",["binary","*",["binary","/",["name","i"],["dot",["name","this"],"segmentsT"]],["dot",["name","this"],"arc"]]]]],["var",[["v",["binary","*",["binary","*",["binary","/",["name","j"],["dot",["name","this"],"segmentsR"]],["dot",["name","Math"],"PI"]],["num",2]]]]],["stat",["assign",true,["dot",["name","center"],"x"],["binary","*",["dot",["name","this"],"radius"],["call",["dot",["name","Math"],"cos"],[["name","u"]]]]]],["stat",["assign",true,["dot",["name","center"],"y"],["binary","*",["dot",["name","this"],"radius"],["call",["dot",["name","Math"],"sin"],[["name","u"]]]]]],["var",[["vertex",["new",["dot",["name","THREE"],"Vector3"],[]]]]],["stat",["assign",true,["dot",["name","vertex"],"x"],["binary","*",["binary","+",["dot",["name","this"],"radius"],["binary","*",["dot",["name","this"],"tube"],["call",["dot",["name","Math"],"cos"],[["name","v"]]]]],["call",["dot",["name","Math"],"cos"],[["name","u"]]]]]],["stat",["assign",true,["dot",["name","vertex"],"y"],["binary","*",["binary","+",["dot",["name","this"],"radius"],["binary","*",["dot",["name","this"],"tube"],["call",["dot",["name","Math"],"cos"],[["name","v"]]]]],["call",["dot",["name","Math"],"sin"],[["name","u"]]]]]],["stat",["assign",true,["dot",["name","vertex"],"z"],["binary","*",["dot",["name","this"],"tube"],["call",["dot",["name","Math"],"sin"],[["name","v"]]]]]],["stat",["call",["dot",["dot",["name","this"],"vertices"],"push"],[["name","vertex"]]]],["stat",["call",["dot",["name","uvs"],"push"],[["new",["dot",["name","THREE"],"UV"],[["binary","/",["name","i"],["dot",["name","this"],"segmentsT"]],["binary","-",["num",1],["binary","/",["name","j"],["dot",["name","this"],"segmentsR"]]]]]]]],["stat",["call",["dot",["name","normals"],"push"],[["call",["dot",["call",["dot",["call",["dot",["name","vertex"],"clone"],[]],"subSelf"],[["name","center"]]],"normalize"],[]]]]]]]]]]],["for",["var",[["j",["num",1]]]],["binary","<=",["name","j"],["dot",["name","this"],"segmentsR"]],["unary-postfix","++",["name","j"]],["block",[["for",["var",[["i",["num",1]]]],["binary","<=",["name","i"],["dot",["name","this"],"segmentsT"]],["unary-postfix","++",["name","i"]],["block",[["var",[["a",["binary","-",["binary","+",["binary","*",["binary","+",["dot",["name","this"],"segmentsT"],["num",1]],["name","j"]],["name","i"]],["num",1]]]]],["var",[["b",["binary","-",["binary","+",["binary","*",["binary","+",["dot",["name","this"],"segmentsT"],["num",1]],["binary","-",["name","j"],["num",1]]],["name","i"]],["num",1]]]]],["var",[["c",["binary","+",["binary","*",["binary","+",["dot",["name","this"],"segmentsT"],["num",1]],["binary","-",["name","j"],["num",1]]],["name","i"]]]]],["var",[["d",["binary","+",["binary","*",["binary","+",["dot",["name","this"],"segmentsT"],["num",1]],["name","j"]],["name","i"]]]]],["var",[["face",["new",["dot",["name","THREE"],"Face4"],[["name","a"],["name","b"],["name","c"],["name","d"],["array",[["sub",["name","normals"],["name","a"]],["sub",["name","normals"],["name","b"]],["sub",["name","normals"],["name","c"]],["sub",["name","normals"],["name","d"]]]]]]]]],["stat",["call",["dot",["dot",["name","face"],"normal"],"addSelf"],[["sub",["name","normals"],["name","a"]]]]],["stat",["call",["dot",["dot",["name","face"],"normal"],"addSelf"],[["sub",["name","normals"],["name","b"]]]]],["stat",["call",["dot",["dot",["name","face"],"normal"],"addSelf"],[["sub",["name","normals"],["name","c"]]]]],["stat",["call",["dot",["dot",["name","face"],"normal"],"addSelf"],[["sub",["name","normals"],["name","d"]]]]],["stat",["call",["dot",["dot",["name","face"],"normal"],"normalize"],[]]],["stat",["call",["dot",["dot",["name","this"],"faces"],"push"],[["name","face"]]]],["stat",["call",["dot",["sub",["dot",["name","this"],"faceVertexUvs"],["num",0]],"push"],[["array",[["call",["dot",["sub",["name","uvs"],["name","a"]],"clone"],[]],["call",["dot",["sub",["name","uvs"],["name","b"]],"clone"],[]],["call",["dot",["sub",["name","uvs"],["name","c"]],"clone"],[]],["call",["dot",["sub",["name","uvs"],["name","d"]],"clone"],[]]]]]]]]]]]]],["stat",["call",["dot",["name","this"],"computeCentroids"],[]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"TorusGeometry"],"prototype"],["new",["dot",["name","THREE"],"Geometry"],[]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"TorusGeometry"],"prototype"],"constructor"],["dot",["name","THREE"],"TorusGeometry"]]],["stat",["assign",true,["dot",["name","THREE"],"TorusKnotGeometry"],["function",null,["radius","tube","segmentsR","segmentsT","p","q","heightScale"],[["stat",["call",["dot",["dot",["name","THREE"],"Geometry"],"call"],[["name","this"]]]],["var",[["scope",["name","this"]]]],["stat",["assign",true,["dot",["name","this"],"radius"],["binary","||",["name","radius"],["num",200]]]],["stat",["assign",true,["dot",["name","this"],"tube"],["binary","||",["name","tube"],["num",40]]]],["stat",["assign",true,["dot",["name","this"],"segmentsR"],["binary","||",["name","segmentsR"],["num",64]]]],["stat",["assign",true,["dot",["name","this"],"segmentsT"],["binary","||",["name","segmentsT"],["num",8]]]],["stat",["assign",true,["dot",["name","this"],"p"],["binary","||",["name","p"],["num",2]]]],["stat",["assign",true,["dot",["name","this"],"q"],["binary","||",["name","q"],["num",3]]]],["stat",["assign",true,["dot",["name","this"],"heightScale"],["binary","||",["name","heightScale"],["num",1]]]],["stat",["assign",true,["dot",["name","this"],"grid"],["new",["name","Array"],[["dot",["name","this"],"segmentsR"]]]]],["var",[["tang",["new",["dot",["name","THREE"],"Vector3"],[]]]]],["var",[["n",["new",["dot",["name","THREE"],"Vector3"],[]]]]],["var",[["bitan",["new",["dot",["name","THREE"],"Vector3"],[]]]]],["for",["var",[["i",["num",0]]]],["binary","<",["name","i"],["dot",["name","this"],"segmentsR"]],["unary-prefix","++",["name","i"]],["block",[["stat",["assign",true,["sub",["dot",["name","this"],"grid"],["name","i"]],["new",["name","Array"],[["dot",["name","this"],"segmentsT"]]]]],["for",["var",[["j",["num",0]]]],["binary","<",["name","j"],["dot",["name","this"],"segmentsT"]],["unary-prefix","++",["name","j"]],["block",[["var",[["u",["binary","*",["binary","*",["binary","*",["binary","/",["name","i"],["dot",["name","this"],"segmentsR"]],["num",2]],["dot",["name","this"],"p"]],["dot",["name","Math"],"PI"]]]]],["var",[["v",["binary","*",["binary","*",["binary","/",["name","j"],["dot",["name","this"],"segmentsT"]],["num",2]],["dot",["name","Math"],"PI"]]]]],["var",[["p1",["call",["name","getPos"],[["name","u"],["name","v"],["dot",["name","this"],"q"],["dot",["name","this"],"p"],["dot",["name","this"],"radius"],["dot",["name","this"],"heightScale"]]]]]],["var",[["p2",["call",["name","getPos"],[["binary","+",["name","u"],["num",0.01]],["name","v"],["dot",["name","this"],"q"],["dot",["name","this"],"p"],["dot",["name","this"],"radius"],["dot",["name","this"],"heightScale"]]]]]],["var",[["cx"],["cy"]]],["stat",["call",["dot",["name","tang"],"sub"],[["name","p2"],["name","p1"]]]],["stat",["call",["dot",["name","n"],"add"],[["name","p2"],["name","p1"]]]],["stat",["call",["dot",["name","bitan"],"cross"],[["name","tang"],["name","n"]]]],["stat",["call",["dot",["name","n"],"cross"],[["name","bitan"],["name","tang"]]]],["stat",["call",["dot",["name","bitan"],"normalize"],[]]],["stat",["call",["dot",["name","n"],"normalize"],[]]],["stat",["assign",true,["name","cx"],["binary","*",["unary-prefix","-",["dot",["name","this"],"tube"]],["call",["dot",["name","Math"],"cos"],[["name","v"]]]]]],["stat",["assign",true,["name","cy"],["binary","*",["dot",["name","this"],"tube"],["call",["dot",["name","Math"],"sin"],[["name","v"]]]]]],["stat",["assign","+",["dot",["name","p1"],"x"],["binary","+",["binary","*",["name","cx"],["dot",["name","n"],"x"]],["binary","*",["name","cy"],["dot",["name","bitan"],"x"]]]]],["stat",["assign","+",["dot",["name","p1"],"y"],["binary","+",["binary","*",["name","cx"],["dot",["name","n"],"y"]],["binary","*",["name","cy"],["dot",["name","bitan"],"y"]]]]],["stat",["assign","+",["dot",["name","p1"],"z"],["binary","+",["binary","*",["name","cx"],["dot",["name","n"],"z"]],["binary","*",["name","cy"],["dot",["name","bitan"],"z"]]]]],["stat",["assign",true,["sub",["sub",["dot",["name","this"],"grid"],["name","i"]],["name","j"]],["call",["name","vert"],[["dot",["name","p1"],"x"],["dot",["name","p1"],"y"],["dot",["name","p1"],"z"]]]]]]]]]]],["for",["var",[["i",["num",0]]]],["binary","<",["name","i"],["dot",["name","this"],"segmentsR"]],["unary-prefix","++",["name","i"]],["block",[["for",["var",[["j",["num",0]]]],["binary","<",["name","j"],["dot",["name","this"],"segmentsT"]],["unary-prefix","++",["name","j"]],["block",[["var",[["ip",["binary","%",["binary","+",["name","i"],["num",1]],["dot",["name","this"],"segmentsR"]]]]],["var",[["jp",["binary","%",["binary","+",["name","j"],["num",1]],["dot",["name","this"],"segmentsT"]]]]],["var",[["a",["sub",["sub",["dot",["name","this"],"grid"],["name","i"]],["name","j"]]]]],["var",[["b",["sub",["sub",["dot",["name","this"],"grid"],["name","ip"]],["name","j"]]]]],["var",[["c",["sub",["sub",["dot",["name","this"],"grid"],["name","ip"]],["name","jp"]]]]],["var",[["d",["sub",["sub",["dot",["name","this"],"grid"],["name","i"]],["name","jp"]]]]],["var",[["uva",["new",["dot",["name","THREE"],"UV"],[["binary","/",["name","i"],["dot",["name","this"],"segmentsR"]],["binary","/",["name","j"],["dot",["name","this"],"segmentsT"]]]]]]],["var",[["uvb",["new",["dot",["name","THREE"],"UV"],[["binary","/",["binary","+",["name","i"],["num",1]],["dot",["name","this"],"segmentsR"]],["binary","/",["name","j"],["dot",["name","this"],"segmentsT"]]]]]]],["var",[["uvc",["new",["dot",["name","THREE"],"UV"],[["binary","/",["binary","+",["name","i"],["num",1]],["dot",["name","this"],"segmentsR"]],["binary","/",["binary","+",["name","j"],["num",1]],["dot",["name","this"],"segmentsT"]]]]]]],["var",[["uvd",["new",["dot",["name","THREE"],"UV"],[["binary","/",["name","i"],["dot",["name","this"],"segmentsR"]],["binary","/",["binary","+",["name","j"],["num",1]],["dot",["name","this"],"segmentsT"]]]]]]],["stat",["call",["dot",["dot",["name","this"],"faces"],"push"],[["new",["dot",["name","THREE"],"Face4"],[["name","a"],["name","b"],["name","c"],["name","d"]]]]]],["stat",["call",["dot",["sub",["dot",["name","this"],"faceVertexUvs"],["num",0]],"push"],[["array",[["name","uva"],["name","uvb"],["name","uvc"],["name","uvd"]]]]]]]]]]]],["stat",["call",["dot",["name","this"],"computeCentroids"],[]]],["stat",["call",["dot",["name","this"],"computeFaceNormals"],[]]],["stat",["call",["dot",["name","this"],"computeVertexNormals"],[]]],["defun","vert",["x","y","z"],[["return",["binary","-",["call",["dot",["dot",["name","scope"],"vertices"],"push"],[["new",["dot",["name","THREE"],"Vector3"],[["name","x"],["name","y"],["name","z"]]]]],["num",1]]]]],["defun","getPos",["u","v","in_q","in_p","radius","heightScale"],[["var",[["cu",["call",["dot",["name","Math"],"cos"],[["name","u"]]]]]],["var",[["cv",["call",["dot",["name","Math"],"cos"],[["name","v"]]]]]],["var",[["su",["call",["dot",["name","Math"],"sin"],[["name","u"]]]]]],["var",[["quOverP",["binary","*",["binary","/",["name","in_q"],["name","in_p"]],["name","u"]]]]],["var",[["cs",["call",["dot",["name","Math"],"cos"],[["name","quOverP"]]]]]],["var",[["tx",["binary","*",["binary","*",["binary","*",["name","radius"],["binary","+",["num",2],["name","cs"]]],["num",0.5]],["name","cu"]]]]],["var",[["ty",["binary","*",["binary","*",["binary","*",["name","radius"],["binary","+",["num",2],["name","cs"]]],["name","su"]],["num",0.5]]]]],["var",[["tz",["binary","*",["binary","*",["binary","*",["name","heightScale"],["name","radius"]],["call",["dot",["name","Math"],"sin"],[["name","quOverP"]]]],["num",0.5]]]]],["return",["new",["dot",["name","THREE"],"Vector3"],[["name","tx"],["name","ty"],["name","tz"]]]]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"TorusKnotGeometry"],"prototype"],["new",["dot",["name","THREE"],"Geometry"],[]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"TorusKnotGeometry"],"prototype"],"constructor"],["dot",["name","THREE"],"TorusKnotGeometry"]]],["stat",["assign",true,["dot",["name","THREE"],"TubeGeometry"],["function",null,["path","segments","radius","segmentsRadius","closed","debug"],[["stat",["call",["dot",["dot",["name","THREE"],"Geometry"],"call"],[["name","this"]]]],["stat",["assign",true,["dot",["name","this"],"path"],["name","path"]]],["stat",["assign",true,["dot",["name","this"],"segments"],["binary","||",["name","segments"],["num",64]]]],["stat",["assign",true,["dot",["name","this"],"radius"],["binary","||",["name","radius"],["num",1]]]],["stat",["assign",true,["dot",["name","this"],"segmentsRadius"],["binary","||",["name","segmentsRadius"],["num",8]]]],["stat",["assign",true,["dot",["name","this"],"closed"],["binary","||",["name","closed"],["name","false"]]]],["if",["name","debug"],["stat",["assign",true,["dot",["name","this"],"debug"],["new",["dot",["name","THREE"],"Object3D"],[]]]],null],["stat",["assign",true,["dot",["name","this"],"grid"],["array",[]]]],["var",[["scope",["name","this"]],["tangent"],["normal"],["binormal"],["numpoints",["binary","+",["dot",["name","this"],"segments"],["num",1]]],["x"],["y"],["z"],["tx"],["ty"],["tz"],["u"],["v"],["cx"],["cy"],["pos"],["pos2",["new",["dot",["name","THREE"],"Vector3"],[]]],["i"],["j"],["ip"],["jp"],["a"],["b"],["c"],["d"],["uva"],["uvb"],["uvc"],["uvd"]]],["var",[["frames",["new",["dot",["dot",["name","THREE"],"TubeGeometry"],"FrenetFrames"],[["name","path"],["name","segments"],["name","closed"]]]],["tangents",["dot",["name","frames"],"tangents"]],["normals",["dot",["name","frames"],"normals"]],["binormals",["dot",["name","frames"],"binormals"]]]],["stat",["assign",true,["dot",["name","this"],"tangents"],["name","tangents"]]],["stat",["assign",true,["dot",["name","this"],"normals"],["name","normals"]]],["stat",["assign",true,["dot",["name","this"],"binormals"],["name","binormals"]]],["defun","vert",["x","y","z"],[["return",["binary","-",["call",["dot",["dot",["name","scope"],"vertices"],"push"],[["new",["dot",["name","THREE"],"Vector3"],[["name","x"],["name","y"],["name","z"]]]]],["num",1]]]]],["for",["assign",true,["name","i"],["num",0]],["binary","<",["name","i"],["name","numpoints"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["sub",["dot",["name","this"],"grid"],["name","i"]],["array",[]]]],["stat",["assign",true,["name","u"],["binary","/",["name","i"],["binary","-",["name","numpoints"],["num",1]]]]],["stat",["assign",true,["name","pos"],["call",["dot",["name","path"],"getPointAt"],[["name","u"]]]]],["stat",["assign",true,["name","tangent"],["sub",["name","tangents"],["name","i"]]]],["stat",["assign",true,["name","normal"],["sub",["name","normals"],["name","i"]]]],["stat",["assign",true,["name","binormal"],["sub",["name","binormals"],["name","i"]]]],["if",["dot",["name","this"],"debug"],["block",[["stat",["call",["dot",["dot",["name","this"],"debug"],"add"],[["new",["dot",["name","THREE"],"ArrowHelper"],[["name","tangent"],["name","pos"],["name","radius"],["num",255]]]]]],["stat",["call",["dot",["dot",["name","this"],"debug"],"add"],[["new",["dot",["name","THREE"],"ArrowHelper"],[["name","normal"],["name","pos"],["name","radius"],["num",16711680]]]]]],["stat",["call",["dot",["dot",["name","this"],"debug"],"add"],[["new",["dot",["name","THREE"],"ArrowHelper"],[["name","binormal"],["name","pos"],["name","radius"],["num",65280]]]]]]]],null],["for",["assign",true,["name","j"],["num",0]],["binary","<",["name","j"],["dot",["name","this"],"segmentsRadius"]],["unary-postfix","++",["name","j"]],["block",[["stat",["assign",true,["name","v"],["binary","*",["binary","*",["binary","/",["name","j"],["dot",["name","this"],"segmentsRadius"]],["num",2]],["dot",["name","Math"],"PI"]]]],["stat",["assign",true,["name","cx"],["binary","*",["unary-prefix","-",["dot",["name","this"],"radius"]],["call",["dot",["name","Math"],"cos"],[["name","v"]]]]]],["stat",["assign",true,["name","cy"],["binary","*",["dot",["name","this"],"radius"],["call",["dot",["name","Math"],"sin"],[["name","v"]]]]]],["stat",["call",["dot",["name","pos2"],"copy"],[["name","pos"]]]],["stat",["assign","+",["dot",["name","pos2"],"x"],["binary","+",["binary","*",["name","cx"],["dot",["name","normal"],"x"]],["binary","*",["name","cy"],["dot",["name","binormal"],"x"]]]]],["stat",["assign","+",["dot",["name","pos2"],"y"],["binary","+",["binary","*",["name","cx"],["dot",["name","normal"],"y"]],["binary","*",["name","cy"],["dot",["name","binormal"],"y"]]]]],["stat",["assign","+",["dot",["name","pos2"],"z"],["binary","+",["binary","*",["name","cx"],["dot",["name","normal"],"z"]],["binary","*",["name","cy"],["dot",["name","binormal"],"z"]]]]],["stat",["assign",true,["sub",["sub",["dot",["name","this"],"grid"],["name","i"]],["name","j"]],["call",["name","vert"],[["dot",["name","pos2"],"x"],["dot",["name","pos2"],"y"],["dot",["name","pos2"],"z"]]]]]]]]]]],["for",["assign",true,["name","i"],["num",0]],["binary","<",["name","i"],["dot",["name","this"],"segments"]],["unary-postfix","++",["name","i"]],["block",[["for",["assign",true,["name","j"],["num",0]],["binary","<",["name","j"],["dot",["name","this"],"segmentsRadius"]],["unary-postfix","++",["name","j"]],["block",[["stat",["assign",true,["name","ip"],["conditional",["name","closed"],["binary","%",["binary","+",["name","i"],["num",1]],["dot",["name","this"],"segments"]],["binary","+",["name","i"],["num",1]]]]],["stat",["assign",true,["name","jp"],["binary","%",["binary","+",["name","j"],["num",1]],["dot",["name","this"],"segmentsRadius"]]]],["stat",["assign",true,["name","a"],["sub",["sub",["dot",["name","this"],"grid"],["name","i"]],["name","j"]]]],["stat",["assign",true,["name","b"],["sub",["sub",["dot",["name","this"],"grid"],["name","ip"]],["name","j"]]]],["stat",["assign",true,["name","c"],["sub",["sub",["dot",["name","this"],"grid"],["name","ip"]],["name","jp"]]]],["stat",["assign",true,["name","d"],["sub",["sub",["dot",["name","this"],"grid"],["name","i"]],["name","jp"]]]],["stat",["assign",true,["name","uva"],["new",["dot",["name","THREE"],"UV"],[["binary","/",["name","i"],["dot",["name","this"],"segments"]],["binary","/",["name","j"],["dot",["name","this"],"segmentsRadius"]]]]]],["stat",["assign",true,["name","uvb"],["new",["dot",["name","THREE"],"UV"],[["binary","/",["binary","+",["name","i"],["num",1]],["dot",["name","this"],"segments"]],["binary","/",["name","j"],["dot",["name","this"],"segmentsRadius"]]]]]],["stat",["assign",true,["name","uvc"],["new",["dot",["name","THREE"],"UV"],[["binary","/",["binary","+",["name","i"],["num",1]],["dot",["name","this"],"segments"]],["binary","/",["binary","+",["name","j"],["num",1]],["dot",["name","this"],"segmentsRadius"]]]]]],["stat",["assign",true,["name","uvd"],["new",["dot",["name","THREE"],"UV"],[["binary","/",["name","i"],["dot",["name","this"],"segments"]],["binary","/",["binary","+",["name","j"],["num",1]],["dot",["name","this"],"segmentsRadius"]]]]]],["stat",["call",["dot",["dot",["name","this"],"faces"],"push"],[["new",["dot",["name","THREE"],"Face4"],[["name","a"],["name","b"],["name","c"],["name","d"]]]]]],["stat",["call",["dot",["sub",["dot",["name","this"],"faceVertexUvs"],["num",0]],"push"],[["array",[["name","uva"],["name","uvb"],["name","uvc"],["name","uvd"]]]]]]]]]]]],["stat",["call",["dot",["name","this"],"computeCentroids"],[]]],["stat",["call",["dot",["name","this"],"computeFaceNormals"],[]]],["stat",["call",["dot",["name","this"],"computeVertexNormals"],[]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"TubeGeometry"],"prototype"],["new",["dot",["name","THREE"],"Geometry"],[]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"TubeGeometry"],"prototype"],"constructor"],["dot",["name","THREE"],"TubeGeometry"]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"TubeGeometry"],"FrenetFrames"],["function",null,["path","segments","closed"],[["var",[["tangent",["new",["dot",["name","THREE"],"Vector3"],[]]],["normal",["new",["dot",["name","THREE"],"Vector3"],[]]],["binormal",["new",["dot",["name","THREE"],"Vector3"],[]]],["tangents",["array",[]]],["normals",["array",[]]],["binormals",["array",[]]],["vec",["new",["dot",["name","THREE"],"Vector3"],[]]],["mat",["new",["dot",["name","THREE"],"Matrix4"],[]]],["numpoints",["binary","+",["name","segments"],["num",1]]],["theta"],["epsilon",["num",0.0001]],["smallest"],["tx"],["ty"],["tz"],["i"],["u"],["v"]]],["stat",["assign",true,["dot",["name","this"],"tangents"],["name","tangents"]]],["stat",["assign",true,["dot",["name","this"],"normals"],["name","normals"]]],["stat",["assign",true,["dot",["name","this"],"binormals"],["name","binormals"]]],["for",["assign",true,["name","i"],["num",0]],["binary","<",["name","i"],["name","numpoints"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","u"],["binary","/",["name","i"],["binary","-",["name","numpoints"],["num",1]]]]],["stat",["assign",true,["sub",["name","tangents"],["name","i"]],["call",["dot",["name","path"],"getTangentAt"],[["name","u"]]]]],["stat",["call",["dot",["sub",["name","tangents"],["name","i"]],"normalize"],[]]]]]],["stat",["call",["name","initialNormal3"],[]]],["defun","initialNormal1",["lastBinormal"],[["stat",["assign",true,["sub",["name","normals"],["num",0]],["new",["dot",["name","THREE"],"Vector3"],[]]]],["stat",["assign",true,["sub",["name","binormals"],["num",0]],["new",["dot",["name","THREE"],"Vector3"],[]]]],["if",["binary","===",["name","lastBinormal"],["name","undefined"]],["stat",["assign",true,["name","lastBinormal"],["new",["dot",["name","THREE"],"Vector3"],[["num",0],["num",0],["num",1]]]]],null],["stat",["call",["dot",["call",["dot",["sub",["name","normals"],["num",0]],"cross"],[["name","lastBinormal"],["sub",["name","tangents"],["num",0]]]],"normalize"],[]]],["stat",["call",["dot",["call",["dot",["sub",["name","binormals"],["num",0]],"cross"],[["sub",["name","tangents"],["num",0]],["sub",["name","normals"],["num",0]]]],"normalize"],[]]]]],["defun","initialNormal2",[],[["var",[["t2",["call",["dot",["name","path"],"getTangentAt"],[["name","epsilon"]]]]]],["stat",["assign",true,["sub",["name","normals"],["num",0]],["call",["dot",["call",["dot",["new",["dot",["name","THREE"],"Vector3"],[]],"sub"],[["name","t2"],["sub",["name","tangents"],["num",0]]]],"normalize"],[]]]],["stat",["assign",true,["sub",["name","binormals"],["num",0]],["call",["dot",["new",["dot",["name","THREE"],"Vector3"],[]],"cross"],[["sub",["name","tangents"],["num",0]],["sub",["name","normals"],["num",0]]]]]],["stat",["call",["dot",["call",["dot",["sub",["name","normals"],["num",0]],"cross"],[["sub",["name","binormals"],["num",0]],["sub",["name","tangents"],["num",0]]]],"normalize"],[]]],["stat",["call",["dot",["call",["dot",["sub",["name","binormals"],["num",0]],"cross"],[["sub",["name","tangents"],["num",0]],["sub",["name","normals"],["num",0]]]],"normalize"],[]]]]],["defun","initialNormal3",[],[["stat",["assign",true,["sub",["name","normals"],["num",0]],["new",["dot",["name","THREE"],"Vector3"],[]]]],["stat",["assign",true,["sub",["name","binormals"],["num",0]],["new",["dot",["name","THREE"],"Vector3"],[]]]],["stat",["assign",true,["name","smallest"],["dot",["name","Number"],"MAX_VALUE"]]],["stat",["assign",true,["name","tx"],["call",["dot",["name","Math"],"abs"],[["dot",["sub",["name","tangents"],["num",0]],"x"]]]]],["stat",["assign",true,["name","ty"],["call",["dot",["name","Math"],"abs"],[["dot",["sub",["name","tangents"],["num",0]],"y"]]]]],["stat",["assign",true,["name","tz"],["call",["dot",["name","Math"],"abs"],[["dot",["sub",["name","tangents"],["num",0]],"z"]]]]],["if",["binary","<=",["name","tx"],["name","smallest"]],["block",[["stat",["assign",true,["name","smallest"],["name","tx"]]],["stat",["call",["dot",["name","normal"],"set"],[["num",1],["num",0],["num",0]]]]]],null],["if",["binary","<=",["name","ty"],["name","smallest"]],["block",[["stat",["assign",true,["name","smallest"],["name","ty"]]],["stat",["call",["dot",["name","normal"],"set"],[["num",0],["num",1],["num",0]]]]]],null],["if",["binary","<=",["name","tz"],["name","smallest"]],["block",[["stat",["call",["dot",["name","normal"],"set"],[["num",0],["num",0],["num",1]]]]]],null],["stat",["call",["dot",["call",["dot",["name","vec"],"cross"],[["sub",["name","tangents"],["num",0]],["name","normal"]]],"normalize"],[]]],["stat",["call",["dot",["sub",["name","normals"],["num",0]],"cross"],[["sub",["name","tangents"],["num",0]],["name","vec"]]]],["stat",["call",["dot",["sub",["name","binormals"],["num",0]],"cross"],[["sub",["name","tangents"],["num",0]],["sub",["name","normals"],["num",0]]]]]]],["for",["assign",true,["name","i"],["num",1]],["binary","<",["name","i"],["name","numpoints"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["sub",["name","normals"],["name","i"]],["call",["dot",["sub",["name","normals"],["binary","-",["name","i"],["num",1]]],"clone"],[]]]],["stat",["assign",true,["sub",["name","binormals"],["name","i"]],["call",["dot",["sub",["name","binormals"],["binary","-",["name","i"],["num",1]]],"clone"],[]]]],["stat",["call",["dot",["name","vec"],"cross"],[["sub",["name","tangents"],["binary","-",["name","i"],["num",1]]],["sub",["name","tangents"],["name","i"]]]]],["if",["binary",">",["call",["dot",["name","vec"],"length"],[]],["name","epsilon"]],["block",[["stat",["call",["dot",["name","vec"],"normalize"],[]]],["stat",["assign",true,["name","theta"],["call",["dot",["name","Math"],"acos"],[["call",["dot",["sub",["name","tangents"],["binary","-",["name","i"],["num",1]]],"dot"],[["sub",["name","tangents"],["name","i"]]]]]]]],["stat",["call",["dot",["call",["dot",["name","mat"],"makeRotationAxis"],[["name","vec"],["name","theta"]]],"multiplyVector3"],[["sub",["name","normals"],["name","i"]]]]]]],null],["stat",["call",["dot",["sub",["name","binormals"],["name","i"]],"cross"],[["sub",["name","tangents"],["name","i"]],["sub",["name","normals"],["name","i"]]]]]]]],["if",["name","closed"],["block",[["stat",["assign",true,["name","theta"],["call",["dot",["name","Math"],"acos"],[["call",["dot",["sub",["name","normals"],["num",0]],"dot"],[["sub",["name","normals"],["binary","-",["name","numpoints"],["num",1]]]]]]]]],["stat",["assign","/",["name","theta"],["binary","-",["name","numpoints"],["num",1]]]],["if",["binary",">",["call",["dot",["sub",["name","tangents"],["num",0]],"dot"],[["call",["dot",["name","vec"],"cross"],[["sub",["name","normals"],["num",0]],["sub",["name","normals"],["binary","-",["name","numpoints"],["num",1]]]]]]],["num",0]],["block",[["stat",["assign",true,["name","theta"],["unary-prefix","-",["name","theta"]]]]]],null],["for",["assign",true,["name","i"],["num",1]],["binary","<",["name","i"],["name","numpoints"]],["unary-postfix","++",["name","i"]],["block",[["stat",["call",["dot",["call",["dot",["name","mat"],"makeRotationAxis"],[["sub",["name","tangents"],["name","i"]],["binary","*",["name","theta"],["name","i"]]]],"multiplyVector3"],[["sub",["name","normals"],["name","i"]]]]],["stat",["call",["dot",["sub",["name","binormals"],["name","i"]],"cross"],[["sub",["name","tangents"],["name","i"]],["sub",["name","normals"],["name","i"]]]]]]]]]],null]]]]],["stat",["assign",true,["dot",["name","THREE"],"PolyhedronGeometry"],["function",null,["vertices","faces","radius","detail"],[["stat",["call",["dot",["dot",["name","THREE"],"Geometry"],"call"],[["name","this"]]]],["stat",["assign",true,["name","radius"],["binary","||",["name","radius"],["num",1]]]],["stat",["assign",true,["name","detail"],["binary","||",["name","detail"],["num",0]]]],["var",[["that",["name","this"]]]],["for",["var",[["i",["num",0]],["l",["dot",["name","vertices"],"length"]]]],["binary","<",["name","i"],["name","l"]],["unary-postfix","++",["name","i"]],["block",[["stat",["call",["name","prepare"],[["new",["dot",["name","THREE"],"Vector3"],[["sub",["sub",["name","vertices"],["name","i"]],["num",0]],["sub",["sub",["name","vertices"],["name","i"]],["num",1]],["sub",["sub",["name","vertices"],["name","i"]],["num",2]]]]]]]]]],["var",[["midpoints",["array",[]]],["p",["dot",["name","this"],"vertices"]]]],["for",["var",[["i",["num",0]],["l",["dot",["name","faces"],"length"]]]],["binary","<",["name","i"],["name","l"]],["unary-postfix","++",["name","i"]],["block",[["stat",["call",["name","make"],[["sub",["name","p"],["sub",["sub",["name","faces"],["name","i"]],["num",0]]],["sub",["name","p"],["sub",["sub",["name","faces"],["name","i"]],["num",1]]],["sub",["name","p"],["sub",["sub",["name","faces"],["name","i"]],["num",2]]],["name","detail"]]]]]]],["stat",["call",["dot",["name","this"],"mergeVertices"],[]]],["for",["var",[["i",["num",0]],["l",["dot",["dot",["name","this"],"vertices"],"length"]]]],["binary","<",["name","i"],["name","l"]],["unary-postfix","++",["name","i"]],["block",[["stat",["call",["dot",["sub",["dot",["name","this"],"vertices"],["name","i"]],"multiplyScalar"],[["name","radius"]]]]]]],["defun","prepare",["vector"],[["var",[["vertex",["call",["dot",["call",["dot",["name","vector"],"normalize"],[]],"clone"],[]]]]],["stat",["assign",true,["dot",["name","vertex"],"index"],["binary","-",["call",["dot",["dot",["name","that"],"vertices"],"push"],[["name","vertex"]]],["num",1]]]],["var",[["u",["binary","+",["binary","/",["binary","/",["call",["name","azimuth"],[["name","vector"]]],["num",2]],["dot",["name","Math"],"PI"]],["num",0.5]]]]],["var",[["v",["binary","+",["binary","/",["call",["name","inclination"],[["name","vector"]]],["dot",["name","Math"],"PI"]],["num",0.5]]]]],["stat",["assign",true,["dot",["name","vertex"],"uv"],["new",["dot",["name","THREE"],"UV"],[["name","u"],["name","v"]]]]],["return",["name","vertex"]]]],["defun","make",["v1","v2","v3","detail"],[["if",["binary","<",["name","detail"],["num",1]],["block",[["var",[["face",["new",["dot",["name","THREE"],"Face3"],[["dot",["name","v1"],"index"],["dot",["name","v2"],"index"],["dot",["name","v3"],"index"],["array",[["call",["dot",["name","v1"],"clone"],[]],["call",["dot",["name","v2"],"clone"],[]],["call",["dot",["name","v3"],"clone"],[]]]]]]]]],["stat",["call",["dot",["call",["dot",["call",["dot",["call",["dot",["dot",["name","face"],"centroid"],"addSelf"],[["name","v1"]]],"addSelf"],[["name","v2"]]],"addSelf"],[["name","v3"]]],"divideScalar"],[["num",3]]]],["stat",["assign",true,["dot",["name","face"],"normal"],["call",["dot",["call",["dot",["dot",["name","face"],"centroid"],"clone"],[]],"normalize"],[]]]],["stat",["call",["dot",["dot",["name","that"],"faces"],"push"],[["name","face"]]]],["var",[["azi",["call",["name","azimuth"],[["dot",["name","face"],"centroid"]]]]]],["stat",["call",["dot",["sub",["dot",["name","that"],"faceVertexUvs"],["num",0]],"push"],[["array",[["call",["name","correctUV"],[["dot",["name","v1"],"uv"],["name","v1"],["name","azi"]]],["call",["name","correctUV"],[["dot",["name","v2"],"uv"],["name","v2"],["name","azi"]]],["call",["name","correctUV"],[["dot",["name","v3"],"uv"],["name","v3"],["name","azi"]]]]]]]]]],["block",[["stat",["assign","-",["name","detail"],["num",1]]],["stat",["call",["name","make"],[["name","v1"],["call",["name","midpoint"],[["name","v1"],["name","v2"]]],["call",["name","midpoint"],[["name","v1"],["name","v3"]]],["name","detail"]]]],["stat",["call",["name","make"],[["call",["name","midpoint"],[["name","v1"],["name","v2"]]],["name","v2"],["call",["name","midpoint"],[["name","v2"],["name","v3"]]],["name","detail"]]]],["stat",["call",["name","make"],[["call",["name","midpoint"],[["name","v1"],["name","v3"]]],["call",["name","midpoint"],[["name","v2"],["name","v3"]]],["name","v3"],["name","detail"]]]],["stat",["call",["name","make"],[["call",["name","midpoint"],[["name","v1"],["name","v2"]]],["call",["name","midpoint"],[["name","v2"],["name","v3"]]],["call",["name","midpoint"],[["name","v1"],["name","v3"]]],["name","detail"]]]]]]]]],["defun","midpoint",["v1","v2"],[["if",["unary-prefix","!",["sub",["name","midpoints"],["dot",["name","v1"],"index"]]],["stat",["assign",true,["sub",["name","midpoints"],["dot",["name","v1"],"index"]],["array",[]]]],null],["if",["unary-prefix","!",["sub",["name","midpoints"],["dot",["name","v2"],"index"]]],["stat",["assign",true,["sub",["name","midpoints"],["dot",["name","v2"],"index"]],["array",[]]]],null],["var",[["mid",["sub",["sub",["name","midpoints"],["dot",["name","v1"],"index"]],["dot",["name","v2"],"index"]]]]],["if",["binary","===",["name","mid"],["name","undefined"]],["block",[["stat",["assign",true,["sub",["sub",["name","midpoints"],["dot",["name","v1"],"index"]],["dot",["name","v2"],"index"]],["assign",true,["sub",["sub",["name","midpoints"],["dot",["name","v2"],"index"]],["dot",["name","v1"],"index"]],["assign",true,["name","mid"],["call",["name","prepare"],[["call",["dot",["call",["dot",["new",["dot",["name","THREE"],"Vector3"],[]],"add"],[["name","v1"],["name","v2"]]],"divideScalar"],[["num",2]]]]]]]]]]],null],["return",["name","mid"]]]],["defun","azimuth",["vector"],[["return",["call",["dot",["name","Math"],"atan2"],[["dot",["name","vector"],"z"],["unary-prefix","-",["dot",["name","vector"],"x"]]]]]]],["defun","inclination",["vector"],[["return",["call",["dot",["name","Math"],"atan2"],[["unary-prefix","-",["dot",["name","vector"],"y"]],["call",["dot",["name","Math"],"sqrt"],[["binary","+",["binary","*",["dot",["name","vector"],"x"],["dot",["name","vector"],"x"]],["binary","*",["dot",["name","vector"],"z"],["dot",["name","vector"],"z"]]]]]]]]]],["defun","correctUV",["uv","vector","azimuth"],[["if",["binary","&&",["binary","<",["name","azimuth"],["num",0]],["binary","===",["dot",["name","uv"],"u"],["num",1]]],["stat",["assign",true,["name","uv"],["new",["dot",["name","THREE"],"UV"],[["binary","-",["dot",["name","uv"],"u"],["num",1]],["dot",["name","uv"],"v"]]]]],null],["if",["binary","&&",["binary","===",["dot",["name","vector"],"x"],["num",0]],["binary","===",["dot",["name","vector"],"z"],["num",0]]],["stat",["assign",true,["name","uv"],["new",["dot",["name","THREE"],"UV"],[["binary","+",["binary","/",["binary","/",["name","azimuth"],["num",2]],["dot",["name","Math"],"PI"]],["num",0.5]],["dot",["name","uv"],"v"]]]]],null],["return",["name","uv"]]]],["stat",["call",["dot",["name","this"],"computeCentroids"],[]]],["stat",["assign",true,["dot",["name","this"],"boundingSphere"],["object",[["radius",["name","radius"]]]]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"PolyhedronGeometry"],"prototype"],["new",["dot",["name","THREE"],"Geometry"],[]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"PolyhedronGeometry"],"prototype"],"constructor"],["dot",["name","THREE"],"PolyhedronGeometry"]]],["stat",["assign",true,["dot",["name","THREE"],"IcosahedronGeometry"],["function",null,["radius","detail"],[["var",[["t",["binary","/",["binary","+",["num",1],["call",["dot",["name","Math"],"sqrt"],[["num",5]]]],["num",2]]]]],["var",[["vertices",["array",[["array",[["unary-prefix","-",["num",1]],["name","t"],["num",0]]],["array",[["num",1],["name","t"],["num",0]]],["array",[["unary-prefix","-",["num",1]],["unary-prefix","-",["name","t"]],["num",0]]],["array",[["num",1],["unary-prefix","-",["name","t"]],["num",0]]],["array",[["num",0],["unary-prefix","-",["num",1]],["name","t"]]],["array",[["num",0],["num",1],["name","t"]]],["array",[["num",0],["unary-prefix","-",["num",1]],["unary-prefix","-",["name","t"]]]],["array",[["num",0],["num",1],["unary-prefix","-",["name","t"]]]],["array",[["name","t"],["num",0],["unary-prefix","-",["num",1]]]],["array",[["name","t"],["num",0],["num",1]]],["array",[["unary-prefix","-",["name","t"]],["num",0],["unary-prefix","-",["num",1]]]],["array",[["unary-prefix","-",["name","t"]],["num",0],["num",1]]]]]]]],["var",[["faces",["array",[["array",[["num",0],["num",11],["num",5]]],["array",[["num",0],["num",5],["num",1]]],["array",[["num",0],["num",1],["num",7]]],["array",[["num",0],["num",7],["num",10]]],["array",[["num",0],["num",10],["num",11]]],["array",[["num",1],["num",5],["num",9]]],["array",[["num",5],["num",11],["num",4]]],["array",[["num",11],["num",10],["num",2]]],["array",[["num",10],["num",7],["num",6]]],["array",[["num",7],["num",1],["num",8]]],["array",[["num",3],["num",9],["num",4]]],["array",[["num",3],["num",4],["num",2]]],["array",[["num",3],["num",2],["num",6]]],["array",[["num",3],["num",6],["num",8]]],["array",[["num",3],["num",8],["num",9]]],["array",[["num",4],["num",9],["num",5]]],["array",[["num",2],["num",4],["num",11]]],["array",[["num",6],["num",2],["num",10]]],["array",[["num",8],["num",6],["num",7]]],["array",[["num",9],["num",8],["num",1]]]]]]]],["stat",["call",["dot",["dot",["name","THREE"],"PolyhedronGeometry"],"call"],[["name","this"],["name","vertices"],["name","faces"],["name","radius"],["name","detail"]]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"IcosahedronGeometry"],"prototype"],["new",["dot",["name","THREE"],"Geometry"],[]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"IcosahedronGeometry"],"prototype"],"constructor"],["dot",["name","THREE"],"IcosahedronGeometry"]]],["stat",["assign",true,["dot",["name","THREE"],"OctahedronGeometry"],["function",null,["radius","detail"],[["var",[["vertices",["array",[["array",[["num",1],["num",0],["num",0]]],["array",[["unary-prefix","-",["num",1]],["num",0],["num",0]]],["array",[["num",0],["num",1],["num",0]]],["array",[["num",0],["unary-prefix","-",["num",1]],["num",0]]],["array",[["num",0],["num",0],["num",1]]],["array",[["num",0],["num",0],["unary-prefix","-",["num",1]]]]]]]]],["var",[["faces",["array",[["array",[["num",0],["num",2],["num",4]]],["array",[["num",0],["num",4],["num",3]]],["array",[["num",0],["num",3],["num",5]]],["array",[["num",0],["num",5],["num",2]]],["array",[["num",1],["num",2],["num",5]]],["array",[["num",1],["num",5],["num",3]]],["array",[["num",1],["num",3],["num",4]]],["array",[["num",1],["num",4],["num",2]]]]]]]],["stat",["call",["dot",["dot",["name","THREE"],"PolyhedronGeometry"],"call"],[["name","this"],["name","vertices"],["name","faces"],["name","radius"],["name","detail"]]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"OctahedronGeometry"],"prototype"],["new",["dot",["name","THREE"],"Geometry"],[]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"OctahedronGeometry"],"prototype"],"constructor"],["dot",["name","THREE"],"OctahedronGeometry"]]],["stat",["assign",true,["dot",["name","THREE"],"TetrahedronGeometry"],["function",null,["radius","detail"],[["var",[["vertices",["array",[["array",[["num",1],["num",1],["num",1]]],["array",[["unary-prefix","-",["num",1]],["unary-prefix","-",["num",1]],["num",1]]],["array",[["unary-prefix","-",["num",1]],["num",1],["unary-prefix","-",["num",1]]]],["array",[["num",1],["unary-prefix","-",["num",1]],["unary-prefix","-",["num",1]]]]]]]]],["var",[["faces",["array",[["array",[["num",2],["num",1],["num",0]]],["array",[["num",0],["num",3],["num",2]]],["array",[["num",1],["num",3],["num",0]]],["array",[["num",2],["num",3],["num",1]]]]]]]],["stat",["call",["dot",["dot",["name","THREE"],"PolyhedronGeometry"],"call"],[["name","this"],["name","vertices"],["name","faces"],["name","radius"],["name","detail"]]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"TetrahedronGeometry"],"prototype"],["new",["dot",["name","THREE"],"Geometry"],[]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"TetrahedronGeometry"],"prototype"],"constructor"],["dot",["name","THREE"],"TetrahedronGeometry"]]],["stat",["assign",true,["dot",["name","THREE"],"ParametricGeometry"],["function",null,["func","slices","stacks","useTris"],[["stat",["call",["dot",["dot",["name","THREE"],"Geometry"],"call"],[["name","this"]]]],["var",[["verts",["dot",["name","this"],"vertices"]]]],["var",[["faces",["dot",["name","this"],"faces"]]]],["var",[["uvs",["sub",["dot",["name","this"],"faceVertexUvs"],["num",0]]]]],["stat",["assign",true,["name","useTris"],["conditional",["binary","===",["name","useTris"],["name","undefined"]],["name","false"],["name","useTris"]]]],["var",[["i"],["il"],["j"],["p"]]],["var",[["u"],["v"]]],["var",[["stackCount",["binary","+",["name","stacks"],["num",1]]]]],["var",[["sliceCount",["binary","+",["name","slices"],["num",1]]]]],["for",["assign",true,["name","i"],["num",0]],["binary","<=",["name","i"],["name","stacks"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","v"],["binary","/",["name","i"],["name","stacks"]]]],["for",["assign",true,["name","j"],["num",0]],["binary","<=",["name","j"],["name","slices"]],["unary-postfix","++",["name","j"]],["block",[["stat",["assign",true,["name","u"],["binary","/",["name","j"],["name","slices"]]]],["stat",["assign",true,["name","p"],["call",["name","func"],[["name","u"],["name","v"]]]]],["stat",["call",["dot",["name","verts"],"push"],[["name","p"]]]]]]]]]],["var",[["a"],["b"],["c"],["d"]]],["var",[["uva"],["uvb"],["uvc"],["uvd"]]],["for",["assign",true,["name","i"],["num",0]],["binary","<",["name","i"],["name","stacks"]],["unary-postfix","++",["name","i"]],["block",[["for",["assign",true,["name","j"],["num",0]],["binary","<",["name","j"],["name","slices"]],["unary-postfix","++",["name","j"]],["block",[["stat",["assign",true,["name","a"],["binary","+",["binary","*",["name","i"],["name","sliceCount"]],["name","j"]]]],["stat",["assign",true,["name","b"],["binary","+",["binary","+",["binary","*",["name","i"],["name","sliceCount"]],["name","j"]],["num",1]]]],["stat",["assign",true,["name","c"],["binary","+",["binary","*",["binary","+",["name","i"],["num",1]],["name","sliceCount"]],["name","j"]]]],["stat",["assign",true,["name","d"],["binary","+",["binary","+",["binary","*",["binary","+",["name","i"],["num",1]],["name","sliceCount"]],["name","j"]],["num",1]]]],["stat",["assign",true,["name","uva"],["new",["dot",["name","THREE"],"UV"],[["binary","/",["name","i"],["name","slices"]],["binary","/",["name","j"],["name","stacks"]]]]]],["stat",["assign",true,["name","uvb"],["new",["dot",["name","THREE"],"UV"],[["binary","/",["name","i"],["name","slices"]],["binary","/",["binary","+",["name","j"],["num",1]],["name","stacks"]]]]]],["stat",["assign",true,["name","uvc"],["new",["dot",["name","THREE"],"UV"],[["binary","/",["binary","+",["name","i"],["num",1]],["name","slices"]],["binary","/",["name","j"],["name","stacks"]]]]]],["stat",["assign",true,["name","uvd"],["new",["dot",["name","THREE"],"UV"],[["binary","/",["binary","+",["name","i"],["num",1]],["name","slices"]],["binary","/",["binary","+",["name","j"],["num",1]],["name","stacks"]]]]]],["if",["name","useTris"],["block",[["stat",["call",["dot",["name","faces"],"push"],[["new",["dot",["name","THREE"],"Face3"],[["name","a"],["name","b"],["name","c"]]]]]],["stat",["call",["dot",["name","faces"],"push"],[["new",["dot",["name","THREE"],"Face3"],[["name","b"],["name","d"],["name","c"]]]]]],["stat",["call",["dot",["name","uvs"],"push"],[["array",[["name","uva"],["name","uvb"],["name","uvc"]]]]]],["stat",["call",["dot",["name","uvs"],"push"],[["array",[["name","uvb"],["name","uvd"],["name","uvc"]]]]]]]],["block",[["stat",["call",["dot",["name","faces"],"push"],[["new",["dot",["name","THREE"],"Face4"],[["name","a"],["name","b"],["name","d"],["name","c"]]]]]],["stat",["call",["dot",["name","uvs"],"push"],[["array",[["name","uva"],["name","uvb"],["name","uvc"],["name","uvd"]]]]]]]]]]]]]]],["stat",["call",["dot",["name","this"],"computeCentroids"],[]]],["stat",["call",["dot",["name","this"],"computeFaceNormals"],[]]],["stat",["call",["dot",["name","this"],"computeVertexNormals"],[]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"ParametricGeometry"],"prototype"],["new",["dot",["name","THREE"],"Geometry"],[]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"ParametricGeometry"],"prototype"],"constructor"],["dot",["name","THREE"],"ParametricGeometry"]]],["stat",["assign",true,["dot",["name","THREE"],"AxisHelper"],["function",null,[],[["stat",["call",["dot",["dot",["name","THREE"],"Object3D"],"call"],[["name","this"]]]],["var",[["lineGeometry",["new",["dot",["name","THREE"],"Geometry"],[]]]]],["stat",["call",["dot",["dot",["name","lineGeometry"],"vertices"],"push"],[["new",["dot",["name","THREE"],"Vector3"],[]]]]],["stat",["call",["dot",["dot",["name","lineGeometry"],"vertices"],"push"],[["new",["dot",["name","THREE"],"Vector3"],[["num",0],["num",100],["num",0]]]]]],["var",[["coneGeometry",["new",["dot",["name","THREE"],"CylinderGeometry"],[["num",0],["num",5],["num",25],["num",5],["num",1]]]]]],["var",[["line"],["cone"]]],["stat",["assign",true,["name","line"],["new",["dot",["name","THREE"],"Line"],[["name","lineGeometry"],["new",["dot",["name","THREE"],"LineBasicMaterial"],[["object",[["color",["num",16711680]]]]]]]]]],["stat",["assign",true,["dot",["dot",["name","line"],"rotation"],"z"],["binary","/",["unary-prefix","-",["dot",["name","Math"],"PI"]],["num",2]]]],["stat",["call",["dot",["name","this"],"add"],[["name","line"]]]],["stat",["assign",true,["name","cone"],["new",["dot",["name","THREE"],"Mesh"],[["name","coneGeometry"],["new",["dot",["name","THREE"],"MeshBasicMaterial"],[["object",[["color",["num",16711680]]]]]]]]]],["stat",["assign",true,["dot",["dot",["name","cone"],"position"],"x"],["num",100]]],["stat",["assign",true,["dot",["dot",["name","cone"],"rotation"],"z"],["binary","/",["unary-prefix","-",["dot",["name","Math"],"PI"]],["num",2]]]],["stat",["call",["dot",["name","this"],"add"],[["name","cone"]]]],["stat",["assign",true,["name","line"],["new",["dot",["name","THREE"],"Line"],[["name","lineGeometry"],["new",["dot",["name","THREE"],"LineBasicMaterial"],[["object",[["color",["num",65280]]]]]]]]]],["stat",["call",["dot",["name","this"],"add"],[["name","line"]]]],["stat",["assign",true,["name","cone"],["new",["dot",["name","THREE"],"Mesh"],[["name","coneGeometry"],["new",["dot",["name","THREE"],"MeshBasicMaterial"],[["object",[["color",["num",65280]]]]]]]]]],["stat",["assign",true,["dot",["dot",["name","cone"],"position"],"y"],["num",100]]],["stat",["call",["dot",["name","this"],"add"],[["name","cone"]]]],["stat",["assign",true,["name","line"],["new",["dot",["name","THREE"],"Line"],[["name","lineGeometry"],["new",["dot",["name","THREE"],"LineBasicMaterial"],[["object",[["color",["num",255]]]]]]]]]],["stat",["assign",true,["dot",["dot",["name","line"],"rotation"],"x"],["binary","/",["dot",["name","Math"],"PI"],["num",2]]]],["stat",["call",["dot",["name","this"],"add"],[["name","line"]]]],["stat",["assign",true,["name","cone"],["new",["dot",["name","THREE"],"Mesh"],[["name","coneGeometry"],["new",["dot",["name","THREE"],"MeshBasicMaterial"],[["object",[["color",["num",255]]]]]]]]]],["stat",["assign",true,["dot",["dot",["name","cone"],"position"],"z"],["num",100]]],["stat",["assign",true,["dot",["dot",["name","cone"],"rotation"],"x"],["binary","/",["dot",["name","Math"],"PI"],["num",2]]]],["stat",["call",["dot",["name","this"],"add"],[["name","cone"]]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"AxisHelper"],"prototype"],["new",["dot",["name","THREE"],"Object3D"],[]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"AxisHelper"],"prototype"],"constructor"],["dot",["name","THREE"],"AxisHelper"]]],["stat",["assign",true,["dot",["name","THREE"],"ArrowHelper"],["function",null,["dir","origin","length","hex"],[["stat",["call",["dot",["dot",["name","THREE"],"Object3D"],"call"],[["name","this"]]]],["if",["binary","===",["name","hex"],["name","undefined"]],["stat",["assign",true,["name","hex"],["num",16776960]]],null],["if",["binary","===",["name","length"],["name","undefined"]],["stat",["assign",true,["name","length"],["num",20]]],null],["var",[["lineGeometry",["new",["dot",["name","THREE"],"Geometry"],[]]]]],["stat",["call",["dot",["dot",["name","lineGeometry"],"vertices"],"push"],[["new",["dot",["name","THREE"],"Vector3"],[["num",0],["num",0],["num",0]]]]]],["stat",["call",["dot",["dot",["name","lineGeometry"],"vertices"],"push"],[["new",["dot",["name","THREE"],"Vector3"],[["num",0],["num",1],["num",0]]]]]],["stat",["assign",true,["dot",["name","this"],"line"],["new",["dot",["name","THREE"],"Line"],[["name","lineGeometry"],["new",["dot",["name","THREE"],"LineBasicMaterial"],[["object",[["color",["name","hex"]]]]]]]]]],["stat",["call",["dot",["name","this"],"add"],[["dot",["name","this"],"line"]]]],["var",[["coneGeometry",["new",["dot",["name","THREE"],"CylinderGeometry"],[["num",0],["num",0.05],["num",0.25],["num",5],["num",1]]]]]],["stat",["assign",true,["dot",["name","this"],"cone"],["new",["dot",["name","THREE"],"Mesh"],[["name","coneGeometry"],["new",["dot",["name","THREE"],"MeshBasicMaterial"],[["object",[["color",["name","hex"]]]]]]]]]],["stat",["call",["dot",["dot",["dot",["name","this"],"cone"],"position"],"set"],[["num",0],["num",1],["num",0]]]],["stat",["call",["dot",["name","this"],"add"],[["dot",["name","this"],"cone"]]]],["if",["binary","instanceof",["name","origin"],["dot",["name","THREE"],"Vector3"]],["stat",["assign",true,["dot",["name","this"],"position"],["name","origin"]]],null],["stat",["call",["dot",["name","this"],"setDirection"],[["name","dir"]]]],["stat",["call",["dot",["name","this"],"setLength"],[["name","length"]]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"ArrowHelper"],"prototype"],["new",["dot",["name","THREE"],"Object3D"],[]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"ArrowHelper"],"prototype"],"constructor"],["dot",["name","THREE"],"ArrowHelper"]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"ArrowHelper"],"prototype"],"setDirection"],["function",null,["dir"],[["var",[["axis",["call",["dot",["new",["dot",["name","THREE"],"Vector3"],[["num",0],["num",1],["num",0]]],"crossSelf"],[["name","dir"]]]]]],["var",[["radians",["call",["dot",["name","Math"],"acos"],[["call",["dot",["new",["dot",["name","THREE"],"Vector3"],[["num",0],["num",1],["num",0]]],"dot"],[["call",["dot",["call",["dot",["name","dir"],"clone"],[]],"normalize"],[]]]]]]]]],["stat",["assign",true,["dot",["name","this"],"matrix"],["call",["dot",["new",["dot",["name","THREE"],"Matrix4"],[]],"makeRotationAxis"],[["call",["dot",["name","axis"],"normalize"],[]],["name","radians"]]]]],["stat",["call",["dot",["dot",["name","this"],"rotation"],"getRotationFromMatrix"],[["dot",["name","this"],"matrix"],["dot",["name","this"],"scale"]]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"ArrowHelper"],"prototype"],"setLength"],["function",null,["length"],[["stat",["call",["dot",["dot",["name","this"],"scale"],"set"],[["name","length"],["name","length"],["name","length"]]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"ArrowHelper"],"prototype"],"setColor"],["function",null,["hex"],[["stat",["call",["dot",["dot",["dot",["dot",["name","this"],"line"],"material"],"color"],"setHex"],[["name","hex"]]]],["stat",["call",["dot",["dot",["dot",["dot",["name","this"],"cone"],"material"],"color"],"setHex"],[["name","hex"]]]]]]]],["stat",["assign",true,["dot",["name","THREE"],"CameraHelper"],["function",null,["camera"],[["stat",["call",["dot",["dot",["name","THREE"],"Object3D"],"call"],[["name","this"]]]],["var",[["_this",["name","this"]]]],["stat",["assign",true,["dot",["name","this"],"lineGeometry"],["new",["dot",["name","THREE"],"Geometry"],[]]]],["stat",["assign",true,["dot",["name","this"],"lineMaterial"],["new",["dot",["name","THREE"],"LineBasicMaterial"],[["object",[["color",["num",16777215]],["vertexColors",["dot",["name","THREE"],"FaceColors"]]]]]]]],["stat",["assign",true,["dot",["name","this"],"pointMap"],["object",[]]]],["var",[["hexFrustum",["num",16755200]],["hexCone",["num",16711680]],["hexUp",["num",43775]],["hexTarget",["num",16777215]],["hexCross",["num",3355443]]]],["stat",["call",["name","addLine"],[["string","n1"],["string","n2"],["name","hexFrustum"]]]],["stat",["call",["name","addLine"],[["string","n2"],["string","n4"],["name","hexFrustum"]]]],["stat",["call",["name","addLine"],[["string","n4"],["string","n3"],["name","hexFrustum"]]]],["stat",["call",["name","addLine"],[["string","n3"],["string","n1"],["name","hexFrustum"]]]],["stat",["call",["name","addLine"],[["string","f1"],["string","f2"],["name","hexFrustum"]]]],["stat",["call",["name","addLine"],[["string","f2"],["string","f4"],["name","hexFrustum"]]]],["stat",["call",["name","addLine"],[["string","f4"],["string","f3"],["name","hexFrustum"]]]],["stat",["call",["name","addLine"],[["string","f3"],["string","f1"],["name","hexFrustum"]]]],["stat",["call",["name","addLine"],[["string","n1"],["string","f1"],["name","hexFrustum"]]]],["stat",["call",["name","addLine"],[["string","n2"],["string","f2"],["name","hexFrustum"]]]],["stat",["call",["name","addLine"],[["string","n3"],["string","f3"],["name","hexFrustum"]]]],["stat",["call",["name","addLine"],[["string","n4"],["string","f4"],["name","hexFrustum"]]]],["stat",["call",["name","addLine"],[["string","p"],["string","n1"],["name","hexCone"]]]],["stat",["call",["name","addLine"],[["string","p"],["string","n2"],["name","hexCone"]]]],["stat",["call",["name","addLine"],[["string","p"],["string","n3"],["name","hexCone"]]]],["stat",["call",["name","addLine"],[["string","p"],["string","n4"],["name","hexCone"]]]],["stat",["call",["name","addLine"],[["string","u1"],["string","u2"],["name","hexUp"]]]],["stat",["call",["name","addLine"],[["string","u2"],["string","u3"],["name","hexUp"]]]],["stat",["call",["name","addLine"],[["string","u3"],["string","u1"],["name","hexUp"]]]],["stat",["call",["name","addLine"],[["string","c"],["string","t"],["name","hexTarget"]]]],["stat",["call",["name","addLine"],[["string","p"],["string","c"],["name","hexCross"]]]],["stat",["call",["name","addLine"],[["string","cn1"],["string","cn2"],["name","hexCross"]]]],["stat",["call",["name","addLine"],[["string","cn3"],["string","cn4"],["name","hexCross"]]]],["stat",["call",["name","addLine"],[["string","cf1"],["string","cf2"],["name","hexCross"]]]],["stat",["call",["name","addLine"],[["string","cf3"],["string","cf4"],["name","hexCross"]]]],["stat",["assign",true,["dot",["name","this"],"camera"],["name","camera"]]],["defun","addLine",["a","b","hex"],[["stat",["call",["name","addPoint"],[["name","a"],["name","hex"]]]],["stat",["call",["name","addPoint"],[["name","b"],["name","hex"]]]]]],["defun","addPoint",["id","hex"],[["stat",["call",["dot",["dot",["dot",["name","_this"],"lineGeometry"],"vertices"],"push"],[["new",["dot",["name","THREE"],"Vector3"],[]]]]],["stat",["call",["dot",["dot",["dot",["name","_this"],"lineGeometry"],"colors"],"push"],[["new",["dot",["name","THREE"],"Color"],[["name","hex"]]]]]],["if",["binary","===",["sub",["dot",["name","_this"],"pointMap"],["name","id"]],["name","undefined"]],["stat",["assign",true,["sub",["dot",["name","_this"],"pointMap"],["name","id"]],["array",[]]]],null],["stat",["call",["dot",["sub",["dot",["name","_this"],"pointMap"],["name","id"]],"push"],[["binary","-",["dot",["dot",["dot",["name","_this"],"lineGeometry"],"vertices"],"length"],["num",1]]]]]]],["stat",["call",["dot",["name","this"],"update"],[["name","camera"]]]],["stat",["assign",true,["dot",["name","this"],"lines"],["new",["dot",["name","THREE"],"Line"],[["dot",["name","this"],"lineGeometry"],["dot",["name","this"],"lineMaterial"],["dot",["name","THREE"],"LinePieces"]]]]],["stat",["call",["dot",["name","this"],"add"],[["dot",["name","this"],"lines"]]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"CameraHelper"],"prototype"],["new",["dot",["name","THREE"],"Object3D"],[]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"CameraHelper"],"prototype"],"constructor"],["dot",["name","THREE"],"CameraHelper"]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"CameraHelper"],"prototype"],"update"],["function",null,[],[["var",[["camera",["dot",["name","this"],"camera"]]]],["var",[["w",["num",1]]]],["var",[["h",["num",1]]]],["var",[["_this",["name","this"]]]],["stat",["call",["dot",["dot",["dot",["dot",["name","THREE"],"CameraHelper"],"__c"],"projectionMatrix"],"copy"],[["dot",["name","camera"],"projectionMatrix"]]]],["stat",["call",["name","setPoint"],[["string","c"],["num",0],["num",0],["unary-prefix","-",["num",1]]]]],["stat",["call",["name","setPoint"],[["string","t"],["num",0],["num",0],["num",1]]]],["stat",["call",["name","setPoint"],[["string","n1"],["unary-prefix","-",["name","w"]],["unary-prefix","-",["name","h"]],["unary-prefix","-",["num",1]]]]],["stat",["call",["name","setPoint"],[["string","n2"],["name","w"],["unary-prefix","-",["name","h"]],["unary-prefix","-",["num",1]]]]],["stat",["call",["name","setPoint"],[["string","n3"],["unary-prefix","-",["name","w"]],["name","h"],["unary-prefix","-",["num",1]]]]],["stat",["call",["name","setPoint"],[["string","n4"],["name","w"],["name","h"],["unary-prefix","-",["num",1]]]]],["stat",["call",["name","setPoint"],[["string","f1"],["unary-prefix","-",["name","w"]],["unary-prefix","-",["name","h"]],["num",1]]]],["stat",["call",["name","setPoint"],[["string","f2"],["name","w"],["unary-prefix","-",["name","h"]],["num",1]]]],["stat",["call",["name","setPoint"],[["string","f3"],["unary-prefix","-",["name","w"]],["name","h"],["num",1]]]],["stat",["call",["name","setPoint"],[["string","f4"],["name","w"],["name","h"],["num",1]]]],["stat",["call",["name","setPoint"],[["string","u1"],["binary","*",["name","w"],["num",0.7]],["binary","*",["name","h"],["num",1.1]],["unary-prefix","-",["num",1]]]]],["stat",["call",["name","setPoint"],[["string","u2"],["binary","*",["unary-prefix","-",["name","w"]],["num",0.7]],["binary","*",["name","h"],["num",1.1]],["unary-prefix","-",["num",1]]]]],["stat",["call",["name","setPoint"],[["string","u3"],["num",0],["binary","*",["name","h"],["num",2]],["unary-prefix","-",["num",1]]]]],["stat",["call",["name","setPoint"],[["string","cf1"],["unary-prefix","-",["name","w"]],["num",0],["num",1]]]],["stat",["call",["name","setPoint"],[["string","cf2"],["name","w"],["num",0],["num",1]]]],["stat",["call",["name","setPoint"],[["string","cf3"],["num",0],["unary-prefix","-",["name","h"]],["num",1]]]],["stat",["call",["name","setPoint"],[["string","cf4"],["num",0],["name","h"],["num",1]]]],["stat",["call",["name","setPoint"],[["string","cn1"],["unary-prefix","-",["name","w"]],["num",0],["unary-prefix","-",["num",1]]]]],["stat",["call",["name","setPoint"],[["string","cn2"],["name","w"],["num",0],["unary-prefix","-",["num",1]]]]],["stat",["call",["name","setPoint"],[["string","cn3"],["num",0],["unary-prefix","-",["name","h"]],["unary-prefix","-",["num",1]]]]],["stat",["call",["name","setPoint"],[["string","cn4"],["num",0],["name","h"],["unary-prefix","-",["num",1]]]]],["defun","setPoint",["point","x","y","z"],[["stat",["call",["dot",["dot",["dot",["name","THREE"],"CameraHelper"],"__v"],"set"],[["name","x"],["name","y"],["name","z"]]]],["stat",["call",["dot",["dot",["dot",["name","THREE"],"CameraHelper"],"__projector"],"unprojectVector"],[["dot",["dot",["name","THREE"],"CameraHelper"],"__v"],["dot",["dot",["name","THREE"],"CameraHelper"],"__c"]]]],["var",[["points",["sub",["dot",["name","_this"],"pointMap"],["name","point"]]]]],["if",["binary","!==",["name","points"],["name","undefined"]],["block",[["for",["var",[["i",["num",0]],["il",["dot",["name","points"],"length"]]]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["block",[["var",[["j",["sub",["name","points"],["name","i"]]]]],["stat",["call",["dot",["sub",["dot",["dot",["name","_this"],"lineGeometry"],"vertices"],["name","j"]],"copy"],[["dot",["dot",["name","THREE"],"CameraHelper"],"__v"]]]]]]]]],null]]],["stat",["assign",true,["dot",["dot",["name","this"],"lineGeometry"],"verticesNeedUpdate"],["name","true"]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"CameraHelper"],"__projector"],["new",["dot",["name","THREE"],"Projector"],[]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"CameraHelper"],"__v"],["new",["dot",["name","THREE"],"Vector3"],[]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"CameraHelper"],"__c"],["new",["dot",["name","THREE"],"Camera"],[]]]],["stat",["assign",true,["dot",["name","THREE"],"SubdivisionModifier"],["function",null,["subdivisions"],[["stat",["assign",true,["dot",["name","this"],"subdivisions"],["conditional",["binary","===",["name","subdivisions"],["name","undefined"]],["num",1],["name","subdivisions"]]]],["stat",["assign",true,["dot",["name","this"],"useOldVertexColors"],["name","false"]]],["stat",["assign",true,["dot",["name","this"],"supportUVs"],["name","true"]]],["stat",["assign",true,["dot",["name","this"],"debug"],["name","false"]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"SubdivisionModifier"],"prototype"],"constructor"],["dot",["name","THREE"],"SubdivisionModifier"]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"SubdivisionModifier"],"prototype"],"modify"],["function",null,["geometry"],[["var",[["repeats",["dot",["name","this"],"subdivisions"]]]],["while",["binary",">",["unary-postfix","--",["name","repeats"]],["num",0]],["block",[["stat",["call",["dot",["name","this"],"smooth"],[["name","geometry"]]]]]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"SubdivisionModifier"],"prototype"],"smooth"],["function",null,["oldGeometry"],[["var",[["newVertices",["array",[]]],["newFaces",["array",[]]],["newUVs",["array",[]]]]],["defun","v",["x","y","z"],[["stat",["call",["dot",["name","newVertices"],"push"],[["new",["dot",["name","THREE"],"Vector3"],[["name","x"],["name","y"],["name","z"]]]]]]]],["var",[["scope",["name","this"]]]],["defun","debug",[],[["if",["dot",["name","scope"],"debug"],["stat",["call",["dot",["dot",["name","console"],"log"],"apply"],[["name","console"],["name","arguments"]]]],null]]],["defun","warn",[],[["if",["name","console"],["stat",["call",["dot",["dot",["name","console"],"log"],"apply"],[["name","console"],["name","arguments"]]]],null]]],["defun","f4",["a","b","c","d","oldFace","orders","facei"],[["var",[["newFace",["new",["dot",["name","THREE"],"Face4"],[["name","a"],["name","b"],["name","c"],["name","d"],["name","null"],["dot",["name","oldFace"],"color"],["dot",["name","oldFace"],"material"]]]]]],["if",["dot",["name","scope"],"useOldVertexColors"],["block",[["stat",["assign",true,["dot",["name","newFace"],"vertexColors"],["array",[]]]],["var",[["color"],["tmpColor"],["order"]]],["for",["var",[["i",["num",0]]]],["binary","<",["name","i"],["num",4]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","order"],["sub",["name","orders"],["name","i"]]]],["stat",["seq",["assign",true,["name","color"],["new",["dot",["name","THREE"],"Color"],[]]],["call",["dot",["name","color"],"setRGB"],[["num",0],["num",0],["num",0]]]]],["for",["var",[["j",["num",0]],["jl",["num",0]]]],["binary","<",["name","j"],["dot",["name","order"],"length"]],["unary-postfix","++",["name","j"]],["block",[["stat",["assign",true,["name","tmpColor"],["sub",["dot",["name","oldFace"],"vertexColors"],["binary","-",["sub",["name","order"],["name","j"]],["num",1]]]]],["stat",["assign","+",["dot",["name","color"],"r"],["dot",["name","tmpColor"],"r"]]],["stat",["assign","+",["dot",["name","color"],"g"],["dot",["name","tmpColor"],"g"]]],["stat",["assign","+",["dot",["name","color"],"b"],["dot",["name","tmpColor"],"b"]]]]]],["stat",["assign","/",["dot",["name","color"],"r"],["dot",["name","order"],"length"]]],["stat",["assign","/",["dot",["name","color"],"g"],["dot",["name","order"],"length"]]],["stat",["assign","/",["dot",["name","color"],"b"],["dot",["name","order"],"length"]]],["stat",["assign",true,["sub",["dot",["name","newFace"],"vertexColors"],["name","i"]],["name","color"]]]]]]]],null],["stat",["call",["dot",["name","newFaces"],"push"],[["name","newFace"]]]],["if",["dot",["name","scope"],"supportUVs"],["block",[["var",[["aUv",["array",[["call",["name","getUV"],[["name","a"],["string",""]]],["call",["name","getUV"],[["name","b"],["name","facei"]]],["call",["name","getUV"],[["name","c"],["name","facei"]]],["call",["name","getUV"],[["name","d"],["name","facei"]]]]]]]],["if",["unary-prefix","!",["sub",["name","aUv"],["num",0]]],["stat",["call",["name","debug"],[["string","a :( "],["binary","+",["binary","+",["name","a"],["string",":"]],["name","facei"]]]]],["if",["unary-prefix","!",["sub",["name","aUv"],["num",1]]],["stat",["call",["name","debug"],[["string","b :( "],["binary","+",["binary","+",["name","b"],["string",":"]],["name","facei"]]]]],["if",["unary-prefix","!",["sub",["name","aUv"],["num",2]]],["stat",["call",["name","debug"],[["string","c :( "],["binary","+",["binary","+",["name","c"],["string",":"]],["name","facei"]]]]],["if",["unary-prefix","!",["sub",["name","aUv"],["num",3]]],["stat",["call",["name","debug"],[["string","d :( "],["binary","+",["binary","+",["name","d"],["string",":"]],["name","facei"]]]]],["stat",["call",["dot",["name","newUVs"],"push"],[["name","aUv"]]]]]]]]]],null]]],["defun","edge_hash",["a","b"],[["return",["binary","+",["binary","+",["call",["dot",["name","Math"],"min"],[["name","a"],["name","b"]]],["string","_"]],["call",["dot",["name","Math"],"max"],[["name","a"],["name","b"]]]]]]],["defun","computeEdgeFaces",["geometry"],[["var",[["i"],["il"],["v1"],["v2"],["j"],["k"],["face"],["faceIndices"],["faceIndex"],["edge"],["hash"],["edgeFaceMap",["object",[]]]]],["defun","mapEdgeHash",["hash","i"],[["if",["binary","===",["sub",["name","edgeFaceMap"],["name","hash"]],["name","undefined"]],["block",[["stat",["assign",true,["sub",["name","edgeFaceMap"],["name","hash"]],["array",[]]]]]],null],["stat",["call",["dot",["sub",["name","edgeFaceMap"],["name","hash"]],"push"],[["name","i"]]]]]],["for",["seq",["assign",true,["name","i"],["num",0]],["assign",true,["name","il"],["dot",["dot",["name","geometry"],"faces"],"length"]]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","face"],["sub",["dot",["name","geometry"],"faces"],["name","i"]]]],["if",["binary","instanceof",["name","face"],["dot",["name","THREE"],"Face3"]],["block",[["stat",["assign",true,["name","hash"],["call",["name","edge_hash"],[["dot",["name","face"],"a"],["dot",["name","face"],"b"]]]]],["stat",["call",["name","mapEdgeHash"],[["name","hash"],["name","i"]]]],["stat",["assign",true,["name","hash"],["call",["name","edge_hash"],[["dot",["name","face"],"b"],["dot",["name","face"],"c"]]]]],["stat",["call",["name","mapEdgeHash"],[["name","hash"],["name","i"]]]],["stat",["assign",true,["name","hash"],["call",["name","edge_hash"],[["dot",["name","face"],"c"],["dot",["name","face"],"a"]]]]],["stat",["call",["name","mapEdgeHash"],[["name","hash"],["name","i"]]]]]],["if",["binary","instanceof",["name","face"],["dot",["name","THREE"],"Face4"]],["block",[["stat",["assign",true,["name","hash"],["call",["name","edge_hash"],[["dot",["name","face"],"a"],["dot",["name","face"],"b"]]]]],["stat",["call",["name","mapEdgeHash"],[["name","hash"],["name","i"]]]],["stat",["assign",true,["name","hash"],["call",["name","edge_hash"],[["dot",["name","face"],"b"],["dot",["name","face"],"c"]]]]],["stat",["call",["name","mapEdgeHash"],[["name","hash"],["name","i"]]]],["stat",["assign",true,["name","hash"],["call",["name","edge_hash"],[["dot",["name","face"],"c"],["dot",["name","face"],"d"]]]]],["stat",["call",["name","mapEdgeHash"],[["name","hash"],["name","i"]]]],["stat",["assign",true,["name","hash"],["call",["name","edge_hash"],[["dot",["name","face"],"d"],["dot",["name","face"],"a"]]]]],["stat",["call",["name","mapEdgeHash"],[["name","hash"],["name","i"]]]]]],null]]]]],["return",["name","edgeFaceMap"]]]],["var",[["originalPoints",["dot",["name","oldGeometry"],"vertices"]]]],["var",[["originalFaces",["dot",["name","oldGeometry"],"faces"]]]],["var",[["newPoints",["call",["dot",["name","originalPoints"],"concat"],[]]]]],["var",[["facePoints",["array",[]]],["edgePoints",["object",[]]]]],["var",[["sharpEdges",["object",[]]],["sharpVertices",["array",[]]],["sharpFaces",["array",[]]]]],["var",[["uvForVertices",["object",[]]]]],["var",[["originalVerticesLength",["dot",["name","originalPoints"],"length"]]]],["defun","getUV",["vertexNo","oldFaceNo"],[["var",[["j"],["jl"]]],["var",[["key",["binary","+",["binary","+",["name","vertexNo"],["string",":"]],["name","oldFaceNo"]]]]],["var",[["theUV",["sub",["name","uvForVertices"],["name","key"]]]]],["if",["unary-prefix","!",["name","theUV"]],["block",[["if",["binary","&&",["binary",">=",["name","vertexNo"],["name","originalVerticesLength"]],["binary","<",["name","vertexNo"],["binary","+",["name","originalVerticesLength"],["dot",["name","originalFaces"],"length"]]]],["block",[["stat",["call",["name","debug"],[["string","face pt"]]]]]],["block",[["stat",["call",["name","debug"],[["string","edge pt"]]]]]]],["stat",["call",["name","warn"],[["string","warning, UV not found for"],["name","key"]]]],["return",["name","null"]]]],null],["return",["name","theUV"]]]],["defun","addUV",["vertexNo","oldFaceNo","value"],[["var",[["key",["binary","+",["binary","+",["name","vertexNo"],["string",":"]],["name","oldFaceNo"]]]]],["if",["unary-prefix","!",["binary","in",["name","key"],["name","uvForVertices"]]],["block",[["stat",["assign",true,["sub",["name","uvForVertices"],["name","key"]],["name","value"]]]]],["block",[["stat",["call",["name","warn"],[["string","dup vertexNo"],["name","vertexNo"],["string","oldFaceNo"],["name","oldFaceNo"],["string","value"],["name","value"],["string","key"],["name","key"],["sub",["name","uvForVertices"],["name","key"]]]]]]]]]],["var",[["i"],["il"],["j"],["jl"],["face"]]],["var",[["uvs",["sub",["dot",["name","oldGeometry"],"faceVertexUvs"],["num",0]]]]],["var",[["abcd",["string","abcd"]],["vertice"]]],["stat",["call",["name","debug"],[["string","originalFaces, uvs, originalVerticesLength"],["dot",["name","originalFaces"],"length"],["dot",["name","uvs"],"length"],["name","originalVerticesLength"]]]],["if",["dot",["name","scope"],"supportUVs"],["for",["seq",["assign",true,["name","i"],["num",0]],["assign",true,["name","il"],["dot",["name","uvs"],"length"]]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["block",[["for",["seq",["assign",true,["name","j"],["num",0]],["assign",true,["name","jl"],["dot",["sub",["name","uvs"],["name","i"]],"length"]]],["binary","<",["name","j"],["name","jl"]],["unary-postfix","++",["name","j"]],["block",[["stat",["assign",true,["name","vertice"],["sub",["sub",["name","originalFaces"],["name","i"]],["call",["dot",["name","abcd"],"charAt"],[["name","j"]]]]]],["stat",["call",["name","addUV"],[["name","vertice"],["name","i"],["sub",["sub",["name","uvs"],["name","i"]],["name","j"]]]]]]]]]]],null],["if",["binary","==",["dot",["name","uvs"],"length"],["num",0]],["stat",["assign",true,["dot",["name","scope"],"supportUVs"],["name","false"]]],null],["var",[["uvCount",["num",0]]]],["for-in",["var",[["u"]]],["name",["u"]],["name","uvForVertices"],["block",[["stat",["unary-postfix","++",["name","uvCount"]]]]]],["if",["unary-prefix","!",["name","uvCount"]],["block",[["stat",["assign",true,["dot",["name","scope"],"supportUVs"],["name","false"]]],["stat",["call",["name","debug"],[["string","no uvs"]]]]]],null],["stat",["call",["name","debug"],[["string","-- Original Faces + Vertices UVs completed"],["name","uvForVertices"],["string","vs"],["dot",["name","uvs"],"length"]]]],["var",[["avgUv"]]],["for",["seq",["assign",true,["name","i"],["num",0]],["assign",true,["name","il"],["dot",["name","originalFaces"],"length"]]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","face"],["sub",["name","originalFaces"],["name","i"]]]],["stat",["call",["dot",["name","facePoints"],"push"],[["dot",["name","face"],"centroid"]]]],["stat",["call",["dot",["name","newPoints"],"push"],[["dot",["name","face"],"centroid"]]]],["if",["unary-prefix","!",["dot",["name","scope"],"supportUVs"]],["continue",null],null],["stat",["assign",true,["name","avgUv"],["new",["dot",["name","THREE"],"UV"],[]]]],["if",["binary","instanceof",["name","face"],["dot",["name","THREE"],"Face3"]],["block",[["stat",["assign",true,["dot",["name","avgUv"],"u"],["binary","+",["binary","+",["dot",["call",["name","getUV"],[["dot",["name","face"],"a"],["name","i"]]],"u"],["dot",["call",["name","getUV"],[["dot",["name","face"],"b"],["name","i"]]],"u"]],["dot",["call",["name","getUV"],[["dot",["name","face"],"c"],["name","i"]]],"u"]]]],["stat",["assign",true,["dot",["name","avgUv"],"v"],["binary","+",["binary","+",["dot",["call",["name","getUV"],[["dot",["name","face"],"a"],["name","i"]]],"v"],["dot",["call",["name","getUV"],[["dot",["name","face"],"b"],["name","i"]]],"v"]],["dot",["call",["name","getUV"],[["dot",["name","face"],"c"],["name","i"]]],"v"]]]],["stat",["assign","/",["dot",["name","avgUv"],"u"],["num",3]]],["stat",["assign","/",["dot",["name","avgUv"],"v"],["num",3]]]]],["if",["binary","instanceof",["name","face"],["dot",["name","THREE"],"Face4"]],["block",[["stat",["assign",true,["dot",["name","avgUv"],"u"],["binary","+",["binary","+",["binary","+",["dot",["call",["name","getUV"],[["dot",["name","face"],"a"],["name","i"]]],"u"],["dot",["call",["name","getUV"],[["dot",["name","face"],"b"],["name","i"]]],"u"]],["dot",["call",["name","getUV"],[["dot",["name","face"],"c"],["name","i"]]],"u"]],["dot",["call",["name","getUV"],[["dot",["name","face"],"d"],["name","i"]]],"u"]]]],["stat",["assign",true,["dot",["name","avgUv"],"v"],["binary","+",["binary","+",["binary","+",["dot",["call",["name","getUV"],[["dot",["name","face"],"a"],["name","i"]]],"v"],["dot",["call",["name","getUV"],[["dot",["name","face"],"b"],["name","i"]]],"v"]],["dot",["call",["name","getUV"],[["dot",["name","face"],"c"],["name","i"]]],"v"]],["dot",["call",["name","getUV"],[["dot",["name","face"],"d"],["name","i"]]],"v"]]]],["stat",["assign","/",["dot",["name","avgUv"],"u"],["num",4]]],["stat",["assign","/",["dot",["name","avgUv"],"v"],["num",4]]]]],null]],["stat",["call",["name","addUV"],[["binary","+",["name","originalVerticesLength"],["name","i"]],["string",""],["name","avgUv"]]]]]]],["stat",["call",["name","debug"],[["string","-- added UVs for new Faces"],["name","uvForVertices"]]]],["var",[["edgeFaceMap",["call",["name","computeEdgeFaces"],[["name","oldGeometry"]]]]]],["var",[["edge"],["faceIndexA"],["faceIndexB"],["avg"]]],["var",[["edgeCount",["num",0]]]],["var",[["edgeVertex"],["edgeVertexA"],["edgeVertexB"]]],["var",[["vertexEdgeMap",["object",[]]]]],["var",[["vertexFaceMap",["object",[]]]]],["defun","addVertexEdgeMap",["vertex","edge"],[["if",["binary","===",["sub",["name","vertexEdgeMap"],["name","vertex"]],["name","undefined"]],["block",[["stat",["assign",true,["sub",["name","vertexEdgeMap"],["name","vertex"]],["array",[]]]]]],null],["stat",["call",["dot",["sub",["name","vertexEdgeMap"],["name","vertex"]],"push"],[["name","edge"]]]]]],["defun","addVertexFaceMap",["vertex","face","edge"],[["if",["binary","===",["sub",["name","vertexFaceMap"],["name","vertex"]],["name","undefined"]],["block",[["stat",["assign",true,["sub",["name","vertexFaceMap"],["name","vertex"]],["object",[]]]]]],null],["stat",["assign",true,["sub",["sub",["name","vertexFaceMap"],["name","vertex"]],["name","face"]],["name","edge"]]]]],["for-in",["name","i"],["name","i"],["name","edgeFaceMap"],["block",[["stat",["assign",true,["name","edge"],["sub",["name","edgeFaceMap"],["name","i"]]]],["stat",["assign",true,["name","edgeVertex"],["call",["dot",["name","i"],"split"],[["string","_"]]]]],["stat",["assign",true,["name","edgeVertexA"],["sub",["name","edgeVertex"],["num",0]]]],["stat",["assign",true,["name","edgeVertexB"],["sub",["name","edgeVertex"],["num",1]]]],["stat",["call",["name","addVertexEdgeMap"],[["name","edgeVertexA"],["array",[["name","edgeVertexA"],["name","edgeVertexB"]]]]]],["stat",["call",["name","addVertexEdgeMap"],[["name","edgeVertexB"],["array",[["name","edgeVertexA"],["name","edgeVertexB"]]]]]],["for",["seq",["assign",true,["name","j"],["num",0]],["assign",true,["name","jl"],["dot",["name","edge"],"length"]]],["binary","<",["name","j"],["name","jl"]],["unary-postfix","++",["name","j"]],["block",[["stat",["assign",true,["name","face"],["sub",["name","edge"],["name","j"]]]],["stat",["call",["name","addVertexFaceMap"],[["name","edgeVertexA"],["name","face"],["name","i"]]]],["stat",["call",["name","addVertexFaceMap"],[["name","edgeVertexB"],["name","face"],["name","i"]]]]]]],["if",["binary","<",["dot",["name","edge"],"length"],["num",2]],["block",[["stat",["assign",true,["sub",["name","sharpEdges"],["name","i"]],["name","true"]]],["stat",["assign",true,["sub",["name","sharpVertices"],["name","edgeVertexA"]],["name","true"]]],["stat",["assign",true,["sub",["name","sharpVertices"],["name","edgeVertexB"]],["name","true"]]]]],null]]]],["stat",["call",["name","debug"],[["string","vertexEdgeMap"],["name","vertexEdgeMap"],["string","vertexFaceMap"],["name","vertexFaceMap"]]]],["for-in",["name","i"],["name","i"],["name","edgeFaceMap"],["block",[["stat",["assign",true,["name","edge"],["sub",["name","edgeFaceMap"],["name","i"]]]],["stat",["assign",true,["name","faceIndexA"],["sub",["name","edge"],["num",0]]]],["stat",["assign",true,["name","faceIndexB"],["sub",["name","edge"],["num",1]]]],["stat",["assign",true,["name","edgeVertex"],["call",["dot",["name","i"],"split"],[["string","_"]]]]],["stat",["assign",true,["name","edgeVertexA"],["sub",["name","edgeVertex"],["num",0]]]],["stat",["assign",true,["name","edgeVertexB"],["sub",["name","edgeVertex"],["num",1]]]],["stat",["assign",true,["name","avg"],["new",["dot",["name","THREE"],"Vector3"],[]]]],["if",["sub",["name","sharpEdges"],["name","i"]],["block",[["stat",["call",["dot",["name","avg"],"addSelf"],[["sub",["name","originalPoints"],["name","edgeVertexA"]]]]],["stat",["call",["dot",["name","avg"],"addSelf"],[["sub",["name","originalPoints"],["name","edgeVertexB"]]]]],["stat",["call",["dot",["name","avg"],"multiplyScalar"],[["num",0.5]]]],["stat",["assign",true,["sub",["name","sharpVertices"],["dot",["name","newPoints"],"length"]],["name","true"]]]]],["block",[["stat",["call",["dot",["name","avg"],"addSelf"],[["sub",["name","facePoints"],["name","faceIndexA"]]]]],["stat",["call",["dot",["name","avg"],"addSelf"],[["sub",["name","facePoints"],["name","faceIndexB"]]]]],["stat",["call",["dot",["name","avg"],"addSelf"],[["sub",["name","originalPoints"],["name","edgeVertexA"]]]]],["stat",["call",["dot",["name","avg"],"addSelf"],[["sub",["name","originalPoints"],["name","edgeVertexB"]]]]],["stat",["call",["dot",["name","avg"],"multiplyScalar"],[["num",0.25]]]]]]],["stat",["assign",true,["sub",["name","edgePoints"],["name","i"]],["binary","+",["binary","+",["name","originalVerticesLength"],["dot",["name","originalFaces"],"length"]],["name","edgeCount"]]]],["stat",["call",["dot",["name","newPoints"],"push"],[["name","avg"]]]],["stat",["unary-postfix","++",["name","edgeCount"]]],["if",["unary-prefix","!",["dot",["name","scope"],"supportUVs"]],["block",[["continue",null]]],null],["stat",["assign",true,["name","avgUv"],["new",["dot",["name","THREE"],"UV"],[]]]],["stat",["assign",true,["dot",["name","avgUv"],"u"],["binary","+",["dot",["call",["name","getUV"],[["name","edgeVertexA"],["name","faceIndexA"]]],"u"],["dot",["call",["name","getUV"],[["name","edgeVertexB"],["name","faceIndexA"]]],"u"]]]],["stat",["assign",true,["dot",["name","avgUv"],"v"],["binary","+",["dot",["call",["name","getUV"],[["name","edgeVertexA"],["name","faceIndexA"]]],"v"],["dot",["call",["name","getUV"],[["name","edgeVertexB"],["name","faceIndexA"]]],"v"]]]],["stat",["assign","/",["dot",["name","avgUv"],"u"],["num",2]]],["stat",["assign","/",["dot",["name","avgUv"],"v"],["num",2]]],["stat",["call",["name","addUV"],[["sub",["name","edgePoints"],["name","i"]],["name","faceIndexA"],["name","avgUv"]]]],["if",["unary-prefix","!",["sub",["name","sharpEdges"],["name","i"]]],["block",[["stat",["assign",true,["name","avgUv"],["new",["dot",["name","THREE"],"UV"],[]]]],["stat",["assign",true,["dot",["name","avgUv"],"u"],["binary","+",["dot",["call",["name","getUV"],[["name","edgeVertexA"],["name","faceIndexB"]]],"u"],["dot",["call",["name","getUV"],[["name","edgeVertexB"],["name","faceIndexB"]]],"u"]]]],["stat",["assign",true,["dot",["name","avgUv"],"v"],["binary","+",["dot",["call",["name","getUV"],[["name","edgeVertexA"],["name","faceIndexB"]]],"v"],["dot",["call",["name","getUV"],[["name","edgeVertexB"],["name","faceIndexB"]]],"v"]]]],["stat",["assign","/",["dot",["name","avgUv"],"u"],["num",2]]],["stat",["assign","/",["dot",["name","avgUv"],"v"],["num",2]]],["stat",["call",["name","addUV"],[["sub",["name","edgePoints"],["name","i"]],["name","faceIndexB"],["name","avgUv"]]]]]],null]]]],["stat",["call",["name","debug"],[["string","-- Step 2 done"]]]],["var",[["facePt"],["currentVerticeIndex"]]],["var",[["hashAB"],["hashBC"],["hashCD"],["hashDA"],["hashCA"]]],["var",[["abc123",["array",[["string","123"],["string","12"],["string","2"],["string","23"]]]]]],["var",[["bca123",["array",[["string","123"],["string","23"],["string","3"],["string","31"]]]]]],["var",[["cab123",["array",[["string","123"],["string","31"],["string","1"],["string","12"]]]]]],["var",[["abc1234",["array",[["string","1234"],["string","12"],["string","2"],["string","23"]]]]]],["var",[["bcd1234",["array",[["string","1234"],["string","23"],["string","3"],["string","34"]]]]]],["var",[["cda1234",["array",[["string","1234"],["string","34"],["string","4"],["string","41"]]]]]],["var",[["dab1234",["array",[["string","1234"],["string","41"],["string","1"],["string","12"]]]]]],["for",["seq",["assign",true,["name","i"],["num",0]],["assign",true,["name","il"],["dot",["name","facePoints"],"length"]]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","facePt"],["sub",["name","facePoints"],["name","i"]]]],["stat",["assign",true,["name","face"],["sub",["name","originalFaces"],["name","i"]]]],["stat",["assign",true,["name","currentVerticeIndex"],["binary","+",["name","originalVerticesLength"],["name","i"]]]],["if",["binary","instanceof",["name","face"],["dot",["name","THREE"],"Face3"]],["block",[["stat",["assign",true,["name","hashAB"],["call",["name","edge_hash"],[["dot",["name","face"],"a"],["dot",["name","face"],"b"]]]]],["stat",["assign",true,["name","hashBC"],["call",["name","edge_hash"],[["dot",["name","face"],"b"],["dot",["name","face"],"c"]]]]],["stat",["assign",true,["name","hashCA"],["call",["name","edge_hash"],[["dot",["name","face"],"c"],["dot",["name","face"],"a"]]]]],["stat",["call",["name","f4"],[["name","currentVerticeIndex"],["sub",["name","edgePoints"],["name","hashAB"]],["dot",["name","face"],"b"],["sub",["name","edgePoints"],["name","hashBC"]],["name","face"],["name","abc123"],["name","i"]]]],["stat",["call",["name","f4"],[["name","currentVerticeIndex"],["sub",["name","edgePoints"],["name","hashBC"]],["dot",["name","face"],"c"],["sub",["name","edgePoints"],["name","hashCA"]],["name","face"],["name","bca123"],["name","i"]]]],["stat",["call",["name","f4"],[["name","currentVerticeIndex"],["sub",["name","edgePoints"],["name","hashCA"]],["dot",["name","face"],"a"],["sub",["name","edgePoints"],["name","hashAB"]],["name","face"],["name","cab123"],["name","i"]]]]]],["if",["binary","instanceof",["name","face"],["dot",["name","THREE"],"Face4"]],["block",[["stat",["assign",true,["name","hashAB"],["call",["name","edge_hash"],[["dot",["name","face"],"a"],["dot",["name","face"],"b"]]]]],["stat",["assign",true,["name","hashBC"],["call",["name","edge_hash"],[["dot",["name","face"],"b"],["dot",["name","face"],"c"]]]]],["stat",["assign",true,["name","hashCD"],["call",["name","edge_hash"],[["dot",["name","face"],"c"],["dot",["name","face"],"d"]]]]],["stat",["assign",true,["name","hashDA"],["call",["name","edge_hash"],[["dot",["name","face"],"d"],["dot",["name","face"],"a"]]]]],["stat",["call",["name","f4"],[["name","currentVerticeIndex"],["sub",["name","edgePoints"],["name","hashAB"]],["dot",["name","face"],"b"],["sub",["name","edgePoints"],["name","hashBC"]],["name","face"],["name","abc1234"],["name","i"]]]],["stat",["call",["name","f4"],[["name","currentVerticeIndex"],["sub",["name","edgePoints"],["name","hashBC"]],["dot",["name","face"],"c"],["sub",["name","edgePoints"],["name","hashCD"]],["name","face"],["name","bcd1234"],["name","i"]]]],["stat",["call",["name","f4"],[["name","currentVerticeIndex"],["sub",["name","edgePoints"],["name","hashCD"]],["dot",["name","face"],"d"],["sub",["name","edgePoints"],["name","hashDA"]],["name","face"],["name","cda1234"],["name","i"]]]],["stat",["call",["name","f4"],[["name","currentVerticeIndex"],["sub",["name","edgePoints"],["name","hashDA"]],["dot",["name","face"],"a"],["sub",["name","edgePoints"],["name","hashAB"]],["name","face"],["name","dab1234"],["name","i"]]]]]],["block",[["stat",["call",["name","debug"],[["string","face should be a face!"],["name","face"]]]]]]]]]]],["stat",["assign",true,["name","newVertices"],["name","newPoints"]]],["var",[["F",["new",["dot",["name","THREE"],"Vector3"],[]]]]],["var",[["R",["new",["dot",["name","THREE"],"Vector3"],[]]]]],["var",[["n"]]],["for",["seq",["assign",true,["name","i"],["num",0]],["assign",true,["name","il"],["dot",["name","originalPoints"],"length"]]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["block",[["if",["binary","===",["sub",["name","vertexEdgeMap"],["name","i"]],["name","undefined"]],["continue",null],null],["stat",["call",["dot",["name","F"],"set"],[["num",0],["num",0],["num",0]]]],["stat",["call",["dot",["name","R"],"set"],[["num",0],["num",0],["num",0]]]],["var",[["newPos",["new",["dot",["name","THREE"],"Vector3"],[["num",0],["num",0],["num",0]]]]]],["var",[["f",["num",0]]]],["for-in",["name","j"],["name","j"],["sub",["name","vertexFaceMap"],["name","i"]],["block",[["stat",["call",["dot",["name","F"],"addSelf"],[["sub",["name","facePoints"],["name","j"]]]]],["stat",["unary-postfix","++",["name","f"]]]]]],["var",[["sharpEdgeCount",["num",0]]]],["stat",["assign",true,["name","n"],["dot",["sub",["name","vertexEdgeMap"],["name","i"]],"length"]]],["for",["assign",true,["name","j"],["num",0]],["binary","<",["name","j"],["name","n"]],["unary-postfix","++",["name","j"]],["block",[["if",["sub",["name","sharpEdges"],["call",["name","edge_hash"],[["sub",["sub",["sub",["name","vertexEdgeMap"],["name","i"]],["name","j"]],["num",0]],["sub",["sub",["sub",["name","vertexEdgeMap"],["name","i"]],["name","j"]],["num",1]]]]],["block",[["stat",["unary-postfix","++",["name","sharpEdgeCount"]]]]],null]]]],["if",["binary","==",["name","sharpEdgeCount"],["num",2]],["block",[["continue",null]]],null],["stat",["call",["dot",["name","F"],"divideScalar"],[["name","f"]]]],["for",["assign",true,["name","j"],["num",0]],["binary","<",["name","j"],["name","n"]],["unary-postfix","++",["name","j"]],["block",[["stat",["assign",true,["name","edge"],["sub",["sub",["name","vertexEdgeMap"],["name","i"]],["name","j"]]]],["var",[["midPt",["call",["dot",["call",["dot",["call",["dot",["sub",["name","originalPoints"],["sub",["name","edge"],["num",0]]],"clone"],[]],"addSelf"],[["sub",["name","originalPoints"],["sub",["name","edge"],["num",1]]]]],"divideScalar"],[["num",2]]]]]],["stat",["call",["dot",["name","R"],"addSelf"],[["name","midPt"]]]]]]],["stat",["call",["dot",["name","R"],"divideScalar"],[["name","n"]]]],["stat",["call",["dot",["name","newPos"],"addSelf"],[["sub",["name","originalPoints"],["name","i"]]]]],["stat",["call",["dot",["name","newPos"],"multiplyScalar"],[["binary","-",["name","n"],["num",3]]]]],["stat",["call",["dot",["name","newPos"],"addSelf"],[["name","F"]]]],["stat",["call",["dot",["name","newPos"],"addSelf"],[["call",["dot",["name","R"],"multiplyScalar"],[["num",2]]]]]],["stat",["call",["dot",["name","newPos"],"divideScalar"],[["name","n"]]]],["stat",["assign",true,["sub",["name","newVertices"],["name","i"]],["name","newPos"]]]]]],["var",[["newGeometry",["name","oldGeometry"]]]],["stat",["assign",true,["dot",["name","newGeometry"],"vertices"],["name","newVertices"]]],["stat",["assign",true,["dot",["name","newGeometry"],"faces"],["name","newFaces"]]],["stat",["assign",true,["sub",["dot",["name","newGeometry"],"faceVertexUvs"],["num",0]],["name","newUVs"]]],["stat",["unary-prefix","delete",["dot",["name","newGeometry"],"__tmpVertices"]]],["stat",["call",["dot",["name","newGeometry"],"computeCentroids"],[]]],["stat",["call",["dot",["name","newGeometry"],"computeFaceNormals"],[]]],["stat",["call",["dot",["name","newGeometry"],"computeVertexNormals"],[]]]]]]],["stat",["assign",true,["dot",["name","THREE"],"ImmediateRenderObject"],["function",null,[],[["stat",["call",["dot",["dot",["name","THREE"],"Object3D"],"call"],[["name","this"]]]],["stat",["assign",true,["dot",["name","this"],"render"],["function",null,["renderCallback"],[]]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"ImmediateRenderObject"],"prototype"],["new",["dot",["name","THREE"],"Object3D"],[]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"ImmediateRenderObject"],"prototype"],"constructor"],["dot",["name","THREE"],"ImmediateRenderObject"]]],["stat",["assign",true,["dot",["name","THREE"],"LensFlare"],["function",null,["texture","size","distance","blending","color"],[["stat",["call",["dot",["dot",["name","THREE"],"Object3D"],"call"],[["name","this"]]]],["stat",["assign",true,["dot",["name","this"],"lensFlares"],["array",[]]]],["stat",["assign",true,["dot",["name","this"],"positionScreen"],["new",["dot",["name","THREE"],"Vector3"],[]]]],["stat",["assign",true,["dot",["name","this"],"customUpdateCallback"],["name","undefined"]]],["if",["binary","!==",["name","texture"],["name","undefined"]],["block",[["stat",["call",["dot",["name","this"],"add"],[["name","texture"],["name","size"],["name","distance"],["name","blending"],["name","color"]]]]]],null]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"LensFlare"],"prototype"],["new",["dot",["name","THREE"],"Object3D"],[]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"LensFlare"],"prototype"],"constructor"],["dot",["name","THREE"],"LensFlare"]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"LensFlare"],"prototype"],"supr"],["dot",["dot",["name","THREE"],"Object3D"],"prototype"]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"LensFlare"],"prototype"],"add"],["function",null,["texture","size","distance","blending","color","opacity"],[["if",["binary","===",["name","size"],["name","undefined"]],["stat",["assign",true,["name","size"],["unary-prefix","-",["num",1]]]],null],["if",["binary","===",["name","distance"],["name","undefined"]],["stat",["assign",true,["name","distance"],["num",0]]],null],["if",["binary","===",["name","opacity"],["name","undefined"]],["stat",["assign",true,["name","opacity"],["num",1]]],null],["if",["binary","===",["name","color"],["name","undefined"]],["stat",["assign",true,["name","color"],["new",["dot",["name","THREE"],"Color"],[["num",16777215]]]]],null],["if",["binary","===",["name","blending"],["name","undefined"]],["stat",["assign",true,["name","blending"],["dot",["name","THREE"],"NormalBlending"]]],null],["stat",["assign",true,["name","distance"],["call",["dot",["name","Math"],"min"],[["name","distance"],["call",["dot",["name","Math"],"max"],[["num",0],["name","distance"]]]]]]],["stat",["call",["dot",["dot",["name","this"],"lensFlares"],"push"],[["object",[["texture",["name","texture"]],["size",["name","size"]],["distance",["name","distance"]],["x",["num",0]],["y",["num",0]],["z",["num",0]],["scale",["num",1]],["rotation",["num",1]],["opacity",["name","opacity"]],["color",["name","color"]],["blending",["name","blending"]]]]]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"LensFlare"],"prototype"],"updateLensFlares"],["function",null,[],[["var",[["f"],["fl",["dot",["dot",["name","this"],"lensFlares"],"length"]]]],["var",[["flare"]]],["var",[["vecX",["binary","*",["unary-prefix","-",["dot",["dot",["name","this"],"positionScreen"],"x"]],["num",2]]]]],["var",[["vecY",["binary","*",["unary-prefix","-",["dot",["dot",["name","this"],"positionScreen"],"y"]],["num",2]]]]],["for",["assign",true,["name","f"],["num",0]],["binary","<",["name","f"],["name","fl"]],["unary-postfix","++",["name","f"]],["block",[["stat",["assign",true,["name","flare"],["sub",["dot",["name","this"],"lensFlares"],["name","f"]]]],["stat",["assign",true,["dot",["name","flare"],"x"],["binary","+",["dot",["dot",["name","this"],"positionScreen"],"x"],["binary","*",["name","vecX"],["dot",["name","flare"],"distance"]]]]],["stat",["assign",true,["dot",["name","flare"],"y"],["binary","+",["dot",["dot",["name","this"],"positionScreen"],"y"],["binary","*",["name","vecY"],["dot",["name","flare"],"distance"]]]]],["stat",["assign",true,["dot",["name","flare"],"wantedRotation"],["binary","*",["binary","*",["dot",["name","flare"],"x"],["dot",["name","Math"],"PI"]],["num",0.25]]]],["stat",["assign","+",["dot",["name","flare"],"rotation"],["binary","*",["binary","-",["dot",["name","flare"],"wantedRotation"],["dot",["name","flare"],"rotation"]],["num",0.25]]]]]]]]]]],["stat",["assign",true,["dot",["name","THREE"],"MorphBlendMesh"],["function",null,["geometry","material"],[["stat",["call",["dot",["dot",["name","THREE"],"Mesh"],"call"],[["name","this"],["name","geometry"],["name","material"]]]],["stat",["assign",true,["dot",["name","this"],"animationsMap"],["object",[]]]],["stat",["assign",true,["dot",["name","this"],"animationsList"],["array",[]]]],["var",[["numFrames",["dot",["dot",["dot",["name","this"],"geometry"],"morphTargets"],"length"]]]],["var",[["name",["string","__default"]]]],["var",[["startFrame",["num",0]]]],["var",[["endFrame",["binary","-",["name","numFrames"],["num",1]]]]],["var",[["fps",["binary","/",["name","numFrames"],["num",1]]]]],["stat",["call",["dot",["name","this"],"createAnimation"],[["name","name"],["name","startFrame"],["name","endFrame"],["name","fps"]]]],["stat",["call",["dot",["name","this"],"setAnimationWeight"],[["name","name"],["num",1]]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"MorphBlendMesh"],"prototype"],["new",["dot",["name","THREE"],"Mesh"],[]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"MorphBlendMesh"],"prototype"],"constructor"],["dot",["name","THREE"],"MorphBlendMesh"]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"MorphBlendMesh"],"prototype"],"createAnimation"],["function",null,["name","start","end","fps"],[["var",[["animation",["object",[["startFrame",["name","start"]],["endFrame",["name","end"]],["length",["binary","+",["binary","-",["name","end"],["name","start"]],["num",1]]],["fps",["name","fps"]],["duration",["binary","/",["binary","-",["name","end"],["name","start"]],["name","fps"]]],["lastFrame",["num",0]],["currentFrame",["num",0]],["active",["name","false"]],["time",["num",0]],["direction",["num",1]],["weight",["num",1]],["directionBackwards",["name","false"]],["mirroredLoop",["name","false"]]]]]]],["stat",["assign",true,["sub",["dot",["name","this"],"animationsMap"],["name","name"]],["name","animation"]]],["stat",["call",["dot",["dot",["name","this"],"animationsList"],"push"],[["name","animation"]]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"MorphBlendMesh"],"prototype"],"autoCreateAnimations"],["function",null,["fps"],[["var",[["pattern",["regexp","([a-z]+)(\\d+)",""]]]],["var",[["firstAnimation"],["frameRanges",["object",[]]]]],["var",[["geometry",["dot",["name","this"],"geometry"]]]],["for",["var",[["i",["num",0]],["il",["dot",["dot",["name","geometry"],"morphTargets"],"length"]]]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["block",[["var",[["morph",["sub",["dot",["name","geometry"],"morphTargets"],["name","i"]]]]],["var",[["chunks",["call",["dot",["dot",["name","morph"],"name"],"match"],[["name","pattern"]]]]]],["if",["binary","&&",["name","chunks"],["binary",">",["dot",["name","chunks"],"length"],["num",1]]],["block",[["var",[["name",["sub",["name","chunks"],["num",1]]]]],["var",[["num",["sub",["name","chunks"],["num",2]]]]],["if",["unary-prefix","!",["sub",["name","frameRanges"],["name","name"]]],["stat",["assign",true,["sub",["name","frameRanges"],["name","name"]],["object",[["start",["name","Infinity"]],["end",["unary-prefix","-",["name","Infinity"]]]]]]],null],["var",[["range",["sub",["name","frameRanges"],["name","name"]]]]],["if",["binary","<",["name","i"],["dot",["name","range"],"start"]],["stat",["assign",true,["dot",["name","range"],"start"],["name","i"]]],null],["if",["binary",">",["name","i"],["dot",["name","range"],"end"]],["stat",["assign",true,["dot",["name","range"],"end"],["name","i"]]],null],["if",["unary-prefix","!",["name","firstAnimation"]],["stat",["assign",true,["name","firstAnimation"],["name","name"]]],null]]],null]]]],["for-in",["var",[["name"]]],["name",["name"]],["name","frameRanges"],["block",[["var",[["range",["sub",["name","frameRanges"],["name","name"]]]]],["stat",["call",["dot",["name","this"],"createAnimation"],[["name","name"],["dot",["name","range"],"start"],["dot",["name","range"],"end"],["name","fps"]]]]]]],["stat",["assign",true,["dot",["name","this"],"firstAnimation"],["name","firstAnimation"]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"MorphBlendMesh"],"prototype"],"setAnimationDirectionForward"],["function",null,["name"],[["var",[["animation",["sub",["dot",["name","this"],"animationsMap"],["name","name"]]]]],["if",["name","animation"],["block",[["stat",["assign",true,["dot",["name","animation"],"direction"],["num",1]]],["stat",["assign",true,["dot",["name","animation"],"directionBackwards"],["name","false"]]]]],null]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"MorphBlendMesh"],"prototype"],"setAnimationDirectionBackward"],["function",null,["name"],[["var",[["animation",["sub",["dot",["name","this"],"animationsMap"],["name","name"]]]]],["if",["name","animation"],["block",[["stat",["assign",true,["dot",["name","animation"],"direction"],["unary-prefix","-",["num",1]]]],["stat",["assign",true,["dot",["name","animation"],"directionBackwards"],["name","true"]]]]],null]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"MorphBlendMesh"],"prototype"],"setAnimationFPS"],["function",null,["name","fps"],[["var",[["animation",["sub",["dot",["name","this"],"animationsMap"],["name","name"]]]]],["if",["name","animation"],["block",[["stat",["assign",true,["dot",["name","animation"],"fps"],["name","fps"]]],["stat",["assign",true,["dot",["name","animation"],"duration"],["binary","/",["binary","-",["dot",["name","animation"],"end"],["dot",["name","animation"],"start"]],["dot",["name","animation"],"fps"]]]]]],null]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"MorphBlendMesh"],"prototype"],"setAnimationDuration"],["function",null,["name","duration"],[["var",[["animation",["sub",["dot",["name","this"],"animationsMap"],["name","name"]]]]],["if",["name","animation"],["block",[["stat",["assign",true,["dot",["name","animation"],"duration"],["name","duration"]]],["stat",["assign",true,["dot",["name","animation"],"fps"],["binary","/",["binary","-",["dot",["name","animation"],"end"],["dot",["name","animation"],"start"]],["dot",["name","animation"],"duration"]]]]]],null]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"MorphBlendMesh"],"prototype"],"setAnimationWeight"],["function",null,["name","weight"],[["var",[["animation",["sub",["dot",["name","this"],"animationsMap"],["name","name"]]]]],["if",["name","animation"],["block",[["stat",["assign",true,["dot",["name","animation"],"weight"],["name","weight"]]]]],null]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"MorphBlendMesh"],"prototype"],"setAnimationTime"],["function",null,["name","time"],[["var",[["animation",["sub",["dot",["name","this"],"animationsMap"],["name","name"]]]]],["if",["name","animation"],["block",[["stat",["assign",true,["dot",["name","animation"],"time"],["name","time"]]]]],null]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"MorphBlendMesh"],"prototype"],"getAnimationTime"],["function",null,["name"],[["var",[["time",["num",0]]]],["var",[["animation",["sub",["dot",["name","this"],"animationsMap"],["name","name"]]]]],["if",["name","animation"],["block",[["stat",["assign",true,["name","time"],["dot",["name","animation"],"time"]]]]],null],["return",["name","time"]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"MorphBlendMesh"],"prototype"],"getAnimationDuration"],["function",null,["name"],[["var",[["duration",["unary-prefix","-",["num",1]]]]],["var",[["animation",["sub",["dot",["name","this"],"animationsMap"],["name","name"]]]]],["if",["name","animation"],["block",[["stat",["assign",true,["name","duration"],["dot",["name","animation"],"duration"]]]]],null],["return",["name","duration"]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"MorphBlendMesh"],"prototype"],"playAnimation"],["function",null,["name"],[["var",[["animation",["sub",["dot",["name","this"],"animationsMap"],["name","name"]]]]],["if",["name","animation"],["block",[["stat",["assign",true,["dot",["name","animation"],"time"],["num",0]]],["stat",["assign",true,["dot",["name","animation"],"active"],["name","true"]]]]],["block",[["stat",["call",["dot",["name","console"],"warn"],[["binary","+",["binary","+",["string","animation["],["name","name"]],["string","] undefined"]]]]]]]]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"MorphBlendMesh"],"prototype"],"stopAnimation"],["function",null,["name"],[["var",[["animation",["sub",["dot",["name","this"],"animationsMap"],["name","name"]]]]],["if",["name","animation"],["block",[["stat",["assign",true,["dot",["name","animation"],"active"],["name","false"]]]]],null]]]]],["stat",["assign",true,["dot",["dot",["dot",["name","THREE"],"MorphBlendMesh"],"prototype"],"update"],["function",null,["delta"],[["for",["var",[["i",["num",0]],["il",["dot",["dot",["name","this"],"animationsList"],"length"]]]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["block",[["var",[["animation",["sub",["dot",["name","this"],"animationsList"],["name","i"]]]]],["if",["unary-prefix","!",["dot",["name","animation"],"active"]],["continue",null],null],["var",[["frameTime",["binary","/",["dot",["name","animation"],"duration"],["dot",["name","animation"],"length"]]]]],["stat",["assign","+",["dot",["name","animation"],"time"],["binary","*",["dot",["name","animation"],"direction"],["name","delta"]]]],["if",["dot",["name","animation"],"mirroredLoop"],["block",[["if",["binary","||",["binary",">",["dot",["name","animation"],"time"],["dot",["name","animation"],"duration"]],["binary","<",["dot",["name","animation"],"time"],["num",0]]],["block",[["stat",["assign","*",["dot",["name","animation"],"direction"],["unary-prefix","-",["num",1]]]],["if",["binary",">",["dot",["name","animation"],"time"],["dot",["name","animation"],"duration"]],["block",[["stat",["assign",true,["dot",["name","animation"],"time"],["dot",["name","animation"],"duration"]]],["stat",["assign",true,["dot",["name","animation"],"directionBackwards"],["name","true"]]]]],null],["if",["binary","<",["dot",["name","animation"],"time"],["num",0]],["block",[["stat",["assign",true,["dot",["name","animation"],"time"],["num",0]]],["stat",["assign",true,["dot",["name","animation"],"directionBackwards"],["name","false"]]]]],null]]],null]]],["block",[["stat",["assign",true,["dot",["name","animation"],"time"],["binary","%",["dot",["name","animation"],"time"],["dot",["name","animation"],"duration"]]]],["if",["binary","<",["dot",["name","animation"],"time"],["num",0]],["stat",["assign","+",["dot",["name","animation"],"time"],["dot",["name","animation"],"duration"]]],null]]]],["var",[["keyframe",["binary","+",["dot",["name","animation"],"startFrame"],["call",["dot",["dot",["name","THREE"],"Math"],"clamp"],[["call",["dot",["name","Math"],"floor"],[["binary","/",["dot",["name","animation"],"time"],["name","frameTime"]]]],["num",0],["binary","-",["dot",["name","animation"],"length"],["num",1]]]]]]]],["var",[["weight",["dot",["name","animation"],"weight"]]]],["if",["binary","!==",["name","keyframe"],["dot",["name","animation"],"currentFrame"]],["block",[["stat",["assign",true,["sub",["dot",["name","this"],"morphTargetInfluences"],["dot",["name","animation"],"lastFrame"]],["num",0]]],["stat",["assign",true,["sub",["dot",["name","this"],"morphTargetInfluences"],["dot",["name","animation"],"currentFrame"]],["binary","*",["num",1],["name","weight"]]]],["stat",["assign",true,["sub",["dot",["name","this"],"morphTargetInfluences"],["name","keyframe"]],["num",0]]],["stat",["assign",true,["dot",["name","animation"],"lastFrame"],["dot",["name","animation"],"currentFrame"]]],["stat",["assign",true,["dot",["name","animation"],"currentFrame"],["name","keyframe"]]]]],null],["var",[["mix",["binary","/",["binary","%",["dot",["name","animation"],"time"],["name","frameTime"]],["name","frameTime"]]]]],["if",["dot",["name","animation"],"directionBackwards"],["stat",["assign",true,["name","mix"],["binary","-",["num",1],["name","mix"]]]],null],["stat",["assign",true,["sub",["dot",["name","this"],"morphTargetInfluences"],["dot",["name","animation"],"currentFrame"]],["binary","*",["name","mix"],["name","weight"]]]],["stat",["assign",true,["sub",["dot",["name","this"],"morphTargetInfluences"],["dot",["name","animation"],"lastFrame"]],["binary","*",["binary","-",["num",1],["name","mix"]],["name","weight"]]]]]]]]]]],["stat",["assign",true,["dot",["name","THREE"],"LensFlarePlugin"],["function",null,[],[["var",[["_gl"],["_renderer"],["_lensFlare",["object",[]]]]],["stat",["assign",true,["dot",["name","this"],"init"],["function",null,["renderer"],[["stat",["assign",true,["name","_gl"],["dot",["name","renderer"],"context"]]],["stat",["assign",true,["name","_renderer"],["name","renderer"]]],["stat",["assign",true,["dot",["name","_lensFlare"],"vertices"],["new",["name","Float32Array"],[["binary","+",["num",8],["num",8]]]]]],["stat",["assign",true,["dot",["name","_lensFlare"],"faces"],["new",["name","Uint16Array"],[["num",6]]]]],["var",[["i",["num",0]]]],["stat",["assign",true,["sub",["dot",["name","_lensFlare"],"vertices"],["unary-postfix","++",["name","i"]]],["unary-prefix","-",["num",1]]]],["stat",["assign",true,["sub",["dot",["name","_lensFlare"],"vertices"],["unary-postfix","++",["name","i"]]],["unary-prefix","-",["num",1]]]],["stat",["assign",true,["sub",["dot",["name","_lensFlare"],"vertices"],["unary-postfix","++",["name","i"]]],["num",0]]],["stat",["assign",true,["sub",["dot",["name","_lensFlare"],"vertices"],["unary-postfix","++",["name","i"]]],["num",0]]],["stat",["assign",true,["sub",["dot",["name","_lensFlare"],"vertices"],["unary-postfix","++",["name","i"]]],["num",1]]],["stat",["assign",true,["sub",["dot",["name","_lensFlare"],"vertices"],["unary-postfix","++",["name","i"]]],["unary-prefix","-",["num",1]]]],["stat",["assign",true,["sub",["dot",["name","_lensFlare"],"vertices"],["unary-postfix","++",["name","i"]]],["num",1]]],["stat",["assign",true,["sub",["dot",["name","_lensFlare"],"vertices"],["unary-postfix","++",["name","i"]]],["num",0]]],["stat",["assign",true,["sub",["dot",["name","_lensFlare"],"vertices"],["unary-postfix","++",["name","i"]]],["num",1]]],["stat",["assign",true,["sub",["dot",["name","_lensFlare"],"vertices"],["unary-postfix","++",["name","i"]]],["num",1]]],["stat",["assign",true,["sub",["dot",["name","_lensFlare"],"vertices"],["unary-postfix","++",["name","i"]]],["num",1]]],["stat",["assign",true,["sub",["dot",["name","_lensFlare"],"vertices"],["unary-postfix","++",["name","i"]]],["num",1]]],["stat",["assign",true,["sub",["dot",["name","_lensFlare"],"vertices"],["unary-postfix","++",["name","i"]]],["unary-prefix","-",["num",1]]]],["stat",["assign",true,["sub",["dot",["name","_lensFlare"],"vertices"],["unary-postfix","++",["name","i"]]],["num",1]]],["stat",["assign",true,["sub",["dot",["name","_lensFlare"],"vertices"],["unary-postfix","++",["name","i"]]],["num",0]]],["stat",["assign",true,["sub",["dot",["name","_lensFlare"],"vertices"],["unary-postfix","++",["name","i"]]],["num",1]]],["stat",["assign",true,["name","i"],["num",0]]],["stat",["assign",true,["sub",["dot",["name","_lensFlare"],"faces"],["unary-postfix","++",["name","i"]]],["num",0]]],["stat",["assign",true,["sub",["dot",["name","_lensFlare"],"faces"],["unary-postfix","++",["name","i"]]],["num",1]]],["stat",["assign",true,["sub",["dot",["name","_lensFlare"],"faces"],["unary-postfix","++",["name","i"]]],["num",2]]],["stat",["assign",true,["sub",["dot",["name","_lensFlare"],"faces"],["unary-postfix","++",["name","i"]]],["num",0]]],["stat",["assign",true,["sub",["dot",["name","_lensFlare"],"faces"],["unary-postfix","++",["name","i"]]],["num",2]]],["stat",["assign",true,["sub",["dot",["name","_lensFlare"],"faces"],["unary-postfix","++",["name","i"]]],["num",3]]],["stat",["assign",true,["dot",["name","_lensFlare"],"vertexBuffer"],["call",["dot",["name","_gl"],"createBuffer"],[]]]],["stat",["assign",true,["dot",["name","_lensFlare"],"elementBuffer"],["call",["dot",["name","_gl"],"createBuffer"],[]]]],["stat",["call",["dot",["name","_gl"],"bindBuffer"],[["dot",["name","_gl"],"ARRAY_BUFFER"],["dot",["name","_lensFlare"],"vertexBuffer"]]]],["stat",["call",["dot",["name","_gl"],"bufferData"],[["dot",["name","_gl"],"ARRAY_BUFFER"],["dot",["name","_lensFlare"],"vertices"],["dot",["name","_gl"],"STATIC_DRAW"]]]],["stat",["call",["dot",["name","_gl"],"bindBuffer"],[["dot",["name","_gl"],"ELEMENT_ARRAY_BUFFER"],["dot",["name","_lensFlare"],"elementBuffer"]]]],["stat",["call",["dot",["name","_gl"],"bufferData"],[["dot",["name","_gl"],"ELEMENT_ARRAY_BUFFER"],["dot",["name","_lensFlare"],"faces"],["dot",["name","_gl"],"STATIC_DRAW"]]]],["stat",["assign",true,["dot",["name","_lensFlare"],"tempTexture"],["call",["dot",["name","_gl"],"createTexture"],[]]]],["stat",["assign",true,["dot",["name","_lensFlare"],"occlusionTexture"],["call",["dot",["name","_gl"],"createTexture"],[]]]],["stat",["call",["dot",["name","_gl"],"bindTexture"],[["dot",["name","_gl"],"TEXTURE_2D"],["dot",["name","_lensFlare"],"tempTexture"]]]],["stat",["call",["dot",["name","_gl"],"texImage2D"],[["dot",["name","_gl"],"TEXTURE_2D"],["num",0],["dot",["name","_gl"],"RGB"],["num",16],["num",16],["num",0],["dot",["name","_gl"],"RGB"],["dot",["name","_gl"],"UNSIGNED_BYTE"],["name","null"]]]],["stat",["call",["dot",["name","_gl"],"texParameteri"],[["dot",["name","_gl"],"TEXTURE_2D"],["dot",["name","_gl"],"TEXTURE_WRAP_S"],["dot",["name","_gl"],"CLAMP_TO_EDGE"]]]],["stat",["call",["dot",["name","_gl"],"texParameteri"],[["dot",["name","_gl"],"TEXTURE_2D"],["dot",["name","_gl"],"TEXTURE_WRAP_T"],["dot",["name","_gl"],"CLAMP_TO_EDGE"]]]],["stat",["call",["dot",["name","_gl"],"texParameteri"],[["dot",["name","_gl"],"TEXTURE_2D"],["dot",["name","_gl"],"TEXTURE_MAG_FILTER"],["dot",["name","_gl"],"NEAREST"]]]],["stat",["call",["dot",["name","_gl"],"texParameteri"],[["dot",["name","_gl"],"TEXTURE_2D"],["dot",["name","_gl"],"TEXTURE_MIN_FILTER"],["dot",["name","_gl"],"NEAREST"]]]],["stat",["call",["dot",["name","_gl"],"bindTexture"],[["dot",["name","_gl"],"TEXTURE_2D"],["dot",["name","_lensFlare"],"occlusionTexture"]]]],["stat",["call",["dot",["name","_gl"],"texImage2D"],[["dot",["name","_gl"],"TEXTURE_2D"],["num",0],["dot",["name","_gl"],"RGBA"],["num",16],["num",16],["num",0],["dot",["name","_gl"],"RGBA"],["dot",["name","_gl"],"UNSIGNED_BYTE"],["name","null"]]]],["stat",["call",["dot",["name","_gl"],"texParameteri"],[["dot",["name","_gl"],"TEXTURE_2D"],["dot",["name","_gl"],"TEXTURE_WRAP_S"],["dot",["name","_gl"],"CLAMP_TO_EDGE"]]]],["stat",["call",["dot",["name","_gl"],"texParameteri"],[["dot",["name","_gl"],"TEXTURE_2D"],["dot",["name","_gl"],"TEXTURE_WRAP_T"],["dot",["name","_gl"],"CLAMP_TO_EDGE"]]]],["stat",["call",["dot",["name","_gl"],"texParameteri"],[["dot",["name","_gl"],"TEXTURE_2D"],["dot",["name","_gl"],"TEXTURE_MAG_FILTER"],["dot",["name","_gl"],"NEAREST"]]]],["stat",["call",["dot",["name","_gl"],"texParameteri"],[["dot",["name","_gl"],"TEXTURE_2D"],["dot",["name","_gl"],"TEXTURE_MIN_FILTER"],["dot",["name","_gl"],"NEAREST"]]]],["if",["binary","<=",["call",["dot",["name","_gl"],"getParameter"],[["dot",["name","_gl"],"MAX_VERTEX_TEXTURE_IMAGE_UNITS"]]],["num",0]],["block",[["stat",["assign",true,["dot",["name","_lensFlare"],"hasVertexTexture"],["name","false"]]],["stat",["assign",true,["dot",["name","_lensFlare"],"program"],["call",["name","createProgram"],[["sub",["dot",["name","THREE"],"ShaderFlares"],["string","lensFlare"]]]]]]]],["block",[["stat",["assign",true,["dot",["name","_lensFlare"],"hasVertexTexture"],["name","true"]]],["stat",["assign",true,["dot",["name","_lensFlare"],"program"],["call",["name","createProgram"],[["sub",["dot",["name","THREE"],"ShaderFlares"],["string","lensFlareVertexTexture"]]]]]]]]],["stat",["assign",true,["dot",["name","_lensFlare"],"attributes"],["object",[]]]],["stat",["assign",true,["dot",["name","_lensFlare"],"uniforms"],["object",[]]]],["stat",["assign",true,["dot",["dot",["name","_lensFlare"],"attributes"],"vertex"],["call",["dot",["name","_gl"],"getAttribLocation"],[["dot",["name","_lensFlare"],"program"],["string","position"]]]]],["stat",["assign",true,["dot",["dot",["name","_lensFlare"],"attributes"],"uv"],["call",["dot",["name","_gl"],"getAttribLocation"],[["dot",["name","_lensFlare"],"program"],["string","uv"]]]]],["stat",["assign",true,["dot",["dot",["name","_lensFlare"],"uniforms"],"renderType"],["call",["dot",["name","_gl"],"getUniformLocation"],[["dot",["name","_lensFlare"],"program"],["string","renderType"]]]]],["stat",["assign",true,["dot",["dot",["name","_lensFlare"],"uniforms"],"map"],["call",["dot",["name","_gl"],"getUniformLocation"],[["dot",["name","_lensFlare"],"program"],["string","map"]]]]],["stat",["assign",true,["dot",["dot",["name","_lensFlare"],"uniforms"],"occlusionMap"],["call",["dot",["name","_gl"],"getUniformLocation"],[["dot",["name","_lensFlare"],"program"],["string","occlusionMap"]]]]],["stat",["assign",true,["dot",["dot",["name","_lensFlare"],"uniforms"],"opacity"],["call",["dot",["name","_gl"],"getUniformLocation"],[["dot",["name","_lensFlare"],"program"],["string","opacity"]]]]],["stat",["assign",true,["dot",["dot",["name","_lensFlare"],"uniforms"],"color"],["call",["dot",["name","_gl"],"getUniformLocation"],[["dot",["name","_lensFlare"],"program"],["string","color"]]]]],["stat",["assign",true,["dot",["dot",["name","_lensFlare"],"uniforms"],"scale"],["call",["dot",["name","_gl"],"getUniformLocation"],[["dot",["name","_lensFlare"],"program"],["string","scale"]]]]],["stat",["assign",true,["dot",["dot",["name","_lensFlare"],"uniforms"],"rotation"],["call",["dot",["name","_gl"],"getUniformLocation"],[["dot",["name","_lensFlare"],"program"],["string","rotation"]]]]],["stat",["assign",true,["dot",["dot",["name","_lensFlare"],"uniforms"],"screenPosition"],["call",["dot",["name","_gl"],"getUniformLocation"],[["dot",["name","_lensFlare"],"program"],["string","screenPosition"]]]]],["stat",["assign",true,["dot",["name","_lensFlare"],"attributesEnabled"],["name","false"]]]]]]],["stat",["assign",true,["dot",["name","this"],"render"],["function",null,["scene","camera","viewportWidth","viewportHeight"],[["var",[["flares",["dot",["name","scene"],"__webglFlares"]],["nFlares",["dot",["name","flares"],"length"]]]],["if",["unary-prefix","!",["name","nFlares"]],["return",null],null],["var",[["tempPosition",["new",["dot",["name","THREE"],"Vector3"],[]]]]],["var",[["invAspect",["binary","/",["name","viewportHeight"],["name","viewportWidth"]]],["halfViewportWidth",["binary","*",["name","viewportWidth"],["num",0.5]]],["halfViewportHeight",["binary","*",["name","viewportHeight"],["num",0.5]]]]],["var",[["size",["binary","/",["num",16],["name","viewportHeight"]]],["scale",["new",["dot",["name","THREE"],"Vector2"],[["binary","*",["name","size"],["name","invAspect"]],["name","size"]]]]]],["var",[["screenPosition",["new",["dot",["name","THREE"],"Vector3"],[["num",1],["num",1],["num",0]]]],["screenPositionPixels",["new",["dot",["name","THREE"],"Vector2"],[["num",1],["num",1]]]]]],["var",[["uniforms",["dot",["name","_lensFlare"],"uniforms"]],["attributes",["dot",["name","_lensFlare"],"attributes"]]]],["stat",["call",["dot",["name","_gl"],"useProgram"],[["dot",["name","_lensFlare"],"program"]]]],["if",["unary-prefix","!",["dot",["name","_lensFlare"],"attributesEnabled"]],["block",[["stat",["call",["dot",["name","_gl"],"enableVertexAttribArray"],[["dot",["dot",["name","_lensFlare"],"attributes"],"vertex"]]]],["stat",["call",["dot",["name","_gl"],"enableVertexAttribArray"],[["dot",["dot",["name","_lensFlare"],"attributes"],"uv"]]]],["stat",["assign",true,["dot",["name","_lensFlare"],"attributesEnabled"],["name","true"]]]]],null],["stat",["call",["dot",["name","_gl"],"uniform1i"],[["dot",["name","uniforms"],"occlusionMap"],["num",0]]]],["stat",["call",["dot",["name","_gl"],"uniform1i"],[["dot",["name","uniforms"],"map"],["num",1]]]],["stat",["call",["dot",["name","_gl"],"bindBuffer"],[["dot",["name","_gl"],"ARRAY_BUFFER"],["dot",["name","_lensFlare"],"vertexBuffer"]]]],["stat",["call",["dot",["name","_gl"],"vertexAttribPointer"],[["dot",["name","attributes"],"vertex"],["num",2],["dot",["name","_gl"],"FLOAT"],["name","false"],["binary","*",["num",2],["num",8]],["num",0]]]],["stat",["call",["dot",["name","_gl"],"vertexAttribPointer"],[["dot",["name","attributes"],"uv"],["num",2],["dot",["name","_gl"],"FLOAT"],["name","false"],["binary","*",["num",2],["num",8]],["num",8]]]],["stat",["call",["dot",["name","_gl"],"bindBuffer"],[["dot",["name","_gl"],"ELEMENT_ARRAY_BUFFER"],["dot",["name","_lensFlare"],"elementBuffer"]]]],["stat",["call",["dot",["name","_gl"],"disable"],[["dot",["name","_gl"],"CULL_FACE"]]]],["stat",["call",["dot",["name","_gl"],"depthMask"],[["name","false"]]]],["var",[["i"],["j"],["jl"],["flare"],["sprite"]]],["for",["assign",true,["name","i"],["num",0]],["binary","<",["name","i"],["name","nFlares"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","size"],["binary","/",["num",16],["name","viewportHeight"]]]],["stat",["call",["dot",["name","scale"],"set"],[["binary","*",["name","size"],["name","invAspect"]],["name","size"]]]],["stat",["assign",true,["name","flare"],["sub",["name","flares"],["name","i"]]]],["stat",["call",["dot",["name","tempPosition"],"set"],[["sub",["dot",["dot",["name","flare"],"matrixWorld"],"elements"],["num",12]],["sub",["dot",["dot",["name","flare"],"matrixWorld"],"elements"],["num",13]],["sub",["dot",["dot",["name","flare"],"matrixWorld"],"elements"],["num",14]]]]],["stat",["call",["dot",["dot",["name","camera"],"matrixWorldInverse"],"multiplyVector3"],[["name","tempPosition"]]]],["stat",["call",["dot",["dot",["name","camera"],"projectionMatrix"],"multiplyVector3"],[["name","tempPosition"]]]],["stat",["call",["dot",["name","screenPosition"],"copy"],[["name","tempPosition"]]]],["stat",["assign",true,["dot",["name","screenPositionPixels"],"x"],["binary","+",["binary","*",["dot",["name","screenPosition"],"x"],["name","halfViewportWidth"]],["name","halfViewportWidth"]]]],["stat",["assign",true,["dot",["name","screenPositionPixels"],"y"],["binary","+",["binary","*",["dot",["name","screenPosition"],"y"],["name","halfViewportHeight"]],["name","halfViewportHeight"]]]],["if",["binary","||",["dot",["name","_lensFlare"],"hasVertexTexture"],["binary","&&",["binary","&&",["binary","&&",["binary",">",["dot",["name","screenPositionPixels"],"x"],["num",0]],["binary","<",["dot",["name","screenPositionPixels"],"x"],["name","viewportWidth"]]],["binary",">",["dot",["name","screenPositionPixels"],"y"],["num",0]]],["binary","<",["dot",["name","screenPositionPixels"],"y"],["name","viewportHeight"]]]],["block",[["stat",["call",["dot",["name","_gl"],"activeTexture"],[["dot",["name","_gl"],"TEXTURE1"]]]],["stat",["call",["dot",["name","_gl"],"bindTexture"],[["dot",["name","_gl"],"TEXTURE_2D"],["dot",["name","_lensFlare"],"tempTexture"]]]],["stat",["call",["dot",["name","_gl"],"copyTexImage2D"],[["dot",["name","_gl"],"TEXTURE_2D"],["num",0],["dot",["name","_gl"],"RGB"],["binary","-",["dot",["name","screenPositionPixels"],"x"],["num",8]],["binary","-",["dot",["name","screenPositionPixels"],"y"],["num",8]],["num",16],["num",16],["num",0]]]],["stat",["call",["dot",["name","_gl"],"uniform1i"],[["dot",["name","uniforms"],"renderType"],["num",0]]]],["stat",["call",["dot",["name","_gl"],"uniform2f"],[["dot",["name","uniforms"],"scale"],["dot",["name","scale"],"x"],["dot",["name","scale"],"y"]]]],["stat",["call",["dot",["name","_gl"],"uniform3f"],[["dot",["name","uniforms"],"screenPosition"],["dot",["name","screenPosition"],"x"],["dot",["name","screenPosition"],"y"],["dot",["name","screenPosition"],"z"]]]],["stat",["call",["dot",["name","_gl"],"disable"],[["dot",["name","_gl"],"BLEND"]]]],["stat",["call",["dot",["name","_gl"],"enable"],[["dot",["name","_gl"],"DEPTH_TEST"]]]],["stat",["call",["dot",["name","_gl"],"drawElements"],[["dot",["name","_gl"],"TRIANGLES"],["num",6],["dot",["name","_gl"],"UNSIGNED_SHORT"],["num",0]]]],["stat",["call",["dot",["name","_gl"],"activeTexture"],[["dot",["name","_gl"],"TEXTURE0"]]]],["stat",["call",["dot",["name","_gl"],"bindTexture"],[["dot",["name","_gl"],"TEXTURE_2D"],["dot",["name","_lensFlare"],"occlusionTexture"]]]],["stat",["call",["dot",["name","_gl"],"copyTexImage2D"],[["dot",["name","_gl"],"TEXTURE_2D"],["num",0],["dot",["name","_gl"],"RGBA"],["binary","-",["dot",["name","screenPositionPixels"],"x"],["num",8]],["binary","-",["dot",["name","screenPositionPixels"],"y"],["num",8]],["num",16],["num",16],["num",0]]]],["stat",["call",["dot",["name","_gl"],"uniform1i"],[["dot",["name","uniforms"],"renderType"],["num",1]]]],["stat",["call",["dot",["name","_gl"],"disable"],[["dot",["name","_gl"],"DEPTH_TEST"]]]],["stat",["call",["dot",["name","_gl"],"activeTexture"],[["dot",["name","_gl"],"TEXTURE1"]]]],["stat",["call",["dot",["name","_gl"],"bindTexture"],[["dot",["name","_gl"],"TEXTURE_2D"],["dot",["name","_lensFlare"],"tempTexture"]]]],["stat",["call",["dot",["name","_gl"],"drawElements"],[["dot",["name","_gl"],"TRIANGLES"],["num",6],["dot",["name","_gl"],"UNSIGNED_SHORT"],["num",0]]]],["stat",["call",["dot",["dot",["name","flare"],"positionScreen"],"copy"],[["name","screenPosition"]]]],["if",["dot",["name","flare"],"customUpdateCallback"],["block",[["stat",["call",["dot",["name","flare"],"customUpdateCallback"],[["name","flare"]]]]]],["block",[["stat",["call",["dot",["name","flare"],"updateLensFlares"],[]]]]]],["stat",["call",["dot",["name","_gl"],"uniform1i"],[["dot",["name","uniforms"],"renderType"],["num",2]]]],["stat",["call",["dot",["name","_gl"],"enable"],[["dot",["name","_gl"],"BLEND"]]]],["for",["seq",["assign",true,["name","j"],["num",0]],["assign",true,["name","jl"],["dot",["dot",["name","flare"],"lensFlares"],"length"]]],["binary","<",["name","j"],["name","jl"]],["unary-postfix","++",["name","j"]],["block",[["stat",["assign",true,["name","sprite"],["sub",["dot",["name","flare"],"lensFlares"],["name","j"]]]],["if",["binary","&&",["binary",">",["dot",["name","sprite"],"opacity"],["num",0.001]],["binary",">",["dot",["name","sprite"],"scale"],["num",0.001]]],["block",[["stat",["assign",true,["dot",["name","screenPosition"],"x"],["dot",["name","sprite"],"x"]]],["stat",["assign",true,["dot",["name","screenPosition"],"y"],["dot",["name","sprite"],"y"]]],["stat",["assign",true,["dot",["name","screenPosition"],"z"],["dot",["name","sprite"],"z"]]],["stat",["assign",true,["name","size"],["binary","/",["binary","*",["dot",["name","sprite"],"size"],["dot",["name","sprite"],"scale"]],["name","viewportHeight"]]]],["stat",["assign",true,["dot",["name","scale"],"x"],["binary","*",["name","size"],["name","invAspect"]]]],["stat",["assign",true,["dot",["name","scale"],"y"],["name","size"]]],["stat",["call",["dot",["name","_gl"],"uniform3f"],[["dot",["name","uniforms"],"screenPosition"],["dot",["name","screenPosition"],"x"],["dot",["name","screenPosition"],"y"],["dot",["name","screenPosition"],"z"]]]],["stat",["call",["dot",["name","_gl"],"uniform2f"],[["dot",["name","uniforms"],"scale"],["dot",["name","scale"],"x"],["dot",["name","scale"],"y"]]]],["stat",["call",["dot",["name","_gl"],"uniform1f"],[["dot",["name","uniforms"],"rotation"],["dot",["name","sprite"],"rotation"]]]],["stat",["call",["dot",["name","_gl"],"uniform1f"],[["dot",["name","uniforms"],"opacity"],["dot",["name","sprite"],"opacity"]]]],["stat",["call",["dot",["name","_gl"],"uniform3f"],[["dot",["name","uniforms"],"color"],["dot",["dot",["name","sprite"],"color"],"r"],["dot",["dot",["name","sprite"],"color"],"g"],["dot",["dot",["name","sprite"],"color"],"b"]]]],["stat",["call",["dot",["name","_renderer"],"setBlending"],[["dot",["name","sprite"],"blending"],["dot",["name","sprite"],"blendEquation"],["dot",["name","sprite"],"blendSrc"],["dot",["name","sprite"],"blendDst"]]]],["stat",["call",["dot",["name","_renderer"],"setTexture"],[["dot",["name","sprite"],"texture"],["num",1]]]],["stat",["call",["dot",["name","_gl"],"drawElements"],[["dot",["name","_gl"],"TRIANGLES"],["num",6],["dot",["name","_gl"],"UNSIGNED_SHORT"],["num",0]]]]]],null]]]]]],null]]]],["stat",["call",["dot",["name","_gl"],"enable"],[["dot",["name","_gl"],"CULL_FACE"]]]],["stat",["call",["dot",["name","_gl"],"enable"],[["dot",["name","_gl"],"DEPTH_TEST"]]]],["stat",["call",["dot",["name","_gl"],"depthMask"],[["name","true"]]]]]]]],["defun","createProgram",["shader"],[["var",[["program",["call",["dot",["name","_gl"],"createProgram"],[]]]]],["var",[["fragmentShader",["call",["dot",["name","_gl"],"createShader"],[["dot",["name","_gl"],"FRAGMENT_SHADER"]]]]]],["var",[["vertexShader",["call",["dot",["name","_gl"],"createShader"],[["dot",["name","_gl"],"VERTEX_SHADER"]]]]]],["stat",["call",["dot",["name","_gl"],"shaderSource"],[["name","fragmentShader"],["dot",["name","shader"],"fragmentShader"]]]],["stat",["call",["dot",["name","_gl"],"shaderSource"],[["name","vertexShader"],["dot",["name","shader"],"vertexShader"]]]],["stat",["call",["dot",["name","_gl"],"compileShader"],[["name","fragmentShader"]]]],["stat",["call",["dot",["name","_gl"],"compileShader"],[["name","vertexShader"]]]],["stat",["call",["dot",["name","_gl"],"attachShader"],[["name","program"],["name","fragmentShader"]]]],["stat",["call",["dot",["name","_gl"],"attachShader"],[["name","program"],["name","vertexShader"]]]],["stat",["call",["dot",["name","_gl"],"linkProgram"],[["name","program"]]]],["return",["name","program"]]]],["block"]]]]],["stat",["assign",true,["dot",["name","THREE"],"ShadowMapPlugin"],["function",null,[],[["var",[["_gl"],["_renderer"],["_depthMaterial"],["_depthMaterialMorph"],["_frustum",["new",["dot",["name","THREE"],"Frustum"],[]]],["_projScreenMatrix",["new",["dot",["name","THREE"],"Matrix4"],[]]],["_min",["new",["dot",["name","THREE"],"Vector3"],[]]],["_max",["new",["dot",["name","THREE"],"Vector3"],[]]]]],["stat",["assign",true,["dot",["name","this"],"init"],["function",null,["renderer"],[["stat",["assign",true,["name","_gl"],["dot",["name","renderer"],"context"]]],["stat",["assign",true,["name","_renderer"],["name","renderer"]]],["var",[["depthShader",["sub",["dot",["name","THREE"],"ShaderLib"],["string","depthRGBA"]]]]],["var",[["depthUniforms",["call",["dot",["dot",["name","THREE"],"UniformsUtils"],"clone"],[["dot",["name","depthShader"],"uniforms"]]]]]],["stat",["assign",true,["name","_depthMaterial"],["new",["dot",["name","THREE"],"ShaderMaterial"],[["object",[["fragmentShader",["dot",["name","depthShader"],"fragmentShader"]],["vertexShader",["dot",["name","depthShader"],"vertexShader"]],["uniforms",["name","depthUniforms"]]]]]]]],["stat",["assign",true,["name","_depthMaterialMorph"],["new",["dot",["name","THREE"],"ShaderMaterial"],[["object",[["fragmentShader",["dot",["name","depthShader"],"fragmentShader"]],["vertexShader",["dot",["name","depthShader"],"vertexShader"]],["uniforms",["name","depthUniforms"]],["morphTargets",["name","true"]]]]]]]],["stat",["assign",true,["dot",["name","_depthMaterial"],"_shadowPass"],["name","true"]]],["stat",["assign",true,["dot",["name","_depthMaterialMorph"],"_shadowPass"],["name","true"]]]]]]],["stat",["assign",true,["dot",["name","this"],"render"],["function",null,["scene","camera"],[["if",["unary-prefix","!",["binary","&&",["dot",["name","_renderer"],"shadowMapEnabled"],["dot",["name","_renderer"],"shadowMapAutoUpdate"]]],["return",null],null],["stat",["call",["dot",["name","this"],"update"],[["name","scene"],["name","camera"]]]]]]]],["stat",["assign",true,["dot",["name","this"],"update"],["function",null,["scene","camera"],[["var",[["i"],["il"],["j"],["jl"],["n"],["shadowMap"],["shadowMatrix"],["shadowCamera"],["program"],["buffer"],["material"],["webglObject"],["object"],["light"],["renderList"],["lights",["array",[]]],["k",["num",0]],["fog",["name","null"]]]],["stat",["call",["dot",["name","_gl"],"clearColor"],[["num",1],["num",1],["num",1],["num",1]]]],["stat",["call",["dot",["name","_gl"],"disable"],[["dot",["name","_gl"],"BLEND"]]]],["stat",["call",["dot",["name","_gl"],"enable"],[["dot",["name","_gl"],"CULL_FACE"]]]],["if",["dot",["name","_renderer"],"shadowMapCullFrontFaces"],["block",[["stat",["call",["dot",["name","_gl"],"cullFace"],[["dot",["name","_gl"],"FRONT"]]]]]],["block",[["stat",["call",["dot",["name","_gl"],"cullFace"],[["dot",["name","_gl"],"BACK"]]]]]]],["stat",["call",["dot",["name","_renderer"],"setDepthTest"],[["name","true"]]]],["for",["seq",["assign",true,["name","i"],["num",0]],["assign",true,["name","il"],["dot",["dot",["name","scene"],"__lights"],"length"]]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","light"],["sub",["dot",["name","scene"],"__lights"],["name","i"]]]],["if",["unary-prefix","!",["dot",["name","light"],"castShadow"]],["continue",null],null],["if",["binary","&&",["binary","instanceof",["name","light"],["dot",["name","THREE"],"DirectionalLight"]],["dot",["name","light"],"shadowCascade"]],["block",[["for",["assign",true,["name","n"],["num",0]],["binary","<",["name","n"],["dot",["name","light"],"shadowCascadeCount"]],["unary-postfix","++",["name","n"]],["block",[["var",[["virtualLight"]]],["if",["unary-prefix","!",["sub",["dot",["name","light"],"shadowCascadeArray"],["name","n"]]],["block",[["stat",["assign",true,["name","virtualLight"],["call",["name","createVirtualLight"],[["name","light"],["name","n"]]]]],["stat",["assign",true,["dot",["name","virtualLight"],"originalCamera"],["name","camera"]]],["var",[["gyro",["new",["dot",["name","THREE"],"Gyroscope"],[]]]]],["stat",["assign",true,["dot",["name","gyro"],"position"],["dot",["name","light"],"shadowCascadeOffset"]]],["stat",["call",["dot",["name","gyro"],"add"],[["name","virtualLight"]]]],["stat",["call",["dot",["name","gyro"],"add"],[["dot",["name","virtualLight"],"target"]]]],["stat",["call",["dot",["name","camera"],"add"],[["name","gyro"]]]],["stat",["assign",true,["sub",["dot",["name","light"],"shadowCascadeArray"],["name","n"]],["name","virtualLight"]]],["stat",["call",["dot",["name","console"],"log"],[["string","Created virtualLight"],["name","virtualLight"]]]]]],["block",[["stat",["assign",true,["name","virtualLight"],["sub",["dot",["name","light"],"shadowCascadeArray"],["name","n"]]]]]]],["stat",["call",["name","updateVirtualLight"],[["name","light"],["name","n"]]]],["stat",["assign",true,["sub",["name","lights"],["name","k"]],["name","virtualLight"]]],["stat",["unary-postfix","++",["name","k"]]]]]]]],["block",[["stat",["assign",true,["sub",["name","lights"],["name","k"]],["name","light"]]],["stat",["unary-postfix","++",["name","k"]]]]]]]]],["for",["seq",["assign",true,["name","i"],["num",0]],["assign",true,["name","il"],["dot",["name","lights"],"length"]]],["binary","<",["name","i"],["name","il"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","light"],["sub",["name","lights"],["name","i"]]]],["if",["unary-prefix","!",["dot",["name","light"],"shadowMap"]],["block",[["var",[["pars",["object",[["minFilter",["dot",["name","THREE"],"LinearFilter"]],["magFilter",["dot",["name","THREE"],"LinearFilter"]],["format",["dot",["name","THREE"],"RGBAFormat"]]]]]]],["stat",["assign",true,["dot",["name","light"],"shadowMap"],["new",["dot",["name","THREE"],"WebGLRenderTarget"],[["dot",["name","light"],"shadowMapWidth"],["dot",["name","light"],"shadowMapHeight"],["name","pars"]]]]],["stat",["assign",true,["dot",["name","light"],"shadowMapSize"],["new",["dot",["name","THREE"],"Vector2"],[["dot",["name","light"],"shadowMapWidth"],["dot",["name","light"],"shadowMapHeight"]]]]],["stat",["assign",true,["dot",["name","light"],"shadowMatrix"],["new",["dot",["name","THREE"],"Matrix4"],[]]]]]],null],["if",["unary-prefix","!",["dot",["name","light"],"shadowCamera"]],["block",[["if",["binary","instanceof",["name","light"],["dot",["name","THREE"],"SpotLight"]],["block",[["stat",["assign",true,["dot",["name","light"],"shadowCamera"],["new",["dot",["name","THREE"],"PerspectiveCamera"],[["dot",["name","light"],"shadowCameraFov"],["binary","/",["dot",["name","light"],"shadowMapWidth"],["dot",["name","light"],"shadowMapHeight"]],["dot",["name","light"],"shadowCameraNear"],["dot",["name","light"],"shadowCameraFar"]]]]]]],["if",["binary","instanceof",["name","light"],["dot",["name","THREE"],"DirectionalLight"]],["block",[["stat",["assign",true,["dot",["name","light"],"shadowCamera"],["new",["dot",["name","THREE"],"OrthographicCamera"],[["dot",["name","light"],"shadowCameraLeft"],["dot",["name","light"],"shadowCameraRight"],["dot",["name","light"],"shadowCameraTop"],["dot",["name","light"],"shadowCameraBottom"],["dot",["name","light"],"shadowCameraNear"],["dot",["name","light"],"shadowCameraFar"]]]]]]],["block",[["stat",["call",["dot",["name","console"],"error"],[["string","Unsupported light type for shadow"]]]],["continue",null]]]]],["stat",["call",["dot",["name","scene"],"add"],[["dot",["name","light"],"shadowCamera"]]]],["if",["dot",["name","_renderer"],"autoUpdateScene"],["stat",["call",["dot",["name","scene"],"updateMatrixWorld"],[]]],null]]],null],["if",["binary","&&",["dot",["name","light"],"shadowCameraVisible"],["unary-prefix","!",["dot",["name","light"],"cameraHelper"]]],["block",[["stat",["assign",true,["dot",["name","light"],"cameraHelper"],["new",["dot",["name","THREE"],"CameraHelper"],[["dot",["name","light"],"shadowCamera"]]]]],["stat",["call",["dot",["dot",["name","light"],"shadowCamera"],"add"],[["dot",["name","light"],"cameraHelper"]]]]]],null],["if",["binary","&&",["dot",["name","light"],"isVirtual"],["binary","==",["dot",["name","virtualLight"],"originalCamera"],["name","camera"]]],["block",[["stat",["call",["name","updateShadowCamera"],[["name","camera"],["name","light"]]]]]],null],["stat",["assign",true,["name","shadowMap"],["dot",["name","light"],"shadowMap"]]],["stat",["assign",true,["name","shadowMatrix"],["dot",["name","light"],"shadowMatrix"]]],["stat",["assign",true,["name","shadowCamera"],["dot",["name","light"],"shadowCamera"]]],["stat",["call",["dot",["dot",["name","shadowCamera"],"position"],"copy"],[["call",["dot",["dot",["name","light"],"matrixWorld"],"getPosition"],[]]]]],["stat",["call",["dot",["name","shadowCamera"],"lookAt"],[["call",["dot",["dot",["dot",["name","light"],"target"],"matrixWorld"],"getPosition"],[]]]]],["stat",["call",["dot",["name","shadowCamera"],"updateMatrixWorld"],[]]],["stat",["call",["dot",["dot",["name","shadowCamera"],"matrixWorldInverse"],"getInverse"],[["dot",["name","shadowCamera"],"matrixWorld"]]]],["if",["dot",["name","light"],"cameraHelper"],["stat",["assign",true,["dot",["dot",["dot",["name","light"],"cameraHelper"],"lines"],"visible"],["dot",["name","light"],"shadowCameraVisible"]]],null],["if",["dot",["name","light"],"shadowCameraVisible"],["stat",["call",["dot",["dot",["name","light"],"cameraHelper"],"update"],[]]],null],["stat",["call",["dot",["name","shadowMatrix"],"set"],[["num",0.5],["num",0],["num",0],["num",0.5],["num",0],["num",0.5],["num",0],["num",0.5],["num",0],["num",0],["num",0.5],["num",0.5],["num",0],["num",0],["num",0],["num",1]]]],["stat",["call",["dot",["name","shadowMatrix"],"multiplySelf"],[["dot",["name","shadowCamera"],"projectionMatrix"]]]],["stat",["call",["dot",["name","shadowMatrix"],"multiplySelf"],[["dot",["name","shadowCamera"],"matrixWorldInverse"]]]],["if",["unary-prefix","!",["dot",["name","shadowCamera"],"_viewMatrixArray"]],["stat",["assign",true,["dot",["name","shadowCamera"],"_viewMatrixArray"],["new",["name","Float32Array"],[["num",16]]]]],null],["if",["unary-prefix","!",["dot",["name","shadowCamera"],"_projectionMatrixArray"]],["stat",["assign",true,["dot",["name","shadowCamera"],"_projectionMatrixArray"],["new",["name","Float32Array"],[["num",16]]]]],null],["stat",["call",["dot",["dot",["name","shadowCamera"],"matrixWorldInverse"],"flattenToArray"],[["dot",["name","shadowCamera"],"_viewMatrixArray"]]]],["stat",["call",["dot",["dot",["name","shadowCamera"],"projectionMatrix"],"flattenToArray"],[["dot",["name","shadowCamera"],"_projectionMatrixArray"]]]],["stat",["call",["dot",["name","_projScreenMatrix"],"multiply"],[["dot",["name","shadowCamera"],"projectionMatrix"],["dot",["name","shadowCamera"],"matrixWorldInverse"]]]],["stat",["call",["dot",["name","_frustum"],"setFromMatrix"],[["name","_projScreenMatrix"]]]],["stat",["call",["dot",["name","_renderer"],"setRenderTarget"],[["name","shadowMap"]]]],["stat",["call",["dot",["name","_renderer"],"clear"],[]]],["stat",["assign",true,["name","renderList"],["dot",["name","scene"],"__webglObjects"]]],["for",["seq",["assign",true,["name","j"],["num",0]],["assign",true,["name","jl"],["dot",["name","renderList"],"length"]]],["binary","<",["name","j"],["name","jl"]],["unary-postfix","++",["name","j"]],["block",[["stat",["assign",true,["name","webglObject"],["sub",["name","renderList"],["name","j"]]]],["stat",["assign",true,["name","object"],["dot",["name","webglObject"],"object"]]],["stat",["assign",true,["dot",["name","webglObject"],"render"],["name","false"]]],["if",["binary","&&",["dot",["name","object"],"visible"],["dot",["name","object"],"castShadow"]],["block",[["if",["binary","||",["binary","||",["unary-prefix","!",["binary","instanceof",["name","object"],["dot",["name","THREE"],"Mesh"]]],["unary-prefix","!",["dot",["name","object"],"frustumCulled"]]],["call",["dot",["name","_frustum"],"contains"],[["name","object"]]]],["block",[["stat",["call",["dot",["dot",["name","object"],"_modelViewMatrix"],"multiply"],[["dot",["name","shadowCamera"],"matrixWorldInverse"],["dot",["name","object"],"matrixWorld"]]]],["stat",["assign",true,["dot",["name","webglObject"],"render"],["name","true"]]]]],null]]],null]]]],["for",["seq",["assign",true,["name","j"],["num",0]],["assign",true,["name","jl"],["dot",["name","renderList"],"length"]]],["binary","<",["name","j"],["name","jl"]],["unary-postfix","++",["name","j"]],["block",[["stat",["assign",true,["name","webglObject"],["sub",["name","renderList"],["name","j"]]]],["if",["dot",["name","webglObject"],"render"],["block",[["stat",["assign",true,["name","object"],["dot",["name","webglObject"],"object"]]],["stat",["assign",true,["name","buffer"],["dot",["name","webglObject"],"buffer"]]],["if",["dot",["name","object"],"customDepthMaterial"],["block",[["stat",["assign",true,["name","material"],["dot",["name","object"],"customDepthMaterial"]]]]],["if",["dot",["dot",["dot",["name","object"],"geometry"],"morphTargets"],"length"],["block",[["stat",["assign",true,["name","material"],["name","_depthMaterialMorph"]]]]],["block",[["stat",["assign",true,["name","material"],["name","_depthMaterial"]]]]]]],["if",["binary","instanceof",["name","buffer"],["dot",["name","THREE"],"BufferGeometry"]],["block",[["stat",["call",["dot",["name","_renderer"],"renderBufferDirect"],[["name","shadowCamera"],["dot",["name","scene"],"__lights"],["name","fog"],["name","material"],["name","buffer"],["name","object"]]]]]],["block",[["stat",["call",["dot",["name","_renderer"],"renderBuffer"],[["name","shadowCamera"],["dot",["name","scene"],"__lights"],["name","fog"],["name","material"],["name","buffer"],["name","object"]]]]]]]]],null]]]],["stat",["assign",true,["name","renderList"],["dot",["name","scene"],"__webglObjectsImmediate"]]],["for",["seq",["assign",true,["name","j"],["num",0]],["assign",true,["name","jl"],["dot",["name","renderList"],"length"]]],["binary","<",["name","j"],["name","jl"]],["unary-postfix","++",["name","j"]],["block",[["stat",["assign",true,["name","webglObject"],["sub",["name","renderList"],["name","j"]]]],["stat",["assign",true,["name","object"],["dot",["name","webglObject"],"object"]]],["if",["binary","&&",["dot",["name","object"],"visible"],["dot",["name","object"],"castShadow"]],["block",[["stat",["call",["dot",["dot",["name","object"],"_modelViewMatrix"],"multiply"],[["dot",["name","shadowCamera"],"matrixWorldInverse"],["dot",["name","object"],"matrixWorld"]]]],["stat",["call",["dot",["name","_renderer"],"renderImmediateObject"],[["name","shadowCamera"],["dot",["name","scene"],"__lights"],["name","fog"],["name","_depthMaterial"],["name","object"]]]]]],null]]]]]]],["var",[["clearColor",["call",["dot",["name","_renderer"],"getClearColor"],[]]],["clearAlpha",["call",["dot",["name","_renderer"],"getClearAlpha"],[]]]]],["stat",["call",["dot",["name","_gl"],"clearColor"],[["dot",["name","clearColor"],"r"],["dot",["name","clearColor"],"g"],["dot",["name","clearColor"],"b"],["name","clearAlpha"]]]],["stat",["call",["dot",["name","_gl"],"enable"],[["dot",["name","_gl"],"BLEND"]]]],["if",["dot",["name","_renderer"],"shadowMapCullFrontFaces"],["block",[["stat",["call",["dot",["name","_gl"],"cullFace"],[["dot",["name","_gl"],"BACK"]]]]]],null]]]]],["defun","createVirtualLight",["light","cascade"],[["var",[["virtualLight",["new",["dot",["name","THREE"],"DirectionalLight"],[]]]]],["stat",["assign",true,["dot",["name","virtualLight"],"isVirtual"],["name","true"]]],["stat",["assign",true,["dot",["name","virtualLight"],"onlyShadow"],["name","true"]]],["stat",["assign",true,["dot",["name","virtualLight"],"castShadow"],["name","true"]]],["stat",["assign",true,["dot",["name","virtualLight"],"shadowCameraNear"],["dot",["name","light"],"shadowCameraNear"]]],["stat",["assign",true,["dot",["name","virtualLight"],"shadowCameraFar"],["dot",["name","light"],"shadowCameraFar"]]],["stat",["assign",true,["dot",["name","virtualLight"],"shadowCameraLeft"],["dot",["name","light"],"shadowCameraLeft"]]],["stat",["assign",true,["dot",["name","virtualLight"],"shadowCameraRight"],["dot",["name","light"],"shadowCameraRight"]]],["stat",["assign",true,["dot",["name","virtualLight"],"shadowCameraBottom"],["dot",["name","light"],"shadowCameraBottom"]]],["stat",["assign",true,["dot",["name","virtualLight"],"shadowCameraTop"],["dot",["name","light"],"shadowCameraTop"]]],["stat",["assign",true,["dot",["name","virtualLight"],"shadowCameraVisible"],["dot",["name","light"],"shadowCameraVisible"]]],["stat",["assign",true,["dot",["name","virtualLight"],"shadowDarkness"],["dot",["name","light"],"shadowDarkness"]]],["stat",["assign",true,["dot",["name","virtualLight"],"shadowBias"],["sub",["dot",["name","light"],"shadowCascadeBias"],["name","cascade"]]]],["stat",["assign",true,["dot",["name","virtualLight"],"shadowMapWidth"],["sub",["dot",["name","light"],"shadowCascadeWidth"],["name","cascade"]]]],["stat",["assign",true,["dot",["name","virtualLight"],"shadowMapHeight"],["sub",["dot",["name","light"],"shadowCascadeHeight"],["name","cascade"]]]],["stat",["assign",true,["dot",["name","virtualLight"],"pointsWorld"],["array",[]]]],["stat",["assign",true,["dot",["name","virtualLight"],"pointsFrustum"],["array",[]]]],["var",[["pointsWorld",["dot",["name","virtualLight"],"pointsWorld"]],["pointsFrustum",["dot",["name","virtualLight"],"pointsFrustum"]]]],["for",["var",[["i",["num",0]]]],["binary","<",["name","i"],["num",8]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["sub",["name","pointsWorld"],["name","i"]],["new",["dot",["name","THREE"],"Vector3"],[]]]],["stat",["assign",true,["sub",["name","pointsFrustum"],["name","i"]],["new",["dot",["name","THREE"],"Vector3"],[]]]]]]],["var",[["nearZ",["sub",["dot",["name","light"],"shadowCascadeNearZ"],["name","cascade"]]]]],["var",[["farZ",["sub",["dot",["name","light"],"shadowCascadeFarZ"],["name","cascade"]]]]],["stat",["call",["dot",["sub",["name","pointsFrustum"],["num",0]],"set"],[["unary-prefix","-",["num",1]],["unary-prefix","-",["num",1]],["name","nearZ"]]]],["stat",["call",["dot",["sub",["name","pointsFrustum"],["num",1]],"set"],[["num",1],["unary-prefix","-",["num",1]],["name","nearZ"]]]],["stat",["call",["dot",["sub",["name","pointsFrustum"],["num",2]],"set"],[["unary-prefix","-",["num",1]],["num",1],["name","nearZ"]]]],["stat",["call",["dot",["sub",["name","pointsFrustum"],["num",3]],"set"],[["num",1],["num",1],["name","nearZ"]]]],["stat",["call",["dot",["sub",["name","pointsFrustum"],["num",4]],"set"],[["unary-prefix","-",["num",1]],["unary-prefix","-",["num",1]],["name","farZ"]]]],["stat",["call",["dot",["sub",["name","pointsFrustum"],["num",5]],"set"],[["num",1],["unary-prefix","-",["num",1]],["name","farZ"]]]],["stat",["call",["dot",["sub",["name","pointsFrustum"],["num",6]],"set"],[["unary-prefix","-",["num",1]],["num",1],["name","farZ"]]]],["stat",["call",["dot",["sub",["name","pointsFrustum"],["num",7]],"set"],[["num",1],["num",1],["name","farZ"]]]],["return",["name","virtualLight"]]]],["defun","updateVirtualLight",["light","cascade"],[["var",[["virtualLight",["sub",["dot",["name","light"],"shadowCascadeArray"],["name","cascade"]]]]],["stat",["call",["dot",["dot",["name","virtualLight"],"position"],"copy"],[["dot",["name","light"],"position"]]]],["stat",["call",["dot",["dot",["dot",["name","virtualLight"],"target"],"position"],"copy"],[["dot",["dot",["name","light"],"target"],"position"]]]],["stat",["call",["dot",["name","virtualLight"],"lookAt"],[["dot",["name","virtualLight"],"target"]]]],["stat",["assign",true,["dot",["name","virtualLight"],"shadowCameraVisible"],["dot",["name","light"],"shadowCameraVisible"]]],["stat",["assign",true,["dot",["name","virtualLight"],"shadowDarkness"],["dot",["name","light"],"shadowDarkness"]]],["stat",["assign",true,["dot",["name","virtualLight"],"shadowBias"],["sub",["dot",["name","light"],"shadowCascadeBias"],["name","cascade"]]]],["var",[["nearZ",["sub",["dot",["name","light"],"shadowCascadeNearZ"],["name","cascade"]]]]],["var",[["farZ",["sub",["dot",["name","light"],"shadowCascadeFarZ"],["name","cascade"]]]]],["var",[["pointsFrustum",["dot",["name","virtualLight"],"pointsFrustum"]]]],["stat",["assign",true,["dot",["sub",["name","pointsFrustum"],["num",0]],"z"],["name","nearZ"]]],["stat",["assign",true,["dot",["sub",["name","pointsFrustum"],["num",1]],"z"],["name","nearZ"]]],["stat",["assign",true,["dot",["sub",["name","pointsFrustum"],["num",2]],"z"],["name","nearZ"]]],["stat",["assign",true,["dot",["sub",["name","pointsFrustum"],["num",3]],"z"],["name","nearZ"]]],["stat",["assign",true,["dot",["sub",["name","pointsFrustum"],["num",4]],"z"],["name","farZ"]]],["stat",["assign",true,["dot",["sub",["name","pointsFrustum"],["num",5]],"z"],["name","farZ"]]],["stat",["assign",true,["dot",["sub",["name","pointsFrustum"],["num",6]],"z"],["name","farZ"]]],["stat",["assign",true,["dot",["sub",["name","pointsFrustum"],["num",7]],"z"],["name","farZ"]]]]],["defun","updateShadowCamera",["camera","light"],[["var",[["shadowCamera",["dot",["name","light"],"shadowCamera"]],["pointsFrustum",["dot",["name","light"],"pointsFrustum"]],["pointsWorld",["dot",["name","light"],"pointsWorld"]]]],["stat",["call",["dot",["name","_min"],"set"],[["name","Infinity"],["name","Infinity"],["name","Infinity"]]]],["stat",["call",["dot",["name","_max"],"set"],[["unary-prefix","-",["name","Infinity"]],["unary-prefix","-",["name","Infinity"]],["unary-prefix","-",["name","Infinity"]]]]],["for",["var",[["i",["num",0]]]],["binary","<",["name","i"],["num",8]],["unary-postfix","++",["name","i"]],["block",[["var",[["p",["sub",["name","pointsWorld"],["name","i"]]]]],["stat",["call",["dot",["name","p"],"copy"],[["sub",["name","pointsFrustum"],["name","i"]]]]],["stat",["call",["dot",["dot",["dot",["name","THREE"],"ShadowMapPlugin"],"__projector"],"unprojectVector"],[["name","p"],["name","camera"]]]],["stat",["call",["dot",["dot",["name","shadowCamera"],"matrixWorldInverse"],"multiplyVector3"],[["name","p"]]]],["if",["binary","<",["dot",["name","p"],"x"],["dot",["name","_min"],"x"]],["stat",["assign",true,["dot",["name","_min"],"x"],["dot",["name","p"],"x"]]],null],["if",["binary",">",["dot",["name","p"],"x"],["dot",["name","_max"],"x"]],["stat",["assign",true,["dot",["name","_max"],"x"],["dot",["name","p"],"x"]]],null],["if",["binary","<",["dot",["name","p"],"y"],["dot",["name","_min"],"y"]],["stat",["assign",true,["dot",["name","_min"],"y"],["dot",["name","p"],"y"]]],null],["if",["binary",">",["dot",["name","p"],"y"],["dot",["name","_max"],"y"]],["stat",["assign",true,["dot",["name","_max"],"y"],["dot",["name","p"],"y"]]],null],["if",["binary","<",["dot",["name","p"],"z"],["dot",["name","_min"],"z"]],["stat",["assign",true,["dot",["name","_min"],"z"],["dot",["name","p"],"z"]]],null],["if",["binary",">",["dot",["name","p"],"z"],["dot",["name","_max"],"z"]],["stat",["assign",true,["dot",["name","_max"],"z"],["dot",["name","p"],"z"]]],null]]]],["stat",["assign",true,["dot",["name","shadowCamera"],"left"],["dot",["name","_min"],"x"]]],["stat",["assign",true,["dot",["name","shadowCamera"],"right"],["dot",["name","_max"],"x"]]],["stat",["assign",true,["dot",["name","shadowCamera"],"top"],["dot",["name","_max"],"y"]]],["stat",["assign",true,["dot",["name","shadowCamera"],"bottom"],["dot",["name","_min"],"y"]]],["stat",["call",["dot",["name","shadowCamera"],"updateProjectionMatrix"],[]]]]]]]]],["stat",["assign",true,["dot",["dot",["name","THREE"],"ShadowMapPlugin"],"__projector"],["new",["dot",["name","THREE"],"Projector"],[]]]],["stat",["assign",true,["dot",["name","THREE"],"SpritePlugin"],["function",null,[],[["var",[["_gl"],["_renderer"],["_sprite",["object",[]]]]],["stat",["assign",true,["dot",["name","this"],"init"],["function",null,["renderer"],[["stat",["assign",true,["name","_gl"],["dot",["name","renderer"],"context"]]],["stat",["assign",true,["name","_renderer"],["name","renderer"]]],["stat",["assign",true,["dot",["name","_sprite"],"vertices"],["new",["name","Float32Array"],[["binary","+",["num",8],["num",8]]]]]],["stat",["assign",true,["dot",["name","_sprite"],"faces"],["new",["name","Uint16Array"],[["num",6]]]]],["var",[["i",["num",0]]]],["stat",["assign",true,["sub",["dot",["name","_sprite"],"vertices"],["unary-postfix","++",["name","i"]]],["unary-prefix","-",["num",1]]]],["stat",["assign",true,["sub",["dot",["name","_sprite"],"vertices"],["unary-postfix","++",["name","i"]]],["unary-prefix","-",["num",1]]]],["stat",["assign",true,["sub",["dot",["name","_sprite"],"vertices"],["unary-postfix","++",["name","i"]]],["num",0]]],["stat",["assign",true,["sub",["dot",["name","_sprite"],"vertices"],["unary-postfix","++",["name","i"]]],["num",1]]],["stat",["assign",true,["sub",["dot",["name","_sprite"],"vertices"],["unary-postfix","++",["name","i"]]],["num",1]]],["stat",["assign",true,["sub",["dot",["name","_sprite"],"vertices"],["unary-postfix","++",["name","i"]]],["unary-prefix","-",["num",1]]]],["stat",["assign",true,["sub",["dot",["name","_sprite"],"vertices"],["unary-postfix","++",["name","i"]]],["num",1]]],["stat",["assign",true,["sub",["dot",["name","_sprite"],"vertices"],["unary-postfix","++",["name","i"]]],["num",1]]],["stat",["assign",true,["sub",["dot",["name","_sprite"],"vertices"],["unary-postfix","++",["name","i"]]],["num",1]]],["stat",["assign",true,["sub",["dot",["name","_sprite"],"vertices"],["unary-postfix","++",["name","i"]]],["num",1]]],["stat",["assign",true,["sub",["dot",["name","_sprite"],"vertices"],["unary-postfix","++",["name","i"]]],["num",1]]],["stat",["assign",true,["sub",["dot",["name","_sprite"],"vertices"],["unary-postfix","++",["name","i"]]],["num",0]]],["stat",["assign",true,["sub",["dot",["name","_sprite"],"vertices"],["unary-postfix","++",["name","i"]]],["unary-prefix","-",["num",1]]]],["stat",["assign",true,["sub",["dot",["name","_sprite"],"vertices"],["unary-postfix","++",["name","i"]]],["num",1]]],["stat",["assign",true,["sub",["dot",["name","_sprite"],"vertices"],["unary-postfix","++",["name","i"]]],["num",0]]],["stat",["assign",true,["sub",["dot",["name","_sprite"],"vertices"],["unary-postfix","++",["name","i"]]],["num",0]]],["stat",["assign",true,["name","i"],["num",0]]],["stat",["assign",true,["sub",["dot",["name","_sprite"],"faces"],["unary-postfix","++",["name","i"]]],["num",0]]],["stat",["assign",true,["sub",["dot",["name","_sprite"],"faces"],["unary-postfix","++",["name","i"]]],["num",1]]],["stat",["assign",true,["sub",["dot",["name","_sprite"],"faces"],["unary-postfix","++",["name","i"]]],["num",2]]],["stat",["assign",true,["sub",["dot",["name","_sprite"],"faces"],["unary-postfix","++",["name","i"]]],["num",0]]],["stat",["assign",true,["sub",["dot",["name","_sprite"],"faces"],["unary-postfix","++",["name","i"]]],["num",2]]],["stat",["assign",true,["sub",["dot",["name","_sprite"],"faces"],["unary-postfix","++",["name","i"]]],["num",3]]],["stat",["assign",true,["dot",["name","_sprite"],"vertexBuffer"],["call",["dot",["name","_gl"],"createBuffer"],[]]]],["stat",["assign",true,["dot",["name","_sprite"],"elementBuffer"],["call",["dot",["name","_gl"],"createBuffer"],[]]]],["stat",["call",["dot",["name","_gl"],"bindBuffer"],[["dot",["name","_gl"],"ARRAY_BUFFER"],["dot",["name","_sprite"],"vertexBuffer"]]]],["stat",["call",["dot",["name","_gl"],"bufferData"],[["dot",["name","_gl"],"ARRAY_BUFFER"],["dot",["name","_sprite"],"vertices"],["dot",["name","_gl"],"STATIC_DRAW"]]]],["stat",["call",["dot",["name","_gl"],"bindBuffer"],[["dot",["name","_gl"],"ELEMENT_ARRAY_BUFFER"],["dot",["name","_sprite"],"elementBuffer"]]]],["stat",["call",["dot",["name","_gl"],"bufferData"],[["dot",["name","_gl"],"ELEMENT_ARRAY_BUFFER"],["dot",["name","_sprite"],"faces"],["dot",["name","_gl"],"STATIC_DRAW"]]]],["stat",["assign",true,["dot",["name","_sprite"],"program"],["call",["name","createProgram"],[["sub",["dot",["name","THREE"],"ShaderSprite"],["string","sprite"]]]]]],["stat",["assign",true,["dot",["name","_sprite"],"attributes"],["object",[]]]],["stat",["assign",true,["dot",["name","_sprite"],"uniforms"],["object",[]]]],["stat",["assign",true,["dot",["dot",["name","_sprite"],"attributes"],"position"],["call",["dot",["name","_gl"],"getAttribLocation"],[["dot",["name","_sprite"],"program"],["string","position"]]]]],["stat",["assign",true,["dot",["dot",["name","_sprite"],"attributes"],"uv"],["call",["dot",["name","_gl"],"getAttribLocation"],[["dot",["name","_sprite"],"program"],["string","uv"]]]]],["stat",["assign",true,["dot",["dot",["name","_sprite"],"uniforms"],"uvOffset"],["call",["dot",["name","_gl"],"getUniformLocation"],[["dot",["name","_sprite"],"program"],["string","uvOffset"]]]]],["stat",["assign",true,["dot",["dot",["name","_sprite"],"uniforms"],"uvScale"],["call",["dot",["name","_gl"],"getUniformLocation"],[["dot",["name","_sprite"],"program"],["string","uvScale"]]]]],["stat",["assign",true,["dot",["dot",["name","_sprite"],"uniforms"],"rotation"],["call",["dot",["name","_gl"],"getUniformLocation"],[["dot",["name","_sprite"],"program"],["string","rotation"]]]]],["stat",["assign",true,["dot",["dot",["name","_sprite"],"uniforms"],"scale"],["call",["dot",["name","_gl"],"getUniformLocation"],[["dot",["name","_sprite"],"program"],["string","scale"]]]]],["stat",["assign",true,["dot",["dot",["name","_sprite"],"uniforms"],"alignment"],["call",["dot",["name","_gl"],"getUniformLocation"],[["dot",["name","_sprite"],"program"],["string","alignment"]]]]],["stat",["assign",true,["dot",["dot",["name","_sprite"],"uniforms"],"color"],["call",["dot",["name","_gl"],"getUniformLocation"],[["dot",["name","_sprite"],"program"],["string","color"]]]]],["stat",["assign",true,["dot",["dot",["name","_sprite"],"uniforms"],"map"],["call",["dot",["name","_gl"],"getUniformLocation"],[["dot",["name","_sprite"],"program"],["string","map"]]]]],["stat",["assign",true,["dot",["dot",["name","_sprite"],"uniforms"],"opacity"],["call",["dot",["name","_gl"],"getUniformLocation"],[["dot",["name","_sprite"],"program"],["string","opacity"]]]]],["stat",["assign",true,["dot",["dot",["name","_sprite"],"uniforms"],"useScreenCoordinates"],["call",["dot",["name","_gl"],"getUniformLocation"],[["dot",["name","_sprite"],"program"],["string","useScreenCoordinates"]]]]],["stat",["assign",true,["dot",["dot",["name","_sprite"],"uniforms"],"affectedByDistance"],["call",["dot",["name","_gl"],"getUniformLocation"],[["dot",["name","_sprite"],"program"],["string","affectedByDistance"]]]]],["stat",["assign",true,["dot",["dot",["name","_sprite"],"uniforms"],"screenPosition"],["call",["dot",["name","_gl"],"getUniformLocation"],[["dot",["name","_sprite"],"program"],["string","screenPosition"]]]]],["stat",["assign",true,["dot",["dot",["name","_sprite"],"uniforms"],"modelViewMatrix"],["call",["dot",["name","_gl"],"getUniformLocation"],[["dot",["name","_sprite"],"program"],["string","modelViewMatrix"]]]]],["stat",["assign",true,["dot",["dot",["name","_sprite"],"uniforms"],"projectionMatrix"],["call",["dot",["name","_gl"],"getUniformLocation"],[["dot",["name","_sprite"],"program"],["string","projectionMatrix"]]]]],["stat",["assign",true,["dot",["name","_sprite"],"attributesEnabled"],["name","false"]]]]]]],["stat",["assign",true,["dot",["name","this"],"render"],["function",null,["scene","camera","viewportWidth","viewportHeight"],[["var",[["sprites",["dot",["name","scene"],"__webglSprites"]],["nSprites",["dot",["name","sprites"],"length"]]]],["if",["unary-prefix","!",["name","nSprites"]],["return",null],null],["var",[["attributes",["dot",["name","_sprite"],"attributes"]],["uniforms",["dot",["name","_sprite"],"uniforms"]]]],["var",[["invAspect",["binary","/",["name","viewportHeight"],["name","viewportWidth"]]]]],["var",[["halfViewportWidth",["binary","*",["name","viewportWidth"],["num",0.5]]],["halfViewportHeight",["binary","*",["name","viewportHeight"],["num",0.5]]]]],["var",[["mergeWith3D",["name","true"]]]],["stat",["call",["dot",["name","_gl"],"useProgram"],[["dot",["name","_sprite"],"program"]]]],["if",["unary-prefix","!",["dot",["name","_sprite"],"attributesEnabled"]],["block",[["stat",["call",["dot",["name","_gl"],"enableVertexAttribArray"],[["dot",["name","attributes"],"position"]]]],["stat",["call",["dot",["name","_gl"],"enableVertexAttribArray"],[["dot",["name","attributes"],"uv"]]]],["stat",["assign",true,["dot",["name","_sprite"],"attributesEnabled"],["name","true"]]]]],null],["stat",["call",["dot",["name","_gl"],"disable"],[["dot",["name","_gl"],"CULL_FACE"]]]],["stat",["call",["dot",["name","_gl"],"enable"],[["dot",["name","_gl"],"BLEND"]]]],["stat",["call",["dot",["name","_gl"],"depthMask"],[["name","true"]]]],["stat",["call",["dot",["name","_gl"],"bindBuffer"],[["dot",["name","_gl"],"ARRAY_BUFFER"],["dot",["name","_sprite"],"vertexBuffer"]]]],["stat",["call",["dot",["name","_gl"],"vertexAttribPointer"],[["dot",["name","attributes"],"position"],["num",2],["dot",["name","_gl"],"FLOAT"],["name","false"],["binary","*",["num",2],["num",8]],["num",0]]]],["stat",["call",["dot",["name","_gl"],"vertexAttribPointer"],[["dot",["name","attributes"],"uv"],["num",2],["dot",["name","_gl"],"FLOAT"],["name","false"],["binary","*",["num",2],["num",8]],["num",8]]]],["stat",["call",["dot",["name","_gl"],"bindBuffer"],[["dot",["name","_gl"],"ELEMENT_ARRAY_BUFFER"],["dot",["name","_sprite"],"elementBuffer"]]]],["stat",["call",["dot",["name","_gl"],"uniformMatrix4fv"],[["dot",["name","uniforms"],"projectionMatrix"],["name","false"],["dot",["name","camera"],"_projectionMatrixArray"]]]],["stat",["call",["dot",["name","_gl"],"activeTexture"],[["dot",["name","_gl"],"TEXTURE0"]]]],["stat",["call",["dot",["name","_gl"],"uniform1i"],[["dot",["name","uniforms"],"map"],["num",0]]]],["var",[["i"],["sprite"],["screenPosition"],["size"],["scale",["array",[]]]]],["for",["assign",true,["name","i"],["num",0]],["binary","<",["name","i"],["name","nSprites"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","sprite"],["sub",["name","sprites"],["name","i"]]]],["if",["binary","||",["unary-prefix","!",["dot",["name","sprite"],"visible"]],["binary","===",["dot",["name","sprite"],"opacity"],["num",0]]],["continue",null],null],["if",["unary-prefix","!",["dot",["name","sprite"],"useScreenCoordinates"]],["block",[["stat",["call",["dot",["dot",["name","sprite"],"_modelViewMatrix"],"multiply"],[["dot",["name","camera"],"matrixWorldInverse"],["dot",["name","sprite"],"matrixWorld"]]]],["stat",["assign",true,["dot",["name","sprite"],"z"],["unary-prefix","-",["sub",["dot",["dot",["name","sprite"],"_modelViewMatrix"],"elements"],["num",14]]]]]]],["block",[["stat",["assign",true,["dot",["name","sprite"],"z"],["unary-prefix","-",["dot",["dot",["name","sprite"],"position"],"z"]]]]]]]]]],["stat",["call",["dot",["name","sprites"],"sort"],[["name","painterSort"]]]],["for",["assign",true,["name","i"],["num",0]],["binary","<",["name","i"],["name","nSprites"]],["unary-postfix","++",["name","i"]],["block",[["stat",["assign",true,["name","sprite"],["sub",["name","sprites"],["name","i"]]]],["if",["binary","||",["unary-prefix","!",["dot",["name","sprite"],"visible"]],["binary","===",["dot",["name","sprite"],"opacity"],["num",0]]],["continue",null],null],["if",["binary","&&",["binary","&&",["dot",["name","sprite"],"map"],["dot",["dot",["name","sprite"],"map"],"image"]],["dot",["dot",["dot",["name","sprite"],"map"],"image"],"width"]],["block",[["if",["dot",["name","sprite"],"useScreenCoordinates"],["block",[["stat",["call",["dot",["name","_gl"],"uniform1i"],[["dot",["name","uniforms"],"useScreenCoordinates"],["num",1]]]],["stat",["call",["dot",["name","_gl"],"uniform3f"],[["dot",["name","uniforms"],"screenPosition"],["binary","/",["binary","-",["dot",["dot",["name","sprite"],"position"],"x"],["name","halfViewportWidth"]],["name","halfViewportWidth"]],["binary","/",["binary","-",["name","halfViewportHeight"],["dot",["dot",["name","sprite"],"position"],"y"]],["name","halfViewportHeight"]],["call",["dot",["name","Math"],"max"],[["num",0],["call",["dot",["name","Math"],"min"],[["num",1],["dot",["dot",["name","sprite"],"position"],"z"]]]]]]]]]],["block",[["stat",["call",["dot",["name","_gl"],"uniform1i"],[["dot",["name","uniforms"],"useScreenCoordinates"],["num",0]]]],["stat",["call",["dot",["name","_gl"],"uniform1i"],[["dot",["name","uniforms"],"affectedByDistance"],["conditional",["dot",["name","sprite"],"affectedByDistance"],["num",1],["num",0]]]]],["stat",["call",["dot",["name","_gl"],"uniformMatrix4fv"],[["dot",["name","uniforms"],"modelViewMatrix"],["name","false"],["dot",["dot",["name","sprite"],"_modelViewMatrix"],"elements"]]]]]]],["stat",["assign",true,["name","size"],["binary","/",["dot",["dot",["dot",["name","sprite"],"map"],"image"],"width"],["conditional",["dot",["name","sprite"],"scaleByViewport"],["name","viewportHeight"],["num",1]]]]],["stat",["assign",true,["sub",["name","scale"],["num",0]],["binary","*",["binary","*",["name","size"],["name","invAspect"]],["dot",["dot",["name","sprite"],"scale"],"x"]]]],["stat",["assign",true,["sub",["name","scale"],["num",1]],["binary","*",["name","size"],["dot",["dot",["name","sprite"],"scale"],"y"]]]],["stat",["call",["dot",["name","_gl"],"uniform2f"],[["dot",["name","uniforms"],"uvScale"],["dot",["dot",["name","sprite"],"uvScale"],"x"],["dot",["dot",["name","sprite"],"uvScale"],"y"]]]],["stat",["call",["dot",["name","_gl"],"uniform2f"],[["dot",["name","uniforms"],"uvOffset"],["dot",["dot",["name","sprite"],"uvOffset"],"x"],["dot",["dot",["name","sprite"],"uvOffset"],"y"]]]],["stat",["call",["dot",["name","_gl"],"uniform2f"],[["dot",["name","uniforms"],"alignment"],["dot",["dot",["name","sprite"],"alignment"],"x"],["dot",["dot",["name","sprite"],"alignment"],"y"]]]],["stat",["call",["dot",["name","_gl"],"uniform1f"],[["dot",["name","uniforms"],"opacity"],["dot",["name","sprite"],"opacity"]]]],["stat",["call",["dot",["name","_gl"],"uniform3f"],[["dot",["name","uniforms"],"color"],["dot",["dot",["name","sprite"],"color"],"r"],["dot",["dot",["name","sprite"],"color"],"g"],["dot",["dot",["name","sprite"],"color"],"b"]]]],["stat",["call",["dot",["name","_gl"],"uniform1f"],[["dot",["name","uniforms"],"rotation"],["dot",["name","sprite"],"rotation"]]]],["stat",["call",["dot",["name","_gl"],"uniform2fv"],[["dot",["name","uniforms"],"scale"],["name","scale"]]]],["if",["binary","&&",["dot",["name","sprite"],"mergeWith3D"],["unary-prefix","!",["name","mergeWith3D"]]],["block",[["stat",["call",["dot",["name","_gl"],"enable"],[["dot",["name","_gl"],"DEPTH_TEST"]]]],["stat",["assign",true,["name","mergeWith3D"],["name","true"]]]]],["if",["binary","&&",["unary-prefix","!",["dot",["name","sprite"],"mergeWith3D"]],["name","mergeWith3D"]],["block",[["stat",["call",["dot",["name","_gl"],"disable"],[["dot",["name","_gl"],"DEPTH_TEST"]]]],["stat",["assign",true,["name","mergeWith3D"],["name","false"]]]]],null]],["stat",["call",["dot",["name","_renderer"],"setBlending"],[["dot",["name","sprite"],"blending"],["dot",["name","sprite"],"blendEquation"],["dot",["name","sprite"],"blendSrc"],["dot",["name","sprite"],"blendDst"]]]],["stat",["call",["dot",["name","_renderer"],"setTexture"],[["dot",["name","sprite"],"map"],["num",0]]]],["stat",["call",["dot",["name","_gl"],"drawElements"],[["dot",["name","_gl"],"TRIANGLES"],["num",6],["dot",["name","_gl"],"UNSIGNED_SHORT"],["num",0]]]]]],null]]]],["stat",["call",["dot",["name","_gl"],"enable"],[["dot",["name","_gl"],"CULL_FACE"]]]],["stat",["call",["dot",["name","_gl"],"enable"],[["dot",["name","_gl"],"DEPTH_TEST"]]]],["stat",["call",["dot",["name","_gl"],"depthMask"],[["name","true"]]]]]]]],["defun","createProgram",["shader"],[["var",[["program",["call",["dot",["name","_gl"],"createProgram"],[]]]]],["var",[["fragmentShader",["call",["dot",["name","_gl"],"createShader"],[["dot",["name","_gl"],"FRAGMENT_SHADER"]]]]]],["var",[["vertexShader",["call",["dot",["name","_gl"],"createShader"],[["dot",["name","_gl"],"VERTEX_SHADER"]]]]]],["stat",["call",["dot",["name","_gl"],"shaderSource"],[["name","fragmentShader"],["dot",["name","shader"],"fragmentShader"]]]],["stat",["call",["dot",["name","_gl"],"shaderSource"],[["name","vertexShader"],["dot",["name","shader"],"vertexShader"]]]],["stat",["call",["dot",["name","_gl"],"compileShader"],[["name","fragmentShader"]]]],["stat",["call",["dot",["name","_gl"],"compileShader"],[["name","vertexShader"]]]],["stat",["call",["dot",["name","_gl"],"attachShader"],[["name","program"],["name","fragmentShader"]]]],["stat",["call",["dot",["name","_gl"],"attachShader"],[["name","program"],["name","vertexShader"]]]],["stat",["call",["dot",["name","_gl"],"linkProgram"],[["name","program"]]]],["return",["name","program"]]]],["block"],["defun","painterSort",["a","b"],[["return",["binary","-",["dot",["name","b"],"z"],["dot",["name","a"],"z"]]]]],["block"]]]]],["stat",["assign",true,["dot",["name","THREE"],"DepthPassPlugin"],["function",null,[],[["stat",["assign",true,["dot",["name","this"],"enabled"],["name","false"]]],["stat",["assign",true,["dot",["name","this"],"renderTarget"],["name","null"]]],["var",[["_gl"],["_renderer"],["_depthMaterial"],["_depthMaterialMorph"],["_frustum",["new",["dot",["name","THREE"],"Frustum"],[]]],["_projScreenMatrix",["new",["dot",["name","THREE"],"Matrix4"],[]]]]],["stat",["assign",true,["dot",["name","this"],"init"],["function",null,["renderer"],[["stat",["assign",true,["name","_gl"],["dot",["name","renderer"],"context"]]],["stat",["assign",true,["name","_renderer"],["name","renderer"]]],["var",[["depthShader",["sub",["dot",["name","THREE"],"ShaderLib"],["string","depthRGBA"]]]]],["var",[["depthUniforms",["call",["dot",["dot",["name","THREE"],"UniformsUtils"],"clone"],[["dot",["name","depthShader"],"uniforms"]]]]]],["stat",["assign",true,["name","_depthMaterial"],["new",["dot",["name","THREE"],"ShaderMaterial"],[["object",[["fragmentShader",["dot",["name","depthShader"],"fragmentShader"]],["vertexShader",["dot",["name","depthShader"],"vertexShader"]],["uniforms",["name","depthUniforms"]]]]]]]],["stat",["assign",true,["name","_depthMaterialMorph"],["new",["dot",["name","THREE"],"ShaderMaterial"],[["object",[["fragmentShader",["dot",["name","depthShader"],"fragmentShader"]],["vertexShader",["dot",["name","depthShader"],"vertexShader"]],["uniforms",["name","depthUniforms"]],["morphTargets",["name","true"]]]]]]]],["stat",["assign",true,["dot",["name","_depthMaterial"],"_shadowPass"],["name","true"]]],["stat",["assign",true,["dot",["name","_depthMaterialMorph"],"_shadowPass"],["name","true"]]]]]]],["stat",["assign",true,["dot",["name","this"],"render"],["function",null,["scene","camera"],[["if",["unary-prefix","!",["dot",["name","this"],"enabled"]],["return",null],null],["stat",["call",["dot",["name","this"],"update"],[["name","scene"],["name","camera"]]]]]]]],["stat",["assign",true,["dot",["name","this"],"update"],["function",null,["scene","camera"],[["var",[["i"],["il"],["j"],["jl"],["n"],["program"],["buffer"],["material"],["webglObject"],["object"],["light"],["renderList"],["fog",["name","null"]]]],["stat",["call",["dot",["name","_gl"],"clearColor"],[["num",1],["num",1],["num",1],["num",1]]]],["stat",["call",["dot",["name","_gl"],"disable"],[["dot",["name","_gl"],"BLEND"]]]],["stat",["call",["dot",["name","_renderer"],"setDepthTest"],[["name","true"]]]],["if",["dot",["name","_renderer"],"autoUpdateScene"],["stat",["call",["dot",["name","scene"],"updateMatrixWorld"],[]]],null],["if",["unary-prefix","!",["dot",["name","camera"],"_viewMatrixArray"]],["stat",["assign",true,["dot",["name","camera"],"_viewMatrixArray"],["new",["name","Float32Array"],[["num",16]]]]],null],["if",["unary-prefix","!",["dot",["name","camera"],"_projectionMatrixArray"]],["stat",["assign",true,["dot",["name","camera"],"_projectionMatrixArray"],["new",["name","Float32Array"],[["num",16]]]]],null],["stat",["call",["dot",["dot",["name","camera"],"matrixWorldInverse"],"getInverse"],[["dot",["name","camera"],"matrixWorld"]]]],["stat",["call",["dot",["dot",["name","camera"],"matrixWorldInverse"],"flattenToArray"],[["dot",["name","camera"],"_viewMatrixArray"]]]],["stat",["call",["dot",["dot",["name","camera"],"projectionMatrix"],"flattenToArray"],[["dot",["name","camera"],"_projectionMatrixArray"]]]],["stat",["call",["dot",["name","_projScreenMatrix"],"multiply"],[["dot",["name","camera"],"projectionMatrix"],["dot",["name","camera"],"matrixWorldInverse"]]]],["stat",["call",["dot",["name","_frustum"],"setFromMatrix"],[["name","_projScreenMatrix"]]]],["stat",["call",["dot",["name","_renderer"],"setRenderTarget"],[["dot",["name","this"],"renderTarget"]]]],["stat",["call",["dot",["name","_renderer"],"clear"],[]]],["stat",["assign",true,["name","renderList"],["dot",["name","scene"],"__webglObjects"]]],["for",["seq",["assign",true,["name","j"],["num",0]],["assign",true,["name","jl"],["dot",["name","renderList"],"length"]]],["binary","<",["name","j"],["name","jl"]],["unary-postfix","++",["name","j"]],["block",[["stat",["assign",true,["name","webglObject"],["sub",["name","renderList"],["name","j"]]]],["stat",["assign",true,["name","object"],["dot",["name","webglObject"],"object"]]],["stat",["assign",true,["dot",["name","webglObject"],"render"],["name","false"]]],["if",["dot",["name","object"],"visible"],["block",[["if",["binary","||",["binary","||",["unary-prefix","!",["binary","instanceof",["name","object"],["dot",["name","THREE"],"Mesh"]]],["unary-prefix","!",["dot",["name","object"],"frustumCulled"]]],["call",["dot",["name","_frustum"],"contains"],[["name","object"]]]],["block",[["stat",["call",["dot",["dot",["name","object"],"_modelViewMatrix"],"multiply"],[["dot",["name","camera"],"matrixWorldInverse"],["dot",["name","object"],"matrixWorld"]]]],["stat",["assign",true,["dot",["name","webglObject"],"render"],["name","true"]]]]],null]]],null]]]],["for",["seq",["assign",true,["name","j"],["num",0]],["assign",true,["name","jl"],["dot",["name","renderList"],"length"]]],["binary","<",["name","j"],["name","jl"]],["unary-postfix","++",["name","j"]],["block",[["stat",["assign",true,["name","webglObject"],["sub",["name","renderList"],["name","j"]]]],["if",["dot",["name","webglObject"],"render"],["block",[["stat",["assign",true,["name","object"],["dot",["name","webglObject"],"object"]]],["stat",["assign",true,["name","buffer"],["dot",["name","webglObject"],"buffer"]]],["stat",["call",["dot",["name","_renderer"],"setObjectFaces"],[["name","object"]]]],["if",["dot",["name","object"],"customDepthMaterial"],["block",[["stat",["assign",true,["name","material"],["dot",["name","object"],"customDepthMaterial"]]]]],["if",["dot",["dot",["dot",["name","object"],"geometry"],"morphTargets"],"length"],["block",[["stat",["assign",true,["name","material"],["name","_depthMaterialMorph"]]]]],["block",[["stat",["assign",true,["name","material"],["name","_depthMaterial"]]]]]]],["if",["binary","instanceof",["name","buffer"],["dot",["name","THREE"],"BufferGeometry"]],["block",[["stat",["call",["dot",["name","_renderer"],"renderBufferDirect"],[["name","camera"],["dot",["name","scene"],"__lights"],["name","fog"],["name","material"],["name","buffer"],["name","object"]]]]]],["block",[["stat",["call",["dot",["name","_renderer"],"renderBuffer"],[["name","camera"],["dot",["name","scene"],"__lights"],["name","fog"],["name","material"],["name","buffer"],["name","object"]]]]]]]]],null]]]],["stat",["assign",true,["name","renderList"],["dot",["name","scene"],"__webglObjectsImmediate"]]],["for",["seq",["assign",true,["name","j"],["num",0]],["assign",true,["name","jl"],["dot",["name","renderList"],"length"]]],["binary","<",["name","j"],["name","jl"]],["unary-postfix","++",["name","j"]],["block",[["stat",["assign",true,["name","webglObject"],["sub",["name","renderList"],["name","j"]]]],["stat",["assign",true,["name","object"],["dot",["name","webglObject"],"object"]]],["if",["binary","&&",["dot",["name","object"],"visible"],["dot",["name","object"],"castShadow"]],["block",[["stat",["call",["dot",["dot",["name","object"],"_modelViewMatrix"],"multiply"],[["dot",["name","camera"],"matrixWorldInverse"],["dot",["name","object"],"matrixWorld"]]]],["stat",["call",["dot",["name","_renderer"],"renderImmediateObject"],[["name","camera"],["dot",["name","scene"],"__lights"],["name","fog"],["name","_depthMaterial"],["name","object"]]]]]],null]]]],["var",[["clearColor",["call",["dot",["name","_renderer"],"getClearColor"],[]]],["clearAlpha",["call",["dot",["name","_renderer"],"getClearAlpha"],[]]]]],["stat",["call",["dot",["name","_gl"],"clearColor"],[["dot",["name","clearColor"],"r"],["dot",["name","clearColor"],"g"],["dot",["name","clearColor"],"b"],["name","clearAlpha"]]]],["stat",["call",["dot",["name","_gl"],"enable"],[["dot",["name","_gl"],"BLEND"]]]]]]]]]]]],["stat",["assign",true,["dot",["name","THREE"],"ShaderFlares"],["object",[["lensFlareVertexTexture",["object",[["vertexShader",["call",["dot",["array",[["string","uniform vec3 screenPosition;"],["string","uniform vec2 scale;"],["string","uniform float rotation;"],["string","uniform int renderType;"],["string","uniform sampler2D occlusionMap;"],["string","attribute vec2 position;"],["string","attribute vec2 uv;"],["string","varying vec2 vUV;"],["string","varying float vVisibility;"],["string","void main() {"],["string","vUV = uv;"],["string","vec2 pos = position;"],["string","if( renderType == 2 ) {"],["string","vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) ) +"],["string","texture2D( occlusionMap, vec2( 0.5, 0.1 ) ) +"],["string","texture2D( occlusionMap, vec2( 0.9, 0.1 ) ) +"],["string","texture2D( occlusionMap, vec2( 0.9, 0.5 ) ) +"],["string","texture2D( occlusionMap, vec2( 0.9, 0.9 ) ) +"],["string","texture2D( occlusionMap, vec2( 0.5, 0.9 ) ) +"],["string","texture2D( occlusionMap, vec2( 0.1, 0.9 ) ) +"],["string","texture2D( occlusionMap, vec2( 0.1, 0.5 ) ) +"],["string","texture2D( occlusionMap, vec2( 0.5, 0.5 ) );"],["string","vVisibility = (       visibility.r / 9.0 ) *"],["string","( 1.0 - visibility.g / 9.0 ) *"],["string","(       visibility.b / 9.0 ) *"],["string","( 1.0 - visibility.a / 9.0 );"],["string","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;"],["string","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;"],["string","}"],["string","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );"],["string","}"]]],"join"],[["string","\n"]]]],["fragmentShader",["call",["dot",["array",[["string","precision mediump float;"],["string","uniform sampler2D map;"],["string","uniform float opacity;"],["string","uniform int renderType;"],["string","uniform vec3 color;"],["string","varying vec2 vUV;"],["string","varying float vVisibility;"],["string","void main() {"],["string","if( renderType == 0 ) {"],["string","gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );"],["string","} else if( renderType == 1 ) {"],["string","gl_FragColor = texture2D( map, vUV );"],["string","} else {"],["string","vec4 texture = texture2D( map, vUV );"],["string","texture.a *= opacity * vVisibility;"],["string","gl_FragColor = texture;"],["string","gl_FragColor.rgb *= color;"],["string","}"],["string","}"]]],"join"],[["string","\n"]]]]]]],["lensFlare",["object",[["vertexShader",["call",["dot",["array",[["string","uniform vec3 screenPosition;"],["string","uniform vec2 scale;"],["string","uniform float rotation;"],["string","uniform int renderType;"],["string","attribute vec2 position;"],["string","attribute vec2 uv;"],["string","varying vec2 vUV;"],["string","void main() {"],["string","vUV = uv;"],["string","vec2 pos = position;"],["string","if( renderType == 2 ) {"],["string","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;"],["string","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;"],["string","}"],["string","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );"],["string","}"]]],"join"],[["string","\n"]]]],["fragmentShader",["call",["dot",["array",[["string","precision mediump float;"],["string","uniform sampler2D map;"],["string","uniform sampler2D occlusionMap;"],["string","uniform float opacity;"],["string","uniform int renderType;"],["string","uniform vec3 color;"],["string","varying vec2 vUV;"],["string","void main() {"],["string","if( renderType == 0 ) {"],["string","gl_FragColor = vec4( texture2D( map, vUV ).rgb, 0.0 );"],["string","} else if( renderType == 1 ) {"],["string","gl_FragColor = texture2D( map, vUV );"],["string","} else {"],["string","float visibility = texture2D( occlusionMap, vec2( 0.5, 0.1 ) ).a +"],["string","texture2D( occlusionMap, vec2( 0.9, 0.5 ) ).a +"],["string","texture2D( occlusionMap, vec2( 0.5, 0.9 ) ).a +"],["string","texture2D( occlusionMap, vec2( 0.1, 0.5 ) ).a;"],["string","visibility = ( 1.0 - visibility / 4.0 );"],["string","vec4 texture = texture2D( map, vUV );"],["string","texture.a *= opacity * visibility;"],["string","gl_FragColor = texture;"],["string","gl_FragColor.rgb *= color;"],["string","}"],["string","}"]]],"join"],[["string","\n"]]]]]]]]]]],["stat",["assign",true,["dot",["name","THREE"],"ShaderSprite"],["object",[["sprite",["object",[["vertexShader",["call",["dot",["array",[["string","uniform int useScreenCoordinates;"],["string","uniform int affectedByDistance;"],["string","uniform vec3 screenPosition;"],["string","uniform mat4 modelViewMatrix;"],["string","uniform mat4 projectionMatrix;"],["string","uniform float rotation;"],["string","uniform vec2 scale;"],["string","uniform vec2 alignment;"],["string","uniform vec2 uvOffset;"],["string","uniform vec2 uvScale;"],["string","attribute vec2 position;"],["string","attribute vec2 uv;"],["string","varying vec2 vUV;"],["string","void main() {"],["string","vUV = uvOffset + uv * uvScale;"],["string","vec2 alignedPosition = position + alignment;"],["string","vec2 rotatedPosition;"],["string","rotatedPosition.x = ( cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y ) * scale.x;"],["string","rotatedPosition.y = ( sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y ) * scale.y;"],["string","vec4 finalPosition;"],["string","if( useScreenCoordinates != 0 ) {"],["string","finalPosition = vec4( screenPosition.xy + rotatedPosition, screenPosition.z, 1.0 );"],["string","} else {"],["string","finalPosition = projectionMatrix * modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );"],["string","finalPosition.xy += rotatedPosition * ( affectedByDistance == 1 ? 1.0 : finalPosition.z );"],["string","}"],["string","gl_Position = finalPosition;"],["string","}"]]],"join"],[["string","\n"]]]],["fragmentShader",["call",["dot",["array",[["string","precision mediump float;"],["string","uniform vec3 color;"],["string","uniform sampler2D map;"],["string","uniform float opacity;"],["string","varying vec2 vUV;"],["string","void main() {"],["string","vec4 texture = texture2D( map, vUV );"],["string","gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );"],["string","}"]]],"join"],[["string","\n"]]]]]]]]]]]]]